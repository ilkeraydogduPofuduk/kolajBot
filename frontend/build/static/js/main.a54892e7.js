/*! For license information please see main.a54892e7.js.LICENSE.txt */
(()=>{var e={43:(e,t,r)=>{"use strict";e.exports=r(202)},153:(e,t,r)=>{"use strict";var n=r(43),s=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,a={},c=null,d=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,n)&&!o.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===a[n]&&(a[n]=t[n]);return{$$typeof:s,type:e,key:c,ref:d,props:a,_owner:l.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,f={};function x(e,t,r){this.props=e,this.context=t,this.refs=f,this.updater=r||p}function y(){}function b(e,t,r){this.props=e,this.context=t,this.refs=f,this.updater=r||p}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=x.prototype;var v=b.prototype=new y;v.constructor=b,g(v,x.prototype),v.isPureReactComponent=!0;var j=Array.isArray,w=Object.prototype.hasOwnProperty,_={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var s,a={},i=null,l=null;if(null!=t)for(s in void 0!==t.ref&&(l=t.ref),void 0!==t.key&&(i=""+t.key),t)w.call(t,s)&&!k.hasOwnProperty(s)&&(a[s]=t[s]);var o=arguments.length-2;if(1===o)a.children=n;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(s in o=e.defaultProps)void 0===a[s]&&(a[s]=o[s]);return{$$typeof:r,type:e,key:i,ref:l,props:a,_owner:_.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var C=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function E(e,t,s,a,i){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var o=!1;if(null===e)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case r:case n:o=!0}}if(o)return i=i(o=e),e=""===a?"."+T(o,0):a,j(i)?(s="",null!=e&&(s=e.replace(C,"$&/")+"/"),E(i,t,s,"",function(e){return e})):null!=i&&(N(i)&&(i=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,s+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(C,"$&/")+"/")+e)),t.push(i)),1;if(o=0,a=""===a?".":a+":",j(e))for(var c=0;c<e.length;c++){var d=a+T(l=e[c],c);o+=E(l,t,s,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(l=e.next()).done;)o+=E(l=l.value,t,s,d=a+T(l,c++),i);else if("object"===l)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function O(e,t,r){if(null==e)return e;var n=[],s=0;return E(e,n,"","",function(e){return t.call(r,e,s++)}),n}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},A={transition:null},M={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:A,ReactCurrentOwner:_};function R(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:O,forEach:function(e,t,r){O(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return O(e,function(){t++}),t},toArray:function(e){return O(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=x,t.Fragment=s,t.Profiler=i,t.PureComponent=b,t.StrictMode=a,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.act=R,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=g({},e.props),a=e.key,i=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,l=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)w.call(t,c)&&!k.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==o?o[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=n;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];s.children=o}return{$$typeof:r,type:e.type,key:a,ref:i,props:s,_owner:l}},t.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=A.transition;A.transition={};try{e()}finally{A.transition=t}},t.unstable_act=R,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,r){return D.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,r){return D.current.useReducer(e,t,r)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return D.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,s=e[n];if(!(0<a(s,t)))break e;e[n]=t,e[r]=s,r=n}}function n(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,s=e.length,i=s>>>1;n<i;){var l=2*(n+1)-1,o=e[l],c=l+1,d=e[c];if(0>a(o,r))c<s&&0>a(d,o)?(e[n]=d,e[c]=r,n=c):(e[n]=o,e[l]=r,n=l);else{if(!(c<s&&0>a(d,r)))break e;e[n]=d,e[c]=r,n=c}}}return t}function a(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,h=null,m=3,p=!1,g=!1,f=!1,x="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function v(e){for(var t=n(d);null!==t;){if(null===t.callback)s(d);else{if(!(t.startTime<=e))break;s(d),t.sortIndex=t.expirationTime,r(c,t)}t=n(d)}}function j(e){if(f=!1,v(e),!g)if(null!==n(c))g=!0,A(w);else{var t=n(d);null!==t&&M(j,t.startTime-e)}}function w(e,r){g=!1,f&&(f=!1,y(N),N=-1),p=!0;var a=m;try{for(v(r),h=n(c);null!==h&&(!(h.expirationTime>r)||e&&!E());){var i=h.callback;if("function"===typeof i){h.callback=null,m=h.priorityLevel;var l=i(h.expirationTime<=r);r=t.unstable_now(),"function"===typeof l?h.callback=l:h===n(c)&&s(c),v(r)}else s(c);h=n(c)}if(null!==h)var o=!0;else{var u=n(d);null!==u&&M(j,u.startTime-r),o=!1}return o}finally{h=null,m=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,k=!1,S=null,N=-1,C=5,T=-1;function E(){return!(t.unstable_now()-T<C)}function O(){if(null!==S){var e=t.unstable_now();T=e;var r=!0;try{r=S(!0,e)}finally{r?_():(k=!1,S=null)}}else k=!1}if("function"===typeof b)_=function(){b(O)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,D=P.port2;P.port1.onmessage=O,_=function(){D.postMessage(null)}}else _=function(){x(O,0)};function A(e){S=e,k||(k=!0,_())}function M(e,r){N=x(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,A(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var r=m;m=t;try{return e()}finally{m=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=m;m=e;try{return t()}finally{m=r}},t.unstable_scheduleCallback=function(e,s,a){var i=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?i+a:i:a=i,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:u++,callback:s,priorityLevel:e,startTime:a,expirationTime:l=a+l,sortIndex:-1},a>i?(e.sortIndex=a,r(d,e),null===n(c)&&e===n(d)&&(f?(y(N),N=-1):f=!0,M(j,a-i))):(e.sortIndex=l,r(c,e),g||p||(g=!0,A(w))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=m;return function(){var r=m;m=t;try{return e.apply(this,arguments)}finally{m=r}}}},324:e=>{e.exports=function(e,t,r,n){var s=r?r.call(n,e,t):void 0;if(void 0!==s)return!!s;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var a=Object.keys(e),i=Object.keys(t);if(a.length!==i.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(t),o=0;o<a.length;o++){var c=a[o];if(!l(c))return!1;var d=e[c],u=t[c];if(!1===(s=r?r.call(n,d,u,c):void 0)||void 0===s&&d!==u)return!1}return!0}},366:e=>{var t="undefined"!==typeof Element,r="function"===typeof Map,n="function"===typeof Set,s="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function a(e,i){if(e===i)return!0;if(e&&i&&"object"==typeof e&&"object"==typeof i){if(e.constructor!==i.constructor)return!1;var l,o,c,d;if(Array.isArray(e)){if((l=e.length)!=i.length)return!1;for(o=l;0!==o--;)if(!a(e[o],i[o]))return!1;return!0}if(r&&e instanceof Map&&i instanceof Map){if(e.size!==i.size)return!1;for(d=e.entries();!(o=d.next()).done;)if(!i.has(o.value[0]))return!1;for(d=e.entries();!(o=d.next()).done;)if(!a(o.value[1],i.get(o.value[0])))return!1;return!0}if(n&&e instanceof Set&&i instanceof Set){if(e.size!==i.size)return!1;for(d=e.entries();!(o=d.next()).done;)if(!i.has(o.value[0]))return!1;return!0}if(s&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(i)){if((l=e.length)!=i.length)return!1;for(o=l;0!==o--;)if(e[o]!==i[o])return!1;return!0}if(e.constructor===RegExp)return e.source===i.source&&e.flags===i.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"===typeof e.valueOf&&"function"===typeof i.valueOf)return e.valueOf()===i.valueOf();if(e.toString!==Object.prototype.toString&&"function"===typeof e.toString&&"function"===typeof i.toString)return e.toString()===i.toString();if((l=(c=Object.keys(e)).length)!==Object.keys(i).length)return!1;for(o=l;0!==o--;)if(!Object.prototype.hasOwnProperty.call(i,c[o]))return!1;if(t&&e instanceof Element)return!1;for(o=l;0!==o--;)if(("_owner"!==c[o]&&"__v"!==c[o]&&"__o"!==c[o]||!e.$$typeof)&&!a(e[c[o]],i[c[o]]))return!1;return!0}return e!==e&&i!==i}e.exports=function(e,t){try{return a(e,t)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}}},391:(e,t,r)=>{"use strict";var n=r(950);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},579:(e,t,r)=>{"use strict";e.exports=r(153)},730:(e,t,r)=>{"use strict";var n=r(43),s=r(853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function o(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(l[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},p={};function g(e,t,r,n,s,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var f={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){f[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];f[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){f[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){f[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){f[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){f[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){f[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){f[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){f[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,r,n){var s=f.hasOwnProperty(t)?f[t]:null;(null!==s?0!==s.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,s,n)&&(r=null),n||null===s?function(e){return!!u.call(p,e)||!u.call(m,e)&&(h.test(e)?p[e]=!0:(m[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=null===r?3!==s.type&&"":r:(t=s.attributeName,n=s.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(s=s.type)||4===s&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(x,y);f[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(x,y);f[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(x,y);f[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){f[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),f.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){f[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var v=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),w=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),C=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var A=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var z,F=Object.assign;function L(e){if(void 0===z)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);z=t&&t[1]||""}return"\n"+z+e}var I=!1;function B(e,t){if(!e||I)return"";I=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),a=n.stack.split("\n"),i=s.length-1,l=a.length-1;1<=i&&0<=l&&s[i]!==a[l];)l--;for(;1<=i&&0<=l;i--,l--)if(s[i]!==a[l]){if(1!==i||1!==l)do{if(i--,0>--l||s[i]!==a[l]){var o="\n"+s[i].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}}while(1<=i&&0<=l);break}}}finally{I=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?L(e):""}function H(e){switch(e.tag){case 5:return L(e.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case w:return"Portal";case S:return"Profiler";case k:return"StrictMode";case E:return"Suspense";case O:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return U(e(t))}catch(r){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var s=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){n=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=V(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var r=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function $(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=K(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Q(e,t){J(e,t);var r=K(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&q(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+K(r),t=null,s=0;s<e.length;s++){if(e[s].value===r)return e[s].selected=!0,void(n&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(a(92));if(te(r)){if(1<r.length)throw Error(a(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:K(r)}}function ae(e,t){var r=K(t.value),n=K(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function fe(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),s=ge(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}Object.keys(me).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]})});var xe=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=null;function je(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,_e=null,ke=null;function Se(e){if(e=bs(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=js(t),we(e.stateNode,e.type,t))}}function Ne(e){_e?ke?ke.push(e):ke=[e]:_e=e}function Ce(){if(_e){var e=_e,t=ke;if(ke=_e=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Te(e,t){return e(t)}function Ee(){}var Oe=!1;function Pe(e,t,r){if(Oe)return e(t,r);Oe=!0;try{return Te(e,t,r)}finally{Oe=!1,(null!==_e||null!==ke)&&(Ee(),Ce())}}function De(e,t){var r=e.stateNode;if(null===r)return null;var n=js(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(a(231,t,typeof r));return r}var Ae=!1;if(d)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Ae=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(de){Ae=!1}function Re(e,t,r,n,s,a,i,l,o){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(d){this.onError(d)}}var ze=!1,Fe=null,Le=!1,Ie=null,Be={onError:function(e){ze=!0,Fe=e}};function He(e,t,r,n,s,a,i,l,o){ze=!1,Fe=null,Re.apply(Be,arguments)}function Ue(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Ue(e)!==e)throw Error(a(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(a(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(null===s)break;var i=s.alternate;if(null===i){if(null!==(n=s.return)){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Ke(s),e;if(i===n)return Ke(s),t;i=i.sibling}throw Error(a(188))}if(r.return!==n.return)r=s,n=i;else{for(var l=!1,o=s.child;o;){if(o===r){l=!0,r=s,n=i;break}if(o===n){l=!0,n=s,r=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===r){l=!0,r=i,n=s;break}if(o===n){l=!0,n=i,r=s;break}o=o.sibling}if(!l)throw Error(a(189))}}if(r.alternate!==n)throw Error(a(190))}if(3!==r.tag)throw Error(a(188));return r.stateNode.current===r?e:t}(e))?Ye(e):null}function Ye(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ye(e);if(null!==t)return t;e=e.sibling}return null}var Ge=s.unstable_scheduleCallback,qe=s.unstable_cancelCallback,Xe=s.unstable_shouldYield,$e=s.unstable_requestPaint,Je=s.unstable_now,Qe=s.unstable_getCurrentPriorityLevel,Ze=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,rt=s.unstable_LowPriority,nt=s.unstable_IdlePriority,st=null,at=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(lt(e)/ot|0)|0},lt=Math.log,ot=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,s=e.suspendedLanes,a=e.pingedLanes,i=268435455&r;if(0!==i){var l=i&~s;0!==l?n=ut(l):0!==(a&=i)&&(n=ut(a))}else 0!==(i=r&~s)?n=ut(i):0!==a&&(n=ut(a));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&s)&&((s=n&-n)>=(a=t&-t)||16===s&&0!==(4194240&a)))return t;if(0!==(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)s=1<<(r=31-it(t)),n|=e[r],t&=~s;return n}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function ft(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function xt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=r}function yt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-it(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var bt=0;function vt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var jt,wt,_t,kt,St,Nt=!1,Ct=[],Tt=null,Et=null,Ot=null,Pt=new Map,Dt=new Map,At=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function zt(e,t,r,n,s,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},null!==t&&(null!==(t=bs(t))&&wt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Ft(e){var t=ys(e.target);if(null!==t){var r=Ue(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=We(r)))return e.blockedOn=t,void St(e.priority,function(){_t(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Lt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=bs(r))&&wt(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);ve=n,r.target.dispatchEvent(n),ve=null,t.shift()}return!0}function It(e,t,r){Lt(e)&&r.delete(t)}function Bt(){Nt=!1,null!==Tt&&Lt(Tt)&&(Tt=null),null!==Et&&Lt(Et)&&(Et=null),null!==Ot&&Lt(Ot)&&(Ot=null),Pt.forEach(It),Dt.forEach(It)}function Ht(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Bt)))}function Ut(e){function t(t){return Ht(t,e)}if(0<Ct.length){Ht(Ct[0],e);for(var r=1;r<Ct.length;r++){var n=Ct[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Tt&&Ht(Tt,e),null!==Et&&Ht(Et,e),null!==Ot&&Ht(Ot,e),Pt.forEach(t),Dt.forEach(t),r=0;r<At.length;r++)(n=At[r]).blockedOn===e&&(n.blockedOn=null);for(;0<At.length&&null===(r=At[0]).blockedOn;)Ft(r),null===r.blockedOn&&At.shift()}var Wt=v.ReactCurrentBatchConfig,Kt=!0;function Vt(e,t,r,n){var s=bt,a=Wt.transition;Wt.transition=null;try{bt=1,Gt(e,t,r,n)}finally{bt=s,Wt.transition=a}}function Yt(e,t,r,n){var s=bt,a=Wt.transition;Wt.transition=null;try{bt=4,Gt(e,t,r,n)}finally{bt=s,Wt.transition=a}}function Gt(e,t,r,n){if(Kt){var s=Xt(e,t,r,n);if(null===s)Kn(e,t,n,qt,r),Rt(e,n);else if(function(e,t,r,n,s){switch(t){case"focusin":return Tt=zt(Tt,e,t,r,n,s),!0;case"dragenter":return Et=zt(Et,e,t,r,n,s),!0;case"mouseover":return Ot=zt(Ot,e,t,r,n,s),!0;case"pointerover":var a=s.pointerId;return Pt.set(a,zt(Pt.get(a)||null,e,t,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,Dt.set(a,zt(Dt.get(a)||null,e,t,r,n,s)),!0}return!1}(s,e,t,r,n))n.stopPropagation();else if(Rt(e,n),4&t&&-1<Mt.indexOf(e)){for(;null!==s;){var a=bs(s);if(null!==a&&jt(a),null===(a=Xt(e,t,r,n))&&Kn(e,t,n,qt,r),a===s)break;s=a}null!==s&&n.stopPropagation()}else Kn(e,t,n,null,r)}}var qt=null;function Xt(e,t,r,n){if(qt=null,null!==(e=ys(e=je(n))))if(null===(t=Ue(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Ze:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Jt=null,Qt=null,Zt=null;function er(){if(Zt)return Zt;var e,t,r=Qt,n=r.length,s="value"in Jt?Jt.value:Jt.textContent,a=s.length;for(e=0;e<n&&r[e]===s[e];e++);var i=n-e;for(t=1;t<=i&&r[n-t]===s[a-t];t++);return Zt=s.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function sr(e){function t(t,r,n,s,a){for(var i in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(s):s[i]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var ar,ir,lr,or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=sr(or),dr=F({},or,{view:0,detail:0}),ur=sr(dr),hr=F({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==lr&&(lr&&"mousemove"===e.type?(ar=e.screenX-lr.screenX,ir=e.screenY-lr.screenY):ir=ar=0,lr=e),ar)},movementY:function(e){return"movementY"in e?e.movementY:ir}}),mr=sr(hr),pr=sr(F({},hr,{dataTransfer:0})),gr=sr(F({},dr,{relatedTarget:0})),fr=sr(F({},or,{animationName:0,elapsedTime:0,pseudoElement:0})),xr=F({},or,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yr=sr(xr),br=sr(F({},or,{data:0})),vr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _r(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wr[e])&&!!t[e]}function kr(){return _r}var Sr=F({},dr,{key:function(e){if(e.key){var t=vr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?jr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nr=sr(Sr),Cr=sr(F({},hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tr=sr(F({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kr})),Er=sr(F({},or,{propertyName:0,elapsedTime:0,pseudoElement:0})),Or=F({},hr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pr=sr(Or),Dr=[9,13,27,32],Ar=d&&"CompositionEvent"in window,Mr=null;d&&"documentMode"in document&&(Mr=document.documentMode);var Rr=d&&"TextEvent"in window&&!Mr,zr=d&&(!Ar||Mr&&8<Mr&&11>=Mr),Fr=String.fromCharCode(32),Lr=!1;function Ir(e,t){switch(e){case"keyup":return-1!==Dr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Br(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hr=!1;var Ur={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ur[e.type]:"textarea"===t}function Kr(e,t,r,n){Ne(n),0<(t=Yn(t,"onChange")).length&&(r=new cr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Vr=null,Yr=null;function Gr(e){Ln(e,0)}function qr(e){if(G(vs(e)))return e}function Xr(e,t){if("change"===e)return t}var $r=!1;if(d){var Jr;if(d){var Qr="oninput"in document;if(!Qr){var Zr=document.createElement("div");Zr.setAttribute("oninput","return;"),Qr="function"===typeof Zr.oninput}Jr=Qr}else Jr=!1;$r=Jr&&(!document.documentMode||9<document.documentMode)}function en(){Vr&&(Vr.detachEvent("onpropertychange",tn),Yr=Vr=null)}function tn(e){if("value"===e.propertyName&&qr(Yr)){var t=[];Kr(t,Yr,e,je(e)),Pe(Gr,t)}}function rn(e,t,r){"focusin"===e?(en(),Yr=r,(Vr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return qr(Yr)}function sn(e,t){if("click"===e)return qr(t)}function an(e,t){if("input"===e||"change"===e)return qr(t)}var ln="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function on(e,t){if(ln(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!u.call(t,s)||!ln(e[s],t[s]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dn(e,t){var r,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function un(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?un(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hn(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=q((e=t.contentWindow).document)}return t}function mn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pn(e){var t=hn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&un(r.ownerDocument.documentElement,r)){if(null!==n&&mn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=void 0===n.end?a:Math.min(n.end,s),!e.extend&&a>n&&(s=n,n=a,a=s),s=dn(r,a);var i=dn(r,n);s&&i&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gn=d&&"documentMode"in document&&11>=document.documentMode,fn=null,xn=null,yn=null,bn=!1;function vn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;bn||null==fn||fn!==q(n)||("selectionStart"in(n=fn)&&mn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},yn&&on(yn,n)||(yn=n,0<(n=Yn(xn,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=fn)))}function jn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var wn={animationend:jn("Animation","AnimationEnd"),animationiteration:jn("Animation","AnimationIteration"),animationstart:jn("Animation","AnimationStart"),transitionend:jn("Transition","TransitionEnd")},_n={},kn={};function Sn(e){if(_n[e])return _n[e];if(!wn[e])return e;var t,r=wn[e];for(t in r)if(r.hasOwnProperty(t)&&t in kn)return _n[e]=r[t];return e}d&&(kn=document.createElement("div").style,"AnimationEvent"in window||(delete wn.animationend.animation,delete wn.animationiteration.animation,delete wn.animationstart.animation),"TransitionEvent"in window||delete wn.transitionend.transition);var Nn=Sn("animationend"),Cn=Sn("animationiteration"),Tn=Sn("animationstart"),En=Sn("transitionend"),On=new Map,Pn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dn(e,t){On.set(e,t),o(t,[e])}for(var An=0;An<Pn.length;An++){var Mn=Pn[An];Dn(Mn.toLowerCase(),"on"+(Mn[0].toUpperCase()+Mn.slice(1)))}Dn(Nn,"onAnimationEnd"),Dn(Cn,"onAnimationIteration"),Dn(Tn,"onAnimationStart"),Dn("dblclick","onDoubleClick"),Dn("focusin","onFocus"),Dn("focusout","onBlur"),Dn(En,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rn));function Fn(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,s,i,l,o,c){if(He.apply(this,arguments),ze){if(!ze)throw Error(a(198));var d=Fe;ze=!1,Fe=null,Le||(Le=!0,Ie=d)}}(n,t,void 0,e),e.currentTarget=null}function Ln(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var i=n.length-1;0<=i;i--){var l=n[i],o=l.instance,c=l.currentTarget;if(l=l.listener,o!==a&&s.isPropagationStopped())break e;Fn(s,l,c),a=o}else for(i=0;i<n.length;i++){if(o=(l=n[i]).instance,c=l.currentTarget,l=l.listener,o!==a&&s.isPropagationStopped())break e;Fn(s,l,c),a=o}}}if(Le)throw e=Ie,Le=!1,Ie=null,e}function In(e,t){var r=t[gs];void 0===r&&(r=t[gs]=new Set);var n=e+"__bubble";r.has(n)||(Wn(t,e,2,!1),r.add(n))}function Bn(e,t,r){var n=0;t&&(n|=4),Wn(r,e,n,t)}var Hn="_reactListening"+Math.random().toString(36).slice(2);function Un(e){if(!e[Hn]){e[Hn]=!0,i.forEach(function(t){"selectionchange"!==t&&(zn.has(t)||Bn(t,!1,e),Bn(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Hn]||(t[Hn]=!0,Bn("selectionchange",!1,t))}}function Wn(e,t,r,n){switch($t(t)){case 1:var s=Vt;break;case 4:s=Yt;break;default:s=Gt}r=s.bind(null,t,r,e),s=void 0,!Ae||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),n?void 0!==s?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):void 0!==s?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Kn(e,t,r,n,s){var a=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var i=n.tag;if(3===i||4===i){var l=n.stateNode.containerInfo;if(l===s||8===l.nodeType&&l.parentNode===s)break;if(4===i)for(i=n.return;null!==i;){var o=i.tag;if((3===o||4===o)&&((o=i.stateNode.containerInfo)===s||8===o.nodeType&&o.parentNode===s))return;i=i.return}for(;null!==l;){if(null===(i=ys(l)))return;if(5===(o=i.tag)||6===o){n=a=i;continue e}l=l.parentNode}}n=n.return}Pe(function(){var n=a,s=je(r),i=[];e:{var l=On.get(e);if(void 0!==l){var o=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":o=Nr;break;case"focusin":c="focus",o=gr;break;case"focusout":c="blur",o=gr;break;case"beforeblur":case"afterblur":o=gr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":o=mr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":o=pr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":o=Tr;break;case Nn:case Cn:case Tn:o=fr;break;case En:o=Er;break;case"scroll":o=ur;break;case"wheel":o=Pr;break;case"copy":case"cut":case"paste":o=yr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":o=Cr}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==l?l+"Capture":null:l;d=[];for(var m,p=n;null!==p;){var g=(m=p).stateNode;if(5===m.tag&&null!==g&&(m=g,null!==h&&(null!=(g=De(p,h))&&d.push(Vn(p,g,m)))),u)break;p=p.return}0<d.length&&(l=new o(l,c,null,r,s),i.push({event:l,listeners:d}))}}if(0===(7&t)){if(o="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||r===ve||!(c=r.relatedTarget||r.fromElement)||!ys(c)&&!c[ps])&&(o||l)&&(l=s.window===s?s:(l=s.ownerDocument)?l.defaultView||l.parentWindow:window,o?(o=n,null!==(c=(c=r.relatedTarget||r.toElement)?ys(c):null)&&(c!==(u=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(o=null,c=n),o!==c)){if(d=mr,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=Cr,g="onPointerLeave",h="onPointerEnter",p="pointer"),u=null==o?l:vs(o),m=null==c?l:vs(c),(l=new d(g,p+"leave",o,r,s)).target=u,l.relatedTarget=m,g=null,ys(s)===n&&((d=new d(h,p+"enter",c,r,s)).target=m,d.relatedTarget=u,g=d),u=g,o&&c)e:{for(h=c,p=0,m=d=o;m;m=Gn(m))p++;for(m=0,g=h;g;g=Gn(g))m++;for(;0<p-m;)d=Gn(d),p--;for(;0<m-p;)h=Gn(h),m--;for(;p--;){if(d===h||null!==h&&d===h.alternate)break e;d=Gn(d),h=Gn(h)}d=null}else d=null;null!==o&&qn(i,l,o,d,!1),null!==c&&null!==u&&qn(i,u,c,d,!0)}if("select"===(o=(l=n?vs(n):window).nodeName&&l.nodeName.toLowerCase())||"input"===o&&"file"===l.type)var f=Xr;else if(Wr(l))if($r)f=an;else{f=nn;var x=rn}else(o=l.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===l.type||"radio"===l.type)&&(f=sn);switch(f&&(f=f(e,n))?Kr(i,f,r,s):(x&&x(e,l,n),"focusout"===e&&(x=l._wrapperState)&&x.controlled&&"number"===l.type&&ee(l,"number",l.value)),x=n?vs(n):window,e){case"focusin":(Wr(x)||"true"===x.contentEditable)&&(fn=x,xn=n,yn=null);break;case"focusout":yn=xn=fn=null;break;case"mousedown":bn=!0;break;case"contextmenu":case"mouseup":case"dragend":bn=!1,vn(i,r,s);break;case"selectionchange":if(gn)break;case"keydown":case"keyup":vn(i,r,s)}var y;if(Ar)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Hr?Ir(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&(zr&&"ko"!==r.locale&&(Hr||"onCompositionStart"!==b?"onCompositionEnd"===b&&Hr&&(y=er()):(Qt="value"in(Jt=s)?Jt.value:Jt.textContent,Hr=!0)),0<(x=Yn(n,b)).length&&(b=new br(b,e,null,r,s),i.push({event:b,listeners:x}),y?b.data=y:null!==(y=Br(r))&&(b.data=y))),(y=Rr?function(e,t){switch(e){case"compositionend":return Br(t);case"keypress":return 32!==t.which?null:(Lr=!0,Fr);case"textInput":return(e=t.data)===Fr&&Lr?null:e;default:return null}}(e,r):function(e,t){if(Hr)return"compositionend"===e||!Ar&&Ir(e,t)?(e=er(),Zt=Qt=Jt=null,Hr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Yn(n,"onBeforeInput")).length&&(s=new br("onBeforeInput","beforeinput",null,r,s),i.push({event:s,listeners:n}),s.data=y))}Ln(i,t)})}function Vn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Yn(e,t){for(var r=t+"Capture",n=[];null!==e;){var s=e,a=s.stateNode;5===s.tag&&null!==a&&(s=a,null!=(a=De(e,r))&&n.unshift(Vn(e,a,s)),null!=(a=De(e,t))&&n.push(Vn(e,a,s))),e=e.return}return n}function Gn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qn(e,t,r,n,s){for(var a=t._reactName,i=[];null!==r&&r!==n;){var l=r,o=l.alternate,c=l.stateNode;if(null!==o&&o===n)break;5===l.tag&&null!==c&&(l=c,s?null!=(o=De(r,a))&&i.unshift(Vn(r,o,l)):s||null!=(o=De(r,a))&&i.push(Vn(r,o,l))),r=r.return}0!==i.length&&e.push({event:t,listeners:i})}var Xn=/\r\n?/g,$n=/\u0000|\uFFFD/g;function Jn(e){return("string"===typeof e?e:""+e).replace(Xn,"\n").replace($n,"")}function Qn(e,t,r){if(t=Jn(t),Jn(e)!==t&&r)throw Error(a(425))}function Zn(){}var es=null,ts=null;function rs(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ns="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,as="function"===typeof Promise?Promise:void 0,is="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof as?function(e){return as.resolve(null).then(e).catch(ls)}:ns;function ls(e){setTimeout(function(){throw e})}function os(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&8===s.nodeType)if("/$"===(r=s.data)){if(0===n)return e.removeChild(s),void Ut(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=s}while(r);Ut(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ds(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var us=Math.random().toString(36).slice(2),hs="__reactFiber$"+us,ms="__reactProps$"+us,ps="__reactContainer$"+us,gs="__reactEvents$"+us,fs="__reactListeners$"+us,xs="__reactHandles$"+us;function ys(e){var t=e[hs];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ps]||r[hs]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=ds(e);null!==e;){if(r=e[hs])return r;e=ds(e)}return t}r=(e=r).parentNode}return null}function bs(e){return!(e=e[hs]||e[ps])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function vs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function js(e){return e[ms]||null}var ws=[],_s=-1;function ks(e){return{current:e}}function Ss(e){0>_s||(e.current=ws[_s],ws[_s]=null,_s--)}function Ns(e,t){_s++,ws[_s]=e.current,e.current=t}var Cs={},Ts=ks(Cs),Es=ks(!1),Os=Cs;function Ps(e,t){var r=e.type.contextTypes;if(!r)return Cs;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s,a={};for(s in r)a[s]=t[s];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ds(e){return null!==(e=e.childContextTypes)&&void 0!==e}function As(){Ss(Es),Ss(Ts)}function Ms(e,t,r){if(Ts.current!==Cs)throw Error(a(168));Ns(Ts,t),Ns(Es,r)}function Rs(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var s in n=n.getChildContext())if(!(s in t))throw Error(a(108,W(e)||"Unknown",s));return F({},r,n)}function zs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cs,Os=Ts.current,Ns(Ts,e),Ns(Es,Es.current),!0}function Fs(e,t,r){var n=e.stateNode;if(!n)throw Error(a(169));r?(e=Rs(e,t,Os),n.__reactInternalMemoizedMergedChildContext=e,Ss(Es),Ss(Ts),Ns(Ts,e)):Ss(Es),Ns(Es,r)}var Ls=null,Is=!1,Bs=!1;function Hs(e){null===Ls?Ls=[e]:Ls.push(e)}function Us(){if(!Bs&&null!==Ls){Bs=!0;var e=0,t=bt;try{var r=Ls;for(bt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Ls=null,Is=!1}catch(s){throw null!==Ls&&(Ls=Ls.slice(e+1)),Ge(Ze,Us),s}finally{bt=t,Bs=!1}}return null}var Ws=[],Ks=0,Vs=null,Ys=0,Gs=[],qs=0,Xs=null,$s=1,Js="";function Qs(e,t){Ws[Ks++]=Ys,Ws[Ks++]=Vs,Vs=e,Ys=t}function Zs(e,t,r){Gs[qs++]=$s,Gs[qs++]=Js,Gs[qs++]=Xs,Xs=e;var n=$s;e=Js;var s=32-it(n)-1;n&=~(1<<s),r+=1;var a=32-it(t)+s;if(30<a){var i=s-s%5;a=(n&(1<<i)-1).toString(32),n>>=i,s-=i,$s=1<<32-it(t)+s|r<<s|n,Js=a+e}else $s=1<<a|r<<s|n,Js=e}function ea(e){null!==e.return&&(Qs(e,1),Zs(e,1,0))}function ta(e){for(;e===Vs;)Vs=Ws[--Ks],Ws[Ks]=null,Ys=Ws[--Ks],Ws[Ks]=null;for(;e===Xs;)Xs=Gs[--qs],Gs[qs]=null,Js=Gs[--qs],Gs[qs]=null,$s=Gs[--qs],Gs[qs]=null}var ra=null,na=null,sa=!1,aa=null;function ia(e,t){var r=Pc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function la(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ra=e,na=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ra=e,na=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Xs?{id:$s,overflow:Js}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Pc(18,null,null,0)).stateNode=t,r.return=e,e.child=r,ra=e,na=null,!0);default:return!1}}function oa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(sa){var t=na;if(t){var r=t;if(!la(e,t)){if(oa(e))throw Error(a(418));t=cs(r.nextSibling);var n=ra;t&&la(e,t)?ia(n,r):(e.flags=-4097&e.flags|2,sa=!1,ra=e)}}else{if(oa(e))throw Error(a(418));e.flags=-4097&e.flags|2,sa=!1,ra=e}}}function da(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ra=e}function ua(e){if(e!==ra)return!1;if(!sa)return da(e),sa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!rs(e.type,e.memoizedProps)),t&&(t=na)){if(oa(e))throw ha(),Error(a(418));for(;t;)ia(e,t),t=cs(t.nextSibling)}if(da(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){na=cs(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}na=null}}else na=ra?cs(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=na;e;)e=cs(e.nextSibling)}function ma(){na=ra=null,sa=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var ga=v.ReactCurrentBatchConfig;function fa(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(a(309));var n=r.stateNode}if(!n)throw Error(a(147,e));var s=n,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=s.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!r._owner)throw Error(a(290,e))}return e}function xa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ya(e){return(0,e._init)(e._payload)}function ba(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Ac(e,t)).index=0,e.sibling=null,e}function i(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function l(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,r,n){return null===t||6!==t.tag?((t=Fc(r,e.mode,n)).return=e,t):((t=s(t,r)).return=e,t)}function c(e,t,r,n){var a=r.type;return a===_?u(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===D&&ya(a)===t.type)?((n=s(t,r.props)).ref=fa(e,t,r),n.return=e,n):((n=Mc(r.type,r.key,r.props,null,e.mode,n)).ref=fa(e,t,r),n.return=e,n)}function d(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Lc(r,e.mode,n)).return=e,t):((t=s(t,r.children||[])).return=e,t)}function u(e,t,r,n,a){return null===t||7!==t.tag?((t=Rc(r,e.mode,n,a)).return=e,t):((t=s(t,r)).return=e,t)}function h(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case j:return(r=Mc(t.type,t.key,t.props,null,e.mode,r)).ref=fa(e,null,t),r.return=e,r;case w:return(t=Lc(t,e.mode,r)).return=e,t;case D:return h(e,(0,t._init)(t._payload),r)}if(te(t)||R(t))return(t=Rc(t,e.mode,r,null)).return=e,t;xa(e,t)}return null}function m(e,t,r,n){var s=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==s?null:o(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case j:return r.key===s?c(e,t,r,n):null;case w:return r.key===s?d(e,t,r,n):null;case D:return m(e,t,(s=r._init)(r._payload),n)}if(te(r)||R(r))return null!==s?null:u(e,t,r,n,null);xa(e,r)}return null}function p(e,t,r,n,s){if("string"===typeof n&&""!==n||"number"===typeof n)return o(t,e=e.get(r)||null,""+n,s);if("object"===typeof n&&null!==n){switch(n.$$typeof){case j:return c(t,e=e.get(null===n.key?r:n.key)||null,n,s);case w:return d(t,e=e.get(null===n.key?r:n.key)||null,n,s);case D:return p(e,t,r,(0,n._init)(n._payload),s)}if(te(n)||R(n))return u(t,e=e.get(r)||null,n,s,null);xa(t,n)}return null}function g(s,a,l,o){for(var c=null,d=null,u=a,g=a=0,f=null;null!==u&&g<l.length;g++){u.index>g?(f=u,u=null):f=u.sibling;var x=m(s,u,l[g],o);if(null===x){null===u&&(u=f);break}e&&u&&null===x.alternate&&t(s,u),a=i(x,a,g),null===d?c=x:d.sibling=x,d=x,u=f}if(g===l.length)return r(s,u),sa&&Qs(s,g),c;if(null===u){for(;g<l.length;g++)null!==(u=h(s,l[g],o))&&(a=i(u,a,g),null===d?c=u:d.sibling=u,d=u);return sa&&Qs(s,g),c}for(u=n(s,u);g<l.length;g++)null!==(f=p(u,s,g,l[g],o))&&(e&&null!==f.alternate&&u.delete(null===f.key?g:f.key),a=i(f,a,g),null===d?c=f:d.sibling=f,d=f);return e&&u.forEach(function(e){return t(s,e)}),sa&&Qs(s,g),c}function f(s,l,o,c){var d=R(o);if("function"!==typeof d)throw Error(a(150));if(null==(o=d.call(o)))throw Error(a(151));for(var u=d=null,g=l,f=l=0,x=null,y=o.next();null!==g&&!y.done;f++,y=o.next()){g.index>f?(x=g,g=null):x=g.sibling;var b=m(s,g,y.value,c);if(null===b){null===g&&(g=x);break}e&&g&&null===b.alternate&&t(s,g),l=i(b,l,f),null===u?d=b:u.sibling=b,u=b,g=x}if(y.done)return r(s,g),sa&&Qs(s,f),d;if(null===g){for(;!y.done;f++,y=o.next())null!==(y=h(s,y.value,c))&&(l=i(y,l,f),null===u?d=y:u.sibling=y,u=y);return sa&&Qs(s,f),d}for(g=n(s,g);!y.done;f++,y=o.next())null!==(y=p(g,s,f,y.value,c))&&(e&&null!==y.alternate&&g.delete(null===y.key?f:y.key),l=i(y,l,f),null===u?d=y:u.sibling=y,u=y);return e&&g.forEach(function(e){return t(s,e)}),sa&&Qs(s,f),d}return function e(n,a,i,o){if("object"===typeof i&&null!==i&&i.type===_&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case j:e:{for(var c=i.key,d=a;null!==d;){if(d.key===c){if((c=i.type)===_){if(7===d.tag){r(n,d.sibling),(a=s(d,i.props.children)).return=n,n=a;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&ya(c)===d.type){r(n,d.sibling),(a=s(d,i.props)).ref=fa(n,d,i),a.return=n,n=a;break e}r(n,d);break}t(n,d),d=d.sibling}i.type===_?((a=Rc(i.props.children,n.mode,o,i.key)).return=n,n=a):((o=Mc(i.type,i.key,i.props,null,n.mode,o)).ref=fa(n,a,i),o.return=n,n=o)}return l(n);case w:e:{for(d=i.key;null!==a;){if(a.key===d){if(4===a.tag&&a.stateNode.containerInfo===i.containerInfo&&a.stateNode.implementation===i.implementation){r(n,a.sibling),(a=s(a,i.children||[])).return=n,n=a;break e}r(n,a);break}t(n,a),a=a.sibling}(a=Lc(i,n.mode,o)).return=n,n=a}return l(n);case D:return e(n,a,(d=i._init)(i._payload),o)}if(te(i))return g(n,a,i,o);if(R(i))return f(n,a,i,o);xa(n,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==a&&6===a.tag?(r(n,a.sibling),(a=s(a,i)).return=n,n=a):(r(n,a),(a=Fc(i,n.mode,o)).return=n,n=a),l(n)):r(n,a)}}var va=ba(!0),ja=ba(!1),wa=ks(null),_a=null,ka=null,Sa=null;function Na(){Sa=ka=_a=null}function Ca(e){var t=wa.current;Ss(wa),e._currentValue=t}function Ta(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ea(e,t){_a=e,Sa=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(yl=!0),e.firstContext=null)}function Oa(e){var t=e._currentValue;if(Sa!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===_a)throw Error(a(308));ka=e,_a.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Pa=null;function Da(e){null===Pa?Pa=[e]:Pa.push(e)}function Aa(e,t,r,n){var s=t.interleaved;return null===s?(r.next=r,Da(t)):(r.next=s.next,s.next=r),t.interleaved=r,Ma(e,n)}function Ma(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Ra=!1;function za(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function La(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ia(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&To)){var s=n.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Ma(e,r)}return null===(s=n.interleaved)?(t.next=t,Da(n)):(t.next=s.next,s.next=t),n.interleaved=t,Ma(e,r)}function Ba(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,yt(e,r)}}function Ha(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var s=null,a=null;if(null!==(r=r.firstBaseUpdate)){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===a?s=a=i:a=a.next=i,r=r.next}while(null!==r);null===a?s=a=t:a=a.next=t}else s=a=t;return r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ua(e,t,r,n){var s=e.updateQueue;Ra=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(null!==l){s.shared.pending=null;var o=l,c=o.next;o.next=null,null===i?a=c:i.next=c,i=o;var d=e.alternate;null!==d&&((l=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===l?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=o))}if(null!==a){var u=s.baseState;for(i=0,d=c=o=null,l=a;;){var h=l.lane,m=l.eventTime;if((n&h)===h){null!==d&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,g=l;switch(h=t,m=r,g.tag){case 1:if("function"===typeof(p=g.payload)){u=p.call(m,u,h);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(m,u,h):p)||void 0===h)break e;u=F({},u,h);break e;case 2:Ra=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===d?(c=d=m,o=u):d=d.next=m,i|=h;if(null===(l=l.next)){if(null===(l=s.shared.pending))break;l=(h=l).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===d&&(o=u),s.baseState=o,s.firstBaseUpdate=c,s.lastBaseUpdate=d,null!==(t=s.shared.interleaved)){s=t;do{i|=s.lane,s=s.next}while(s!==t)}else null===a&&(s.shared.lanes=0);zo|=i,e.lanes=i,e.memoizedState=u}}function Wa(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(null!==s){if(n.callback=null,n=r,"function"!==typeof s)throw Error(a(191,s));s.call(n)}}}var Ka={},Va=ks(Ka),Ya=ks(Ka),Ga=ks(Ka);function qa(e){if(e===Ka)throw Error(a(174));return e}function Xa(e,t){switch(Ns(Ga,t),Ns(Ya,e),Ns(Va,Ka),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:oe(null,"");break;default:t=oe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ss(Va),Ns(Va,t)}function $a(){Ss(Va),Ss(Ya),Ss(Ga)}function Ja(e){qa(Ga.current);var t=qa(Va.current),r=oe(t,e.type);t!==r&&(Ns(Ya,e),Ns(Va,r))}function Qa(e){Ya.current===e&&(Ss(Va),Ss(Ya))}var Za=ks(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ri(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ni=v.ReactCurrentDispatcher,si=v.ReactCurrentBatchConfig,ai=0,ii=null,li=null,oi=null,ci=!1,di=!1,ui=0,hi=0;function mi(){throw Error(a(321))}function pi(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ln(e[r],t[r]))return!1;return!0}function gi(e,t,r,n,s,i){if(ai=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ni.current=null===e||null===e.memoizedState?Qi:Zi,e=r(n,s),di){i=0;do{if(di=!1,ui=0,25<=i)throw Error(a(301));i+=1,oi=li=null,t.updateQueue=null,ni.current=el,e=r(n,s)}while(di)}if(ni.current=Ji,t=null!==li&&null!==li.next,ai=0,oi=li=ii=null,ci=!1,t)throw Error(a(300));return e}function fi(){var e=0!==ui;return ui=0,e}function xi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===oi?ii.memoizedState=oi=e:oi=oi.next=e,oi}function yi(){if(null===li){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=li.next;var t=null===oi?ii.memoizedState:oi.next;if(null!==t)oi=t,li=e;else{if(null===e)throw Error(a(310));e={memoizedState:(li=e).memoizedState,baseState:li.baseState,baseQueue:li.baseQueue,queue:li.queue,next:null},null===oi?ii.memoizedState=oi=e:oi=oi.next=e}return oi}function bi(e,t){return"function"===typeof t?t(e):t}function vi(e){var t=yi(),r=t.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=e;var n=li,s=n.baseQueue,i=r.pending;if(null!==i){if(null!==s){var l=s.next;s.next=i.next,i.next=l}n.baseQueue=s=i,r.pending=null}if(null!==s){i=s.next,n=n.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((ai&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(o=c=h,l=n):c=c.next=h,ii.lanes|=u,zo|=u}d=d.next}while(null!==d&&d!==i);null===c?l=n:c.next=o,ln(n,t.memoizedState)||(yl=!0),t.memoizedState=n,t.baseState=l,t.baseQueue=c,r.lastRenderedState=n}if(null!==(e=r.interleaved)){s=e;do{i=s.lane,ii.lanes|=i,zo|=i,s=s.next}while(s!==e)}else null===s&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ji(e){var t=yi(),r=t.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(null!==s){r.pending=null;var l=s=s.next;do{i=e(i,l.action),l=l.next}while(l!==s);ln(i,t.memoizedState)||(yl=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function wi(){}function _i(e,t){var r=ii,n=yi(),s=t(),i=!ln(n.memoizedState,s);if(i&&(n.memoizedState=s,yl=!0),n=n.queue,Ri(Ni.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||null!==oi&&1&oi.memoizedState.tag){if(r.flags|=2048,Oi(9,Si.bind(null,r,n,s,t),void 0,null),null===Eo)throw Error(a(349));0!==(30&ai)||ki(r,t,s)}return s}function ki(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Si(e,t,r,n){t.value=r,t.getSnapshot=n,Ci(t)&&Ti(e)}function Ni(e,t,r){return r(function(){Ci(t)&&Ti(e)})}function Ci(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ln(e,r)}catch(n){return!0}}function Ti(e){var t=Ma(e,1);null!==t&&rc(t,e,1,-1)}function Ei(e){var t=xi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:e},t.queue=e,e=e.dispatch=Gi.bind(null,ii,e),[t.memoizedState,e]}function Oi(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Pi(){return yi().memoizedState}function Di(e,t,r,n){var s=xi();ii.flags|=e,s.memoizedState=Oi(1|t,r,void 0,void 0===n?null:n)}function Ai(e,t,r,n){var s=yi();n=void 0===n?null:n;var a=void 0;if(null!==li){var i=li.memoizedState;if(a=i.destroy,null!==n&&pi(n,i.deps))return void(s.memoizedState=Oi(t,r,a,n))}ii.flags|=e,s.memoizedState=Oi(1|t,r,a,n)}function Mi(e,t){return Di(8390656,8,e,t)}function Ri(e,t){return Ai(2048,8,e,t)}function zi(e,t){return Ai(4,2,e,t)}function Fi(e,t){return Ai(4,4,e,t)}function Li(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ii(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Ai(4,4,Li.bind(null,t,e),r)}function Bi(){}function Hi(e,t){var r=yi();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&pi(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Ui(e,t){var r=yi();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&pi(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Wi(e,t,r){return 0===(21&ai)?(e.baseState&&(e.baseState=!1,yl=!0),e.memoizedState=r):(ln(r,t)||(r=gt(),ii.lanes|=r,zo|=r,e.baseState=!0),t)}function Ki(e,t){var r=bt;bt=0!==r&&4>r?r:4,e(!0);var n=si.transition;si.transition={};try{e(!1),t()}finally{bt=r,si.transition=n}}function Vi(){return yi().memoizedState}function Yi(e,t,r){var n=tc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},qi(e))Xi(t,r);else if(null!==(r=Aa(e,t,r,n))){rc(r,e,n,ec()),$i(r,t,n)}}function Gi(e,t,r){var n=tc(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(qi(e))Xi(t,s);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,l=a(i,r);if(s.hasEagerState=!0,s.eagerState=l,ln(l,i)){var o=t.interleaved;return null===o?(s.next=s,Da(t)):(s.next=o.next,o.next=s),void(t.interleaved=s)}}catch(c){}null!==(r=Aa(e,t,s,n))&&(rc(r,e,n,s=ec()),$i(r,t,n))}}function qi(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Xi(e,t){di=ci=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function $i(e,t,r){if(0!==(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,yt(e,r)}}var Ji={readContext:Oa,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},Qi={readContext:Oa,useCallback:function(e,t){return xi().memoizedState=[e,void 0===t?null:t],e},useContext:Oa,useEffect:Mi,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Di(4194308,4,Li.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Di(4194308,4,e,t)},useInsertionEffect:function(e,t){return Di(4,2,e,t)},useMemo:function(e,t){var r=xi();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=xi();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Yi.bind(null,ii,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},xi().memoizedState=e},useState:Ei,useDebugValue:Bi,useDeferredValue:function(e){return xi().memoizedState=e},useTransition:function(){var e=Ei(!1),t=e[0];return e=Ki.bind(null,e[1]),xi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ii,s=xi();if(sa){if(void 0===r)throw Error(a(407));r=r()}else{if(r=t(),null===Eo)throw Error(a(349));0!==(30&ai)||ki(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,Mi(Ni.bind(null,n,i,e),[e]),n.flags|=2048,Oi(9,Si.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=xi(),t=Eo.identifierPrefix;if(sa){var r=Js;t=":"+t+"R"+(r=($s&~(1<<32-it($s)-1)).toString(32)+r),0<(r=ui++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zi={readContext:Oa,useCallback:Hi,useContext:Oa,useEffect:Ri,useImperativeHandle:Ii,useInsertionEffect:zi,useLayoutEffect:Fi,useMemo:Ui,useReducer:vi,useRef:Pi,useState:function(){return vi(bi)},useDebugValue:Bi,useDeferredValue:function(e){return Wi(yi(),li.memoizedState,e)},useTransition:function(){return[vi(bi)[0],yi().memoizedState]},useMutableSource:wi,useSyncExternalStore:_i,useId:Vi,unstable_isNewReconciler:!1},el={readContext:Oa,useCallback:Hi,useContext:Oa,useEffect:Ri,useImperativeHandle:Ii,useInsertionEffect:zi,useLayoutEffect:Fi,useMemo:Ui,useReducer:ji,useRef:Pi,useState:function(){return ji(bi)},useDebugValue:Bi,useDeferredValue:function(e){var t=yi();return null===li?t.memoizedState=e:Wi(t,li.memoizedState,e)},useTransition:function(){return[ji(bi)[0],yi().memoizedState]},useMutableSource:wi,useSyncExternalStore:_i,useId:Vi,unstable_isNewReconciler:!1};function tl(e,t){if(e&&e.defaultProps){for(var r in t=F({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function rl(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:F({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var nl={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ec(),s=tc(e),a=La(n,s);a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=Ia(e,a,s))&&(rc(t,e,s,n),Ba(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ec(),s=tc(e),a=La(n,s);a.tag=1,a.payload=t,void 0!==r&&null!==r&&(a.callback=r),null!==(t=Ia(e,a,s))&&(rc(t,e,s,n),Ba(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ec(),n=tc(e),s=La(r,n);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Ia(e,s,n))&&(rc(t,e,n,r),Ba(t,e,n))}};function sl(e,t,r,n,s,a,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!on(r,n)||!on(s,a))}function al(e,t,r){var n=!1,s=Cs,a=t.contextType;return"object"===typeof a&&null!==a?a=Oa(a):(s=Ds(t)?Os:Ts.current,a=(n=null!==(n=t.contextTypes)&&void 0!==n)?Ps(e,s):Cs),t=new t(r,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=nl,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function il(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&nl.enqueueReplaceState(t,t.state,null)}function ll(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},za(e);var a=t.contextType;"object"===typeof a&&null!==a?s.context=Oa(a):(a=Ds(t)?Os:Ts.current,s.context=Ps(e,a)),s.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(rl(e,t,a,r),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&nl.enqueueReplaceState(s,s.state,null),Ua(e,r,s,n),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function ol(e,t){try{var r="",n=t;do{r+=H(n),n=n.return}while(n);var s=r}catch(a){s="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:s,digest:null}}function cl(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function dl(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var ul="function"===typeof WeakMap?WeakMap:Map;function hl(e,t,r){(r=La(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ko||(Ko=!0,Vo=n),dl(0,t)},r}function ml(e,t,r){(r=La(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){dl(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(r.callback=function(){dl(0,t),"function"!==typeof n&&(null===Yo?Yo=new Set([this]):Yo.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function pl(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new ul;var s=new Set;n.set(t,s)}else void 0===(s=n.get(t))&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=Sc.bind(null,e,t,r),t.then(e,e))}function gl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function fl(e,t,r,n,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=La(-1,1)).tag=2,Ia(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var xl=v.ReactCurrentOwner,yl=!1;function bl(e,t,r,n){t.child=null===e?ja(t,null,r,n):va(t,e.child,r,n)}function vl(e,t,r,n,s){r=r.render;var a=t.ref;return Ea(t,s),n=gi(e,t,r,n,a,s),r=fi(),null===e||yl?(sa&&r&&ea(t),t.flags|=1,bl(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wl(e,t,s))}function jl(e,t,r,n,s){if(null===e){var a=r.type;return"function"!==typeof a||Dc(a)||void 0!==a.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Mc(r.type,null,n,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,wl(e,t,a,n,s))}if(a=e.child,0===(e.lanes&s)){var i=a.memoizedProps;if((r=null!==(r=r.compare)?r:on)(i,n)&&e.ref===t.ref)return Wl(e,t,s)}return t.flags|=1,(e=Ac(a,n)).ref=t.ref,e.return=t,t.child=e}function wl(e,t,r,n,s){if(null!==e){var a=e.memoizedProps;if(on(a,n)&&e.ref===t.ref){if(yl=!1,t.pendingProps=n=a,0===(e.lanes&s))return t.lanes=e.lanes,Wl(e,t,s);0!==(131072&e.flags)&&(yl=!0)}}return Sl(e,t,r,n,s)}function _l(e,t,r){var n=t.pendingProps,s=n.children,a=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ns(Ao,Do),Do|=r;else{if(0===(1073741824&r))return e=null!==a?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ns(Ao,Do),Do|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==a?a.baseLanes:r,Ns(Ao,Do),Do|=n}else null!==a?(n=a.baseLanes|r,t.memoizedState=null):n=r,Ns(Ao,Do),Do|=n;return bl(e,t,s,r),t.child}function kl(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Sl(e,t,r,n,s){var a=Ds(r)?Os:Ts.current;return a=Ps(t,a),Ea(t,s),r=gi(e,t,r,n,a,s),n=fi(),null===e||yl?(sa&&n&&ea(t),t.flags|=1,bl(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wl(e,t,s))}function Nl(e,t,r,n,s){if(Ds(r)){var a=!0;zs(t)}else a=!1;if(Ea(t,s),null===t.stateNode)Ul(e,t),al(t,r,n),ll(t,r,n,s),n=!0;else if(null===e){var i=t.stateNode,l=t.memoizedProps;i.props=l;var o=i.context,c=r.contextType;"object"===typeof c&&null!==c?c=Oa(c):c=Ps(t,c=Ds(r)?Os:Ts.current);var d=r.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==n||o!==c)&&il(t,i,n,c),Ra=!1;var h=t.memoizedState;i.state=h,Ua(t,n,i,s),o=t.memoizedState,l!==n||h!==o||Es.current||Ra?("function"===typeof d&&(rl(t,r,d,n),o=t.memoizedState),(l=Ra||sl(t,r,l,n,h,o,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=o),i.props=n,i.state=o,i.context=c,n=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,Fa(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:tl(t.type,l),i.props=c,u=t.pendingProps,h=i.context,"object"===typeof(o=r.contextType)&&null!==o?o=Oa(o):o=Ps(t,o=Ds(r)?Os:Ts.current);var m=r.getDerivedStateFromProps;(d="function"===typeof m||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==u||h!==o)&&il(t,i,n,o),Ra=!1,h=t.memoizedState,i.state=h,Ua(t,n,i,s);var p=t.memoizedState;l!==u||h!==p||Es.current||Ra?("function"===typeof m&&(rl(t,r,m,n),p=t.memoizedState),(c=Ra||sl(t,r,c,n,h,p,o)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(n,p,o),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(n,p,o)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),i.props=n,i.state=p,i.context=o,n=c):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Cl(e,t,r,n,a,s)}function Cl(e,t,r,n,s,a){kl(e,t);var i=0!==(128&t.flags);if(!n&&!i)return s&&Fs(t,r,!1),Wl(e,t,a);n=t.stateNode,xl.current=t;var l=i&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&i?(t.child=va(t,e.child,null,a),t.child=va(t,null,l,a)):bl(e,t,l,a),t.memoizedState=n.state,s&&Fs(t,r,!0),t.child}function Tl(e){var t=e.stateNode;t.pendingContext?Ms(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ms(0,t.context,!1),Xa(e,t.containerInfo)}function El(e,t,r,n,s){return ma(),pa(s),t.flags|=256,bl(e,t,r,n),t.child}var Ol,Pl,Dl,Al,Ml={dehydrated:null,treeContext:null,retryLane:0};function Rl(e){return{baseLanes:e,cachePool:null,transitions:null}}function zl(e,t,r){var n,s=t.pendingProps,i=Za.current,l=!1,o=0!==(128&t.flags);if((n=o)||(n=(null===e||null!==e.memoizedState)&&0!==(2&i)),n?(l=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Ns(Za,1&i),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=s.children,e=s.fallback,l?(s=t.mode,l=t.child,o={mode:"hidden",children:o},0===(1&s)&&null!==l?(l.childLanes=0,l.pendingProps=o):l=zc(o,s,0,null),e=Rc(e,s,r,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Rl(r),t.memoizedState=Ml,e):Fl(t,o));if(null!==(i=e.memoizedState)&&null!==(n=i.dehydrated))return function(e,t,r,n,s,i,l){if(r)return 256&t.flags?(t.flags&=-257,Ll(e,t,l,n=cl(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=zc({mode:"visible",children:n.children},s,0,null),(i=Rc(i,s,l,null)).flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,0!==(1&t.mode)&&va(t,e.child,null,l),t.child.memoizedState=Rl(l),t.memoizedState=Ml,i);if(0===(1&t.mode))return Ll(e,t,l,null);if("$!"===s.data){if(n=s.nextSibling&&s.nextSibling.dataset)var o=n.dgst;return n=o,Ll(e,t,l,n=cl(i=Error(a(419)),n,void 0))}if(o=0!==(l&e.childLanes),yl||o){if(null!==(n=Eo)){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(n.suspendedLanes|l))?0:s)&&s!==i.retryLane&&(i.retryLane=s,Ma(e,s),rc(n,e,s,-1))}return gc(),Ll(e,t,l,n=cl(Error(a(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,na=cs(s.nextSibling),ra=t,sa=!0,aa=null,null!==e&&(Gs[qs++]=$s,Gs[qs++]=Js,Gs[qs++]=Xs,$s=e.id,Js=e.overflow,Xs=t),t=Fl(t,n.children),t.flags|=4096,t)}(e,t,o,s,n,i,r);if(l){l=s.fallback,o=t.mode,n=(i=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&o)&&t.child!==i?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Ac(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==n?l=Ac(n,l):(l=Rc(l,o,r,null)).flags|=2,l.return=t,s.return=t,s.sibling=l,t.child=s,s=l,l=t.child,o=null===(o=e.child.memoizedState)?Rl(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~r,t.memoizedState=Ml,s}return e=(l=e.child).sibling,s=Ac(l,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=r),s.return=t,s.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function Fl(e,t){return(t=zc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ll(e,t,r,n){return null!==n&&pa(n),va(t,e.child,null,r),(e=Fl(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Il(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Ta(e.return,t,r)}function Bl(e,t,r,n,s){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function Hl(e,t,r){var n=t.pendingProps,s=n.revealOrder,a=n.tail;if(bl(e,t,n.children,r),0!==(2&(n=Za.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Il(e,r,t);else if(19===e.tag)Il(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ns(Za,n),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;null!==r;)null!==(e=r.alternate)&&null===ei(e)&&(s=r),r=r.sibling;null===(r=s)?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Bl(t,!1,s,r,a);break;case"backwards":for(r=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ei(e)){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Bl(t,!0,r,null,a);break;case"together":Bl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ul(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wl(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),zo|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(r=Ac(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Ac(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Kl(e,t){if(!sa)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Vl(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;null!==s;)r|=s.lanes|s.childLanes,n|=14680064&s.subtreeFlags,n|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Yl(e,t,r){var n=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vl(t),null;case 1:case 17:return Ds(t.type)&&As(),Vl(t),null;case 3:return n=t.stateNode,$a(),Ss(Es),Ss(Ts),ri(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ua(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ic(aa),aa=null))),Pl(e,t),Vl(t),null;case 5:Qa(t);var s=qa(Ga.current);if(r=t.type,null!==e&&null!=t.stateNode)Dl(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(a(166));return Vl(t),null}if(e=qa(Va.current),ua(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[hs]=t,n[ms]=i,e=0!==(1&t.mode),r){case"dialog":In("cancel",n),In("close",n);break;case"iframe":case"object":case"embed":In("load",n);break;case"video":case"audio":for(s=0;s<Rn.length;s++)In(Rn[s],n);break;case"source":In("error",n);break;case"img":case"image":case"link":In("error",n),In("load",n);break;case"details":In("toggle",n);break;case"input":$(n,i),In("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},In("invalid",n);break;case"textarea":se(n,i),In("invalid",n)}for(var o in ye(r,i),s=null,i)if(i.hasOwnProperty(o)){var c=i[o];"children"===o?"string"===typeof c?n.textContent!==c&&(!0!==i.suppressHydrationWarning&&Qn(n.textContent,c,e),s=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Qn(n.textContent,c,e),s=["children",""+c]):l.hasOwnProperty(o)&&null!=c&&"onScroll"===o&&In("scroll",n)}switch(r){case"input":Y(n),Z(n,i,!0);break;case"textarea":Y(n),ie(n);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(n.onclick=Zn)}n=s,t.updateQueue=n,null!==n&&(t.flags|=4)}else{o=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=le(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),"select"===r&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[hs]=t,e[ms]=n,Ol(e,t,!1,!1),t.stateNode=e;e:{switch(o=be(r,n),r){case"dialog":In("cancel",e),In("close",e),s=n;break;case"iframe":case"object":case"embed":In("load",e),s=n;break;case"video":case"audio":for(s=0;s<Rn.length;s++)In(Rn[s],e);s=n;break;case"source":In("error",e),s=n;break;case"img":case"image":case"link":In("error",e),In("load",e),s=n;break;case"details":In("toggle",e),s=n;break;case"input":$(e,n),s=X(e,n),In("invalid",e);break;case"option":default:s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=F({},n,{value:void 0}),In("invalid",e);break;case"textarea":se(e,n),s=ne(e,n),In("invalid",e)}for(i in ye(r,s),c=s)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?fe(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==r||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(l.hasOwnProperty(i)?null!=d&&"onScroll"===i&&In("scroll",e):null!=d&&b(e,i,d,o))}switch(r){case"input":Y(e),Z(e,n,!1);break;case"textarea":Y(e),ie(e);break;case"option":null!=n.value&&e.setAttribute("value",""+K(n.value));break;case"select":e.multiple=!!n.multiple,null!=(i=n.value)?re(e,!!n.multiple,i,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Zn)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Vl(t),null;case 6:if(e&&null!=t.stateNode)Al(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(a(166));if(r=qa(Ga.current),qa(Va.current),ua(t)){if(n=t.stateNode,r=t.memoizedProps,n[hs]=t,(i=n.nodeValue!==r)&&null!==(e=ra))switch(e.tag){case 3:Qn(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qn(n.nodeValue,r,0!==(1&e.mode))}i&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[hs]=t,t.stateNode=n}return Vl(t),null;case 13:if(Ss(Za),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(sa&&null!==na&&0!==(1&t.mode)&&0===(128&t.flags))ha(),ma(),t.flags|=98560,i=!1;else if(i=ua(t),null!==n&&null!==n.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[hs]=t}else ma(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Vl(t),i=!1}else null!==aa&&(ic(aa),aa=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Za.current)?0===Mo&&(Mo=3):gc())),null!==t.updateQueue&&(t.flags|=4),Vl(t),null);case 4:return $a(),Pl(e,t),null===e&&Un(t.stateNode.containerInfo),Vl(t),null;case 10:return Ca(t.type._context),Vl(t),null;case 19:if(Ss(Za),null===(i=t.memoizedState))return Vl(t),null;if(n=0!==(128&t.flags),null===(o=i.rendering))if(n)Kl(i,!1);else{if(0!==Mo||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=ei(e))){for(t.flags|=128,Kl(i,!1),null!==(n=o.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(i=r).flags&=14680066,null===(o=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ns(Za,1&Za.current|2),t.child}e=e.sibling}null!==i.tail&&Je()>Uo&&(t.flags|=128,n=!0,Kl(i,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=ei(o))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Kl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!sa)return Vl(t),null}else 2*Je()-i.renderingStartTime>Uo&&1073741824!==r&&(t.flags|=128,n=!0,Kl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(null!==(r=i.last)?r.sibling=o:t.child=o,i.last=o)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Je(),t.sibling=null,r=Za.current,Ns(Za,n?1&r|2:1&r),t):(Vl(t),null);case 22:case 23:return uc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Do)&&(Vl(t),6&t.subtreeFlags&&(t.flags|=8192)):Vl(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Gl(e,t){switch(ta(t),t.tag){case 1:return Ds(t.type)&&As(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $a(),Ss(Es),Ss(Ts),ri(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Qa(t),null;case 13:if(Ss(Za),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ma()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ss(Za),null;case 4:return $a(),null;case 10:return Ca(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Ol=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Pl=function(){},Dl=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,qa(Va.current);var a,i=null;switch(r){case"input":s=X(e,s),n=X(e,n),i=[];break;case"select":s=F({},s,{value:void 0}),n=F({},n,{value:void 0}),i=[];break;case"textarea":s=ne(e,s),n=ne(e,n),i=[];break;default:"function"!==typeof s.onClick&&"function"===typeof n.onClick&&(e.onclick=Zn)}for(d in ye(r,n),r=null,s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&null!=s[d])if("style"===d){var o=s[d];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(l.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(o=null!=s?s[d]:void 0,n.hasOwnProperty(d)&&c!==o&&(null!=c||null!=o))if("style"===d)if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(i||(i=[]),i.push(d,r)),r=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,o=o?o.__html:void 0,null!=c&&o!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(l.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&In("scroll",e),i||o===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},Al=function(e,t,r,n){r!==n&&(t.flags|=4)};var ql=!1,Xl=!1,$l="function"===typeof WeakSet?WeakSet:Set,Jl=null;function Ql(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){kc(e,t,n)}else r.current=null}function Zl(e,t,r){try{r()}catch(n){kc(e,t,n)}}var eo=!1;function to(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var s=n=n.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,void 0!==a&&Zl(t,r,a)}s=s.next}while(s!==n)}}function ro(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function no(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function so(e){var t=e.alternate;null!==t&&(e.alternate=null,so(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hs],delete t[ms],delete t[gs],delete t[fs],delete t[xs])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ao(e){return 5===e.tag||3===e.tag||4===e.tag}function io(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ao(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lo(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Zn));else if(4!==n&&null!==(e=e.child))for(lo(e,t,r),e=e.sibling;null!==e;)lo(e,t,r),e=e.sibling}function oo(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(oo(e,t,r),e=e.sibling;null!==e;)oo(e,t,r),e=e.sibling}var co=null,uo=!1;function ho(e,t,r){for(r=r.child;null!==r;)mo(e,t,r),r=r.sibling}function mo(e,t,r){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(st,r)}catch(l){}switch(r.tag){case 5:Xl||Ql(r,t);case 6:var n=co,s=uo;co=null,ho(e,t,r),uo=s,null!==(co=n)&&(uo?(e=co,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):co.removeChild(r.stateNode));break;case 18:null!==co&&(uo?(e=co,r=r.stateNode,8===e.nodeType?os(e.parentNode,r):1===e.nodeType&&os(e,r),Ut(e)):os(co,r.stateNode));break;case 4:n=co,s=uo,co=r.stateNode.containerInfo,uo=!0,ho(e,t,r),co=n,uo=s;break;case 0:case 11:case 14:case 15:if(!Xl&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){s=n=n.next;do{var a=s,i=a.destroy;a=a.tag,void 0!==i&&(0!==(2&a)||0!==(4&a))&&Zl(r,t,i),s=s.next}while(s!==n)}ho(e,t,r);break;case 1:if(!Xl&&(Ql(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){kc(r,t,l)}ho(e,t,r);break;case 21:ho(e,t,r);break;case 22:1&r.mode?(Xl=(n=Xl)||null!==r.memoizedState,ho(e,t,r),Xl=n):ho(e,t,r);break;default:ho(e,t,r)}}function po(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new $l),t.forEach(function(t){var n=Tc.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}}function go(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,l=t,o=l;e:for(;null!==o;){switch(o.tag){case 5:co=o.stateNode,uo=!1;break e;case 3:case 4:co=o.stateNode.containerInfo,uo=!0;break e}o=o.return}if(null===co)throw Error(a(160));mo(i,l,s),co=null,uo=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(d){kc(s,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)fo(t,e),t=t.sibling}function fo(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(go(t,e),xo(e),4&n){try{to(3,e,e.return),ro(3,e)}catch(f){kc(e,e.return,f)}try{to(5,e,e.return)}catch(f){kc(e,e.return,f)}}break;case 1:go(t,e),xo(e),512&n&&null!==r&&Ql(r,r.return);break;case 5:if(go(t,e),xo(e),512&n&&null!==r&&Ql(r,r.return),32&e.flags){var s=e.stateNode;try{he(s,"")}catch(f){kc(e,e.return,f)}}if(4&n&&null!=(s=e.stateNode)){var i=e.memoizedProps,l=null!==r?r.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===o&&"radio"===i.type&&null!=i.name&&J(s,i),be(o,l);var d=be(o,i);for(l=0;l<c.length;l+=2){var u=c[l],h=c[l+1];"style"===u?fe(s,h):"dangerouslySetInnerHTML"===u?ue(s,h):"children"===u?he(s,h):b(s,u,h,d)}switch(o){case"input":Q(s,i);break;case"textarea":ae(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?re(s,!!i.multiple,p,!1):m!==!!i.multiple&&(null!=i.defaultValue?re(s,!!i.multiple,i.defaultValue,!0):re(s,!!i.multiple,i.multiple?[]:"",!1))}s[ms]=i}catch(f){kc(e,e.return,f)}}break;case 6:if(go(t,e),xo(e),4&n){if(null===e.stateNode)throw Error(a(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(f){kc(e,e.return,f)}}break;case 3:if(go(t,e),xo(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(f){kc(e,e.return,f)}break;case 4:default:go(t,e),xo(e);break;case 13:go(t,e),xo(e),8192&(s=e.child).flags&&(i=null!==s.memoizedState,s.stateNode.isHidden=i,!i||null!==s.alternate&&null!==s.alternate.memoizedState||(Ho=Je())),4&n&&po(e);break;case 22:if(u=null!==r&&null!==r.memoizedState,1&e.mode?(Xl=(d=Xl)||u,go(t,e),Xl=d):go(t,e),xo(e),8192&n){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Jl=e,u=e.child;null!==u;){for(h=Jl=u;null!==Jl;){switch(p=(m=Jl).child,m.tag){case 0:case 11:case 14:case 15:to(4,m,m.return);break;case 1:Ql(m,m.return);var g=m.stateNode;if("function"===typeof g.componentWillUnmount){n=m,r=m.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(f){kc(n,r,f)}}break;case 5:Ql(m,m.return);break;case 22:if(null!==m.memoizedState){jo(h);continue}}null!==p?(p.return=m,Jl=p):jo(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{s=h.stateNode,d?"function"===typeof(i=s.style).setProperty?i.setProperty("display","none","important"):i.display="none":(o=h.stateNode,l=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,o.style.display=ge("display",l))}catch(f){kc(e,e.return,f)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(f){kc(e,e.return,f)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:go(t,e),xo(e),4&n&&po(e);case 21:}}function xo(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(ao(r)){var n=r;break e}r=r.return}throw Error(a(160))}switch(n.tag){case 5:var s=n.stateNode;32&n.flags&&(he(s,""),n.flags&=-33),oo(e,io(e),s);break;case 3:case 4:var i=n.stateNode.containerInfo;lo(e,io(e),i);break;default:throw Error(a(161))}}catch(l){kc(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yo(e,t,r){Jl=e,bo(e,t,r)}function bo(e,t,r){for(var n=0!==(1&e.mode);null!==Jl;){var s=Jl,a=s.child;if(22===s.tag&&n){var i=null!==s.memoizedState||ql;if(!i){var l=s.alternate,o=null!==l&&null!==l.memoizedState||Xl;l=ql;var c=Xl;if(ql=i,(Xl=o)&&!c)for(Jl=s;null!==Jl;)o=(i=Jl).child,22===i.tag&&null!==i.memoizedState?wo(s):null!==o?(o.return=i,Jl=o):wo(s);for(;null!==a;)Jl=a,bo(a,t,r),a=a.sibling;Jl=s,ql=l,Xl=c}vo(e)}else 0!==(8772&s.subtreeFlags)&&null!==a?(a.return=s,Jl=a):vo(e)}}function vo(e){for(;null!==Jl;){var t=Jl;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xl||ro(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Xl)if(null===r)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:tl(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Wa(t,i,n);break;case 3:var l=t.updateQueue;if(null!==l){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Wa(t,l,r)}break;case 5:var o=t.stateNode;if(null===r&&4&t.flags){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Ut(h)}}}break;default:throw Error(a(163))}Xl||512&t.flags&&no(t)}catch(m){kc(t,t.return,m)}}if(t===e){Jl=null;break}if(null!==(r=t.sibling)){r.return=t.return,Jl=r;break}Jl=t.return}}function jo(e){for(;null!==Jl;){var t=Jl;if(t===e){Jl=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Jl=r;break}Jl=t.return}}function wo(e){for(;null!==Jl;){var t=Jl;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ro(4,t)}catch(o){kc(t,r,o)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var s=t.return;try{n.componentDidMount()}catch(o){kc(t,s,o)}}var a=t.return;try{no(t)}catch(o){kc(t,a,o)}break;case 5:var i=t.return;try{no(t)}catch(o){kc(t,i,o)}}}catch(o){kc(t,t.return,o)}if(t===e){Jl=null;break}var l=t.sibling;if(null!==l){l.return=t.return,Jl=l;break}Jl=t.return}}var _o,ko=Math.ceil,So=v.ReactCurrentDispatcher,No=v.ReactCurrentOwner,Co=v.ReactCurrentBatchConfig,To=0,Eo=null,Oo=null,Po=0,Do=0,Ao=ks(0),Mo=0,Ro=null,zo=0,Fo=0,Lo=0,Io=null,Bo=null,Ho=0,Uo=1/0,Wo=null,Ko=!1,Vo=null,Yo=null,Go=!1,qo=null,Xo=0,$o=0,Jo=null,Qo=-1,Zo=0;function ec(){return 0!==(6&To)?Je():-1!==Qo?Qo:Qo=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&To)&&0!==Po?Po&-Po:null!==ga.transition?(0===Zo&&(Zo=gt()),Zo):0!==(e=bt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,r,n){if(50<$o)throw $o=0,Jo=null,Error(a(185));xt(e,r,n),0!==(2&To)&&e===Eo||(e===Eo&&(0===(2&To)&&(Fo|=r),4===Mo&&lc(e,Po)),nc(e,n),1===r&&0===To&&0===(1&t.mode)&&(Uo=Je()+500,Is&&Us()))}function nc(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-it(a),l=1<<i,o=s[i];-1===o?0!==(l&r)&&0===(l&n)||(s[i]=mt(l,t)):o<=t&&(e.expiredLanes|=l),a&=~l}}(e,t);var n=ht(e,e===Eo?Po:0);if(0===n)null!==r&&qe(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&qe(r),1===t)0===e.tag?function(e){Is=!0,Hs(e)}(oc.bind(null,e)):Hs(oc.bind(null,e)),is(function(){0===(6&To)&&Us()}),r=null;else{switch(vt(n)){case 1:r=Ze;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=Ec(r,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function sc(e,t){if(Qo=-1,Zo=0,0!==(6&To))throw Error(a(327));var r=e.callbackNode;if(wc()&&e.callbackNode!==r)return null;var n=ht(e,e===Eo?Po:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=fc(e,n);else{t=n;var s=To;To|=2;var i=pc();for(Eo===e&&Po===t||(Wo=null,Uo=Je()+500,hc(e,t));;)try{yc();break}catch(o){mc(e,o)}Na(),So.current=i,To=s,null!==Oo?t=0:(Eo=null,Po=0,t=Mo)}if(0!==t){if(2===t&&(0!==(s=pt(e))&&(n=s,t=ac(e,s))),1===t)throw r=Ro,hc(e,0),lc(e,n),nc(e,Je()),r;if(6===t)lc(e,n);else{if(s=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!ln(a(),s))return!1}catch(l){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=fc(e,n))&&(0!==(i=pt(e))&&(n=i,t=ac(e,i))),1===t))throw r=Ro,hc(e,0),lc(e,n),nc(e,Je()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(a(345));case 2:case 5:jc(e,Bo,Wo);break;case 3:if(lc(e,n),(130023424&n)===n&&10<(t=Ho+500-Je())){if(0!==ht(e,0))break;if(((s=e.suspendedLanes)&n)!==n){ec(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ns(jc.bind(null,e,Bo,Wo),t);break}jc(e,Bo,Wo);break;case 4:if(lc(e,n),(4194240&n)===n)break;for(t=e.eventTimes,s=-1;0<n;){var l=31-it(n);i=1<<l,(l=t[l])>s&&(s=l),n&=~i}if(n=s,10<(n=(120>(n=Je()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*ko(n/1960))-n)){e.timeoutHandle=ns(jc.bind(null,e,Bo,Wo),n);break}jc(e,Bo,Wo);break;default:throw Error(a(329))}}}return nc(e,Je()),e.callbackNode===r?sc.bind(null,e):null}function ac(e,t){var r=Io;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=fc(e,t))&&(t=Bo,Bo=r,null!==t&&ic(t)),e}function ic(e){null===Bo?Bo=e:Bo.push.apply(Bo,e)}function lc(e,t){for(t&=~Lo,t&=~Fo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-it(t),n=1<<r;e[r]=-1,t&=~n}}function oc(e){if(0!==(6&To))throw Error(a(327));wc();var t=ht(e,0);if(0===(1&t))return nc(e,Je()),null;var r=fc(e,t);if(0!==e.tag&&2===r){var n=pt(e);0!==n&&(t=n,r=ac(e,n))}if(1===r)throw r=Ro,hc(e,0),lc(e,t),nc(e,Je()),r;if(6===r)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jc(e,Bo,Wo),nc(e,Je()),null}function cc(e,t){var r=To;To|=1;try{return e(t)}finally{0===(To=r)&&(Uo=Je()+500,Is&&Us())}}function dc(e){null!==qo&&0===qo.tag&&0===(6&To)&&wc();var t=To;To|=1;var r=Co.transition,n=bt;try{if(Co.transition=null,bt=1,e)return e()}finally{bt=n,Co.transition=r,0===(6&(To=t))&&Us()}}function uc(){Do=Ao.current,Ss(Ao)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,ss(r)),null!==Oo)for(r=Oo.return;null!==r;){var n=r;switch(ta(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&As();break;case 3:$a(),Ss(Es),Ss(Ts),ri();break;case 5:Qa(n);break;case 4:$a();break;case 13:case 19:Ss(Za);break;case 10:Ca(n.type._context);break;case 22:case 23:uc()}r=r.return}if(Eo=e,Oo=e=Ac(e.current,null),Po=Do=t,Mo=0,Ro=null,Lo=Fo=zo=0,Bo=Io=null,null!==Pa){for(t=0;t<Pa.length;t++)if(null!==(n=(r=Pa[t]).interleaved)){r.interleaved=null;var s=n.next,a=r.pending;if(null!==a){var i=a.next;a.next=s,n.next=i}r.pending=n}Pa=null}return e}function mc(e,t){for(;;){var r=Oo;try{if(Na(),ni.current=Ji,ci){for(var n=ii.memoizedState;null!==n;){var s=n.queue;null!==s&&(s.pending=null),n=n.next}ci=!1}if(ai=0,oi=li=ii=null,di=!1,ui=0,No.current=null,null===r||null===r.return){Mo=1,Ro=t,Oo=null;break}e:{var i=e,l=r.return,o=r,c=t;if(t=Po,o.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=o,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=gl(l);if(null!==p){p.flags&=-257,fl(p,l,o,0,t),1&p.mode&&pl(i,d,t),c=d;var g=(t=p).updateQueue;if(null===g){var f=new Set;f.add(c),t.updateQueue=f}else g.add(c);break e}if(0===(1&t)){pl(i,d,t),gc();break e}c=Error(a(426))}else if(sa&&1&o.mode){var x=gl(l);if(null!==x){0===(65536&x.flags)&&(x.flags|=256),fl(x,l,o,0,t),pa(ol(c,o));break e}}i=c=ol(c,o),4!==Mo&&(Mo=2),null===Io?Io=[i]:Io.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Ha(i,hl(0,c,t));break e;case 1:o=c;var y=i.type,b=i.stateNode;if(0===(128&i.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Yo||!Yo.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,Ha(i,ml(i,o,t));break e}}i=i.return}while(null!==i)}vc(r)}catch(v){t=v,Oo===r&&null!==r&&(Oo=r=r.return);continue}break}}function pc(){var e=So.current;return So.current=Ji,null===e?Ji:e}function gc(){0!==Mo&&3!==Mo&&2!==Mo||(Mo=4),null===Eo||0===(268435455&zo)&&0===(268435455&Fo)||lc(Eo,Po)}function fc(e,t){var r=To;To|=2;var n=pc();for(Eo===e&&Po===t||(Wo=null,hc(e,t));;)try{xc();break}catch(s){mc(e,s)}if(Na(),To=r,So.current=n,null!==Oo)throw Error(a(261));return Eo=null,Po=0,Mo}function xc(){for(;null!==Oo;)bc(Oo)}function yc(){for(;null!==Oo&&!Xe();)bc(Oo)}function bc(e){var t=_o(e.alternate,e,Do);e.memoizedProps=e.pendingProps,null===t?vc(e):Oo=t,No.current=null}function vc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Yl(r,t,Do)))return void(Oo=r)}else{if(null!==(r=Gl(r,t)))return r.flags&=32767,void(Oo=r);if(null===e)return Mo=6,void(Oo=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Oo=t);Oo=t=e}while(null!==t);0===Mo&&(Mo=5)}function jc(e,t,r){var n=bt,s=Co.transition;try{Co.transition=null,bt=1,function(e,t,r,n){do{wc()}while(null!==qo);if(0!==(6&To))throw Error(a(327));r=e.finishedWork;var s=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-it(r),a=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~a}}(e,i),e===Eo&&(Oo=Eo=null,Po=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Go||(Go=!0,Ec(tt,function(){return wc(),null})),i=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||i){i=Co.transition,Co.transition=null;var l=bt;bt=1;var o=To;To|=4,No.current=null,function(e,t){if(es=Kt,mn(e=hn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch(j){r=null;break e}var l=0,o=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var p;h!==r||0!==s&&3!==h.nodeType||(o=l+s),h!==i||0!==n&&3!==h.nodeType||(c=l+n),3===h.nodeType&&(l+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===r&&++d===s&&(o=l),m===i&&++u===n&&(c=l),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}r=-1===o||-1===c?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ts={focusedElem:e,selectionRange:r},Kt=!1,Jl=t;null!==Jl;)if(e=(t=Jl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jl=e;else for(;null!==Jl;){t=Jl;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var f=g.memoizedProps,x=g.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?f:tl(t.type,f),x);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(a(163))}}catch(j){kc(t,t.return,j)}if(null!==(e=t.sibling)){e.return=t.return,Jl=e;break}Jl=t.return}g=eo,eo=!1}(e,r),fo(r,e),pn(ts),Kt=!!es,ts=es=null,e.current=r,yo(r,e,s),$e(),To=o,bt=l,Co.transition=i}else e.current=r;if(Go&&(Go=!1,qo=e,Xo=s),i=e.pendingLanes,0===i&&(Yo=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),nc(e,Je()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Ko)throw Ko=!1,e=Vo,Vo=null,e;0!==(1&Xo)&&0!==e.tag&&wc(),i=e.pendingLanes,0!==(1&i)?e===Jo?$o++:($o=0,Jo=e):$o=0,Us()}(e,t,r,n)}finally{Co.transition=s,bt=n}return null}function wc(){if(null!==qo){var e=vt(Xo),t=Co.transition,r=bt;try{if(Co.transition=null,bt=16>e?16:e,null===qo)var n=!1;else{if(e=qo,qo=null,Xo=0,0!==(6&To))throw Error(a(331));var s=To;for(To|=4,Jl=e.current;null!==Jl;){var i=Jl,l=i.child;if(0!==(16&Jl.flags)){var o=i.deletions;if(null!==o){for(var c=0;c<o.length;c++){var d=o[c];for(Jl=d;null!==Jl;){var u=Jl;switch(u.tag){case 0:case 11:case 15:to(8,u,i)}var h=u.child;if(null!==h)h.return=u,Jl=h;else for(;null!==Jl;){var m=(u=Jl).sibling,p=u.return;if(so(u),u===d){Jl=null;break}if(null!==m){m.return=p,Jl=m;break}Jl=p}}}var g=i.alternate;if(null!==g){var f=g.child;if(null!==f){g.child=null;do{var x=f.sibling;f.sibling=null,f=x}while(null!==f)}}Jl=i}}if(0!==(2064&i.subtreeFlags)&&null!==l)l.return=i,Jl=l;else e:for(;null!==Jl;){if(0!==(2048&(i=Jl).flags))switch(i.tag){case 0:case 11:case 15:to(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,Jl=y;break e}Jl=i.return}}var b=e.current;for(Jl=b;null!==Jl;){var v=(l=Jl).child;if(0!==(2064&l.subtreeFlags)&&null!==v)v.return=l,Jl=v;else e:for(l=b;null!==Jl;){if(0!==(2048&(o=Jl).flags))try{switch(o.tag){case 0:case 11:case 15:ro(9,o)}}catch(w){kc(o,o.return,w)}if(o===l){Jl=null;break e}var j=o.sibling;if(null!==j){j.return=o.return,Jl=j;break e}Jl=o.return}}if(To=s,Us(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(st,e)}catch(w){}n=!0}return n}finally{bt=r,Co.transition=t}}return!1}function _c(e,t,r){e=Ia(e,t=hl(0,t=ol(r,t),1),1),t=ec(),null!==e&&(xt(e,1,t),nc(e,t))}function kc(e,t,r){if(3===e.tag)_c(e,e,r);else for(;null!==t;){if(3===t.tag){_c(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Yo||!Yo.has(n))){t=Ia(t,e=ml(t,e=ol(r,e),1),1),e=ec(),null!==t&&(xt(t,1,e),nc(t,e));break}}t=t.return}}function Sc(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&r,Eo===e&&(Po&r)===r&&(4===Mo||3===Mo&&(130023424&Po)===Po&&500>Je()-Ho?hc(e,0):Lo|=r),nc(e,t)}function Nc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var r=ec();null!==(e=Ma(e,t))&&(xt(e,t,r),nc(e,r))}function Cc(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Nc(e,r)}function Tc(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;null!==s&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(a(314))}null!==n&&n.delete(t),Nc(e,r)}function Ec(e,t){return Ge(e,t)}function Oc(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,r,n){return new Oc(e,t,r,n)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ac(e,t){var r=e.alternate;return null===r?((r=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Mc(e,t,r,n,s,i){var l=2;if(n=e,"function"===typeof e)Dc(e)&&(l=1);else if("string"===typeof e)l=5;else e:switch(e){case _:return Rc(r.children,s,i,t);case k:l=8,s|=8;break;case S:return(e=Pc(12,r,t,2|s)).elementType=S,e.lanes=i,e;case E:return(e=Pc(13,r,t,s)).elementType=E,e.lanes=i,e;case O:return(e=Pc(19,r,t,s)).elementType=O,e.lanes=i,e;case A:return zc(r,s,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:l=10;break e;case C:l=9;break e;case T:l=11;break e;case P:l=14;break e;case D:l=16,n=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(l,r,t,s)).elementType=e,t.type=n,t.lanes=i,t}function Rc(e,t,r,n){return(e=Pc(7,e,n,t)).lanes=r,e}function zc(e,t,r,n){return(e=Pc(22,e,n,t)).elementType=A,e.lanes=r,e.stateNode={isHidden:!1},e}function Fc(e,t,r){return(e=Pc(6,e,null,t)).lanes=r,e}function Lc(e,t,r){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ic(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ft(0),this.expirationTimes=ft(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ft(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Bc(e,t,r,n,s,a,i,l,o){return e=new Ic(e,t,r,l,o),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},za(a),e}function Hc(e){if(!e)return Cs;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ds(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var r=e.type;if(Ds(r))return Rs(e,r,t)}return t}function Uc(e,t,r,n,s,a,i,l,o){return(e=Bc(r,n,!0,e,0,a,0,l,o)).context=Hc(null),r=e.current,(a=La(n=ec(),s=tc(r))).callback=void 0!==t&&null!==t?t:null,Ia(r,a,s),e.current.lanes=s,xt(e,s,n),nc(e,n),e}function Wc(e,t,r,n){var s=t.current,a=ec(),i=tc(s);return r=Hc(r),null===t.context?t.context=r:t.pendingContext=r,(t=La(a,i)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Ia(s,t,i))&&(rc(e,s,i,a),Ba(e,s,i)),i}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Yc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}_o=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Es.current)yl=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return yl=!1,function(e,t,r){switch(t.tag){case 3:Tl(t),ma();break;case 5:Ja(t);break;case 1:Ds(t.type)&&zs(t);break;case 4:Xa(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Ns(wa,n._currentValue),n._currentValue=s;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Ns(Za,1&Za.current),t.flags|=128,null):0!==(r&t.child.childLanes)?zl(e,t,r):(Ns(Za,1&Za.current),null!==(e=Wl(e,t,r))?e.sibling:null);Ns(Za,1&Za.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(128&e.flags)){if(n)return Hl(e,t,r);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ns(Za,Za.current),n)break;return null;case 22:case 23:return t.lanes=0,_l(e,t,r)}return Wl(e,t,r)}(e,t,r);yl=0!==(131072&e.flags)}else yl=!1,sa&&0!==(1048576&t.flags)&&Zs(t,Ys,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Ul(e,t),e=t.pendingProps;var s=Ps(t,Ts.current);Ea(t,r),s=gi(null,t,n,e,s,r);var i=fi();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ds(n)?(i=!0,zs(t)):i=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,za(t),s.updater=nl,t.stateNode=s,s._reactInternals=t,ll(t,n,e,r),t=Cl(null,t,n,!0,i,r)):(t.tag=0,sa&&i&&ea(t),bl(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Ul(e,t),e=t.pendingProps,n=(s=n._init)(n._payload),t.type=n,s=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===P)return 14}return 2}(n),e=tl(n,e),s){case 0:t=Sl(null,t,n,e,r);break e;case 1:t=Nl(null,t,n,e,r);break e;case 11:t=vl(null,t,n,e,r);break e;case 14:t=jl(null,t,n,tl(n.type,e),r);break e}throw Error(a(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,Sl(e,t,n,s=t.elementType===n?s:tl(n,s),r);case 1:return n=t.type,s=t.pendingProps,Nl(e,t,n,s=t.elementType===n?s:tl(n,s),r);case 3:e:{if(Tl(t),null===e)throw Error(a(387));n=t.pendingProps,s=(i=t.memoizedState).element,Fa(e,t),Ua(t,n,null,r);var l=t.memoizedState;if(n=l.element,i.isDehydrated){if(i={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=El(e,t,n,r,s=ol(Error(a(423)),t));break e}if(n!==s){t=El(e,t,n,r,s=ol(Error(a(424)),t));break e}for(na=cs(t.stateNode.containerInfo.firstChild),ra=t,sa=!0,aa=null,r=ja(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(ma(),n===s){t=Wl(e,t,r);break e}bl(e,t,n,r)}t=t.child}return t;case 5:return Ja(t),null===e&&ca(t),n=t.type,s=t.pendingProps,i=null!==e?e.memoizedProps:null,l=s.children,rs(n,s)?l=null:null!==i&&rs(n,i)&&(t.flags|=32),kl(e,t),bl(e,t,l,r),t.child;case 6:return null===e&&ca(t),null;case 13:return zl(e,t,r);case 4:return Xa(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=va(t,null,n,r):bl(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,vl(e,t,n,s=t.elementType===n?s:tl(n,s),r);case 7:return bl(e,t,t.pendingProps,r),t.child;case 8:case 12:return bl(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,l=s.value,Ns(wa,n._currentValue),n._currentValue=l,null!==i)if(ln(i.value,l)){if(i.children===s.children&&!Es.current){t=Wl(e,t,r);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var o=i.dependencies;if(null!==o){l=i.child;for(var c=o.firstContext;null!==c;){if(c.context===n){if(1===i.tag){(c=La(-1,r&-r)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,null!==(c=i.alternate)&&(c.lanes|=r),Ta(i.return,r,t),o.lanes|=r;break}c=c.next}}else if(10===i.tag)l=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(l=i.return))throw Error(a(341));l.lanes|=r,null!==(o=l.alternate)&&(o.lanes|=r),Ta(l,r,t),l=i.sibling}else l=i.child;if(null!==l)l.return=i;else for(l=i;null!==l;){if(l===t){l=null;break}if(null!==(i=l.sibling)){i.return=l.return,l=i;break}l=l.return}i=l}bl(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Ea(t,r),n=n(s=Oa(s)),t.flags|=1,bl(e,t,n,r),t.child;case 14:return s=tl(n=t.type,t.pendingProps),jl(e,t,n,s=tl(n.type,s),r);case 15:return wl(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:tl(n,s),Ul(e,t),t.tag=1,Ds(n)?(e=!0,zs(t)):e=!1,Ea(t,r),al(t,n,s),ll(t,n,s,r),Cl(null,t,n,!0,e,r);case 19:return Hl(e,t,r);case 22:return _l(e,t,r)}throw Error(a(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function qc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function Zc(e,t,r,n,s){var a=r._reactRootContainer;if(a){var i=a;if("function"===typeof s){var l=s;s=function(){var e=Kc(i);l.call(e)}}Wc(t,i,e,s)}else i=function(e,t,r,n,s){if(s){if("function"===typeof n){var a=n;n=function(){var e=Kc(i);a.call(e)}}var i=Uc(t,n,e,0,null,!1,0,"",Qc);return e._reactRootContainer=i,e[ps]=i.current,Un(8===e.nodeType?e.parentNode:e),dc(),i}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof n){var l=n;n=function(){var e=Kc(o);l.call(e)}}var o=Bc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=o,e[ps]=o.current,Un(8===e.nodeType?e.parentNode:e),dc(function(){Wc(t,o,r,n)}),o}(r,t,e,s,n);return Kc(i)}Xc.prototype.render=qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wc(e,t,null,null)},Xc.prototype.unmount=qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Wc(null,e,null,null)}),t[ps]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var r=0;r<At.length&&0!==t&&t<At[r].priority;r++);At.splice(r,0,e),0===r&&Ft(e)}},jt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ut(t.pendingLanes);0!==r&&(yt(t,1|r),nc(t,Je()),0===(6&To)&&(Uo=Je()+500,Us()))}break;case 13:dc(function(){var t=Ma(e,1);if(null!==t){var r=ec();rc(t,e,1,r)}}),Yc(e,1)}},wt=function(e){if(13===e.tag){var t=Ma(e,134217728);if(null!==t)rc(t,e,134217728,ec());Yc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),r=Ma(e,t);if(null!==r)rc(r,e,t,ec());Yc(e,t)}},kt=function(){return bt},St=function(e,t){var r=bt;try{return bt=e,t()}finally{bt=r}},we=function(e,t,r){switch(t){case"input":if(Q(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=js(n);if(!s)throw Error(a(90));G(n),Q(n,s)}}}break;case"textarea":ae(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Te=cc,Ee=dc;var ed={usingClientEntryPoint:!1,Events:[bs,vs,js,Ne,Ce,cc]},td={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nd.isDisabled&&nd.supportsFiber)try{st=nd.inject(rd),at=nd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(a(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!$c(e))throw Error(a(299));var r=!1,n="",s=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Bc(e,1,!1,null,0,r,0,n,s),e[ps]=t.current,Un(8===e.nodeType?e.parentNode:e),new qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,r){if(!Jc(t))throw Error(a(200));return Zc(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!$c(e))throw Error(a(405));var n=null!=r&&r.hydratedSources||null,s=!1,i="",l=Gc;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(s=!0),void 0!==r.identifierPrefix&&(i=r.identifierPrefix),void 0!==r.onRecoverableError&&(l=r.onRecoverableError)),t=Uc(t,null,e,1,null!=r?r:null,s,0,i,l),e[ps]=t.current,Un(e),n)for(e=0;e<n.length;e++)s=(s=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Xc(t)},t.render=function(e,t,r){if(!Jc(t))throw Error(a(200));return Zc(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(dc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[ps]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Jc(r))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Zc(e,t,r,!1,n)},t.version="18.3.1-next-f1338f8080-20240426"},740:e=>{"use strict";e.exports=function(e,t,r,n,s,a,i,l){if(!e){var o;if(void 0===t)o=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,n,s,a,i,l],d=0;(o=new Error(t.replace(/%s/g,function(){return c[d++]}))).name="Invariant Violation"}throw o.framesToPop=1,o}}},853:(e,t,r)=>{"use strict";e.exports=r(234)},950:(e,t,r)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(730)}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,s){if(1&s&&(n=this(n)),8&s)return n;if("object"===typeof n&&n){if(4&s&&n.__esModule)return n;if(16&s&&"function"===typeof n.then)return n}var a=Object.create(null);r.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var l=2&s&&n;("object"==typeof l||"function"==typeof l)&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach(e=>i[e]=()=>n[e]);return i.default=()=>n,r.d(a,i),a}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};r.r(e),r.d(e,{hasBrowserEnv:()=>Kr,hasStandardBrowserEnv:()=>Yr,hasStandardBrowserWebWorkerEnv:()=>Gr,navigator:()=>Vr,origin:()=>qr});var t,n=r(43),s=r.t(n,2),a=r(391);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const l="popstate";function o(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function c(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(js){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function u(e,t,r,n){return void 0===r&&(r=null),i({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:r,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function h(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function m(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function p(e,r,n,s){void 0===s&&(s={});let{window:a=document.defaultView,v5Compat:c=!1}=s,m=a.history,p=t.Pop,g=null,f=x();function x(){return(m.state||{idx:null}).idx}function y(){p=t.Pop;let e=x(),r=null==e?null:e-f;f=e,g&&g({action:p,location:v.location,delta:r})}function b(e){let t="null"!==a.location.origin?a.location.origin:a.location.href,r="string"===typeof e?e:h(e);return r=r.replace(/ $/,"%20"),o(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}null==f&&(f=0,m.replaceState(i({},m.state,{idx:f}),""));let v={get action(){return p},get location(){return e(a,m)},listen(e){if(g)throw new Error("A history only accepts one active listener");return a.addEventListener(l,y),g=e,()=>{a.removeEventListener(l,y),g=null}},createHref:e=>r(a,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,r){p=t.Push;let s=u(v.location,e,r);n&&n(s,e),f=x()+1;let i=d(s,f),l=v.createHref(s);try{m.pushState(i,"",l)}catch(o){if(o instanceof DOMException&&"DataCloneError"===o.name)throw o;a.location.assign(l)}c&&g&&g({action:p,location:v.location,delta:1})},replace:function(e,r){p=t.Replace;let s=u(v.location,e,r);n&&n(s,e),f=x();let a=d(s,f),i=v.createHref(s);m.replaceState(a,"",i),c&&g&&g({action:p,location:v.location,delta:0})},go:e=>m.go(e)};return v}var g;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(g||(g={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function f(e,t,r){return void 0===r&&(r="/"),x(e,t,r,!1)}function x(e,t,r,n){let s=P(("string"===typeof t?m(t):t).pathname||"/",r);if(null==s)return null;let a=y(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r]);return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let i=null;for(let l=0;null==i&&l<a.length;++l){let e=O(s);i=T(a[l],e,n)}return i}function y(e,t,r,n){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===n&&(n="");let s=(e,s,a)=>{let i={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};i.relativePath.startsWith("/")&&(o(i.relativePath.startsWith(n),'Absolute route path "'+i.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(n.length));let l=z([n,i.relativePath]),c=r.concat(i);e.children&&e.children.length>0&&(o(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),y(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:C(l,e.index),routesMeta:c})};return e.forEach((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let n of b(e.path))s(e,t,n);else s(e,t)}),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(0===n.length)return s?[a,""]:[a];let i=b(n.join("/")),l=[];return l.push(...i.map(e=>""===e?a:[a,e].join("/"))),s&&l.push(...i),l.map(t=>e.startsWith("/")&&""===t?"/":t)}const v=/^:[\w-]+$/,j=3,w=2,_=1,k=10,S=-2,N=e=>"*"===e;function C(e,t){let r=e.split("/"),n=r.length;return r.some(N)&&(n+=S),t&&(n+=w),r.filter(e=>!N(e)).reduce((e,t)=>e+(v.test(t)?j:""===t?_:k),n)}function T(e,t,r){void 0===r&&(r=!1);let{routesMeta:n}=e,s={},a="/",i=[];for(let l=0;l<n.length;++l){let e=n[l],o=l===n.length-1,c="/"===a?t:t.slice(a.length)||"/",d=E({path:e.relativePath,caseSensitive:e.caseSensitive,end:o},c),u=e.route;if(!d&&o&&r&&!n[n.length-1].route.index&&(d=E({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(s,d.params),i.push({params:s,pathname:z([a,d.pathname]),pathnameBase:F(z([a,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(a=z([a,d.pathnameBase]))}return i}function E(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);c("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(n.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let a=new RegExp(s,t?void 0:"i");return[a,n]}(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((e,t,r)=>{let{paramName:n,isOptional:s}=t;if("*"===n){let e=l[r]||"";i=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const o=l[r];return e[n]=s&&!o?void 0:(o||"").replace(/%2F/g,"/"),e},{}),pathname:a,pathnameBase:i,pattern:e}}function O(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return c(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function D(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function A(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function M(e,t){let r=A(e);return t?r.map((e,t)=>t===r.length-1?e.pathname:e.pathnameBase):r.map(e=>e.pathnameBase)}function R(e,t,r,n){let s;void 0===n&&(n=!1),"string"===typeof e?s=m(e):(s=i({},e),o(!s.pathname||!s.pathname.includes("?"),D("?","pathname","search",s)),o(!s.pathname||!s.pathname.includes("#"),D("#","pathname","hash",s)),o(!s.search||!s.search.includes("#"),D("#","search","hash",s)));let a,l=""===e||""===s.pathname,c=l?"/":s.pathname;if(null==c)a=r;else{let e=t.length-1;if(!n&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}a=e>=0?t[e]:"/"}let d=function(e,t){void 0===t&&(t="/");let{pathname:r,search:n="",hash:s=""}="string"===typeof e?m(e):e,a=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:a,search:L(n),hash:I(s)}}(s,a),u=c&&"/"!==c&&c.endsWith("/"),h=(l||"."===c)&&r.endsWith("/");return d.pathname.endsWith("/")||!u&&!h||(d.pathname+="/"),d}const z=e=>e.join("/").replace(/\/\/+/g,"/"),F=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),L=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",I=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function B(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const H=["post","put","patch","delete"],U=(new Set(H),["get",...H]);new Set(U),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W.apply(this,arguments)}const K=n.createContext(null);const V=n.createContext(null);const Y=n.createContext(null);const G=n.createContext(null);const q=n.createContext({outlet:null,matches:[],isDataRoute:!1});const X=n.createContext(null);function $(){return null!=n.useContext(G)}function J(){return $()||o(!1),n.useContext(G).location}function Q(e){n.useContext(Y).static||n.useLayoutEffect(e)}function Z(){let{isDataRoute:e}=n.useContext(q);return e?function(){let{router:e}=de(oe.UseNavigateStable),t=he(ce.UseNavigateStable),r=n.useRef(!1);Q(()=>{r.current=!0});let s=n.useCallback(function(n,s){void 0===s&&(s={}),r.current&&("number"===typeof n?e.navigate(n):e.navigate(n,W({fromRouteId:t},s)))},[e,t]);return s}():function(){$()||o(!1);let e=n.useContext(K),{basename:t,future:r,navigator:s}=n.useContext(Y),{matches:a}=n.useContext(q),{pathname:i}=J(),l=JSON.stringify(M(a,r.v7_relativeSplatPath)),c=n.useRef(!1);Q(()=>{c.current=!0});let d=n.useCallback(function(r,n){if(void 0===n&&(n={}),!c.current)return;if("number"===typeof r)return void s.go(r);let a=R(r,JSON.parse(l),i,"path"===n.relative);null==e&&"/"!==t&&(a.pathname="/"===a.pathname?t:z([t,a.pathname])),(n.replace?s.replace:s.push)(a,n.state,n)},[t,s,l,i,e]);return d}()}function ee(){let{matches:e}=n.useContext(q),t=e[e.length-1];return t?t.params:{}}function te(e,t){let{relative:r}=void 0===t?{}:t,{future:s}=n.useContext(Y),{matches:a}=n.useContext(q),{pathname:i}=J(),l=JSON.stringify(M(a,s.v7_relativeSplatPath));return n.useMemo(()=>R(e,JSON.parse(l),i,"path"===r),[e,l,i,r])}function re(e,r,s,a){$()||o(!1);let{navigator:i}=n.useContext(Y),{matches:l}=n.useContext(q),c=l[l.length-1],d=c?c.params:{},u=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let h,p=J();if(r){var g;let e="string"===typeof r?m(r):r;"/"===u||(null==(g=e.pathname)?void 0:g.startsWith(u))||o(!1),h=e}else h=p;let x=h.pathname||"/",y=x;if("/"!==u){let e=u.replace(/^\//,"").split("/");y="/"+x.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=f(e,{pathname:y});let v=le(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:z([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:z([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,s,a);return r&&v?n.createElement(G.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:t.Pop}},v):v}function ne(){let e=function(){var e;let t=n.useContext(X),r=ue(ce.UseRouteError),s=he(ce.UseRouteError);if(void 0!==t)return t;return null==(e=r.errors)?void 0:e[s]}(),t=B(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s};return n.createElement(n.Fragment,null,n.createElement("h2",null,"Unexpected Application Error!"),n.createElement("h3",{style:{fontStyle:"italic"}},t),r?n.createElement("pre",{style:a},r):null,null)}const se=n.createElement(ne,null);class ae extends n.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?n.createElement(q.Provider,{value:this.props.routeContext},n.createElement(X.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ie(e){let{routeContext:t,match:r,children:s}=e,a=n.useContext(K);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),n.createElement(q.Provider,{value:t},s)}function le(e,t,r,s){var a;if(void 0===t&&(t=[]),void 0===r&&(r=null),void 0===s&&(s=null),null==e){var i;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(i=s)&&i.v7_partialHydration&&0===t.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let l=e,c=null==(a=r)?void 0:a.errors;if(null!=c){let e=l.findIndex(e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id]));e>=0||o(!1),l=l.slice(0,Math.min(l.length,e+1))}let d=!1,u=-1;if(r&&s&&s.v7_partialHydration)for(let n=0;n<l.length;n++){let e=l[n];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=n),e.route.id){let{loaderData:t,errors:n}=r,s=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||s){d=!0,l=u>=0?l.slice(0,u+1):[l[0]];break}}}return l.reduceRight((e,s,a)=>{let i,o=!1,h=null,m=null;var p;r&&(i=c&&s.route.id?c[s.route.id]:void 0,h=s.route.errorElement||se,d&&(u<0&&0===a?(p="route-fallback",!1||me[p]||(me[p]=!0),o=!0,m=null):u===a&&(o=!0,m=s.route.hydrateFallbackElement||null)));let g=t.concat(l.slice(0,a+1)),f=()=>{let t;return t=i?h:o?m:s.route.Component?n.createElement(s.route.Component,null):s.route.element?s.route.element:e,n.createElement(ie,{match:s,routeContext:{outlet:e,matches:g,isDataRoute:null!=r},children:t})};return r&&(s.route.ErrorBoundary||s.route.errorElement||0===a)?n.createElement(ae,{location:r.location,revalidation:r.revalidation,component:h,error:i,children:f(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):f()},null)}var oe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(oe||{}),ce=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ce||{});function de(e){let t=n.useContext(K);return t||o(!1),t}function ue(e){let t=n.useContext(V);return t||o(!1),t}function he(e){let t=function(){let e=n.useContext(q);return e||o(!1),e}(),r=t.matches[t.matches.length-1];return r.route.id||o(!1),r.route.id}const me={};function pe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}s.startTransition;function ge(e){let{to:t,replace:r,state:s,relative:a}=e;$()||o(!1);let{future:i,static:l}=n.useContext(Y),{matches:c}=n.useContext(q),{pathname:d}=J(),u=Z(),h=R(t,M(c,i.v7_relativeSplatPath),d,"path"===a),m=JSON.stringify(h);return n.useEffect(()=>u(JSON.parse(m),{replace:r,state:s,relative:a}),[u,m,a,r,s]),null}function fe(e){o(!1)}function xe(e){let{basename:r="/",children:s=null,location:a,navigationType:i=t.Pop,navigator:l,static:c=!1,future:d}=e;$()&&o(!1);let u=r.replace(/^\/*/,"/"),h=n.useMemo(()=>({basename:u,navigator:l,static:c,future:W({v7_relativeSplatPath:!1},d)}),[u,d,l,c]);"string"===typeof a&&(a=m(a));let{pathname:p="/",search:g="",hash:f="",state:x=null,key:y="default"}=a,b=n.useMemo(()=>{let e=P(p,u);return null==e?null:{location:{pathname:e,search:g,hash:f,state:x,key:y},navigationType:i}},[u,p,g,f,x,y,i]);return null==b?null:n.createElement(Y.Provider,{value:h},n.createElement(G.Provider,{children:s,value:b}))}function ye(e){let{children:t,location:r}=e;return re(be(t),r)}new Promise(()=>{});n.Component;function be(e,t){void 0===t&&(t=[]);let r=[];return n.Children.forEach(e,(e,s)=>{if(!n.isValidElement(e))return;let a=[...t,s];if(e.type===n.Fragment)return void r.push.apply(r,be(e.props.children,a));e.type!==fe&&o(!1),e.props.index&&e.props.children&&o(!1);let i={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=be(e.props.children,a)),r.push(i)}),r}var ve=r(950),je=r.t(ve,2);function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},we.apply(this,arguments)}function _e(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}function ke(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(e=>[r,e]):[[r,n]])},[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Se=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(js){}new Map;const Ne=s.startTransition;je.flushSync,s.useId;function Ce(e){let{basename:t,children:r,future:s,window:a}=e,i=n.useRef();var l;null==i.current&&(i.current=(void 0===(l={window:a,v5Compat:!0})&&(l={}),p(function(e,t){let{pathname:r,search:n,hash:s}=e.location;return u("",{pathname:r,search:n,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:h(t)},null,l)));let o=i.current,[c,d]=n.useState({action:o.action,location:o.location}),{v7_startTransition:m}=s||{},g=n.useCallback(e=>{m&&Ne?Ne(()=>d(e)):d(e)},[d,m]);return n.useLayoutEffect(()=>o.listen(g),[o,g]),n.useEffect(()=>pe(s),[s]),n.createElement(xe,{basename:t,children:r,location:c.location,navigationType:c.action,navigator:o,future:s})}const Te="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ee=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Oe=n.forwardRef(function(e,t){let r,{onClick:s,relative:a,reloadDocument:i,replace:l,state:c,target:d,to:u,preventScrollReset:m,viewTransition:p}=e,g=_e(e,Se),{basename:f}=n.useContext(Y),x=!1;if("string"===typeof u&&Ee.test(u)&&(r=u,Te))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),r=P(t.pathname,f);t.origin===e.origin&&null!=r?u=r+t.search+t.hash:x=!0}catch(js){}let y=function(e,t){let{relative:r}=void 0===t?{}:t;$()||o(!1);let{basename:s,navigator:a}=n.useContext(Y),{hash:i,pathname:l,search:c}=te(e,{relative:r}),d=l;return"/"!==s&&(d="/"===l?s:z([s,l])),a.createHref({pathname:d,search:c,hash:i})}(u,{relative:a}),b=function(e,t){let{target:r,replace:s,state:a,preventScrollReset:i,relative:l,viewTransition:o}=void 0===t?{}:t,c=Z(),d=J(),u=te(e,{relative:l});return n.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let r=void 0!==s?s:h(d)===h(u);c(e,{replace:r,state:a,preventScrollReset:i,relative:l,viewTransition:o})}},[d,c,u,s,a,r,e,i,l,o])}(u,{replace:l,state:c,target:d,preventScrollReset:m,relative:a,viewTransition:p});return n.createElement("a",we({},g,{href:r||y,onClick:x||i?s:function(e){s&&s(e),e.defaultPrevented||b(e)},ref:t,target:d}))});var Pe,De;function Ae(e){let t=n.useRef(ke(e)),r=n.useRef(!1),s=J(),a=n.useMemo(()=>function(e,t){let r=ke(e);return t&&t.forEach((e,n)=>{r.has(n)||t.getAll(n).forEach(e=>{r.append(n,e)})}),r}(s.search,r.current?null:t.current),[s.search]),i=Z(),l=n.useCallback((e,t)=>{const n=ke("function"===typeof e?e(a):e);r.current=!0,i("?"+n,t)},[i,a]);return[a,l]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Pe||(Pe={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(De||(De={}));function Me(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function ze(e){var t=function(e,t){if("object"!=Re(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Re(t)?t:t+""}function Fe(e,t,r){return(t=ze(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(r),!0).forEach(function(t){Fe(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Be=r(366),He=r.n(Be),Ue=r(740),We=r.n(Ue),Ke=r(324),Ve=r.n(Ke);const Ye=["children"],Ge=["children"];var qe,Xe,$e=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))($e||{}),Je={rel:["amphtml","canonical","alternate"]},Qe={type:["application/ld+json"]},Ze={charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]},et=Object.values($e),tt={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},rt=Object.entries(tt).reduce((e,t)=>{let[r,n]=t;return e[n]=r,e},{}),nt="data-rh",st="defaultTitle",at="defer",it="encodeSpecialCharacters",lt="onChangeClientState",ot="titleTemplate",ct="prioritizeSeoTags",dt=(e,t)=>{for(let r=e.length-1;r>=0;r-=1){const n=e[r];if(Object.prototype.hasOwnProperty.call(n,t))return n[t]}return null},ut=e=>{let t=dt(e,"title");const r=dt(e,ot);if(Array.isArray(t)&&(t=t.join("")),r&&t)return r.replace(/%s/g,()=>t);const n=dt(e,st);return t||n||void 0},ht=e=>dt(e,lt)||(()=>{}),mt=(e,t)=>t.filter(t=>"undefined"!==typeof t[e]).map(t=>t[e]).reduce((e,t)=>Ie(Ie({},e),t),{}),pt=(e,t)=>t.filter(e=>"undefined"!==typeof e.base).map(e=>e.base).reverse().reduce((t,r)=>{if(!t.length){const n=Object.keys(r);for(let s=0;s<n.length;s+=1){const a=n[s].toLowerCase();if(-1!==e.indexOf(a)&&r[a])return t.concat(r)}}return t},[]),gt=(e,t,r)=>{const n={};return r.filter(t=>{return!!Array.isArray(t[e])||("undefined"!==typeof t[e]&&(r="Helmet: ".concat(e,' should be of type "Array". Instead found type "').concat(typeof t[e],'"'),console&&"function"===typeof console.warn&&console.warn(r)),!1);var r}).map(t=>t[e]).reverse().reduce((e,r)=>{const s={};r.filter(e=>{let r;const a=Object.keys(e);for(let n=0;n<a.length;n+=1){const s=a[n],i=s.toLowerCase();-1===t.indexOf(i)||"rel"===r&&"canonical"===e[r].toLowerCase()||"rel"===i&&"stylesheet"===e[i].toLowerCase()||(r=i),-1===t.indexOf(s)||"innerHTML"!==s&&"cssText"!==s&&"itemprop"!==s||(r=s)}if(!r||!e[r])return!1;const i=e[r].toLowerCase();return n[r]||(n[r]={}),s[r]||(s[r]={}),!n[r][i]&&(s[r][i]=!0,!0)}).reverse().forEach(t=>e.push(t));const a=Object.keys(s);for(let t=0;t<a.length;t+=1){const e=a[t],r=Ie(Ie({},n[e]),s[e]);n[e]=r}return e},[]).reverse()},ft=(e,t)=>{if(Array.isArray(e)&&e.length)for(let r=0;r<e.length;r+=1){if(e[r][t])return!0}return!1},xt=e=>Array.isArray(e)?e.join(""):e,yt=(e,t)=>Array.isArray(e)?e.reduce((e,r)=>(((e,t)=>{const r=Object.keys(e);for(let n=0;n<r.length;n+=1)if(t[r[n]]&&t[r[n]].includes(e[r[n]]))return!0;return!1})(r,t)?e.priority.push(r):e.default.push(r),e),{priority:[],default:[]}):{default:e,priority:[]},bt=(e,t)=>Ie(Ie({},e),{},{[t]:void 0}),vt=["noscript","script","style"],jt=function(e){return!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},wt=e=>Object.keys(e).reduce((t,r)=>{const n="undefined"!==typeof e[r]?"".concat(r,'="').concat(e[r],'"'):"".concat(r);return t?"".concat(t," ").concat(n):n},""),_t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((t,r)=>(t[tt[r]||r]=e[r],t),t)},kt=(e,t)=>t.map((t,r)=>{const s={key:r,[nt]:!0};return Object.keys(t).forEach(e=>{const r=tt[e]||e;if("innerHTML"===r||"cssText"===r){const e=t.innerHTML||t.cssText;s.dangerouslySetInnerHTML={__html:e}}else s[r]=t[e]}),n.createElement(e,s)}),St=function(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];switch(e){case"title":return{toComponent:()=>((e,t,r)=>{const s=_t(r,{key:t,[nt]:!0});return[n.createElement("title",s,t)]})(0,t.title,t.titleAttributes),toString:()=>((e,t,r,n)=>{const s=wt(r),a=xt(t);return s?"<".concat(e," ").concat(nt,'="true" ').concat(s,">").concat(jt(a,n),"</").concat(e,">"):"<".concat(e," ").concat(nt,'="true">').concat(jt(a,n),"</").concat(e,">")})(e,t.title,t.titleAttributes,r)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>_t(t),toString:()=>wt(t)};default:return{toComponent:()=>kt(e,t),toString:()=>function(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t.reduce((t,n)=>{const s=n,a=Object.keys(s).filter(e=>!("innerHTML"===e||"cssText"===e)).reduce((e,t)=>{const n="undefined"===typeof s[t]?t:"".concat(t,'="').concat(jt(s[t],r),'"');return e?"".concat(e," ").concat(n):n},""),i=s.innerHTML||s.cssText||"",l=-1===vt.indexOf(e);return"".concat(t,"<").concat(e," ").concat(nt,'="true" ').concat(a).concat(l?"/>":">".concat(i,"</").concat(e,">"))},"")}(e,t,r)}}},Nt=e=>{const{baseTag:t,bodyAttributes:r,encode:n=!0,htmlAttributes:s,noscriptTags:a,styleTags:i,title:l="",titleAttributes:o,prioritizeSeoTags:c}=e;let{linkTags:d,metaTags:u,scriptTags:h}=e,m={toComponent:()=>{},toString:()=>""};return c&&({priorityMethods:m,linkTags:d,metaTags:u,scriptTags:h}=(e=>{let{metaTags:t,linkTags:r,scriptTags:n,encode:s}=e;const a=yt(t,Ze),i=yt(r,Je),l=yt(n,Qe);return{priorityMethods:{toComponent:()=>[...kt("meta",a.priority),...kt("link",i.priority),...kt("script",l.priority)],toString:()=>"".concat(St("meta",a.priority,s)," ").concat(St("link",i.priority,s)," ").concat(St("script",l.priority,s))},metaTags:a.default,linkTags:i.default,scriptTags:l.default}})(e)),{priority:m,base:St("base",t,n),bodyAttributes:St("bodyAttributes",r,n),htmlAttributes:St("htmlAttributes",s,n),link:St("link",d,n),meta:St("meta",u,n),noscript:St("noscript",a,n),script:St("script",h,n),style:St("style",i,n),title:St("title",{title:l,titleAttributes:o},n)}},Ct=[],Tt=!("undefined"===typeof window||!window.document||!window.document.createElement),Et=class{constructor(e,t){Fe(this,"instances",[]),Fe(this,"canUseDOM",Tt),Fe(this,"context",void 0),Fe(this,"value",{setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?Ct:this.instances,add:e=>{(this.canUseDOM?Ct:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?Ct:this.instances).indexOf(e);(this.canUseDOM?Ct:this.instances).splice(t,1)}}}),this.context=e,this.canUseDOM=t||!1,t||(e.helmet=Nt({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},Ot=n.createContext({}),Pt=(qe=class e extends n.Component{constructor(t){super(t),Fe(this,"helmetData",void 0),this.helmetData=new Et(this.props.context||{},e.canUseDOM)}render(){return n.createElement(Ot.Provider,{value:this.helmetData.value},this.props.children)}},Fe(qe,"canUseDOM",Tt),qe),Dt=(e,t)=>{const r=document.head||document.querySelector("head"),n=r.querySelectorAll("".concat(e,"[").concat(nt,"]")),s=[].slice.call(n),a=[];let i;return t&&t.length&&t.forEach(t=>{const r=document.createElement(e);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))if("innerHTML"===e)r.innerHTML=t.innerHTML;else if("cssText"===e)r.styleSheet?r.styleSheet.cssText=t.cssText:r.appendChild(document.createTextNode(t.cssText));else{const n=e,s="undefined"===typeof t[n]?"":t[n];r.setAttribute(e,s)}r.setAttribute(nt,"true"),s.some((e,t)=>(i=t,r.isEqualNode(e)))?s.splice(i,1):a.push(r)}),s.forEach(e=>{var t;return null===(t=e.parentNode)||void 0===t?void 0:t.removeChild(e)}),a.forEach(e=>r.appendChild(e)),{oldTags:s,newTags:a}},At=(e,t)=>{const r=document.getElementsByTagName(e)[0];if(!r)return;const n=r.getAttribute(nt),s=n?n.split(","):[],a=[...s],i=Object.keys(t);for(const l of i){const e=t[l]||"";r.getAttribute(l)!==e&&r.setAttribute(l,e),-1===s.indexOf(l)&&s.push(l);const n=a.indexOf(l);-1!==n&&a.splice(n,1)}for(let l=a.length-1;l>=0;l-=1)r.removeAttribute(a[l]);s.length===a.length?r.removeAttribute(nt):r.getAttribute(nt)!==i.join(",")&&r.setAttribute(nt,i.join(","))},Mt=(e,t)=>{const{baseTag:r,bodyAttributes:n,htmlAttributes:s,linkTags:a,metaTags:i,noscriptTags:l,onChangeClientState:o,scriptTags:c,styleTags:d,title:u,titleAttributes:h}=e;At("body",n),At("html",s),((e,t)=>{"undefined"!==typeof e&&document.title!==e&&(document.title=xt(e)),At("title",t)})(u,h);const m={baseTag:Dt("base",r),linkTags:Dt("link",a),metaTags:Dt("meta",i),noscriptTags:Dt("noscript",l),scriptTags:Dt("script",c),styleTags:Dt("style",d)},p={},g={};Object.keys(m).forEach(e=>{const{newTags:t,oldTags:r}=m[e];t.length&&(p[e]=t),r.length&&(g[e]=m[e].oldTags)}),t&&t(),o(e,p,g)},Rt=null,zt=e=>{Rt&&cancelAnimationFrame(Rt),e.defer?Rt=requestAnimationFrame(()=>{Mt(e,()=>{Rt=null})}):(Mt(e),Rt=null)},Ft=class extends n.Component{constructor(){super(...arguments),Fe(this,"rendered",!1)}shouldComponentUpdate(e){return!Ve()(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:t}=this.props.context;let r=null;const n=(s=e.get().map(e=>{const t=Ie({},e.props);return delete t.context,t}),{baseTag:pt(["href"],s),bodyAttributes:mt("bodyAttributes",s),defer:dt(s,at),encode:dt(s,it),htmlAttributes:mt("htmlAttributes",s),linkTags:gt("link",["rel","href"],s),metaTags:gt("meta",["name","charset","http-equiv","property","itemprop"],s),noscriptTags:gt("noscript",["innerHTML"],s),onChangeClientState:ht(s),scriptTags:gt("script",["src","innerHTML"],s),styleTags:gt("style",["cssText"],s),title:ut(s),titleAttributes:mt("titleAttributes",s),prioritizeSeoTags:ft(s,ct)});var s;Pt.canUseDOM?zt(n):Nt&&(r=Nt(n)),t(r)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},Lt=(Fe(Xe=class extends n.Component{shouldComponentUpdate(e){return!He()(bt(this.props,"helmetData"),bt(e,"helmetData"))}mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error("<".concat(e.type," /> elements are self-closing and can not contain children. Refer to our API for more information."))}}flattenArrayTypeChildren(e,t,r,n){return Ie(Ie({},t),{},{[e.type]:[...t[e.type]||[],Ie(Ie({},r),this.mapNestedChildrenToProps(e,n))]})}mapObjectTypeChildren(e,t,r,n){switch(e.type){case"title":return Ie(Ie({},t),{},{[e.type]:n,titleAttributes:Ie({},r)});case"body":return Ie(Ie({},t),{},{bodyAttributes:Ie({},r)});case"html":return Ie(Ie({},t),{},{htmlAttributes:Ie({},r)});default:return Ie(Ie({},t),{},{[e.type]:Ie({},r)})}}mapArrayTypeChildrenToProps(e,t){let r=Ie({},t);return Object.keys(e).forEach(t=>{r=Ie(Ie({},r),{},{[t]:e[t]})}),r}warnOnInvalidChildren(e,t){return We()(et.some(t=>e.type===t),"function"===typeof e.type?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":"Only elements types ".concat(et.join(", ")," are allowed. Helmet does not support rendering <").concat(e.type,"> elements. Refer to our API for more information.")),We()(!t||"string"===typeof t||Array.isArray(t)&&!t.some(e=>"string"!==typeof e),"Helmet expects a string as a child of <".concat(e.type,">. Did you forget to wrap your children in braces? ( <").concat(e.type,">{``}</").concat(e.type,"> ) Refer to our API for more information.")),!0}mapChildrenToProps(e,t){let r={};return n.Children.forEach(e,e=>{if(!e||!e.props)return;const n=e.props,{children:s}=n,a=Me(n,Ye),i=Object.keys(a).reduce((e,t)=>(e[rt[t]||t]=a[t],e),{});let{type:l}=e;switch("symbol"===typeof l?l=l.toString():this.warnOnInvalidChildren(e,s),l){case"Symbol(react.fragment)":t=this.mapChildrenToProps(s,t);break;case"link":case"meta":case"noscript":case"script":case"style":r=this.flattenArrayTypeChildren(e,r,i,s);break;default:t=this.mapObjectTypeChildren(e,t,i,s)}}),this.mapArrayTypeChildrenToProps(r,t)}render(){const e=this.props,{children:t}=e,r=Me(e,Ge);let s=Ie({},r),{helmetData:a}=r;if(t&&(s=this.mapChildrenToProps(t,s)),a&&!(a instanceof Et)){a=new Et(a.context,!0),delete s.helmetData}return a?n.createElement(Ft,Ie(Ie({},s),{},{context:a.value})):n.createElement(Ot.Consumer,null,e=>n.createElement(Ft,Ie(Ie({},s),{},{context:e})))}},"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),Xe);function It(e,t){return function(){return e.apply(t,arguments)}}const{toString:Bt}=Object.prototype,{getPrototypeOf:Ht}=Object,{iterator:Ut,toStringTag:Wt}=Symbol,Kt=(Vt=Object.create(null),e=>{const t=Bt.call(e);return Vt[t]||(Vt[t]=t.slice(8,-1).toLowerCase())});var Vt;const Yt=e=>(e=e.toLowerCase(),t=>Kt(t)===e),Gt=e=>t=>typeof t===e,{isArray:qt}=Array,Xt=Gt("undefined");function $t(e){return null!==e&&!Xt(e)&&null!==e.constructor&&!Xt(e.constructor)&&Zt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Jt=Yt("ArrayBuffer");const Qt=Gt("string"),Zt=Gt("function"),er=Gt("number"),tr=e=>null!==e&&"object"===typeof e,rr=e=>{if("object"!==Kt(e))return!1;const t=Ht(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Wt in e)&&!(Ut in e)},nr=Yt("Date"),sr=Yt("File"),ar=Yt("Blob"),ir=Yt("FileList"),lr=Yt("URLSearchParams"),[or,cr,dr,ur]=["ReadableStream","Request","Response","Headers"].map(Yt);function hr(e,t){let r,n,{allOwnKeys:s=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),qt(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{if($t(e))return;const n=s?Object.getOwnPropertyNames(e):Object.keys(e),a=n.length;let i;for(r=0;r<a;r++)i=n[r],t.call(null,e[i],i,e)}}function mr(e,t){if($t(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n,s=r.length;for(;s-- >0;)if(n=r[s],t===n.toLowerCase())return n;return null}const pr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,gr=e=>!Xt(e)&&e!==pr;const fr=(xr="undefined"!==typeof Uint8Array&&Ht(Uint8Array),e=>xr&&e instanceof xr);var xr;const yr=Yt("HTMLFormElement"),br=(e=>{let{hasOwnProperty:t}=e;return(e,r)=>t.call(e,r)})(Object.prototype),vr=Yt("RegExp"),jr=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};hr(r,(r,s)=>{let a;!1!==(a=t(r,s,e))&&(n[s]=a||r)}),Object.defineProperties(e,n)};const wr=Yt("AsyncFunction"),_r=((e,t)=>{return e?setImmediate:t?(r="axios@".concat(Math.random()),n=[],pr.addEventListener("message",e=>{let{source:t,data:s}=e;t===pr&&s===r&&n.length&&n.shift()()},!1),e=>{n.push(e),pr.postMessage(r,"*")}):e=>setTimeout(e);var r,n})("function"===typeof setImmediate,Zt(pr.postMessage)),kr="undefined"!==typeof queueMicrotask?queueMicrotask.bind(pr):"undefined"!==typeof process&&process.nextTick||_r,Sr={isArray:qt,isArrayBuffer:Jt,isBuffer:$t,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Zt(e.append)&&("formdata"===(t=Kt(e))||"object"===t&&Zt(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Jt(e.buffer),t},isString:Qt,isNumber:er,isBoolean:e=>!0===e||!1===e,isObject:tr,isPlainObject:rr,isEmptyObject:e=>{if(!tr(e)||$t(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(js){return!1}},isReadableStream:or,isRequest:cr,isResponse:dr,isHeaders:ur,isUndefined:Xt,isDate:nr,isFile:sr,isBlob:ar,isRegExp:vr,isFunction:Zt,isStream:e=>tr(e)&&Zt(e.pipe),isURLSearchParams:lr,isTypedArray:fr,isFileList:ir,forEach:hr,merge:function e(){const{caseless:t,skipUndefined:r}=gr(this)&&this||{},n={},s=(s,a)=>{const i=t&&mr(n,a)||a;rr(n[i])&&rr(s)?n[i]=e(n[i],s):rr(s)?n[i]=e({},s):qt(s)?n[i]=s.slice():r&&Xt(s)||(n[i]=s)};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&hr(arguments[a],s);return n},extend:function(e,t,r){let{allOwnKeys:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return hr(t,(t,n)=>{r&&Zt(t)?e[n]=It(t,r):e[n]=t},{allOwnKeys:n}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let s,a,i;const l={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),a=s.length;a-- >0;)i=s[a],n&&!n(i,e,t)||l[i]||(t[i]=e[i],l[i]=!0);e=!1!==r&&Ht(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:Kt,kindOfTest:Yt,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(qt(e))return e;let t=e.length;if(!er(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[Ut]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:yr,hasOwnProperty:br,hasOwnProp:br,reduceDescriptors:jr,freezeMethods:e=>{jr(e,(t,r)=>{if(Zt(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];Zt(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))})},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach(e=>{r[e]=!0})};return qt(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:mr,global:pr,isContextDefined:gr,isSpecCompliantForm:function(e){return!!(e&&Zt(e.append)&&"FormData"===e[Wt]&&e[Ut])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(tr(e)){if(t.indexOf(e)>=0)return;if($t(e))return e;if(!("toJSON"in e)){t[n]=e;const s=qt(e)?[]:{};return hr(e,(e,t)=>{const a=r(e,n+1);!Xt(a)&&(s[t]=a)}),t[n]=void 0,s}}return e};return r(e,0)},isAsyncFn:wr,isThenable:e=>e&&(tr(e)||Zt(e))&&Zt(e.then)&&Zt(e.catch),setImmediate:_r,asap:kr,isIterable:e=>null!=e&&Zt(e[Ut])};function Nr(e,t,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}Sr.inherits(Nr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Sr.toJSONObject(this.config),code:this.code,status:this.status}}});const Cr=Nr.prototype,Tr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Tr[e]={value:e}}),Object.defineProperties(Nr,Tr),Object.defineProperty(Cr,"isAxiosError",{value:!0}),Nr.from=(e,t,r,n,s,a)=>{const i=Object.create(Cr);Sr.toFlatObject(e,i,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const l=e&&e.message?e.message:"Error",o=null==t&&e?e.code:t;return Nr.call(i,l,o,r,n,s),e&&null==i.cause&&Object.defineProperty(i,"cause",{value:e,configurable:!0}),i.name=e&&e.name||"Error",a&&Object.assign(i,a),i};const Er=Nr;function Or(e){return Sr.isPlainObject(e)||Sr.isArray(e)}function Pr(e){return Sr.endsWith(e,"[]")?e.slice(0,-2):e}function Dr(e,t,r){return e?e.concat(t).map(function(e,t){return e=Pr(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}const Ar=Sr.toFlatObject(Sr,{},null,function(e){return/^is[A-Z]/.test(e)});const Mr=function(e,t,r){if(!Sr.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=Sr.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!Sr.isUndefined(t[e])})).metaTokens,s=r.visitor||c,a=r.dots,i=r.indexes,l=(r.Blob||"undefined"!==typeof Blob&&Blob)&&Sr.isSpecCompliantForm(t);if(!Sr.isFunction(s))throw new TypeError("visitor must be a function");function o(e){if(null===e)return"";if(Sr.isDate(e))return e.toISOString();if(Sr.isBoolean(e))return e.toString();if(!l&&Sr.isBlob(e))throw new Er("Blob is not supported. Use a Buffer instead.");return Sr.isArrayBuffer(e)||Sr.isTypedArray(e)?l&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,s){let l=e;if(e&&!s&&"object"===typeof e)if(Sr.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(Sr.isArray(e)&&function(e){return Sr.isArray(e)&&!e.some(Or)}(e)||(Sr.isFileList(e)||Sr.endsWith(r,"[]"))&&(l=Sr.toArray(e)))return r=Pr(r),l.forEach(function(e,n){!Sr.isUndefined(e)&&null!==e&&t.append(!0===i?Dr([r],n,a):null===i?r:r+"[]",o(e))}),!1;return!!Or(e)||(t.append(Dr(s,r,a),o(e)),!1)}const d=[],u=Object.assign(Ar,{defaultVisitor:c,convertValue:o,isVisitable:Or});if(!Sr.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!Sr.isUndefined(r)){if(-1!==d.indexOf(r))throw Error("Circular reference detected in "+n.join("."));d.push(r),Sr.forEach(r,function(r,a){!0===(!(Sr.isUndefined(r)||null===r)&&s.call(t,r,Sr.isString(a)?a.trim():a,n,u))&&e(r,n?n.concat(a):[a])}),d.pop()}}(e),t};function Rr(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function zr(e,t){this._pairs=[],e&&Mr(e,this,t)}const Fr=zr.prototype;Fr.append=function(e,t){this._pairs.push([e,t])},Fr.toString=function(e){const t=e?function(t){return e.call(this,t,Rr)}:Rr;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const Lr=zr;function Ir(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Br(e,t,r){if(!t)return e;const n=r&&r.encode||Ir;Sr.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let a;if(a=s?s(t,r):Sr.isURLSearchParams(t)?t.toString():new Lr(t,r).toString(n),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}const Hr=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Sr.forEach(this.handlers,function(t){null!==t&&e(t)})}},Ur={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Wr={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Lr,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Kr="undefined"!==typeof window&&"undefined"!==typeof document,Vr="object"===typeof navigator&&navigator||void 0,Yr=Kr&&(!Vr||["ReactNative","NativeScript","NS"].indexOf(Vr.product)<0),Gr="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,qr=Kr&&window.location.href||"http://localhost",Xr=Ie(Ie({},e),Wr);const $r=function(e){function t(e,r,n,s){let a=e[s++];if("__proto__"===a)return!0;const i=Number.isFinite(+a),l=s>=e.length;if(a=!a&&Sr.isArray(n)?n.length:a,l)return Sr.hasOwnProp(n,a)?n[a]=[n[a],r]:n[a]=r,!i;n[a]&&Sr.isObject(n[a])||(n[a]=[]);return t(e,r,n[a],s)&&Sr.isArray(n[a])&&(n[a]=function(e){const t={},r=Object.keys(e);let n;const s=r.length;let a;for(n=0;n<s;n++)a=r[n],t[a]=e[a];return t}(n[a])),!i}if(Sr.isFormData(e)&&Sr.isFunction(e.entries)){const r={};return Sr.forEachEntry(e,(e,n)=>{t(function(e){return Sr.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),n,r,0)}),r}return null};const Jr={transitional:Ur,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,s=Sr.isObject(e);s&&Sr.isHTMLForm(e)&&(e=new FormData(e));if(Sr.isFormData(e))return n?JSON.stringify($r(e)):e;if(Sr.isArrayBuffer(e)||Sr.isBuffer(e)||Sr.isStream(e)||Sr.isFile(e)||Sr.isBlob(e)||Sr.isReadableStream(e))return e;if(Sr.isArrayBufferView(e))return e.buffer;if(Sr.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Mr(e,new Xr.classes.URLSearchParams,Ie({visitor:function(e,t,r,n){return Xr.isNode&&Sr.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((a=Sr.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Mr(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||n?(t.setContentType("application/json",!1),function(e,t,r){if(Sr.isString(e))try{return(t||JSON.parse)(e),Sr.trim(e)}catch(js){if("SyntaxError"!==js.name)throw js}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Jr.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(Sr.isResponse(e)||Sr.isReadableStream(e))return e;if(e&&Sr.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e,this.parseReviver)}catch(js){if(r){if("SyntaxError"===js.name)throw Er.from(js,Er.ERR_BAD_RESPONSE,this,null,this.response);throw js}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Xr.classes.FormData,Blob:Xr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Sr.forEach(["delete","get","head","post","put","patch"],e=>{Jr.headers[e]={}});const Qr=Jr,Zr=Sr.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),en=Symbol("internals");function tn(e){return e&&String(e).trim().toLowerCase()}function rn(e){return!1===e||null==e?e:Sr.isArray(e)?e.map(rn):String(e)}function nn(e,t,r,n,s){return Sr.isFunction(n)?n.call(this,t,r):(s&&(t=r),Sr.isString(t)?Sr.isString(n)?-1!==t.indexOf(n):Sr.isRegExp(n)?n.test(t):void 0:void 0)}class sn{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function s(e,t,r){const s=tn(t);if(!s)throw new Error("header name must be a non-empty string");const a=Sr.findKey(n,s);(!a||void 0===n[a]||!0===r||void 0===r&&!1!==n[a])&&(n[a||t]=rn(e))}const a=(e,t)=>Sr.forEach(e,(e,r)=>s(e,r,t));if(Sr.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(Sr.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))a((e=>{const t={};let r,n,s;return e&&e.split("\n").forEach(function(e){s=e.indexOf(":"),r=e.substring(0,s).trim().toLowerCase(),n=e.substring(s+1).trim(),!r||t[r]&&Zr[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t})(e),t);else if(Sr.isObject(e)&&Sr.isIterable(e)){let r,n,s={};for(const t of e){if(!Sr.isArray(t))throw TypeError("Object iterator must return a key-value pair");s[n=t[0]]=(r=s[n])?Sr.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}a(s,t)}else null!=e&&s(t,e,r);return this}get(e,t){if(e=tn(e)){const r=Sr.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(Sr.isFunction(t))return t.call(this,e,r);if(Sr.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=tn(e)){const r=Sr.findKey(this,e);return!(!r||void 0===this[r]||t&&!nn(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function s(e){if(e=tn(e)){const s=Sr.findKey(r,e);!s||t&&!nn(0,r[s],s,t)||(delete r[s],n=!0)}}return Sr.isArray(e)?e.forEach(s):s(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const s=t[r];e&&!nn(0,this[s],s,e,!0)||(delete this[s],n=!0)}return n}normalize(e){const t=this,r={};return Sr.forEach(this,(n,s)=>{const a=Sr.findKey(r,s);if(a)return t[a]=rn(n),void delete t[s];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}(s):String(s).trim();i!==s&&delete t[s],t[i]=rn(n),r[i]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Sr.forEach(this,(r,n)=>{null!=r&&!1!==r&&(t[n]=e&&Sr.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,r]=e;return t+": "+r}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return n.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[en]=this[en]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=tn(e);t[n]||(!function(e,t){const r=Sr.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(e,r,s){return this[n].call(this,t,e,r,s)},configurable:!0})})}(r,e),t[n]=!0)}return Sr.isArray(e)?e.forEach(n):n(e),this}}sn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Sr.reduceDescriptors(sn.prototype,(e,t)=>{let{value:r}=e,n=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(e){this[n]=e}}}),Sr.freezeMethods(sn);const an=sn;function ln(e,t){const r=this||Qr,n=t||r,s=an.from(n.headers);let a=n.data;return Sr.forEach(e,function(e){a=e.call(r,a,s.normalize(),t?t.status:void 0)}),s.normalize(),a}function on(e){return!(!e||!e.__CANCEL__)}function cn(e,t,r){Er.call(this,null==e?"canceled":e,Er.ERR_CANCELED,t,r),this.name="CanceledError"}Sr.inherits(cn,Er,{__CANCEL__:!0});const dn=cn;function un(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new Er("Request failed with status code "+r.status,[Er.ERR_BAD_REQUEST,Er.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}const hn=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s,a=0,i=0;return t=void 0!==t?t:1e3,function(l){const o=Date.now(),c=n[i];s||(s=o),r[a]=l,n[a]=o;let d=i,u=0;for(;d!==a;)u+=r[d++],d%=e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),o-s<t)return;const h=c&&o-c;return h?Math.round(1e3*u/h):void 0}};const mn=function(e,t){let r,n,s=0,a=1e3/t;const i=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();s=a,r=null,n&&(clearTimeout(n),n=null),e(...t)};return[function(){const e=Date.now(),t=e-s;for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];t>=a?i(o,e):(r=o,n||(n=setTimeout(()=>{n=null,i(r)},a-t)))},()=>r&&i(r)]},pn=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=0;const s=hn(50,250);return mn(r=>{const a=r.loaded,i=r.lengthComputable?r.total:void 0,l=a-n,o=s(l);n=a;e({loaded:a,total:i,progress:i?a/i:void 0,bytes:l,rate:o||void 0,estimated:o&&i&&a<=i?(i-a)/o:void 0,event:r,lengthComputable:null!=i,[t?"download":"upload"]:!0})},r)},gn=(e,t)=>{const r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},fn=e=>function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Sr.asap(()=>e(...r))},xn=Xr.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Xr.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Xr.origin),Xr.navigator&&/(msie|trident)/i.test(Xr.navigator.userAgent)):()=>!0,yn=Xr.hasStandardBrowserEnv?{write(e,t,r,n,s,a){const i=[e+"="+encodeURIComponent(t)];Sr.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),Sr.isString(n)&&i.push("path="+n),Sr.isString(s)&&i.push("domain="+s),!0===a&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function bn(e,t,r){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const vn=e=>e instanceof an?Ie({},e):e;function jn(e,t){t=t||{};const r={};function n(e,t,r,n){return Sr.isPlainObject(e)&&Sr.isPlainObject(t)?Sr.merge.call({caseless:n},e,t):Sr.isPlainObject(t)?Sr.merge({},t):Sr.isArray(t)?t.slice():t}function s(e,t,r,s){return Sr.isUndefined(t)?Sr.isUndefined(e)?void 0:n(void 0,e,0,s):n(e,t,0,s)}function a(e,t){if(!Sr.isUndefined(t))return n(void 0,t)}function i(e,t){return Sr.isUndefined(t)?Sr.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function l(r,s,a){return a in t?n(r,s):a in e?n(void 0,r):void 0}const o={url:a,method:a,data:a,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(e,t,r)=>s(vn(e),vn(t),0,!0)};return Sr.forEach(Object.keys(Ie(Ie({},e),t)),function(n){const a=o[n]||s,i=a(e[n],t[n],n);Sr.isUndefined(i)&&a!==l||(r[n]=i)}),r}const wn=e=>{const t=jn({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:a,headers:i,auth:l}=t;if(t.headers=i=an.from(i),t.url=Br(bn(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Sr.isFormData(r))if(Xr.hasStandardBrowserEnv||Xr.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(Sr.isFunction(r.getHeaders)){const e=r.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(e=>{let[r,n]=e;t.includes(r.toLowerCase())&&i.set(r,n)})}if(Xr.hasStandardBrowserEnv&&(n&&Sr.isFunction(n)&&(n=n(t)),n||!1!==n&&xn(t.url))){const e=s&&a&&yn.read(a);e&&i.set(s,e)}return t},_n="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){const n=wn(e);let s=n.data;const a=an.from(n.headers).normalize();let i,l,o,c,d,{responseType:u,onUploadProgress:h,onDownloadProgress:m}=n;function p(){c&&c(),d&&d(),n.cancelToken&&n.cancelToken.unsubscribe(i),n.signal&&n.signal.removeEventListener("abort",i)}let g=new XMLHttpRequest;function f(){if(!g)return;const n=an.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders());un(function(e){t(e),p()},function(e){r(e),p()},{data:u&&"text"!==u&&"json"!==u?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:n,config:e,request:g}),g=null}g.open(n.method.toUpperCase(),n.url,!0),g.timeout=n.timeout,"onloadend"in g?g.onloadend=f:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(f)},g.onabort=function(){g&&(r(new Er("Request aborted",Er.ECONNABORTED,e,g)),g=null)},g.onerror=function(t){const n=t&&t.message?t.message:"Network Error",s=new Er(n,Er.ERR_NETWORK,e,g);s.event=t||null,r(s),g=null},g.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const s=n.transitional||Ur;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new Er(t,s.clarifyTimeoutError?Er.ETIMEDOUT:Er.ECONNABORTED,e,g)),g=null},void 0===s&&a.setContentType(null),"setRequestHeader"in g&&Sr.forEach(a.toJSON(),function(e,t){g.setRequestHeader(t,e)}),Sr.isUndefined(n.withCredentials)||(g.withCredentials=!!n.withCredentials),u&&"json"!==u&&(g.responseType=n.responseType),m&&([o,d]=pn(m,!0),g.addEventListener("progress",o)),h&&g.upload&&([l,c]=pn(h),g.upload.addEventListener("progress",l),g.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(i=t=>{g&&(r(!t||t.type?new dn(null,e,g):t),g.abort(),g=null)},n.cancelToken&&n.cancelToken.subscribe(i),n.signal&&(n.signal.aborted?i():n.signal.addEventListener("abort",i)));const x=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);x&&-1===Xr.protocols.indexOf(x)?r(new Er("Unsupported protocol "+x+":",Er.ERR_BAD_REQUEST,e)):g.send(s||null)})},kn=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController;const s=function(e){if(!r){r=!0,i();const t=e instanceof Error?e:this.reason;n.abort(t instanceof Er?t:new dn(t instanceof Error?t.message:t))}};let a=t&&setTimeout(()=>{a=null,s(new Er("timeout ".concat(t," of ms exceeded"),Er.ETIMEDOUT))},t);const i=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)}),e=null)};e.forEach(e=>e.addEventListener("abort",s));const{signal:l}=n;return l.unsubscribe=()=>Sr.asap(i),l}};function Sn(e,t){this.v=e,this.k=t}function Nn(e){return function(){return new Cn(e.apply(this,arguments))}}function Cn(e){var t,r;function n(t,r){try{var a=e[t](r),i=a.value,l=i instanceof Sn;Promise.resolve(l?i.v:i).then(function(r){if(l){var o="return"===t?"return":"next";if(!i.k||r.done)return n(o,r);r=e[o](r).value}s(a.done?"return":"normal",r)},function(e){n("throw",e)})}catch(e){s("throw",e)}}function s(e,s){switch(e){case"return":t.resolve({value:s,done:!0});break;case"throw":t.reject(s);break;default:t.resolve({value:s,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,s){return new Promise(function(a,i){var l={key:e,arg:s,resolve:a,reject:i,next:null};r?r=r.next=l:(t=r=l,n(e,s))})},"function"!=typeof e.return&&(this.return=void 0)}function Tn(e){return new Sn(e,0)}function En(e){var t={},r=!1;function n(t,n){return r=!0,n=new Promise(function(r){r(e[t](n))}),{done:!1,value:new Sn(n,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return r?(r=!1,e):n("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(r)throw r=!1,e;return n("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return r?(r=!1,e):n("return",e)}),t}function On(e){var t,r,n,s=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);s--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new Pn(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function Pn(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return Pn=function(e){this.s=e,this.n=e.next},Pn.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new Pn(e)}Cn.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Cn.prototype.next=function(e){return this._invoke("next",e)},Cn.prototype.throw=function(e){return this._invoke("throw",e)},Cn.prototype.return=function(e){return this._invoke("return",e)};const Dn=function*(e,t){let r=e.byteLength;if(!t||r<t)return void(yield e);let n,s=0;for(;s<r;)n=s+t,yield e.slice(s,n),s=n},An=function(){var e=Nn(function*(e,t){var r,n=!1,s=!1;try{for(var a,i=On(Mn(e));n=!(a=yield Tn(i.next())).done;n=!1){const e=a.value;yield*En(On(Dn(e,t)))}}catch(l){s=!0,r=l}finally{try{n&&null!=i.return&&(yield Tn(i.return()))}finally{if(s)throw r}}});return function(t,r){return e.apply(this,arguments)}}(),Mn=function(){var e=Nn(function*(e){if(e[Symbol.asyncIterator])return void(yield*En(On(e)));const t=e.getReader();try{for(;;){const{done:e,value:r}=yield Tn(t.read());if(e)break;yield r}}finally{yield Tn(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),Rn=(e,t,r,n)=>{const s=An(e,t);let a,i=0,l=e=>{a||(a=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await s.next();if(t)return l(),void e.close();let a=n.byteLength;if(r){let e=i+=a;r(e)}e.enqueue(new Uint8Array(n))}catch(t){throw l(t),t}},cancel:e=>(l(e),s.return())},{highWaterMark:2})},{isFunction:zn}=Sr,Fn=(e=>{let{Request:t,Response:r}=e;return{Request:t,Response:r}})(Sr.global),{ReadableStream:Ln,TextEncoder:In}=Sr.global,Bn=function(e){try{for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return!!e(...r)}catch(js){return!1}},Hn=e=>{e=Sr.merge.call({skipUndefined:!0},Fn,e);const{fetch:t,Request:r,Response:n}=e,s=t?zn(t):"function"===typeof fetch,a=zn(r),i=zn(n);if(!s)return!1;const l=s&&zn(Ln),o=s&&("function"===typeof In?(c=new In,e=>c.encode(e)):async e=>new Uint8Array(await new r(e).arrayBuffer()));var c;const d=a&&l&&Bn(()=>{let e=!1;const t=new r(Xr.origin,{body:new Ln,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),u=i&&l&&Bn(()=>Sr.isReadableStream(new n("").body)),h={stream:u&&(e=>e.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!h[e]&&(h[e]=(t,r)=>{let n=t&&t[e];if(n)return n.call(t);throw new Er("Response type '".concat(e,"' is not supported"),Er.ERR_NOT_SUPPORT,r)})});const m=async(e,t)=>{const n=Sr.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(Sr.isBlob(e))return e.size;if(Sr.isSpecCompliantForm(e)){const t=new r(Xr.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Sr.isArrayBufferView(e)||Sr.isArrayBuffer(e)?e.byteLength:(Sr.isURLSearchParams(e)&&(e+=""),Sr.isString(e)?(await o(e)).byteLength:void 0)})(t):n};return async e=>{let{url:s,method:i,data:l,signal:o,cancelToken:c,timeout:p,onDownloadProgress:g,onUploadProgress:f,responseType:x,headers:y,withCredentials:b="same-origin",fetchOptions:v}=wn(e),j=t||fetch;x=x?(x+"").toLowerCase():"text";let w=kn([o,c&&c.toAbortSignal()],p),_=null;const k=w&&w.unsubscribe&&(()=>{w.unsubscribe()});let S;try{if(f&&d&&"get"!==i&&"head"!==i&&0!==(S=await m(y,l))){let e,t=new r(s,{method:"POST",body:l,duplex:"half"});if(Sr.isFormData(l)&&(e=t.headers.get("content-type"))&&y.setContentType(e),t.body){const[e,r]=gn(S,pn(fn(f)));l=Rn(t.body,65536,e,r)}}Sr.isString(b)||(b=b?"include":"omit");const t=a&&"credentials"in r.prototype,o=Ie(Ie({},v),{},{signal:w,method:i.toUpperCase(),headers:y.normalize().toJSON(),body:l,duplex:"half",credentials:t?b:void 0});_=a&&new r(s,o);let c=await(a?j(_,v):j(s,o));const p=u&&("stream"===x||"response"===x);if(u&&(g||p&&k)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=c[t]});const t=Sr.toFiniteNumber(c.headers.get("content-length")),[r,s]=g&&gn(t,pn(fn(g),!0))||[];c=new n(Rn(c.body,65536,r,()=>{s&&s(),k&&k()}),e)}x=x||"text";let N=await h[Sr.findKey(h,x)||"text"](c,e);return!p&&k&&k(),await new Promise((t,r)=>{un(t,r,{data:N,headers:an.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:_})})}catch(N){if(k&&k(),N&&"TypeError"===N.name&&/Load failed|fetch/i.test(N.message))throw Object.assign(new Er("Network Error",Er.ERR_NETWORK,e,_),{cause:N.cause||N});throw Er.from(N,N&&N.code,e,_)}}},Un=new Map,Wn=e=>{let t=e?e.env:{};const{fetch:r,Request:n,Response:s}=t,a=[n,s,r];let i,l,o=a.length,c=Un;for(;o--;)i=a[o],l=c.get(i),void 0===l&&c.set(i,l=o?new Map:Hn(t)),c=l;return l},Kn=(Wn(),{http:null,xhr:_n,fetch:{get:Wn}});Sr.forEach(Kn,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(js){}Object.defineProperty(e,"adapterName",{value:t})}});const Vn=e=>"- ".concat(e),Yn=e=>Sr.isFunction(e)||null===e||!1===e,Gn=(e,t)=>{e=Sr.isArray(e)?e:[e];const{length:r}=e;let n,s;const a={};for(let i=0;i<r;i++){let r;if(n=e[i],s=n,!Yn(n)&&(s=Kn[(r=String(n)).toLowerCase()],void 0===s))throw new Er("Unknown adapter '".concat(r,"'"));if(s&&(Sr.isFunction(s)||(s=s.get(t))))break;a[r||"#"+i]=s}if(!s){const e=Object.entries(a).map(e=>{let[t,r]=e;return"adapter ".concat(t," ")+(!1===r?"is not supported by the environment":"is not available in the build")});let t=r?e.length>1?"since :\n"+e.map(Vn).join("\n"):" "+Vn(e[0]):"as no adapter specified";throw new Er("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return s};function qn(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new dn(null,e)}function Xn(e){qn(e),e.headers=an.from(e.headers),e.data=ln.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Gn(e.adapter||Qr.adapter,e)(e).then(function(t){return qn(e),t.data=ln.call(e,e.transformResponse,t),t.headers=an.from(t.headers),t},function(t){return on(t)||(qn(e),t&&t.response&&(t.response.data=ln.call(e,e.transformResponse,t.response),t.response.headers=an.from(t.response.headers))),Promise.reject(t)})}const $n="1.12.2",Jn={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Jn[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Qn={};Jn.transitional=function(e,t,r){function n(e,t){return"[Axios v"+$n+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,s,a)=>{if(!1===e)throw new Er(n(s," has been removed"+(t?" in "+t:"")),Er.ERR_DEPRECATED);return t&&!Qn[s]&&(Qn[s]=!0,console.warn(n(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,s,a)}},Jn.spelling=function(e){return(t,r)=>(console.warn("".concat(r," is likely a misspelling of ").concat(e)),!0)};const Zn={assertOptions:function(e,t,r){if("object"!==typeof e)throw new Er("options must be an object",Er.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const a=n[s],i=t[a];if(i){const t=e[a],r=void 0===t||i(t,a,e);if(!0!==r)throw new Er("option "+a+" must be "+r,Er.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new Er("Unknown option "+a,Er.ERR_BAD_OPTION)}},validators:Jn},es=Zn.validators;class ts{constructor(e){this.defaults=e||{},this.interceptors={request:new Hr,response:new Hr}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{r.stack?t&&!String(r.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+t):r.stack=t}catch(js){}}throw r}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=jn(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:s}=t;void 0!==r&&Zn.assertOptions(r,{silentJSONParsing:es.transitional(es.boolean),forcedJSONParsing:es.transitional(es.boolean),clarifyTimeoutError:es.transitional(es.boolean)},!1),null!=n&&(Sr.isFunction(n)?t.paramsSerializer={serialize:n}:Zn.assertOptions(n,{encode:es.function,serialize:es.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Zn.assertOptions(t,{baseUrl:es.spelling("baseURL"),withXsrfToken:es.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=s&&Sr.merge(s.common,s[t.method]);s&&Sr.forEach(["delete","get","head","post","put","patch","common"],e=>{delete s[e]}),t.headers=an.concat(a,s);const i=[];let l=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(l=l&&e.synchronous,i.unshift(e.fulfilled,e.rejected))});const o=[];let c;this.interceptors.response.forEach(function(e){o.push(e.fulfilled,e.rejected)});let d,u=0;if(!l){const e=[Xn.bind(this),void 0];for(e.unshift(...i),e.push(...o),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=i.length;let h=t;for(;u<d;){const e=i[u++],t=i[u++];try{h=e(h)}catch(m){t.call(this,m);break}}try{c=Xn.call(this,h)}catch(m){return Promise.reject(m)}for(u=0,d=o.length;u<d;)c=c.then(o[u++],o[u++]);return c}getUri(e){return Br(bn((e=jn(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Sr.forEach(["delete","get","head","options"],function(e){ts.prototype[e]=function(t,r){return this.request(jn(r||{},{method:e,url:t,data:(r||{}).data}))}}),Sr.forEach(["post","put","patch"],function(e){function t(t){return function(r,n,s){return this.request(jn(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}ts.prototype[e]=t(),ts.prototype[e+"Form"]=t(!0)});const rs=ts;class ns{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t;const n=new Promise(e=>{r.subscribe(e),t=e}).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e(function(e,n,s){r.reason||(r.reason=new dn(e,n,s),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new ns(function(t){e=t});return{token:t,cancel:e}}}const ss=ns;const as={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(as).forEach(e=>{let[t,r]=e;as[r]=t});const is=as;const ls=function e(t){const r=new rs(t),n=It(rs.prototype.request,r);return Sr.extend(n,rs.prototype,r,{allOwnKeys:!0}),Sr.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(jn(t,r))},n}(Qr);ls.Axios=rs,ls.CanceledError=dn,ls.CancelToken=ss,ls.isCancel=on,ls.VERSION=$n,ls.toFormData=Mr,ls.AxiosError=Er,ls.Cancel=ls.CanceledError,ls.all=function(e){return Promise.all(e)},ls.spread=function(e){return function(t){return e.apply(null,t)}},ls.isAxiosError=function(e){return Sr.isObject(e)&&!0===e.isAxiosError},ls.mergeConfig=jn,ls.AxiosHeaders=an,ls.formToJSON=e=>$r(Sr.isHTMLForm(e)?new FormData(e):e),ls.getAdapter=Gn,ls.HttpStatusCode=is,ls.default=ls;const os=ls;const cs=new class{constructor(){this.config=void 0,this.listeners=[],this.config=this.loadConfig(),this.validateConfig()}loadConfig(){return{database:{url:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_DATABASE_URL||"mysql+pymysql://root:@localhost:3306/aibrands",poolSize:parseInt({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_DB_POOL_SIZE||"20"),maxOverflow:parseInt({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_DB_MAX_OVERFLOW||"30"),poolTimeout:parseInt({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_DB_POOL_TIMEOUT||"30"),poolRecycle:parseInt({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_DB_POOL_RECYCLE||"3600"),echo:"true"==={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_DB_ECHO},security:{secretKey:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SECRET_KEY||"your-secret-key-change-in-production",algorithm:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_JWT_ALGORITHM||"HS256",accessTokenExpireMinutes:parseInt({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_ACCESS_TOKEN_EXPIRE_MINUTES||"15"),refreshTokenExpireDays:parseInt({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_REFRESH_TOKEN_EXPIRE_DAYS||"7"),bcryptRounds:parseInt({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BCRYPT_ROUNDS||"12"),maxLoginAttempts:parseInt({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_MAX_LOGIN_ATTEMPTS||"5"),lockoutDurationMinutes:parseInt({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_LOCKOUT_DURATION_MINUTES||"15")},cors:{allowedOrigins:({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_ALLOWED_ORIGINS||"http://localhost:3000,http://localhost:3001,http://localhost:3002,http://localhost:3003").split(","),allowedMethods:({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_ALLOWED_METHODS||"GET,POST,PUT,DELETE,OPTIONS").split(","),allowedHeaders:({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_ALLOWED_HEADERS||"*").split(",")},redis:{url:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_REDIS_URL||"redis://localhost:6379",enabled:"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_REDIS_ENABLED,timeout:parseInt({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_REDIS_TIMEOUT||"5")},email:{smtpServer:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SMTP_SERVER,smtpPort:parseInt({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SMTP_PORT||"587"),smtpUsername:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SMTP_USERNAME,smtpPassword:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SMTP_PASSWORD,fromEmail:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FROM_EMAIL||"noreply@aibrands.com",fromName:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FROM_NAME||"AI Brands",useSSL:"true"==={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SMTP_USE_SSL,useTLS:"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SMTP_USE_TLS},ocr:{googleAiApiKey:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_GOOGLE_AI_API_KEY,parallelWorkers:parseInt({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_OCR_PARALLEL_WORKERS||"10"),timeout:parseInt({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_OCR_TIMEOUT||"30"),retryCount:parseInt({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_OCR_RETRY_COUNT||"3")},upload:{maxFileCount:parseInt({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_MAX_FILE_COUNT||"500"),maxFileSizeMB:parseInt({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_MAX_FILE_SIZE_MB||"10"),allowedExtensions:({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_ALLOWED_EXTENSIONS||"jpg,jpeg,png,webp").split(","),totalUploadSizeMB:parseInt({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_TOTAL_UPLOAD_SIZE_MB||"500"),storagePath:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_STORAGE_PATH||"uploads"},telegram:{botToken:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_TELEGRAM_BOT_TOKEN,chatId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_TELEGRAM_CHAT_ID},app:{name:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_NAME||"AI Brands",version:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_VERSION||"2.0.0",description:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_DESCRIPTION||"AI Destekli Marka Y\xf6netim Platformu",author:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_AUTHOR||"AI Brands Team",environment:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_ENVIRONMENT||"development",debug:"true"==={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_DEBUG,backendUrl:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:8000",frontendUrl:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FRONTEND_URL||"http://localhost:3000"},ui:{theme:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_THEME||"light",language:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_LANGUAGE||"tr",dateFormat:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_DATE_FORMAT||"DD/MM/YYYY",timeFormat:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_TIME_FORMAT||"HH:mm",timezone:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_TIMEZONE||"Europe/Istanbul"},features:{socialMedia:"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FEATURE_SOCIAL_MEDIA,templates:"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FEATURE_TEMPLATES,aiGeneration:"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FEATURE_AI_GENERATION,multiLanguage:"true"==={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FEATURE_MULTI_LANGUAGE,analytics:"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FEATURE_ANALYTICS,reporting:"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FEATURE_REPORTING,monitoring:"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FEATURE_MONITORING},cache:{enabled:"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_CACHE_ENABLED,ttl:parseInt({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_CACHE_TTL||"300"),maxSize:parseInt({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_CACHE_MAX_SIZE||"50"),strategy:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_CACHE_STRATEGY||"lru"},pagination:{defaultPageSize:parseInt({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_DEFAULT_PAGE_SIZE||"20"),pageSizeOptions:({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_PAGE_SIZE_OPTIONS||"10,20,50,100").split(",").map(Number),maxPageSize:parseInt({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_MAX_PAGE_SIZE||"1000")},api:{baseURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:8000",timeout:parseInt({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_TIMEOUT||"30000"),retryAttempts:parseInt({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_RETRY_ATTEMPTS||"3"),retryDelay:parseInt({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_RETRY_DELAY||"1000"),maxConcurrentRequests:parseInt({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_MAX_CONCURRENT||"10")}}}validateConfig(){if(!this.config.app.name)throw new Error("App name is required");if(!this.config.api.baseURL)throw new Error("API base URL is required");if(!this.config.app.version)throw new Error("App version is required");if(this.config.upload.maxFileSizeMB<=0)throw new Error("Max file size must be positive");if(this.config.upload.maxFileCount<=0)throw new Error("Max file count must be positive");if(this.config.pagination.defaultPageSize<=0)throw new Error("Default page size must be positive")}getConfig(){return Ie({},this.config)}get(e){return this.config[e]}updateConfig(e){this.config=Ie(Ie({},this.config),e),this.validateConfig(),this.notifyListeners()}subscribe(e){return this.listeners.push(e),()=>{const t=this.listeners.indexOf(e);t>-1&&this.listeners.splice(t,1)}}notifyListeners(){this.listeners.forEach(e=>e(this.config))}isProduction(){return"production"===this.config.app.environment}isDevelopment(){return"development"===this.config.app.environment}isStaging(){return"staging"===this.config.app.environment}getAppInfo(){return{name:this.config.app.name,version:this.config.app.version,description:this.config.app.description,author:this.config.app.author,environment:this.config.app.environment}}getUploadLimits(){return{maxFileCount:this.config.upload.maxFileCount,maxFileSizeMB:this.config.upload.maxFileSizeMB,allowedExtensions:this.config.upload.allowedExtensions,totalUploadSizeMB:this.config.upload.totalUploadSizeMB,storagePath:this.config.upload.storagePath}}getOCRConfig(){return{apiKey:this.config.ocr.googleAiApiKey,parallelWorkers:this.config.ocr.parallelWorkers,timeout:this.config.ocr.timeout,retryCount:this.config.ocr.retryCount}}};cs.get("database"),cs.get("security"),cs.get("cors"),cs.get("redis"),cs.get("email"),cs.get("ocr"),cs.get("upload"),cs.get("telegram"),cs.get("app"),cs.get("ui"),cs.get("features"),cs.get("cache"),cs.get("pagination"),cs.get("api"),cs.getConfig();let ds,us=null,hs=null,ms=null;function ps(e,t){!function(){if(us)return;us=document.createElement("div"),us.setAttribute("style","position:fixed;inset:0;background:rgba(15,23,42,0.85);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:16px;padding:24px;z-index:2147483647;text-align:center;color:#fff;");const e=document.createElement("h2");e.textContent="Sunucuya ba\u011flan\u0131rken problem olu\u015ftu",e.setAttribute("style","font-size:24px;font-weight:700;margin:0;"),hs=document.createElement("p"),hs.setAttribute("style","max-width:520px;line-height:1.6;margin:0;color:#e2e8f0;"),ms=document.createElement("button"),ms.textContent="Tekrar dene",ms.setAttribute("style","padding:12px 20px;border-radius:8px;background:#2563eb;color:#fff;font-weight:600;cursor:pointer;border:none;box-shadow:0 10px 25px rgba(37,99,235,0.35);"),ms.addEventListener("click",()=>{ds&&ds()}),us.appendChild(e),us.appendChild(hs),us.appendChild(ms),document.body.appendChild(us)}(),us&&hs&&ms&&(hs.textContent=e,ds=t,us.style.display="flex",ms.style.display=t?"inline-flex":"none")}const gs=new class{constructor(){this.instance=void 0;const e=cs.getConfig();this.instance=os.create({baseURL:e.app.backendUrl,timeout:3e4,headers:{"Content-Type":"application/json",Accept:"application/json"}}),this.setupInterceptors()}setupInterceptors(){this.instance.interceptors.request.use(e=>{const t=localStorage.getItem("access_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),this.instance.interceptors.response.use(e=>(us&&(us.style.display="none"),ds=void 0,e),async e=>{var t,r,n;const s=e.config;if(401===(null===(t=e.response)||void 0===t?void 0:t.status)&&!s._retry){s._retry=!0;try{const e=localStorage.getItem("refresh_token");if(e){const t=(await os.post("".concat(this.instance.defaults.baseURL,"/api/auth/refresh"),{refresh_token:e})).data.access_token;return localStorage.setItem("access_token",t),s.headers.Authorization="Bearer ".concat(t),this.instance(s)}}catch(i){return localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/login",Promise.reject(i)}}if(401===(null===(r=e.response)||void 0===r?void 0:r.status)&&(localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/login"),null!==(n=e.response)&&void 0!==n&&n.status&&e.response.status>=500){var a;const t=null===(a=e.response.data)||void 0===a?void 0:a.detail;ps("string"===typeof t&&t.trim().length>0?t:"Sunucu beklenmedik bir hata d\xf6nd\xfcrd\xfc. L\xfctfen sistem y\xf6neticinize haber verin.",()=>window.location.reload())}return Promise.reject(e)})}async get(e,t){return this.instance.get(e,t)}async post(e,t,r){return this.instance.post(e,t,r)}async put(e,t,r){return this.instance.put(e,t,r)}async delete(e,t){return this.instance.delete(e,t)}async patch(e,t,r){return this.instance.patch(e,t,r)}},fs=async e=>(await gs.post("/api/auth/login",e)).data,xs=async()=>(await gs.post("/api/auth/logout")).data,ys=async()=>(await gs.get("/api/auth/me")).data,bs=async e=>(await gs.post("/api/auth/force-change-password",{new_password:e})).data;function vs(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}let js={data:""},ws=e=>{if("object"==typeof window){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||js},_s=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,ks=/\/\*[^]*?\*\/|  +/g,Ss=/\n+/g,Ns=(e,t)=>{let r="",n="",s="";for(let a in e){let i=e[a];"@"==a[0]?"i"==a[1]?r=a+" "+i+";":n+="f"==a[1]?Ns(i,a):a+"{"+Ns(i,"k"==a[1]?"":t)+"}":"object"==typeof i?n+=Ns(i,t?t.replace(/([^,])+/g,e=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):a):null!=i&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Ns.p?Ns.p(a,i):a+":"+i+";")}return r+(t&&s?t+"{"+s+"}":s)+n},Cs={},Ts=e=>{if("object"==typeof e){let t="";for(let r in e)t+=r+Ts(e[r]);return t}return e},Es=(e,t,r,n,s)=>{let a=Ts(e),i=Cs[a]||(Cs[a]=(e=>{let t=0,r=11;for(;t<e.length;)r=101*r+e.charCodeAt(t++)>>>0;return"go"+r})(a));if(!Cs[i]){let t=a!==e?e:(e=>{let t,r,n=[{}];for(;t=_s.exec(e.replace(ks,""));)t[4]?n.shift():t[3]?(r=t[3].replace(Ss," ").trim(),n.unshift(n[0][r]=n[0][r]||{})):n[0][t[1]]=t[2].replace(Ss," ").trim();return n[0]})(e);Cs[i]=Ns(s?{["@keyframes "+i]:t}:t,r?"":"."+i)}let l=r&&Cs.g?Cs.g:null;return r&&(Cs.g=Cs[i]),((e,t,r,n)=>{n?t.data=t.data.replace(n,e):-1===t.data.indexOf(e)&&(t.data=r?e+t.data:t.data+e)})(Cs[i],t,n,l),i};function Os(e){let t=this||{},r=e.call?e(t.p):e;return Es(r.unshift?r.raw?((e,t,r)=>e.reduce((e,n,s)=>{let a=t[s];if(a&&a.call){let e=a(r),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;a=t?"."+t:e&&"object"==typeof e?e.props?"":Ns(e,""):!1===e?"":e}return e+n+(null==a?"":a)},""))(r,[].slice.call(arguments,1),t.p):r.reduce((e,r)=>Object.assign(e,r&&r.call?r(t.p):r),{}):r,ws(t.target),t.g,t.o,t.k)}Os.bind({g:1});let Ps,Ds,As,Ms=Os.bind({k:1});function Rs(e,t){let r=this||{};return function(){let n=arguments;function s(a,i){let l=Object.assign({},a),o=l.className||s.className;r.p=Object.assign({theme:Ds&&Ds()},l),r.o=/ *go\d+/.test(o),l.className=Os.apply(r,n)+(o?" "+o:""),t&&(l.ref=i);let c=e;return e[0]&&(c=l.as||e,delete l.as),As&&c[0]&&As(l),Ps(c,l)}return t?t(s):s}}var zs,Fs,Ls,Is,Bs,Hs,Us,Ws,Ks,Vs,Ys,Gs,qs,Xs,$s,Js,Qs=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,Zs=(()=>{let e=0;return()=>(++e).toString()})(),ea=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),ta="default",ra=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return Ie(Ie({},e),{},{toasts:[t.toast,...e.toasts].slice(0,r)});case 1:return Ie(Ie({},e),{},{toasts:e.toasts.map(e=>e.id===t.toast.id?Ie(Ie({},e),t.toast):e)});case 2:let{toast:n}=t;return ra(e,{type:e.toasts.find(e=>e.id===n.id)?1:0,toast:n});case 3:let{toastId:s}=t;return Ie(Ie({},e),{},{toasts:e.toasts.map(e=>e.id===s||void 0===s?Ie(Ie({},e),{},{dismissed:!0,visible:!1}):e)});case 4:return void 0===t.toastId?Ie(Ie({},e),{},{toasts:[]}):Ie(Ie({},e),{},{toasts:e.toasts.filter(e=>e.id!==t.toastId)});case 5:return Ie(Ie({},e),{},{pausedAt:t.time});case 6:let a=t.time-(e.pausedAt||0);return Ie(Ie({},e),{},{pausedAt:void 0,toasts:e.toasts.map(e=>Ie(Ie({},e),{},{pauseDuration:e.pauseDuration+a}))})}},na=[],sa={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},aa={},ia=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ta;aa[t]=ra(aa[t]||sa,e),na.forEach(e=>{let[r,n]=e;r===t&&n(aa[t])})},la=e=>Object.keys(aa).forEach(t=>ia(e,t)),oa=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ta;return t=>{ia(t,e)}},ca={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},da=e=>(t,r)=>{let n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",r=arguments.length>2?arguments[2]:void 0;return Ie(Ie({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},r),{},{id:(null==r?void 0:r.id)||Zs()})}(t,e,r);return oa(n.toasterId||(e=>Object.keys(aa).find(t=>aa[t].toasts.some(t=>t.id===e)))(n.id))({type:2,toast:n}),n.id},ua=(e,t)=>da("blank")(e,t);ua.error=da("error"),ua.success=da("success"),ua.loading=da("loading"),ua.custom=da("custom"),ua.dismiss=(e,t)=>{let r={type:3,toastId:e};t?oa(t)(r):la(r)},ua.dismissAll=e=>ua.dismiss(void 0,e),ua.remove=(e,t)=>{let r={type:4,toastId:e};t?oa(t)(r):la(r)},ua.removeAll=e=>ua.remove(void 0,e),ua.promise=(e,t,r)=>{let n=ua.loading(t.loading,Ie(Ie({},r),null==r?void 0:r.loading));return"function"==typeof e&&(e=e()),e.then(e=>{let s=t.success?Qs(t.success,e):void 0;return s?ua.success(s,Ie(Ie({id:n},r),null==r?void 0:r.success)):ua.dismiss(n),e}).catch(e=>{let s=t.error?Qs(t.error,e):void 0;s?ua.error(s,Ie(Ie({id:n},r),null==r?void 0:r.error)):ua.dismiss(n)}),e};var ha=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",{toasts:r,pausedAt:s}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ta,[r,s]=(0,n.useState)(aa[t]||sa),a=(0,n.useRef)(aa[t]);(0,n.useEffect)(()=>(a.current!==aa[t]&&s(aa[t]),na.push([t,s]),()=>{let e=na.findIndex(e=>{let[r]=e;return r===t});e>-1&&na.splice(e,1)}),[t]);let i=r.toasts.map(t=>{var r,n,s;return Ie(Ie(Ie(Ie({},e),e[t.type]),t),{},{removeDelay:t.removeDelay||(null==(r=e[t.type])?void 0:r.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(n=e[t.type])?void 0:n.duration)||(null==e?void 0:e.duration)||ca[t.type],style:Ie(Ie(Ie({},e.style),null==(s=e[t.type])?void 0:s.style),t.style)})});return Ie(Ie({},r),{},{toasts:i})}(e,t),a=(0,n.useRef)(new Map).current,i=(0,n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(a.has(e))return;let r=setTimeout(()=>{a.delete(e),l({type:4,toastId:e})},t);a.set(e,r)},[]);(0,n.useEffect)(()=>{if(s)return;let e=Date.now(),n=r.map(r=>{if(r.duration===1/0)return;let n=(r.duration||0)+r.pauseDuration-(e-r.createdAt);if(!(n<0))return setTimeout(()=>ua.dismiss(r.id,t),n);r.visible&&ua.dismiss(r.id)});return()=>{n.forEach(e=>e&&clearTimeout(e))}},[r,s,t]);let l=(0,n.useCallback)(oa(t),[t]),o=(0,n.useCallback)(()=>{l({type:5,time:Date.now()})},[l]),c=(0,n.useCallback)((e,t)=>{l({type:1,toast:{id:e,height:t}})},[l]),d=(0,n.useCallback)(()=>{s&&l({type:6,time:Date.now()})},[s,l]),u=(0,n.useCallback)((e,t)=>{let{reverseOrder:n=!1,gutter:s=8,defaultPosition:a}=t||{},i=r.filter(t=>(t.position||a)===(e.position||a)&&t.height),l=i.findIndex(t=>t.id===e.id),o=i.filter((e,t)=>t<l&&e.visible).length;return i.filter(e=>e.visible).slice(...n?[o+1]:[0,o]).reduce((e,t)=>e+(t.height||0)+s,0)},[r]);return(0,n.useEffect)(()=>{r.forEach(e=>{if(e.dismissed)i(e.id,e.removeDelay);else{let t=a.get(e.id);t&&(clearTimeout(t),a.delete(e.id))}})},[r,i]),{toasts:r,handlers:{updateHeight:c,startPause:o,endPause:d,calculateOffset:u}}},ma=Ms(zs||(zs=vs(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),pa=Ms(Fs||(Fs=vs(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),ga=Ms(Ls||(Ls=vs(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]))),fa=Rs("div")(Is||(Is=vs(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),e=>e.primary||"#ff4b4b",ma,pa,e=>e.secondary||"#fff",ga),xa=Ms(Bs||(Bs=vs(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),ya=Rs("div")(Hs||(Hs=vs(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),e=>e.secondary||"#e0e0e0",e=>e.primary||"#616161",xa),ba=Ms(Us||(Us=vs(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]))),va=Ms(Ws||(Ws=vs(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),ja=Rs("div")(Ks||(Ks=vs(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),e=>e.primary||"#61d345",ba,va,e=>e.secondary||"#fff"),wa=Rs("div")(Vs||(Vs=vs(["\n  position: absolute;\n"]))),_a=Rs("div")(Ys||(Ys=vs(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),ka=Ms(Gs||(Gs=vs(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),Sa=Rs("div")(qs||(qs=vs(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),ka),Na=e=>{let{toast:t}=e,{icon:r,type:s,iconTheme:a}=t;return void 0!==r?"string"==typeof r?n.createElement(Sa,null,r):r:"blank"===s?null:n.createElement(_a,null,n.createElement(ya,Ie({},a)),"loading"!==s&&n.createElement(wa,null,"error"===s?n.createElement(fa,Ie({},a)):n.createElement(ja,Ie({},a))))},Ca=e=>"\n0% {transform: translate3d(0,".concat(-200*e,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),Ta=e=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*e,"%,-1px) scale(.6); opacity:0;}\n"),Ea=Rs("div")(Xs||(Xs=vs(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),Oa=Rs("div")($s||($s=vs(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]))),Pa=n.memo(e=>{let{toast:t,position:r,style:s,children:a}=e,i=t.height?((e,t)=>{let r=e.includes("top")?1:-1,[n,s]=ea()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Ca(r),Ta(r)];return{animation:t?"".concat(Ms(n)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat(Ms(s)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}})(t.position||r||"top-center",t.visible):{opacity:0},l=n.createElement(Na,{toast:t}),o=n.createElement(Oa,Ie({},t.ariaProps),Qs(t.message,t));return n.createElement(Ea,{className:t.className,style:Ie(Ie(Ie({},i),s),t.style)},"function"==typeof a?a({icon:l,message:o}):n.createElement(n.Fragment,null,l,o))});!function(e,t,r,n){Ns.p=t,Ps=e,Ds=r,As=n}(n.createElement);var Da=e=>{let{id:t,className:r,style:s,onHeightUpdate:a,children:i}=e,l=n.useCallback(e=>{if(e){let r=()=>{let r=e.getBoundingClientRect().height;a(t,r)};r(),new MutationObserver(r).observe(e,{subtree:!0,childList:!0,characterData:!0})}},[t,a]);return n.createElement("div",{ref:l,className:r,style:s},i)},Aa=Os(Js||(Js=vs(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]))),Ma=e=>{let{reverseOrder:t,position:r="top-center",toastOptions:s,gutter:a,children:i,toasterId:l,containerStyle:o,containerClassName:c}=e,{toasts:d,handlers:u}=ha(s,l);return n.createElement("div",{"data-rht-toaster":l||"",style:Ie({position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},o),className:c,onMouseEnter:u.startPause,onMouseLeave:u.endPause},d.map(e=>{let s=e.position||r,l=((e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return Ie(Ie({left:0,right:0,display:"flex",position:"absolute",transition:ea()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY(".concat(t*(r?1:-1),"px)")},n),s)})(s,u.calculateOffset(e,{reverseOrder:t,gutter:a,defaultPosition:r}));return n.createElement(Da,{id:e.id,key:e.id,onHeightUpdate:u.updateHeight,className:e.visible?Aa:"",style:l},"custom"===e.type?Qs(e.message,e):i?i(e):n.createElement(Pa,{toast:e,position:s}))}))},Ra=ua,za=r(579);const Fa=(0,n.createContext)(void 0),La=()=>{const e=(0,n.useContext)(Fa);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e},Ia=e=>{let{children:t}=e;const[r,s]=(0,n.useState)(null),[a,i]=(0,n.useState)(!0);(0,n.useEffect)(()=>{(async()=>{if(localStorage.getItem("access_token"))try{const e=await ys();s(e)}catch(e){localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),s(null)}else s(null);i(!1)})()},[]);const l=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),s(null),xs().catch(()=>{}),Ra.success("Ba\u015far\u0131yla \xe7\u0131k\u0131\u015f yap\u0131ld\u0131")},o={user:r,loading:a,login:async(e,t,r)=>{try{i(!0);const n=await fs({email:e,password:t,two_fa_code:r});return localStorage.setItem("access_token",n.access_token),localStorage.setItem("refresh_token",n.refresh_token),s(n.user),Ra.success("Giri\u015f ba\u015far\u0131l\u0131!"),{success:!0,user:n.user}}catch(l){var n,a;return{success:!1,error:(null===(n=l.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.detail)||l.message||"Giri\u015f ba\u015far\u0131s\u0131z"}}finally{i(!1)}},logout:l,refreshUser:async()=>{try{const e=await ys();s(e)}catch(e){l()}}};return(0,za.jsx)(Fa.Provider,{value:o,children:t})};var Ba={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ha=["color","size","strokeWidth","absoluteStrokeWidth","children"];var Ua=(e,t)=>{const r=(0,n.forwardRef)((r,s)=>{let{color:a="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:o,children:c}=r,d=Me(r,Ha);return(0,n.createElement)("svg",Ie(Ie({ref:s},Ba),{},{width:i,height:i,stroke:a,strokeWidth:o?24*Number(l)/Number(i):l,className:"lucide lucide-".concat((u=e,u.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()))},d),[...t.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...(Array.isArray(c)?c:[c])||[]]);var u});return r.displayName="".concat(e),r};const Wa=Ua("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Ka=Ua("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Va=Ua("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Ya=Ua("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Ga=Ua("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),qa=(0,n.createContext)(void 0),Xa=e=>{let{children:t}=e;return(0,za.jsxs)(qa.Provider,{value:{success:(e,t)=>{Ra.success(e,Ie({duration:4e3,icon:(0,za.jsx)(Wa,{className:"text-green-500",size:20}),style:{borderRadius:"10px",background:"#333",color:"#fff"}},t))},error:(e,t)=>{Ra.error(e,Ie({duration:5e3,icon:(0,za.jsx)(Ka,{className:"text-red-500",size:20}),style:{borderRadius:"10px",background:"#333",color:"#fff"}},t))},info:(e,t)=>{Ra(e,Ie({duration:4e3,icon:(0,za.jsx)(Va,{className:"text-blue-500",size:20}),style:{borderRadius:"10px",background:"#333",color:"#fff"}},t))},warning:(e,t)=>{Ra(e,Ie({duration:4e3,icon:(0,za.jsx)(Ya,{className:"text-yellow-500",size:20}),style:{borderRadius:"10px",background:"#333",color:"#fff"}},t))},loading:(e,t)=>Ra.loading(e,Ie({icon:(0,za.jsx)(Ga,{className:"text-blue-500 animate-spin",size:20}),style:{borderRadius:"10px",background:"#333",color:"#fff"}},t)),dismiss:e=>{e?Ra.dismiss(e):Ra.dismiss()},promise:async(e,t)=>Ra.promise(e,{loading:t.loading,success:t.success,error:t.error},{style:{borderRadius:"10px",background:"#333",color:"#fff"},success:{icon:(0,za.jsx)(Wa,{className:"text-green-500",size:20})},error:{icon:(0,za.jsx)(Ka,{className:"text-red-500",size:20})},loading:{icon:(0,za.jsx)(Ga,{className:"text-blue-500 animate-spin",size:20})}})},children:[t,(0,za.jsx)(Ma,{position:"top-right",reverseOrder:!1,gutter:8,containerClassName:"",containerStyle:{},toastOptions:{className:"",duration:4e3,style:{background:"#363636",color:"#fff"}}})]})},$a=async()=>(await gs.get("/api/settings/")).data,Ja=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"general";return(await gs.post("/api/settings/".concat(r,"/").concat(e),null,{params:{value:t}})).data},Qa=async e=>{await gs.put("/api/settings/bulk",{settings:e})},Za=La,ei=Ua("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),ti=Ua("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ri=()=>{const[e,t]=(0,n.useState)(""),[r,s]=(0,n.useState)(""),[a,i]=(0,n.useState)(""),[l,o]=(0,n.useState)(!1),[c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(!1),{login:h,user:m}=Za(),p=Z(),[g]=Ae();(0,n.useEffect)(()=>{m&&p("/admin/dashboard")},[m,p]);return(0,za.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,za.jsxs)("div",{className:"w-full max-w-md",children:[(0,za.jsxs)("div",{className:"text-center mb-8",children:[(0,za.jsx)("img",{src:"/assets/images/logo.svg",alt:"Pofuduk D\u0130J\u0130TAL",className:"h-16 w-auto mx-auto mb-6"}),(0,za.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Ho\u015f Geldiniz"}),(0,za.jsx)("p",{className:"text-gray-600",children:"Hesab\u0131n\u0131za giri\u015f yap\u0131n"})]}),(0,za.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-8",children:(0,za.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),!e||!r)return void Ra.error("L\xfctfen t\xfcm alanlar\u0131 doldurun",{duration:5e3});if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))if(r.length<8)Ra.error("\u015eifre en az 8 karakter olmal\u0131d\u0131r",{duration:5e3});else{u(!0);try{const t=await h(e,r,a||void 0);if(t.success&&t.user)if(t.user.must_change_password)p("/auth/change-password");else{const e=g.get("redirect");p(e||"/admin/dashboard")}else if(t.error){const e=t.error;e.includes("pasif durumda")?Ra.error("Hesab\u0131n\u0131z pasif durumda. L\xfctfen y\xf6netici ile ileti\u015fime ge\xe7in.",{duration:6e3}):e.includes("kilitlendi")?Ra.error("Hesap ge\xe7ici olarak kilitlendi. \xc7ok fazla ba\u015far\u0131s\u0131z deneme.",{duration:6e3}):e.includes("2FA kodu gerekli")?Ra.error("\u0130ki fakt\xf6rl\xfc do\u011frulama kodu gerekli.",{duration:6e3}):e.includes("Ge\xe7ersiz 2FA kodu")?Ra.error("Ge\xe7ersiz do\u011frulama kodu. L\xfctfen tekrar deneyin.",{duration:6e3}):e.includes("kay\u0131tl\u0131 de\u011fil")?Ra.error("Bu e-posta adresi sistemde kay\u0131tl\u0131 de\u011fil.",{duration:6e3}):e.includes("\u015eifre hatal\u0131")?Ra.error("\u015eifre hatal\u0131. L\xfctfen do\u011fru \u015fifreyi girin.",{duration:6e3}):e.includes("\xc7ok fazla ba\u015far\u0131s\u0131z giri\u015f")?Ra.error("\xc7ok fazla ba\u015far\u0131s\u0131z giri\u015f denemesi. L\xfctfen daha sonra tekrar deneyin.",{duration:6e3}):Ra.error(e,{duration:6e3})}}catch(i){var n,s;const e=(null===(n=i.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.detail)||i.message||"Giri\u015f ba\u015far\u0131s\u0131z";Ra.error(e,{duration:6e3})}finally{u(!1)}}else Ra.error("Ge\xe7erli bir e-posta adresi girin",{duration:5e3})},className:"space-y-6",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-posta"}),(0,za.jsx)("input",{type:"email",required:!0,value:e,onChange:e=>t(e.target.value),className:"input-field ".concat(e.length>0&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?"border-red-300 focus:ring-red-500":""),placeholder:"ornek@email.com"}),e.length>0&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)&&(0,za.jsx)("p",{className:"text-xs text-red-600 mt-1",children:"Ge\xe7erli bir e-posta adresi girin"})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u015eifre"}),(0,za.jsxs)("div",{className:"relative",children:[(0,za.jsx)("input",{type:l?"text":"password",required:!0,minLength:8,value:r,onChange:e=>s(e.target.value),className:"input-field pr-12 ".concat(r.length>0&&r.length<8?"border-red-300 focus:ring-red-500":""),placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"}),(0,za.jsx)("button",{type:"button",onClick:()=>o(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?(0,za.jsx)(ei,{size:20}):(0,za.jsx)(ti,{size:20})})]}),r.length>0&&r.length<8&&(0,za.jsxs)("p",{className:"text-xs text-red-600 mt-1",children:["\u015eifre en az 8 karakter olmal\u0131d\u0131r (",r.length,"/8)"]})]}),c&&(0,za.jsxs)("div",{className:"bg-blue-50/50 border border-blue-200 rounded-lg p-4",children:[(0,za.jsx)("label",{className:"block text-sm font-medium text-blue-900 mb-2",children:"Do\u011frulama Kodu"}),(0,za.jsx)("input",{type:"text",value:a,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"123456",maxLength:6}),(0,za.jsx)("p",{className:"text-xs text-blue-600 mt-1",children:"Do\u011frulay\u0131c\u0131 uygulaman\u0131zdan al\u0131n"})]}),(0,za.jsx)("button",{type:"submit",disabled:d,className:"w-full btn btn-primary py-3 text-base font-semibold disabled:opacity-50",children:d?(0,za.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,za.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Giri\u015f yap\u0131l\u0131yor..."]}):"Giri\u015f Yap"})]})}),(0,za.jsxs)("p",{className:"text-center text-xs text-gray-500 mt-6",children:["\xa9 ",(new Date).getFullYear()," ",(0,za.jsx)("a",{href:"https://pofudukdijital.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700",children:"Pofuduk D\u0130J\u0130TAL"})]})]})})},ni=Ua("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),si=()=>{const[e,t]=(0,n.useState)(""),[r,s]=(0,n.useState)(""),[a,i]=(0,n.useState)(!1),[l,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)(!1),{user:u,refreshUser:h}=Za(),m=Z();(0,n.useEffect)(()=>{u&&!u.must_change_password&&m("/admin/dashboard")},[u,m]);const p=(e=>{const t=e.length>=8,r=/[A-Za-z]/.test(e),n=/\d/.test(e);return{isValid:t&&r&&n,hasMinLength:t,hasLetter:r,hasNumber:n}})(e);return(0,za.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,za.jsxs)("div",{className:"w-full max-w-md",children:[(0,za.jsxs)("div",{className:"text-center mb-8",children:[(0,za.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4",children:(0,za.jsx)(ni,{className:"w-8 h-8 text-blue-600"})}),(0,za.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\u015eifrenizi De\u011fi\u015ftirin"}),(0,za.jsx)("p",{className:"text-gray-600",children:"G\xfcvenli\u011finiz i\xe7in yeni bir \u015fifre olu\u015fturun"})]}),(0,za.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:(0,za.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,za.jsx)("strong",{children:"\xd6nemli:"})," \u0130lk giri\u015f yapt\u0131\u011f\u0131n\u0131z i\xe7in g\xfcvenlik amac\u0131yla \u015fifrenizi de\u011fi\u015ftirmeniz gerekmektedir."]})}),(0,za.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-8",children:(0,za.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),e&&r)if(p.isValid)if(e===r){d(!0);try{await bs(e),Ra.success("\u015eifreniz ba\u015far\u0131yla de\u011fi\u015ftirildi!",{duration:5e3}),await h(),setTimeout(()=>{m("/admin/dashboard")},1e3)}catch(a){var n,s;const e=(null===(n=a.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.detail)||a.message||"\u015eifre de\u011fi\u015ftirme ba\u015far\u0131s\u0131z";Ra.error(e,{duration:6e3})}finally{d(!1)}}else Ra.error("\u015eifreler e\u015fle\u015fmiyor",{duration:5e3});else Ra.error("\u015eifre gereksinimleri kar\u015f\u0131lanm\u0131yor",{duration:5e3});else Ra.error("L\xfctfen t\xfcm alanlar\u0131 doldurun",{duration:5e3})},className:"space-y-6",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yeni \u015eifre"}),(0,za.jsxs)("div",{className:"relative",children:[(0,za.jsx)("input",{type:a?"text":"password",required:!0,value:e,onChange:e=>t(e.target.value),className:"input-field pr-12",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"}),(0,za.jsx)("button",{type:"button",onClick:()=>i(!a),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:a?(0,za.jsx)(ei,{size:20}):(0,za.jsx)(ti,{size:20})})]})]}),e&&(0,za.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[(0,za.jsx)("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"\u015eifre Gereksinimleri:"}),(0,za.jsxs)("div",{className:"space-y-1",children:[(0,za.jsxs)("div",{className:"flex items-center gap-2 text-xs ".concat(p.hasMinLength?"text-green-600":"text-gray-500"),children:[(0,za.jsx)(Wa,{size:14,className:p.hasMinLength?"text-green-600":"text-gray-400"}),"En az 8 karakter"]}),(0,za.jsxs)("div",{className:"flex items-center gap-2 text-xs ".concat(p.hasLetter?"text-green-600":"text-gray-500"),children:[(0,za.jsx)(Wa,{size:14,className:p.hasLetter?"text-green-600":"text-gray-400"}),"En az bir harf"]}),(0,za.jsxs)("div",{className:"flex items-center gap-2 text-xs ".concat(p.hasNumber?"text-green-600":"text-gray-500"),children:[(0,za.jsx)(Wa,{size:14,className:p.hasNumber?"text-green-600":"text-gray-400"}),"En az bir rakam"]})]})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yeni \u015eifre (Tekrar)"}),(0,za.jsxs)("div",{className:"relative",children:[(0,za.jsx)("input",{type:l?"text":"password",required:!0,value:r,onChange:e=>s(e.target.value),className:"input-field pr-12 ".concat(r&&e!==r?"border-red-300 focus:ring-red-500":""),placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"}),(0,za.jsx)("button",{type:"button",onClick:()=>o(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?(0,za.jsx)(ei,{size:20}):(0,za.jsx)(ti,{size:20})})]}),r&&e!==r&&(0,za.jsx)("p",{className:"text-xs text-red-600 mt-1",children:"\u015eifreler e\u015fle\u015fmiyor"})]}),(0,za.jsx)("button",{type:"submit",disabled:c||!p.isValid||e!==r,className:"w-full btn btn-primary py-3 text-base font-semibold disabled:opacity-50",children:c?(0,za.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,za.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"De\u011fi\u015ftiriliyor..."]}):"\u015eifreyi De\u011fi\u015ftir"})]})}),(0,za.jsxs)("p",{className:"text-center text-xs text-gray-500 mt-6",children:["\xa9 ",(new Date).getFullYear()," ",(0,za.jsx)("a",{href:"https://pofudukdijital.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700",children:"Pofuduk D\u0130J\u0130TAL"})]})]})})},ai=Ua("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),ii=Ua("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),li=Ua("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),oi=Ua("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),ci=Ua("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),di=Ua("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),ui=Ua("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),hi=Ua("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),mi=Ua("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),pi=Ua("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),gi=Ua("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),fi=Ua("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]),xi=Ua("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),yi=Ua("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),bi=async function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0;const s=new URLSearchParams({page:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1).toString(),per_page:e.toString()});t&&s.append("platform",t),r&&s.append("brand_id",r.toString()),n&&s.append("search",n);return(await gs.get("/api/social-media/channels?".concat(s.toString()))).data},vi=async e=>(await gs.get("/api/social-media/channels/".concat(e))).data,ji=async e=>{await gs.delete("/api/social-media/channels/".concat(e))},wi=async e=>(await gs.patch("/api/social-media/channels/".concat(e,"/toggle"))).data,_i=async(e,t)=>(await gs.put("/api/social-media/channels/".concat(e,"/assign-users"),{user_ids:t})).data,ki=async e=>(await gs.get("/api/social-media/channels/".concat(e,"/assigned-users"))).data,Si=async function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const t=new URLSearchParams({page:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1).toString(),per_page:e.toString()});return(await gs.get("/api/brands?".concat(t))).data},Ni=async()=>(await gs.get("/api/brands/with-products")).data,Ci=async e=>(await gs.get("/api/brands/".concat(e))).data,Ti=async e=>(await gs.post("/api/brands",e)).data,Ei=async e=>(await gs.post("/api/brands/request",e)).data,Oi=async(e,t)=>(await gs.put("/api/brands/requests/".concat(e),t)).data,Pi=async(e,t)=>(await gs.put("/api/brands/".concat(e),t)).data,Di=async e=>(await gs.put("/api/brands/".concat(e,"/activate"))).data,Ai=async e=>(await gs.put("/api/brands/".concat(e,"/deactivate"))).data,Mi=async(e,t)=>{const r=new FormData;r.append("file",t);return(await gs.post("/api/brands/".concat(e,"/logo"),r,{headers:{"Content-Type":"multipart/form-data"}})).data},Ri=async e=>(await gs.delete("/api/brands/".concat(e))).data,zi=async()=>(await gs.get("/api/system/stats")).data,Fi=async()=>(await gs.get("/api/system/dashboard-stats")).data,Li=Ua("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Ii=Ua("Grid",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"3",x2:"21",y1:"15",y2:"15",key:"o2sbyz"}],["line",{x1:"9",x2:"9",y1:"3",y2:"21",key:"13tij5"}],["line",{x1:"15",x2:"15",y1:"3",y2:"21",key:"1hpv9i"}]]),Bi=Ua("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Hi=async function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;const n=new URLSearchParams({page:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1).toString(),per_page:e.toString()});t&&n.append("role",t),r&&n.append("brand_id",r.toString());return(await gs.get("/api/users?".concat(n))).data},Ui=async e=>(await gs.post("/api/users",e)).data,Wi=async function(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(await gs.put("/api/users/".concat(e),Ie(Ie({},t),{},{send_email:r}))).data},Ki=async(e,t)=>(await gs.put("/api/users/".concat(e,"/password"),t)).data,Vi=async e=>(await gs.put("/api/users/".concat(e,"/activate"))).data,Yi=async e=>(await gs.put("/api/users/".concat(e,"/deactivate"))).data,Gi=async e=>{console.log("\ud83d\udd0d SENDING EMPLOYEE REQUEST:",e);return(await gs.post("/api/employee-requests/",e)).data},qi=async function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=arguments.length>2?arguments[2]:void 0;const r=new URLSearchParams({page:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1).toString(),per_page:e.toString()});t&&r.append("status",t);return(await gs.get("/api/employee-requests/?".concat(r))).data},Xi=async(e,t)=>(await gs.put("/api/employee-requests/".concat(e,"/approve"),{admin_notes:t})).data,$i=async(e,t)=>(await gs.put("/api/employee-requests/".concat(e,"/reject"),{status:"rejected",admin_notes:t})).data,Ji=async(e,t)=>(await gs.put("/api/employee-requests/".concat(e),t)).data,Qi=()=>{const{user:e,loading:t}=Za(),r=Z(),[s,a]=(0,n.useState)({totalBrands:0,totalEmployees:0,pendingRequests:0,totalChannels:0,activeChannels:0,totalTemplates:0,totalProducts:0}),[i,l]=(0,n.useState)({brands:[],employees:[],channels:[],recentActivity:[]}),[o,c]=(0,n.useState)(!1),d=(0,n.useCallback)(async()=>{if(e&&e.brand_ids&&0!==e.brand_ids.length)try{c(!0);const[t,r,n,s]=await Promise.allSettled([Si(1,1e3),Hi(1,1e3),qi(1,1e3,"pending"),bi(1,1e3)]),i={totalBrands:0,totalEmployees:0,pendingRequests:0,totalChannels:0,activeChannels:0,totalTemplates:0,totalProducts:0},o={brands:[],employees:[],channels:[],recentActivity:[]};if("fulfilled"===t.status){const r=t.value.brands.filter(t=>{var r;return null===(r=e.brand_ids)||void 0===r?void 0:r.includes(t.id)});i.totalBrands=r.length,o.brands=r}if("fulfilled"===r.status){const t=r.value.users.filter(t=>{var r;return(null===(r=t.brand_ids)||void 0===r?void 0:r.some(t=>{var r;return null===(r=e.brand_ids)||void 0===r?void 0:r.includes(t)}))&&"Ma\u011faza Y\xf6neticisi"!==t.role});i.totalEmployees=t.length,o.employees=t}if("fulfilled"===n.status&&(i.pendingRequests=n.value.total),"fulfilled"===s.status){const t=s.value.channels.filter(t=>{var r;return null===(r=e.brand_ids)||void 0===r?void 0:r.includes(t.brand_id)});i.totalChannels=t.length,i.activeChannels=t.filter(e=>e.is_active).length,o.channels=t}a(i),l(o)}catch(t){console.error("Dashboard verileri y\xfcklenirken hata:",t),Ra.error("Dashboard verileri y\xfcklenemedi")}finally{c(!1)}},[e]);(0,n.useEffect)(()=>{t||d()},[t,e,d]);return t?(0,za.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,za.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,za.jsxs)("div",{className:"space-y-6",children:[(0,za.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-8 text-white",children:(0,za.jsxs)("div",{className:"flex items-center justify-between",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("h1",{className:"text-3xl font-bold mb-2",children:(()=>{const t=(new Date).getHours();return"".concat(t<12?"G\xfcnayd\u0131n":t<18?"\u0130yi g\xfcnler":"\u0130yi ak\u015famlar",", ").concat(null===e||void 0===e?void 0:e.first_name,"! Ma\u011faza y\xf6netimi panelinize ho\u015f geldiniz.")})()}),(0,za.jsx)("p",{className:"text-blue-100",children:"Markalar\u0131n\u0131z\u0131, ekibinizi ve kanallar\u0131n\u0131z\u0131 y\xf6netebilirsiniz."})]}),(0,za.jsx)("div",{className:"hidden md:block",children:(0,za.jsx)("div",{className:"w-24 h-24 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:(0,za.jsx)(di,{size:32,className:"text-white"})})})]})}),(0,za.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,za.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:(0,za.jsxs)("div",{className:"flex items-center justify-between",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Markalar\u0131m"}),(0,za.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:s.totalBrands})]}),(0,za.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,za.jsx)(di,{size:28,className:"text-blue-600"})})]})}),(0,za.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:(0,za.jsxs)("div",{className:"flex items-center justify-between",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Ekibim"}),(0,za.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:s.totalEmployees})]}),(0,za.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-xl flex items-center justify-center",children:(0,za.jsx)(ci,{size:28,className:"text-green-600"})})]})}),(0,za.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:(0,za.jsxs)("div",{className:"flex items-center justify-between",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Kanallar\u0131m"}),(0,za.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:s.totalChannels}),(0,za.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[s.activeChannels," aktif"]})]}),(0,za.jsx)("div",{className:"w-16 h-16 bg-purple-100 rounded-xl flex items-center justify-center",children:(0,za.jsx)(ui,{size:28,className:"text-purple-600"})})]})}),(0,za.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:(0,za.jsxs)("div",{className:"flex items-center justify-between",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Bekleyen Talepler"}),(0,za.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:s.pendingRequests})]}),(0,za.jsx)("div",{className:"w-16 h-16 bg-orange-100 rounded-xl flex items-center justify-center",children:(0,za.jsx)(hi,{size:28,className:"text-orange-600"})})]})})]}),(0,za.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,za.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,za.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Markalar\u0131m"}),(0,za.jsx)("button",{onClick:()=>r("/admin/brands"),className:"text-blue-600 hover:text-blue-700 text-sm font-medium px-3 py-1 rounded-lg hover:bg-blue-50 transition-colors",children:"T\xfcm\xfcn\xfc G\xf6r"})]}),(0,za.jsxs)("div",{className:"space-y-4",children:[i.brands.slice(0,5).map(e=>(0,za.jsxs)("div",{className:"flex items-center gap-4 p-6 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors cursor-pointer",onClick:()=>r("/admin/brands/".concat(e.id)),children:[(0,za.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,za.jsx)(di,{size:28,className:"text-blue-600"})}),(0,za.jsxs)("div",{className:"flex-1",children:[(0,za.jsx)("p",{className:"font-semibold text-gray-900",children:e.name}),(0,za.jsx)("p",{className:"text-sm text-gray-600",children:e.description||"A\xe7\u0131klama yok"})]}),(0,za.jsx)(ti,{size:18,className:"text-gray-400"})]},e.id)),0===i.brands.length&&(0,za.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,za.jsx)(di,{size:48,className:"mx-auto mb-3 text-gray-300"}),(0,za.jsx)("p",{className:"text-lg",children:"Hen\xfcz marka atanmam\u0131\u015f"})]})]})]}),(0,za.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,za.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Ekibim"}),(0,za.jsx)("button",{onClick:()=>r("/admin/my-employees"),className:"text-blue-600 hover:text-blue-700 text-sm font-medium px-3 py-1 rounded-lg hover:bg-blue-50 transition-colors",children:"T\xfcm\xfcn\xfc G\xf6r"})]}),(0,za.jsxs)("div",{className:"space-y-4",children:[i.employees.slice(0,5).map(e=>(0,za.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors cursor-pointer",onClick:()=>r("/admin/my-employees"),children:[(0,za.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:(0,za.jsx)(ci,{size:24,className:"text-green-600"})}),(0,za.jsxs)("div",{className:"flex-1",children:[(0,za.jsxs)("p",{className:"font-semibold text-gray-900",children:[e.first_name," ",e.last_name]}),(0,za.jsx)("p",{className:"text-sm text-gray-600",children:e.email})]}),(0,za.jsx)("div",{className:"text-xs bg-blue-100 text-blue-700 px-3 py-1 rounded-full font-medium",children:e.role})]},e.id)),0===i.employees.length&&(0,za.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,za.jsx)(ci,{size:48,className:"mx-auto mb-3 text-gray-300"}),(0,za.jsx)("p",{className:"text-lg",children:"Hen\xfcz \xe7al\u0131\u015fan atanmam\u0131\u015f"})]})]})]})]}),(0,za.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,za.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Sosyal Medya Kanallar\u0131m"}),(0,za.jsx)("button",{onClick:()=>r("/admin/social-media/channels"),className:"text-blue-600 hover:text-blue-700 text-sm font-medium px-3 py-1 rounded-lg hover:bg-blue-50 transition-colors",children:"T\xfcm\xfcn\xfc G\xf6r"})]}),(0,za.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.channels.slice(0,6).map(e=>(0,za.jsxs)("div",{className:"p-6 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors cursor-pointer",onClick:()=>r("/admin/social-media/channels/".concat(e.id)),children:[(0,za.jsxs)("div",{className:"flex items-center gap-4 mb-3",children:[(0,za.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,za.jsx)(ui,{size:28,className:"text-blue-600"})}),(0,za.jsxs)("div",{className:"flex-1",children:[(0,za.jsx)("p",{className:"font-semibold text-gray-900",children:e.name}),(0,za.jsx)("p",{className:"text-sm text-gray-600",children:e.platform})]}),(0,za.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(e.is_active?"bg-green-500":"bg-red-500")})]}),(0,za.jsx)("p",{className:"text-sm text-gray-500",children:e.description||"A\xe7\u0131klama yok"})]},e.id)),0===i.channels.length&&(0,za.jsxs)("div",{className:"col-span-full text-center py-12 text-gray-500",children:[(0,za.jsx)(ui,{size:48,className:"mx-auto mb-3 text-gray-300"}),(0,za.jsx)("p",{className:"text-lg",children:"Hen\xfcz kanal olu\u015fturulmam\u0131\u015f"})]})]})]}),(0,za.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,za.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"H\u0131zl\u0131 \u0130\u015flemler"}),(0,za.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,za.jsxs)("button",{onClick:()=>r("/admin/social-media/channels"),className:"flex items-center gap-4 p-6 bg-blue-50 hover:bg-blue-100 rounded-xl transition-colors text-left",children:[(0,za.jsx)(ui,{size:28,className:"text-blue-600"}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h3",{className:"font-semibold text-gray-900",children:"Kanallar"}),(0,za.jsx)("p",{className:"text-sm text-gray-600",children:"Sosyal medya kanallar\u0131n\u0131 y\xf6net"})]})]}),(0,za.jsxs)("button",{onClick:()=>r("/admin/employee-requests"),className:"flex items-center gap-4 p-6 bg-orange-50 hover:bg-orange-100 rounded-xl transition-colors text-left",children:[(0,za.jsx)(oi,{size:28,className:"text-orange-600"}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h3",{className:"font-semibold text-gray-900",children:"\xc7al\u0131\u015fan Talepleri"}),(0,za.jsx)("p",{className:"text-sm text-gray-600",children:"Bekleyen talepleri g\xf6r\xfcnt\xfcle"})]})]}),(0,za.jsxs)("button",{onClick:()=>r("/admin/templates/create"),className:"flex items-center gap-4 p-6 bg-purple-50 hover:bg-purple-100 rounded-xl transition-colors text-left",children:[(0,za.jsx)(Li,{size:28,className:"text-purple-600"}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h3",{className:"font-semibold text-gray-900",children:"\u015eablon Olu\u015ftur"}),(0,za.jsx)("p",{className:"text-sm text-gray-600",children:"Yeni \u015fablon olu\u015ftur"})]})]}),(0,za.jsxs)("button",{onClick:()=>r("/admin/media-gallery"),className:"flex items-center gap-4 p-6 bg-indigo-50 hover:bg-indigo-100 rounded-xl transition-colors text-left",children:[(0,za.jsx)(pi,{size:28,className:"text-indigo-600"}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h3",{className:"font-semibold text-gray-900",children:"\xdcr\xfcnler"}),(0,za.jsx)("p",{className:"text-sm text-gray-600",children:"\xdcr\xfcn galerisini y\xf6net"})]})]}),(0,za.jsxs)("button",{onClick:()=>r("/admin/collages"),className:"flex items-center gap-4 p-6 bg-pink-50 hover:bg-pink-100 rounded-xl transition-colors text-left",children:[(0,za.jsx)(Ii,{size:28,className:"text-pink-600"}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h3",{className:"font-semibold text-gray-900",children:"Kolajlar"}),(0,za.jsx)("p",{className:"text-sm text-gray-600",children:"Kolaj olu\u015ftur ve y\xf6net"})]})]}),(0,za.jsxs)("button",{onClick:()=>r("/admin/templates/gallery"),className:"flex items-center gap-4 p-6 bg-teal-50 hover:bg-teal-100 rounded-xl transition-colors text-left",children:[(0,za.jsx)(Bi,{size:28,className:"text-teal-600"}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h3",{className:"font-semibold text-gray-900",children:"\u015eablon Galerisi"}),(0,za.jsx)("p",{className:"text-sm text-gray-600",children:"\u015eablonlar\u0131 g\xf6r\xfcnt\xfcle"})]})]}),(0,za.jsxs)("button",{onClick:()=>r("/admin/brands"),className:"flex items-center gap-4 p-6 bg-gray-50 hover:bg-gray-100 rounded-xl transition-colors text-left",children:[(0,za.jsx)(di,{size:28,className:"text-gray-600"}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h3",{className:"font-semibold text-gray-900",children:"Markalar"}),(0,za.jsx)("p",{className:"text-sm text-gray-600",children:"Marka bilgilerini g\xf6r\xfcnt\xfcle"})]})]})]})]})]})},Zi=()=>{var e,t,r,s,a,i,l,o,c,d,u,h,m,p,g,f,x,y,b,v,j,w,_,k,S;const{user:N,loading:C}=Za(),T=Z(),[E,O]=(0,n.useState)({totalChannels:0,activeChannels:0,totalMessages:0,totalUsers:0,totalBrands:0,totalAdmins:0,totalManagers:0,totalEmployees:0,pendingEmployeeRequests:0,totalRoles:0}),[P,D]=(0,n.useState)(!1),[A,M]=(0,n.useState)([]),[R,z]=(0,n.useState)(null),[F,L]=(0,n.useState)({brands:[],employees:[]});(0,n.useEffect)(()=>{let e=!0;return N&&(async()=>{if(N&&!C&&N.permissions){D(!0);try{var t;const e=(await bi(1,100)).channels,a=e.filter(e=>e.is_active).length,i=e.reduce((e,t)=>e+(t.message_count||0),0),l={totalChannels:e.length,activeChannels:a,totalMessages:i,totalUsers:0,totalBrands:0,totalAdmins:0,totalManagers:0,totalEmployees:0,pendingEmployeeRequests:0,totalRoles:0};if(null!==N&&void 0!==N&&null!==(t=N.permissions)&&void 0!==t&&t.includes("users.manage"))try{const e=await Fi();l.totalUsers=e.users.total,l.totalAdmins=e.users.super_admins,l.totalManagers=e.users.brand_managers,l.totalEmployees=e.users.employees,l.totalBrands=e.brands.total,l.pendingEmployeeRequests=e.employee_requests.pending,l.totalRoles=e.roles.total,l.totalChannels=e.channels.total,l.activeChannels=e.channels.active,l.totalMessages=e.channels.total_messages,l.totalProducts=e.products.total,l.totalFiles=e.products.total_files,l.totalStorageGB=e.products.total_storage_gb;try{const e=await zi();z(e)}catch(n){console.warn("System stats y\xfcklenemedi:",n)}}catch(s){console.error("Dashboard stats y\xfcklenemedi:",s),Ra.error("\u0130statistikler y\xfcklenirken hata olu\u015ftu")}else if(null!==N&&void 0!==N&&N.brand_ids&&N.brand_ids.length>0){var r;l.totalBrands=(null===(r=N.brand_ids)||void 0===r?void 0:r.length)||0,l.totalUsers=0;try{const e=(await Si(1,1e3)).brands.filter(e=>N.brand_ids&&N.brand_ids.includes(e.id));L({brands:e,employees:[]})}catch(s){console.error("Error loading manager data:",s)}l.myChannels=e.filter(e=>e.created_by===N.id).length}else l.assignedChannels=e.length,l.myChannels=e.filter(e=>e.created_by===N.id).length;O(l),M(e.slice(0,5))}catch(s){console.error("Error loading dashboard data:",s),Ra.error("Veriler y\xfcklenirken bir hata olu\u015ftu")}finally{e&&D(!1)}}})(),()=>{e=!1}},[null===N||void 0===N?void 0:N.id,null===N||void 0===N||null===(e=N.permissions)||void 0===e?void 0:e.length,C]),(0,n.useEffect)(()=>{C||N||T("/login")},[C,N,T]);const I=(0,n.useMemo)(()=>{var e;if(!N)return"";const t=(new Date).getHours(),r=t<12?"G\xfcnayd\u0131n":t<18?"\u0130yi g\xfcnler":"\u0130yi ak\u015famlar";return null!==N&&void 0!==N&&null!==(e=N.permissions)&&void 0!==e&&e.includes("users.manage")?"".concat(r,", ").concat(N.first_name,"! Sisteme ho\u015f geldiniz."):null!==N&&void 0!==N&&N.brand_ids&&N.brand_ids.length>0?"".concat(r,", ").concat(N.first_name,"! Ma\u011faza y\xf6netimi panelinize ho\u015f geldiniz."):"".concat(r,", ").concat(N.first_name,"! \xc7al\u0131\u015fma panelinize ho\u015f geldiniz.")},[N]),B=e=>{let{title:t,value:r,subtitle:n,icon:s,color:a,trend:i,onClick:l}=e;return(0,za.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 hover:shadow-lg hover:scale-105 transition-all duration-300 ".concat(l?"cursor-pointer":""," group"),onClick:l,children:(0,za.jsxs)("div",{className:"flex items-center justify-between",children:[(0,za.jsxs)("div",{className:"flex-1",children:[(0,za.jsx)("p",{className:"text-sm font-medium text-gray-600 group-hover:text-gray-700 transition-colors",children:t}),(0,za.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,za.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:"number"===typeof r?r.toLocaleString("tr-TR"):r}),i&&(0,za.jsxs)("div",{className:"flex items-center text-xs px-2 py-1 rounded-full ".concat("up"===i?"bg-green-100 text-green-700":"down"===i?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"),children:["up"===i&&(0,za.jsx)(ai,{size:12}),"down"===i&&(0,za.jsx)(ai,{size:12,className:"rotate-180"}),"stable"===i&&"\u2014"]})]}),n&&(0,za.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:n})]}),(0,za.jsx)("div",{className:"p-3 rounded-lg ".concat(a," group-hover:scale-110 transition-transform duration-300"),children:s})]})})};return C?(0,za.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,za.jsxs)("div",{className:"text-center",children:[(0,za.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mb-4"}),(0,za.jsx)("p",{className:"text-gray-600",children:"Giri\u015f kontrol ediliyor..."})]})}):null!==N&&void 0!==N&&N.brand_ids&&N.brand_ids.length>0&&(null===N||void 0===N||null===(t=N.permissions)||void 0===t||!t.includes("users.manage"))?(0,za.jsx)(Qi,{}):(0,za.jsxs)("div",{className:"space-y-6 p-6",children:[(0,za.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl shadow-sm p-4 animate-fade-in",children:(0,za.jsxs)("div",{className:"flex items-center gap-4",children:[(0,za.jsx)("div",{className:"hidden md:flex flex-shrink-0",children:(0,za.jsx)("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-lg flex items-center justify-center",children:(0,za.jsx)(ii,{size:24,className:"text-white"})})}),(0,za.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,za.jsx)("h1",{className:"text-xl font-bold text-white mb-1",children:I}),(0,za.jsxs)("p",{className:"text-sm text-blue-100",children:[(null===N||void 0===N||null===(r=N.permissions)||void 0===r?void 0:r.includes("users.manage"))&&"Sistem y\xf6netimi",(null===N||void 0===N||null===(s=N.permissions)||void 0===s?void 0:s.includes("brands.manage"))&&"Marka y\xf6netimi",!(null!==N&&void 0!==N&&null!==(a=N.permissions)&&void 0!==a&&a.includes("users.manage"))&&!(null!==N&&void 0!==N&&null!==(i=N.permissions)&&void 0!==i&&i.includes("brands.manage"))&&"Kanal y\xf6netimi"]})]})]})}),(0,za.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[(null===N||void 0===N||null===(l=N.permissions)||void 0===l?void 0:l.includes("users.manage"))&&(0,za.jsxs)(za.Fragment,{children:[(0,za.jsx)("div",{className:"animate-slide-up stagger-1",children:(0,za.jsx)(B,{title:"Toplam Admin",value:E.totalAdmins,subtitle:"sistem y\xf6neticileri",icon:(0,za.jsx)(li,{className:"h-6 w-6 text-red-600"}),color:"bg-red-100",trend:"stable",onClick:()=>T("/admin/users")})}),(0,za.jsx)("div",{className:"animate-slide-up stagger-2",children:(0,za.jsx)(B,{title:"Ma\u011faza Y\xf6neticileri",value:E.totalManagers,subtitle:"ma\u011faza y\xf6neticisi say\u0131s\u0131",icon:(0,za.jsx)(oi,{className:"h-6 w-6 text-blue-600"}),color:"bg-blue-100",trend:"up",onClick:()=>T("/admin/users")})}),(0,za.jsx)("div",{className:"animate-slide-up stagger-3",children:(0,za.jsx)(B,{title:"Toplam \xc7al\u0131\u015fan",value:E.totalEmployees,subtitle:"sistem \xe7al\u0131\u015fanlar\u0131",icon:(0,za.jsx)(ci,{className:"h-6 w-6 text-purple-600"}),color:"bg-purple-100",trend:"up",onClick:()=>T("/admin/users")})}),(0,za.jsx)("div",{className:"animate-slide-up stagger-4",children:(0,za.jsx)(B,{title:"Toplam Marka",value:E.totalBrands,subtitle:"kay\u0131tl\u0131 markalar",icon:(0,za.jsx)(di,{className:"h-6 w-6 text-green-600"}),color:"bg-green-100",trend:"stable",onClick:()=>T("/admin/brands")})}),(0,za.jsx)("div",{className:"animate-slide-up stagger-6",children:(0,za.jsx)(B,{title:"Toplam Kanal",value:E.totalChannels,subtitle:"Telegram kanallar\u0131",icon:(0,za.jsx)(ui,{className:"h-6 w-6 text-cyan-600"}),color:"bg-cyan-100",trend:"up",onClick:()=>T("/admin/social-media/channels")})}),(0,za.jsx)("div",{className:"animate-slide-up stagger-7",children:(0,za.jsx)(B,{title:"Aktif Kanallar",value:E.activeChannels,subtitle:"mesaj g\xf6ndermeye haz\u0131r",icon:(0,za.jsx)(Wa,{className:"h-6 w-6 text-emerald-600"}),color:"bg-emerald-100",trend:"stable"})}),(0,za.jsx)("div",{className:"animate-slide-up stagger-8",children:(0,za.jsx)(B,{title:"Bekleyen Talep",value:E.pendingEmployeeRequests,subtitle:"\xe7al\u0131\u015fan talepleri",icon:(0,za.jsx)(hi,{className:"h-6 w-6 text-orange-600"}),color:"bg-orange-100",trend:E.pendingEmployeeRequests>0?"up":"stable",onClick:()=>T("/admin/employee-requests")})}),(0,za.jsx)("div",{className:"animate-slide-up stagger-9",children:(0,za.jsx)(B,{title:"Toplam Mesaj",value:E.totalMessages,subtitle:"t\xfcm kanallardaki mesajlar",icon:(0,za.jsx)(mi,{className:"h-6 w-6 text-indigo-600"}),color:"bg-indigo-100",trend:"up"})}),(0,za.jsx)("div",{className:"animate-slide-up stagger-10",children:(0,za.jsx)(B,{title:"Toplam \xdcr\xfcn",value:E.totalProducts||0,subtitle:"sistemdeki \xfcr\xfcnler",icon:(0,za.jsx)(pi,{className:"h-6 w-6 text-pink-600"}),color:"bg-pink-100",trend:"up"})}),(0,za.jsx)("div",{className:"animate-slide-up stagger-11",children:(0,za.jsx)(B,{title:"Toplam Depolama",value:"".concat(E.totalStorageGB||0," GB"),subtitle:"".concat(E.totalFiles||0," dosya"),icon:(0,za.jsx)(gi,{className:"h-6 w-6 text-teal-600"}),color:"bg-teal-100",trend:"stable"})})]}),(null===N||void 0===N||null===(o=N.permissions)||void 0===o?void 0:o.includes("brands.manage"))&&!(null!==N&&void 0!==N&&null!==(c=N.permissions)&&void 0!==c&&c.includes("users.manage"))&&(0,za.jsxs)(za.Fragment,{children:[(0,za.jsx)("div",{className:"animate-slide-up stagger-1",children:(0,za.jsx)(B,{title:"Kanallar\u0131m",value:E.totalChannels,subtitle:"".concat(E.myChannels," kanal ben ekledim"),icon:(0,za.jsx)(ui,{className:"h-6 w-6 text-blue-600"}),color:"bg-blue-100",onClick:()=>T("/admin/social-media/channels")})}),(0,za.jsx)("div",{className:"animate-slide-up stagger-2",children:(0,za.jsx)(B,{title:"Aktif Kanallar",value:E.activeChannels,subtitle:"mesaj g\xf6ndermeye haz\u0131r",icon:(0,za.jsx)(Wa,{className:"h-6 w-6 text-green-600"}),color:"bg-green-100"})}),(0,za.jsx)("div",{className:"animate-slide-up stagger-3",children:(0,za.jsx)(B,{title:"Markalar\u0131m",value:E.totalBrands,subtitle:"y\xf6netti\u011fim markalar",icon:(0,za.jsx)(di,{className:"h-6 w-6 text-purple-600"}),color:"bg-purple-100",onClick:()=>T("/admin/brands")})}),(0,za.jsx)("div",{className:"animate-slide-up stagger-4",children:(0,za.jsx)(B,{title:"Ekibim",value:E.totalEmployees,subtitle:"markalar\u0131mdaki kullan\u0131c\u0131lar",icon:(0,za.jsx)(ci,{className:"h-6 w-6 text-orange-600"}),color:"bg-orange-100",onClick:()=>T("/admin/my-employees")})}),(0,za.jsx)("div",{className:"animate-slide-up stagger-5",children:(0,za.jsx)(B,{title:"Toplam Mesaj",value:E.totalMessages,subtitle:"g\xf6nderilen mesajlar",icon:(0,za.jsx)(mi,{className:"h-6 w-6 text-indigo-600"}),color:"bg-indigo-100"})})]}),!(null!==N&&void 0!==N&&null!==(d=N.permissions)&&void 0!==d&&d.includes("users.manage"))&&!(null!==N&&void 0!==N&&null!==(u=N.permissions)&&void 0!==u&&u.includes("brands.manage"))&&(0,za.jsxs)(za.Fragment,{children:[(0,za.jsx)("div",{className:"animate-slide-up stagger-1",children:(0,za.jsx)(B,{title:"Atanan Kanallar",value:null!==(h=E.assignedChannels)&&void 0!==h?h:0,subtitle:"eri\u015febilece\u011fim kanallar",icon:(0,za.jsx)(ui,{className:"h-6 w-6 text-blue-600"}),color:"bg-blue-100",onClick:()=>T("/admin/social-media/channels")})}),(0,za.jsx)("div",{className:"animate-slide-up stagger-2",children:(0,za.jsx)(B,{title:"Aktif Kanallar",value:E.activeChannels,subtitle:"mesaj g\xf6nderebilirim",icon:(0,za.jsx)(Wa,{className:"h-6 w-6 text-green-600"}),color:"bg-green-100"})}),(0,za.jsx)("div",{className:"animate-slide-up stagger-3",children:(0,za.jsx)(B,{title:"Toplam Mesaj",value:E.totalMessages,subtitle:"kanallardaki mesajlar",icon:(0,za.jsx)(mi,{className:"h-6 w-6 text-purple-600"}),color:"bg-purple-100"})}),(0,za.jsx)("div",{className:"animate-slide-up stagger-4",children:(0,za.jsx)(B,{title:"Ekledi\u011fim Kanallar",value:null!==(m=E.myChannels)&&void 0!==m?m:0,subtitle:"ben ekledim",icon:(0,za.jsx)(pi,{className:"h-6 w-6 text-orange-600"}),color:"bg-orange-100"})})]})]}),(null===N||void 0===N||null===(p=N.permissions)||void 0===p?void 0:p.includes("users.manage"))&&R&&(0,za.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,za.jsxs)("div",{className:"card bg-gradient-to-br from-blue-50 to-blue-100",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,za.jsx)("div",{className:"p-3 bg-blue-500 rounded-lg",children:(0,za.jsx)(fi,{size:24,className:"text-white"})}),(0,za.jsxs)("div",{className:"text-right",children:[(0,za.jsx)("p",{className:"text-sm text-blue-600 font-medium",children:"CPU Kullan\u0131m\u0131"}),(0,za.jsxs)("p",{className:"text-2xl font-bold text-blue-900",children:[null===(g=R.cpu)||void 0===g||null===(f=g.usage_percent)||void 0===f?void 0:f.toFixed(1),"%"]})]})]}),(0,za.jsx)("div",{className:"w-full bg-blue-200 rounded-full h-2",children:(0,za.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500",style:{width:"".concat(null===(x=R.cpu)||void 0===x?void 0:x.usage_percent,"%")}})})]}),(0,za.jsxs)("div",{className:"card bg-gradient-to-br from-green-50 to-green-100",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,za.jsx)("div",{className:"p-3 bg-green-500 rounded-lg",children:(0,za.jsx)(gi,{size:24,className:"text-white"})}),(0,za.jsxs)("div",{className:"text-right",children:[(0,za.jsx)("p",{className:"text-sm text-green-600 font-medium",children:"RAM Kullan\u0131m\u0131"}),(0,za.jsxs)("p",{className:"text-2xl font-bold text-green-900",children:[null===(y=R.memory)||void 0===y||null===(b=y.usage_percent)||void 0===b?void 0:b.toFixed(1),"%"]})]})]}),(0,za.jsx)("div",{className:"w-full bg-green-200 rounded-full h-2",children:(0,za.jsx)("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-500",style:{width:"".concat(null===(v=R.memory)||void 0===v?void 0:v.usage_percent,"%")}})})]}),(0,za.jsxs)("div",{className:"card bg-gradient-to-br from-purple-50 to-purple-100",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,za.jsx)("div",{className:"p-3 bg-purple-500 rounded-lg",children:(0,za.jsx)(xi,{size:24,className:"text-white"})}),(0,za.jsxs)("div",{className:"text-right",children:[(0,za.jsx)("p",{className:"text-sm text-purple-600 font-medium",children:"Disk Kullan\u0131m\u0131"}),(0,za.jsxs)("p",{className:"text-2xl font-bold text-purple-900",children:[null===(j=R.disk)||void 0===j||null===(w=j.usage_percent)||void 0===w?void 0:w.toFixed(1),"%"]})]})]}),(0,za.jsx)("div",{className:"w-full bg-purple-200 rounded-full h-2",children:(0,za.jsx)("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-500",style:{width:"".concat(null===(_=R.disk)||void 0===_?void 0:_.usage_percent,"%")}})})]})]}),A.length>0&&(0,za.jsxs)("div",{className:"card",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,za.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Son Kanallar"}),(0,za.jsx)("button",{onClick:()=>T("/admin/social-media/channels"),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"T\xfcm\xfcn\xfc G\xf6r \u2192"})]}),(0,za.jsx)("div",{className:"space-y-4",children:A.map(e=>(0,za.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",onClick:()=>T("/admin/social-media/channels/".concat(e.id)),children:[(0,za.jsxs)("div",{className:"flex items-center gap-4",children:[(0,za.jsx)("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center ".concat(e.is_active?"bg-green-100":"bg-gray-200"),children:(0,za.jsx)(ui,{size:24,className:e.is_active?"text-green-600":"text-gray-400"})}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h3",{className:"font-medium text-gray-900",children:e.name}),(0,za.jsx)("p",{className:"text-sm text-gray-600",children:e.brand_name})]})]}),(0,za.jsxs)("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:[(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)(ci,{size:16}),(0,za.jsx)("span",{children:e.member_count||0})]}),(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)(hi,{size:16}),(0,za.jsx)("span",{children:e.last_activity?new Date(e.last_activity).toLocaleDateString("tr-TR"):"Yok"})]}),e.is_active?(0,za.jsx)(Wa,{size:20,className:"text-green-500"}):(0,za.jsx)(yi,{size:20,className:"text-gray-400"})]})]},e.id))})]}),(null===N||void 0===N?void 0:N.brand_ids)&&N.brand_ids.length>0&&F.brands.length>0&&(0,za.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,za.jsxs)("div",{className:"card",children:[(0,za.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Markalar\u0131m"}),(0,za.jsx)("div",{className:"space-y-3",children:F.brands.slice(0,5).map(e=>(0,za.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",onClick:()=>T("/admin/brands"),children:[(0,za.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,za.jsx)(di,{size:20,className:"text-blue-600"})}),(0,za.jsxs)("div",{className:"flex-1",children:[(0,za.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,za.jsx)("p",{className:"text-sm text-gray-600",children:e.description||"A\xe7\u0131klama yok"})]})]},e.id))})]}),(0,za.jsxs)("div",{className:"card",children:[(0,za.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Ekibim"}),(0,za.jsx)("div",{className:"space-y-3",children:F.employees.slice(0,5).map(e=>(0,za.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",onClick:()=>T("/admin/my-employees"),children:[(0,za.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:(0,za.jsx)(ci,{size:20,className:"text-green-600"})}),(0,za.jsxs)("div",{className:"flex-1",children:[(0,za.jsxs)("p",{className:"font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,za.jsx)("p",{className:"text-sm text-gray-600",children:e.email})]})]},e.id))})]})]}),(0,za.jsxs)("div",{className:"card",children:[(0,za.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"H\u0131zl\u0131 \u0130\u015flemler"}),(0,za.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,za.jsxs)("button",{onClick:()=>T("/admin/social-media/channels"),className:"flex items-center gap-4 p-4 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors text-left",children:[(0,za.jsx)(ui,{size:24,className:"text-blue-600"}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h3",{className:"font-medium text-gray-900",children:"Kanallar"}),(0,za.jsx)("p",{className:"text-sm text-gray-600",children:"Kanallar\u0131 y\xf6net"})]})]}),((null===N||void 0===N||null===(k=N.permissions)||void 0===k?void 0:k.includes("users.manage"))||(null===N||void 0===N||null===(S=N.permissions)||void 0===S?void 0:S.includes("brands.manage")))&&(0,za.jsxs)(za.Fragment,{children:[(0,za.jsxs)("button",{onClick:()=>T("/admin/users"),className:"flex items-center gap-4 p-4 bg-green-50 hover:bg-green-100 rounded-lg transition-colors text-left",children:[(0,za.jsx)(ci,{size:24,className:"text-green-600"}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h3",{className:"font-medium text-gray-900",children:"Kullan\u0131c\u0131lar"}),(0,za.jsx)("p",{className:"text-sm text-gray-600",children:"Kullan\u0131c\u0131lar\u0131 y\xf6net"})]})]}),(0,za.jsxs)("button",{onClick:()=>T("/admin/brands"),className:"flex items-center gap-4 p-4 bg-purple-50 hover:bg-purple-100 rounded-lg transition-colors text-left",children:[(0,za.jsx)(di,{size:24,className:"text-purple-600"}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h3",{className:"font-medium text-gray-900",children:"Markalar"}),(0,za.jsx)("p",{className:"text-sm text-gray-600",children:"Markalar\u0131 y\xf6net"})]})]})]})]})]})]})},el={getBots:async()=>(await gs.get("/api/telegram-bots")).data,getBot:async e=>(await gs.get("/api/telegram-bots/".concat(e))).data,createBot:async e=>(await gs.post("/api/telegram-bots",e)).data,updateBot:async(e,t)=>(await gs.put("/api/telegram-bots/".concat(e),t)).data,async deleteBot(e){await gs.delete("/api/telegram-bots/".concat(e))},verifyBot:async e=>(await gs.post("/api/telegram-bots/".concat(e,"/verify"))).data,discoverChannelsForBot:async e=>(await gs.post("/api/telegram-bots/".concat(e,"/discover-channels"))).data,getBotChannels:async e=>(await gs.get("/api/telegram-bots/".concat(e,"/channels"))).data},tl=Ua("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),rl=Ua("Bot",[["rect",{width:"18",height:"10",x:"3",y:"11",rx:"2",key:"1ofdy3"}],["circle",{cx:"12",cy:"5",r:"2",key:"f1ur92"}],["path",{d:"M12 7v4",key:"xawao1"}],["line",{x1:"8",x2:"8",y1:"16",y2:"16",key:"h6x27f"}],["line",{x1:"16",x2:"16",y1:"16",y2:"16",key:"5lty7f"}]]),nl=Ua("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),sl=Ua("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]),al=Ua("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]),il=Ua("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),ll=()=>{var e;const{user:t,loading:r}=La(),s=Z(),[a,i]=(0,n.useState)([]),[l,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)([]),[u,h]=(0,n.useState)(1),[m]=(0,n.useState)(12),[p,g]=(0,n.useState)(1),[f,x]=(0,n.useState)(""),[y,b]=(0,n.useState)("all"),[v,j]=(0,n.useState)(!1),w=(null===t||void 0===t||null===(e=t.brand_ids)||void 0===e?void 0:e[0])||null,_=(0,n.useCallback)(async e=>{let{page:t,perPage:r,search:n,status:s}=e;const a=Ie(Ie({page:t,per_page:r,search:n},w&&{brand_id:w}),"all"!==s&&{is_active:"active"===s}),i=await bi(a.page,a.per_page,"telegram",a.brand_id,a.search);return{data:i.channels,total:i.total,totalPages:i.total_pages}},[w]),k=(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all";o(!0);try{const{data:n,total:s,totalPages:a}=await _({page:e,perPage:m,search:t,status:r});i(n),g(a||Math.ceil(s/m))}catch(a){var n,s;Ra.error(String((null===(n=a.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.detail)||"Kanallar y\xfcklenemedi"))}finally{o(!1)}},[_,m]),S=(0,n.useCallback)(async()=>{try{const e=(await el.getBots()).bots.filter(e=>e.brand_id===w);d(e)}catch(e){console.error("Bots load error")}},[w]),N=async()=>{if(0===c.length)return void Ra.error("\xd6nce bot ekleyin");j(!0);let e=0;const t=c.map(async t=>{try{const r=await el.discoverChannelsForBot(t.id);r.success&&(e+=r.discovered_count||0,Ra.success("Bot ".concat(t.bot_name,": ").concat(r.discovered_count," kanal eklendi")))}catch(s){var r,n;Ra.error(String((null===(r=s.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||"Ke\u015fif hatas\u0131 olu\u015ftu"))}});try{await Promise.all(t),Ra.success("Toplam ".concat(e," kanal ke\u015ffedildi!")),k(u,f,y)}catch(r){Ra.error("Ke\u015fif tamamlanamad\u0131")}finally{j(!1)}},C=e=>{e>=1&&e<=p&&(h(e),k(e,f,y))},T=()=>{k(1,f,y)};return(0,n.useEffect)(()=>{t&&(S(),k(1,"","all"))},[t,k,S]),r?(0,za.jsx)("div",{className:"p-6",children:"Y\xfckleniyor..."}):t?(0,za.jsxs)("div",{className:"p-6 space-y-6",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("h1",{className:"text-2xl font-bold",children:"Telegram Kanallar\u0131"}),(0,za.jsx)("p",{className:"text-gray-600 mt-1",children:"Bot'lar\u0131n\u0131za ba\u011fl\u0131 kanallar"})]}),c.length>0&&(0,za.jsxs)("button",{onClick:N,disabled:v,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:[v?(0,za.jsx)(tl,{className:"animate-spin h-4 w-4"}):(0,za.jsx)(rl,{size:20}),"Kanallar\u0131 Ke\u015ffet"]}),0===a.length&&0===c.length&&(0,za.jsxs)("div",{className:"text-center py-8",children:[(0,za.jsx)("p",{className:"text-gray-500 mb-4",children:"Hen\xfcz bot eklenmemi\u015f. Bot ekleyin ki kanallar otomatik ke\u015ffedilsin."}),(0,za.jsx)("button",{onClick:()=>s("/admin/telegram/bots"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Bot Ekle"})]})]}),(0,za.jsxs)("div",{className:"flex gap-4 items-end",children:[(0,za.jsx)("div",{className:"flex-1",children:(0,za.jsxs)("div",{className:"relative",children:[(0,za.jsx)(nl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,za.jsx)("input",{type:"text",value:f,onChange:e=>x(e.target.value),onKeyPress:e=>"Enter"===e.key&&T(),placeholder:"Kanal ara...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 w-full"})]})}),(0,za.jsxs)("select",{value:y,onChange:e=>{return t=e.target.value,b(t),void k(1,f,t);var t},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,za.jsx)("option",{value:"all",children:"T\xfcm Durumlar"}),(0,za.jsx)("option",{value:"active",children:"Aktif"}),(0,za.jsx)("option",{value:"inactive",children:"Pasif"})]}),(0,za.jsx)("button",{onClick:T,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Ara"})]}),l?(0,za.jsx)("div",{className:"flex justify-center py-8",children:(0,za.jsx)(tl,{className:"animate-spin h-8 w-8 text-gray-500"})}):a.length>0?(0,za.jsx)("div",{className:"overflow-x-auto",children:(0,za.jsxs)("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg",children:[(0,za.jsx)("thead",{className:"bg-gray-50",children:(0,za.jsxs)("tr",{children:[(0,za.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kanal"}),(0,za.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Platform"}),(0,za.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\xdcye Say\u0131s\u0131"}),(0,za.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Durum"}),(0,za.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Son Post"}),(0,za.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0130\u015flemler"})]})}),(0,za.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(e=>{var t;return(0,za.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,za.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,za.jsxs)("div",{className:"flex items-center",children:[(0,za.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,za.jsx)("img",{className:"h-10 w-10 rounded-full",src:e.avatar_url||"/default-channel.png",alt:""})}),(0,za.jsxs)("div",{className:"ml-4",children:[(0,za.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,za.jsx)("div",{className:"text-sm text-gray-500",children:e.channel_username||e.channel_id})]})]})}),(0,za.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.platform}),(0,za.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(null===(t=e.member_count)||void 0===t?void 0:t.toLocaleString())||"0"}),(0,za.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,za.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"Aktif":"Pasif"})}),(0,za.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.last_post_at?new Date(e.last_post_at).toLocaleDateString():"Hi\xe7"}),(0,za.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)("button",{onClick:()=>s("/admin/channels/".concat(e.id)),className:"text-indigo-600 hover:text-indigo-900",children:"Detay"}),(0,za.jsx)("button",{onClick:()=>(async e=>{try{await wi(e),Ra.success("Kanal durumu g\xfcncellendi"),k(u,f,y)}catch(n){var t,r;Ra.error(String((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Durum g\xfcncellenemedi"))}})(e.id,e.is_active),className:"text-gray-600 hover:text-gray-900",children:e.is_active?(0,za.jsx)(sl,{size:16}):(0,za.jsx)(al,{size:16})}),(0,za.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Bu kanal\u0131 silmek istedi\u011finizden emin misiniz?"))try{await ji(e),Ra.success("Kanal silindi"),k(u,f,y)}catch(n){var t,r;Ra.error(String((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Kanal silinemedi"))}})(e.id),className:"text-red-600 hover:text-red-900",children:(0,za.jsx)(il,{size:16})})]})})]},e.id)})})]})}):(0,za.jsxs)("div",{className:"text-center py-12",children:[(0,za.jsx)(Ya,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,za.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Hen\xfcz kanal yok"}),(0,za.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Bot ekleyin ve kanallar\u0131 ke\u015ffedin."}),(0,za.jsx)("div",{className:"mt-6",children:(0,za.jsxs)("button",{onClick:N,disabled:v||0===c.length,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:[v?(0,za.jsx)(tl,{className:"animate-spin mr-2 h-4 w-4"}):(0,za.jsx)(rl,{className:"mr-2 h-4 w-4"}),"Ke\u015ffet"]})})]}),p>1&&(0,za.jsxs)("div",{className:"flex justify-center space-x-2",children:[(0,za.jsx)("button",{onClick:()=>C(u-1),disabled:1===u,className:"px-3 py-2 border rounded-lg disabled:opacity-50",children:"\xd6nceki"}),(0,za.jsxs)("span",{className:"px-3 py-2",children:[u," / ",p]}),(0,za.jsx)("button",{onClick:()=>C(u+1),disabled:u===p,className:"px-3 py-2 border rounded-lg disabled:opacity-50",children:"Sonraki"})]})]}):(0,za.jsx)("div",{className:"p-6",children:"Giri\u015f yap\u0131n"})},ol=Ua("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),cl=Ua("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),dl=Ua("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),ul=Ua("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),hl=Ua("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),ml=Ua("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),pl=Ua("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),gl=Ua("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),fl=Ua("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),xl={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function yl(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const bl={date:yl({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:yl({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:yl({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},vl={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function jl(e){return(t,r)=>{let n;if("formatting"===(null!==r&&void 0!==r&&r.context?String(r.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,s=null!==r&&void 0!==r&&r.width?String(r.width):t;n=e.formattingValues[s]||e.formattingValues[t]}else{const t=e.defaultWidth,s=null!==r&&void 0!==r&&r.width?String(r.width):e.defaultWidth;n=e.values[s]||e.values[t]}return n[e.argumentCallback?e.argumentCallback(t):t]}}function wl(e){return function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;const i=a[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],o=Array.isArray(l)?function(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r;return}(l,e=>e.test(i)):function(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r;return}(l,e=>e.test(i));let c;c=e.valueCallback?e.valueCallback(o):o,c=r.valueCallback?r.valueCallback(c):c;return{value:c,rest:t.slice(i.length)}}}var _l;const kl={code:"en-US",formatDistance:(e,t,r)=>{let n;const s=xl[e];return n="string"===typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),null!==r&&void 0!==r&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n},formatLong:bl,formatRelative:(e,t,r,n)=>vl[e],localize:{ordinalNumber:(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:jl({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:jl({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:jl({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:jl({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:jl({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(_l={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=e.match(_l.matchPattern);if(!r)return null;const n=r[0],s=e.match(_l.parsePattern);if(!s)return null;let a=_l.valueCallback?_l.valueCallback(s[0]):s[0];return a=t.valueCallback?t.valueCallback(a):a,{value:a,rest:e.slice(n.length)}}),era:wl({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:wl({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:wl({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:wl({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:wl({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};let Sl={};function Nl(){return Sl}Math.pow(10,8);const Cl=6048e5,Tl=Symbol.for("constructDateFrom");function El(e,t){return"function"===typeof e?e(t):e&&"object"===typeof e&&Tl in e?e[Tl](t):e instanceof Date?new e.constructor(t):new Date(t)}function Ol(e,t){return El(t||e,e)}function Pl(e){const t=Ol(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Dl(e,t){const r=Ol(e,null===t||void 0===t?void 0:t.in);return r.setHours(0,0,0,0),r}function Al(e,t,r){const[n,s]=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const s=El.bind(null,e||r.find(e=>"object"===typeof e));return r.map(s)}(null===r||void 0===r?void 0:r.in,e,t),a=Dl(n),i=Dl(s),l=+a-Pl(a),o=+i-Pl(i);return Math.round((l-o)/864e5)}function Ml(e,t){const r=Ol(e,null===t||void 0===t?void 0:t.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function Rl(e,t){const r=Ol(e,null===t||void 0===t?void 0:t.in);return Al(r,Ml(r))+1}function zl(e,t){var r,n,s,a,i,l;const o=Nl(),c=null!==(r=null!==(n=null!==(s=null!==(a=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==a?a:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.weekStartsOn)&&void 0!==s?s:o.weekStartsOn)&&void 0!==n?n:null===(l=o.locale)||void 0===l||null===(l=l.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==r?r:0,d=Ol(e,null===t||void 0===t?void 0:t.in),u=d.getDay(),h=(u<c?7:0)+u-c;return d.setDate(d.getDate()-h),d.setHours(0,0,0,0),d}function Fl(e,t){return zl(e,Ie(Ie({},t),{},{weekStartsOn:1}))}function Ll(e,t){const r=Ol(e,null===t||void 0===t?void 0:t.in),n=r.getFullYear(),s=El(r,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const a=Fl(s),i=El(r,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const l=Fl(i);return r.getTime()>=a.getTime()?n+1:r.getTime()>=l.getTime()?n:n-1}function Il(e,t){const r=Ll(e,t),n=El((null===t||void 0===t?void 0:t.in)||e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),Fl(n)}function Bl(e,t){const r=Ol(e,null===t||void 0===t?void 0:t.in),n=+Fl(r)-+Il(r);return Math.round(n/Cl)+1}function Hl(e,t){var r,n,s,a,i,l;const o=Ol(e,null===t||void 0===t?void 0:t.in),c=o.getFullYear(),d=Nl(),u=null!==(r=null!==(n=null!==(s=null!==(a=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==a?a:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==s?s:d.firstWeekContainsDate)&&void 0!==n?n:null===(l=d.locale)||void 0===l||null===(l=l.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==r?r:1,h=El((null===t||void 0===t?void 0:t.in)||e,0);h.setFullYear(c+1,0,u),h.setHours(0,0,0,0);const m=zl(h,t),p=El((null===t||void 0===t?void 0:t.in)||e,0);p.setFullYear(c,0,u),p.setHours(0,0,0,0);const g=zl(p,t);return+o>=+m?c+1:+o>=+g?c:c-1}function Ul(e,t){var r,n,s,a,i,l;const o=Nl(),c=null!==(r=null!==(n=null!==(s=null!==(a=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==a?a:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==s?s:o.firstWeekContainsDate)&&void 0!==n?n:null===(l=o.locale)||void 0===l||null===(l=l.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==r?r:1,d=Hl(e,t),u=El((null===t||void 0===t?void 0:t.in)||e,0);u.setFullYear(d,0,c),u.setHours(0,0,0,0);return zl(u,t)}function Wl(e,t){const r=Ol(e,null===t||void 0===t?void 0:t.in),n=+zl(r,t)-+Ul(r,t);return Math.round(n/Cl)+1}function Kl(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const Vl={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return Kl("yy"===t?n%100:n,t.length)},M(e,t){const r=e.getMonth();return"M"===t?String(r+1):Kl(r+1,2)},d:(e,t)=>Kl(e.getDate(),t.length),a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return"am"===r?"a.m.":"p.m."}},h:(e,t)=>Kl(e.getHours()%12||12,t.length),H:(e,t)=>Kl(e.getHours(),t.length),m:(e,t)=>Kl(e.getMinutes(),t.length),s:(e,t)=>Kl(e.getSeconds(),t.length),S(e,t){const r=t.length,n=e.getMilliseconds();return Kl(Math.trunc(n*Math.pow(10,r-3)),t.length)}},Yl="midnight",Gl="noon",ql="morning",Xl="afternoon",$l="evening",Jl="night",Ql={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if("yo"===t){const t=e.getFullYear(),n=t>0?t:1-t;return r.ordinalNumber(n,{unit:"year"})}return Vl.y(e,t)},Y:function(e,t,r,n){const s=Hl(e,n),a=s>0?s:1-s;if("YY"===t){return Kl(a%100,2)}return"Yo"===t?r.ordinalNumber(a,{unit:"year"}):Kl(a,t.length)},R:function(e,t){return Kl(Ll(e),t.length)},u:function(e,t){return Kl(e.getFullYear(),t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Kl(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Kl(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Vl.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return Kl(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const s=Wl(e,n);return"wo"===t?r.ordinalNumber(s,{unit:"week"}):Kl(s,t.length)},I:function(e,t,r){const n=Bl(e);return"Io"===t?r.ordinalNumber(n,{unit:"week"}):Kl(n,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getDate(),{unit:"date"}):Vl.d(e,t)},D:function(e,t,r){const n=Rl(e);return"Do"===t?r.ordinalNumber(n,{unit:"dayOfYear"}):Kl(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const s=e.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return Kl(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const s=e.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return Kl(a,t.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),s=0===n?7:n;switch(t){case"i":return String(s);case"ii":return Kl(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let s;switch(s=12===n?Gl:0===n?Yl:n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let s;switch(s=n>=17?$l:n>=12?Xl:n>=4?ql:Jl,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),r.ordinalNumber(t,{unit:"hour"})}return Vl.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getHours(),{unit:"hour"}):Vl.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return"Ko"===t?r.ordinalNumber(n,{unit:"hour"}):Kl(n,t.length)},k:function(e,t,r){let n=e.getHours();return 0===n&&(n=24),"ko"===t?r.ordinalNumber(n,{unit:"hour"}):Kl(n,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Vl.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Vl.s(e,t)},S:function(e,t){return Vl.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(0===n)return"Z";switch(t){case"X":return eo(n);case"XXXX":case"XX":return to(n);default:return to(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return eo(n);case"xxxx":case"xx":return to(n);default:return to(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Zl(n,":");default:return"GMT"+to(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Zl(n,":");default:return"GMT"+to(n,":")}},t:function(e,t,r){return Kl(Math.trunc(+e/1e3),t.length)},T:function(e,t,r){return Kl(+e,t.length)}};function Zl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const r=e>0?"-":"+",n=Math.abs(e),s=Math.trunc(n/60),a=n%60;return 0===a?r+String(s):r+String(s)+t+Kl(a,2)}function eo(e,t){if(e%60===0){return(e>0?"-":"+")+Kl(Math.abs(e)/60,2)}return to(e,t)}function to(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const r=e>0?"-":"+",n=Math.abs(e);return r+Kl(Math.trunc(n/60),2)+t+Kl(n%60,2)}const ro=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},no=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},so={p:no,P:(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return ro(e,t);let a;switch(n){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;default:a=t.dateTime({width:"full"})}return a.replace("{{date}}",ro(n,t)).replace("{{time}}",no(s,t))}},ao=/^D+$/,io=/^Y+$/,lo=["D","DD","YY","YYYY"];function oo(e){return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function co(e){return!(!oo(e)&&"number"!==typeof e||isNaN(+Ol(e)))}const uo=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ho=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,mo=/^'([^]*?)'?$/,po=/''/g,go=/[a-zA-Z]/;function fo(e,t,r){var n,s,a,i,l,o,c,d,u,h,m,p,g,f;const x=Nl(),y=null!==(n=null!==(s=null===r||void 0===r?void 0:r.locale)&&void 0!==s?s:x.locale)&&void 0!==n?n:kl,b=null!==(a=null!==(i=null!==(l=null!==(o=null===r||void 0===r?void 0:r.firstWeekContainsDate)&&void 0!==o?o:null===r||void 0===r||null===(c=r.locale)||void 0===c||null===(c=c.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==l?l:x.firstWeekContainsDate)&&void 0!==i?i:null===(d=x.locale)||void 0===d||null===(d=d.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==a?a:1,v=null!==(u=null!==(h=null!==(m=null!==(p=null===r||void 0===r?void 0:r.weekStartsOn)&&void 0!==p?p:null===r||void 0===r||null===(g=r.locale)||void 0===g||null===(g=g.options)||void 0===g?void 0:g.weekStartsOn)&&void 0!==m?m:x.weekStartsOn)&&void 0!==h?h:null===(f=x.locale)||void 0===f||null===(f=f.options)||void 0===f?void 0:f.weekStartsOn)&&void 0!==u?u:0,j=Ol(e,null===r||void 0===r?void 0:r.in);if(!co(j))throw new RangeError("Invalid time value");let w=t.match(ho).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,so[t])(e,y.formatLong)}return e}).join("").match(uo).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:xo(e)};if(Ql[t])return{isToken:!0,value:e};if(t.match(go))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});y.localize.preprocessor&&(w=y.localize.preprocessor(j,w));const _={firstWeekContainsDate:b,weekStartsOn:v,locale:y};return w.map(n=>{if(!n.isToken)return n.value;const s=n.value;(null!==r&&void 0!==r&&r.useAdditionalWeekYearTokens||!function(e){return io.test(e)}(s))&&(null!==r&&void 0!==r&&r.useAdditionalDayOfYearTokens||!function(e){return ao.test(e)}(s))||function(e,t,r){const n=function(e,t,r){const n="Y"===e[0]?"years":"days of the month";return"Use `".concat(e.toLowerCase(),"` instead of `").concat(e,"` (in `").concat(t,"`) for formatting ").concat(n," to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}(e,t,r);if(console.warn(n),lo.includes(e))throw new RangeError(n)}(s,t,String(e));return(0,Ql[s[0]])(j,s,y.localize,_)}).join("")}function xo(e){const t=e.match(mo);return t?t[1].replace(po,"'"):e}const yo=Ua("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),bo=e=>{let{channelId:t,channelName:r,brandId:s,currentAssignedUserIds:a,currentUserId:i,onClose:l,onSuccess:o}=e;const[c,d]=(0,n.useState)([]),[u,h]=(0,n.useState)(a),[m,p]=(0,n.useState)(!1),[g,f]=(0,n.useState)(!1),x=(0,n.useCallback)(async()=>{try{p(!0);const e=(await Hi(1,100)).users.filter(e=>e.is_active&&e.id!==i&&("Ma\u011faza \xc7al\u0131\u015fan\u0131"===e.role||"Ma\u011faza Y\xf6neticisi"===e.role)&&e.brand_ids&&e.brand_ids.includes(s));d(e)}catch(e){Ra.error("Kullan\u0131c\u0131lar y\xfcklenemedi"),console.error("Error loading users:",e)}finally{p(!1)}},[s,i]);(0,n.useEffect)(()=>{x()},[x]);return(0,za.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,za.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] flex flex-col",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Kullan\u0131c\u0131 Y\xf6netimi"}),(0,za.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:r}),(0,za.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"\xc7al\u0131\u015fan veya y\xf6netici atayabilirsiniz"})]}),(0,za.jsx)("button",{onClick:l,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,za.jsx)(fl,{size:20,className:"text-gray-500"})})]}),(0,za.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:m?(0,za.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,za.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):0===c.length?(0,za.jsxs)("div",{className:"text-center py-12",children:[(0,za.jsx)(ci,{size:48,className:"mx-auto text-gray-300 mb-4"}),(0,za.jsx)("p",{className:"text-gray-600",children:"Bu markaya atanm\u0131\u015f kullan\u0131c\u0131 bulunamad\u0131"}),(0,za.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"\xc7al\u0131\u015fan veya y\xf6netici bulunamad\u0131"})]}):(0,za.jsx)("div",{className:"space-y-2",children:c.map(e=>(0,za.jsxs)("div",{onClick:()=>{return t=e.id,void h(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"flex items-center justify-between p-4 rounded-lg border-2 cursor-pointer transition-all ".concat(u.includes(e.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[(0,za.jsxs)("div",{className:"flex items-center gap-3",children:[(0,za.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat(u.includes(e.id)?"bg-blue-100":"bg-gray-100"),children:(0,za.jsx)(ci,{size:20,className:u.includes(e.id)?"text-blue-600":"text-gray-600"})}),(0,za.jsxs)("div",{className:"flex-1",children:[(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsxs)("p",{className:"font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,za.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium ".concat("Ma\u011faza Y\xf6neticisi"===e.role?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"),children:"Ma\u011faza Y\xf6neticisi"===e.role?"Y\xf6netici":"\xc7al\u0131\u015fan"})]}),(0,za.jsx)("p",{className:"text-sm text-gray-600",children:e.email})]})]}),u.includes(e.id)&&(0,za.jsx)("div",{className:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center",children:(0,za.jsx)(yo,{size:16,className:"text-white"})})]},e.id))})}),(0,za.jsxs)("div",{className:"flex items-center justify-between p-6 border-t bg-gray-50",children:[(0,za.jsxs)("div",{className:"text-sm text-gray-600",children:[u.length," kullan\u0131c\u0131 se\xe7ildi"]}),(0,za.jsxs)("div",{className:"flex gap-3",children:[(0,za.jsx)("button",{onClick:l,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",disabled:g,children:"\u0130ptal"}),(0,za.jsx)("button",{onClick:async()=>{try{f(!0),await _i(t,u),Ra.success("".concat(u.length," kullan\u0131c\u0131 atand\u0131")),o(),l()}catch(e){Ra.error("Kullan\u0131c\u0131 atama ba\u015far\u0131s\u0131z"),console.error("Error assigning users:",e)}finally{f(!1)}},disabled:g||m,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:g?(0,za.jsxs)(za.Fragment,{children:[(0,za.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Atan\u0131yor..."]}):(0,za.jsxs)(za.Fragment,{children:[(0,za.jsx)(yo,{size:16}),"Kaydet"]})})]})]})]})})},vo=()=>{var e,t;const{channelId:r}=ee(),s=Z(),{user:a,loading:i}=Za(),[l,o]=(0,n.useState)(null),[c,d]=(0,n.useState)([]),[u,h]=(0,n.useState)(!0),[m,p]=(0,n.useState)(!1),[g,f]=(0,n.useState)([]),[x,y]=(0,n.useState)(null),[b,v]=(0,n.useState)(null),[j,w]=(0,n.useState)([]),[_,k]=(0,n.useState)(!0),[S,N]=(0,n.useState)(""),[C,T]=(0,n.useState)([]),[E,O]=(0,n.useState)(!1),P=(0,n.useRef)(null),D=(0,n.useRef)(null),A=(0,n.useRef)(null),M=(0,n.useRef)(0),R=(0,n.useCallback)(()=>{setTimeout(()=>{var e;null===(e=P.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},100)},[]),z=(0,n.useCallback)(async()=>{if(r)try{const e=await vi(Number(r));o(e)}catch(e){Ra.error("Kanal bilgileri y\xfcklenemedi"),s("/admin/social-media/channels")}},[r,s]),F=(0,n.useCallback)(async()=>{if(r)try{const e=await ki(Number(r));f(e.assigned_users||[])}catch(e){}},[r]),L=(0,n.useCallback)(async()=>{if(r)try{const e=await gs.get("/api/social-media/channels/".concat(r,"/statistics"));y(e.data.statistics),v(e.data.bot),w(e.data.assigned_users||[])}catch(e){console.error("Statistics load error:",e)}},[r]),I=(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(r)try{e||h(!0);const t=(await gs.get("/api/social-media/channels/".concat(r,"/messages"),{params:{per_page:500}})).data.messages||[],n=t.length>M.current;M.current=t.length,d(t),n&&R()}catch(t){e||Ra.error("Mesajlar y\xfcklenemedi")}finally{h(!1)}},[r,R]);(0,n.useEffect)(()=>{i||(a?(z(),F(),I(),L()):s("/login",{replace:!0}))},[i,a,s,z,F,I,L]),(0,n.useEffect)(()=>{if(r)return D.current=setInterval(()=>{I(!0)},3e3),()=>{D.current&&clearInterval(D.current)}},[r,I]);const B=()=>{T([]),A.current&&(A.current.value="")},H=async e=>{if(e.preventDefault(),!r)return void Ra.error("Kanal ID bulunamad\u0131");if(!S.trim()&&0===C.length)return void Ra.error("L\xfctfen mesaj yaz\u0131n veya dosya ekleyin");if(E)return;O(!0);const t=S.trim(),n=[...C];N(""),B();try{if(0===n.length&&t)await gs.post("/api/social-media/channels/".concat(r,"/messages"),{message_text:t,message_type:"text"}),Ra.success("\u2705 Mesaj g\xf6nderildi!");else if(1===n.length){const e=n[0],s=new FormData;s.append("file",e),t&&s.append("message_text",t),await gs.post("/api/social-media/channels/".concat(r,"/messages/upload"),s,{headers:{"Content-Type":"multipart/form-data"}}),Ra.success("\u2705 ".concat(t?"Mesaj ve dosya":"Dosya"," g\xf6nderildi!"))}else if(n.length>1){let e=0,s=0;for(let a=0;a<n.length;a++){const l=n[a];try{const s=new FormData;s.append("file",l),0===a&&t&&s.append("message_text",t),await gs.post("/api/social-media/channels/".concat(r,"/messages/upload"),s,{headers:{"Content-Type":"multipart/form-data"}}),e++,a<n.length-1&&await new Promise(e=>setTimeout(e,500))}catch(i){s++,console.error("Dosya g\xf6nderimi ba\u015far\u0131s\u0131z: ".concat(l.name),i),Ra.error("\u274c ".concat(l.name," g\xf6nderilemedi"),{duration:2e3})}}e>0&&Ra.success("\u2705 ".concat(e,"/").concat(n.length," dosya g\xf6nderildi!")),s>0&&Ra.error("\u26a0\ufe0f ".concat(s," dosya g\xf6nderilemedi"))}setTimeout(()=>{I(!0),R()},2e3)}catch(i){var s,a;console.error("Mesaj g\xf6nderme hatas\u0131:",i);const e=(null===i||void 0===i||null===(s=i.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.detail)||i.message||"Mesaj g\xf6nderilemedi";Ra.error("\u274c ".concat(e)),t&&N(t),n.length>0&&T(n)}finally{O(!1)}};return i||u?(0,za.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,za.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):l?(0,za.jsxs)("div",{className:"flex flex-col h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-gray-50",children:[(0,za.jsx)("div",{className:"bg-white/80 backdrop-blur-sm border-b border-gray-200/50 shadow-sm",children:(0,za.jsx)("div",{className:"px-6 py-4",children:(0,za.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,za.jsxs)("div",{className:"flex items-center gap-4",children:[(0,za.jsx)("button",{onClick:()=>s("/admin/telegram/channels"),className:"p-2.5 hover:bg-gray-100 rounded-xl transition-all hover:shadow-md group",title:"Geri D\xf6n",children:(0,za.jsx)(dl,{size:22,className:"group-hover:-translate-x-0.5 transition-transform"})}),(0,za.jsxs)("div",{children:[(0,za.jsxs)("div",{className:"flex items-center gap-3",children:[(0,za.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:l.name}),l.is_active?(0,za.jsxs)("span",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:[(0,za.jsx)(Wa,{size:14}),"Aktif"]}):(0,za.jsxs)("span",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-red-100 text-red-700 rounded-full text-xs font-medium",children:[(0,za.jsx)(Ka,{size:14}),"Pasif"]})]}),(0,za.jsxs)("div",{className:"flex items-center gap-4 mt-1.5",children:[(0,za.jsxs)("span",{className:"flex items-center gap-1.5 text-sm text-gray-600",children:[(0,za.jsx)(ul,{size:14,className:"text-blue-500"}),(0,za.jsx)("span",{className:"font-medium",children:c.length})," mesaj"]}),(0,za.jsxs)("span",{className:"flex items-center gap-1.5 text-sm text-gray-600",children:[(0,za.jsx)(ci,{size:14,className:"text-purple-500"}),(0,za.jsx)("span",{className:"font-medium",children:l.member_count||0})," \xfcye"]}),(0,za.jsxs)("span",{className:"flex items-center gap-1.5 text-sm text-gray-600",children:[(0,za.jsx)(di,{size:14,className:"text-indigo-500"}),l.brand_name||"Marka"]})]})]})]}),(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsxs)("button",{onClick:()=>k(!_),className:"flex items-center gap-2 px-4 py-2.5 text-sm font-medium rounded-xl transition-all shadow-sm ".concat(_?"bg-gradient-to-r from-indigo-500 to-indigo-600 text-white shadow-indigo-200":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-200"),title:"\u0130statistikleri G\xf6ster/Gizle",children:[(0,za.jsx)(ii,{size:16}),"\u0130statistikler"]}),((null===a||void 0===a||null===(e=a.permissions)||void 0===e?void 0:e.includes("social.manage"))||(null===a||void 0===a||null===(t=a.permissions)||void 0===t?void 0:t.includes("brands.manage")))&&(0,za.jsxs)("button",{onClick:()=>p(!0),className:"flex items-center gap-2 px-4 py-2.5 text-sm font-medium bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-xl hover:from-purple-600 hover:to-purple-700 transition-all shadow-sm shadow-purple-200",title:"Kullan\u0131c\u0131 Y\xf6net",children:[(0,za.jsx)(hl,{size:16}),"Kullan\u0131c\u0131 (",g.length,")"]}),(0,za.jsxs)("button",{onClick:async()=>{try{Ra.loading("Telegram mesajlar\u0131 senkronize ediliyor...",{duration:2e3}),await gs.post("/api/social-media/channels/".concat(r,"/sync-messages")),Ra.success("Mesajlar senkronize ediliyor"),setTimeout(()=>I(!0),3e3)}catch(e){Ra.error("Senkronizasyon ba\u015far\u0131s\u0131z")}},className:"flex items-center gap-2 px-4 py-2.5 text-sm font-medium bg-white text-blue-600 border border-blue-200 rounded-xl hover:bg-blue-50 transition-all shadow-sm",title:"Telegram'dan Mesajlar\u0131 \xc7ek",children:[(0,za.jsx)(tl,{size:16}),"Sync"]}),("Super Admin"===(null===a||void 0===a?void 0:a.role)||"Ma\u011faza Y\xf6neticisi"===(null===a||void 0===a?void 0:a.role))&&c.length>0&&(0,za.jsxs)("button",{onClick:async()=>{if(window.confirm("T\xfcm mesajlar\u0131 silmek istedi\u011finizden emin misiniz?"))try{Ra.loading("Mesajlar temizleniyor...",{id:"clear"});const e=await gs.delete("/api/social-media/channels/".concat(r,"/messages/clear"));d([]),M.current=0,Ra.success("\u2705 ".concat(e.data.deleted_count," mesaj temizlendi!"),{id:"clear"})}catch(e){Ra.error("Mesajlar temizlenemedi",{id:"clear"})}},className:"flex items-center gap-2 px-4 py-2.5 text-sm font-medium bg-white text-red-600 border border-red-200 rounded-xl hover:bg-red-50 transition-all shadow-sm",title:"T\xfcm mesajlar\u0131 temizle",children:[(0,za.jsx)(il,{size:16}),"Temizle"]})]})]})})}),_&&x&&(0,za.jsxs)("div",{className:"bg-white border-b border-gray-200 px-4 py-4",children:[(0,za.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-4",children:[(0,za.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-xl border border-blue-200",children:(0,za.jsxs)("div",{className:"flex items-center justify-between",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("p",{className:"text-xs font-medium text-blue-600 mb-1",children:"Toplam Mesaj"}),(0,za.jsx)("p",{className:"text-2xl font-bold text-blue-900",children:x.total_messages})]}),(0,za.jsx)(ul,{className:"text-blue-500",size:32})]})}),(0,za.jsx)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-xl border border-green-200",children:(0,za.jsxs)("div",{className:"flex items-center justify-between",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("p",{className:"text-xs font-medium text-green-600 mb-1",children:"G\xf6nderilen Post"}),(0,za.jsx)("p",{className:"text-2xl font-bold text-green-900",children:x.sent_posts})]}),(0,za.jsx)(ml,{className:"text-green-500",size:32})]})}),(0,za.jsx)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-xl border border-purple-200",children:(0,za.jsxs)("div",{className:"flex items-center justify-between",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("p",{className:"text-xs font-medium text-purple-600 mb-1",children:"Toplam \xdcye"}),(0,za.jsx)("p",{className:"text-2xl font-bold text-purple-900",children:x.total_members})]}),(0,za.jsx)(ci,{className:"text-purple-500",size:32})]})}),(0,za.jsx)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 p-4 rounded-xl border border-orange-200",children:(0,za.jsxs)("div",{className:"flex items-center justify-between",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("p",{className:"text-xs font-medium text-orange-600 mb-1",children:"Atanm\u0131\u015f \xc7al\u0131\u015fan"}),(0,za.jsx)("p",{className:"text-2xl font-bold text-orange-900",children:x.assigned_users_count})]}),(0,za.jsx)(hl,{className:"text-orange-500",size:32})]})})]}),b&&(0,za.jsx)("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 p-4 rounded-xl border border-indigo-200 mb-4",children:(0,za.jsxs)("div",{className:"flex items-center gap-3",children:[(0,za.jsx)(rl,{className:"text-indigo-600",size:28}),(0,za.jsxs)("div",{className:"flex-1",children:[(0,za.jsx)("p",{className:"text-sm font-semibold text-indigo-900",children:b.name}),(0,za.jsx)("p",{className:"text-xs text-indigo-600",children:b.username})]}),(0,za.jsxs)("div",{className:"flex gap-2",children:[b.is_active&&(0,za.jsxs)("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full flex items-center gap-1",children:[(0,za.jsx)(Wa,{size:12}),"Aktif"]}),b.is_verified&&(0,za.jsxs)("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full flex items-center gap-1",children:[(0,za.jsx)(Wa,{size:12}),"Do\u011frulanm\u0131\u015f"]})]})]})}),j.length>0&&(0,za.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[(0,za.jsx)("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:(0,za.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2",children:[(0,za.jsx)(ai,{size:16,className:"text-gray-600"}),"\xc7al\u0131\u015fan Performans\u0131"]})}),(0,za.jsx)("div",{className:"overflow-x-auto",children:(0,za.jsxs)("table",{className:"w-full",children:[(0,za.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,za.jsxs)("tr",{children:[(0,za.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600",children:"\xc7al\u0131\u015fan"}),(0,za.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-600",children:"Email"}),(0,za.jsx)("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-600",children:"G\xf6nderilen Post"})]})}),(0,za.jsx)("tbody",{className:"divide-y divide-gray-200",children:j.map(e=>(0,za.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,za.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium",children:e.name}),(0,za.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.email}),(0,za.jsx)("td",{className:"px-4 py-3 text-sm text-right",children:(0,za.jsx)("span",{className:"inline-flex items-center justify-center px-3 py-1 bg-blue-100 text-blue-700 rounded-full font-semibold",children:e.sent_messages})})]},e.id))})]})})]})]}),g.length>0&&(0,za.jsx)("div",{className:"bg-gray-50 border-b border-gray-200 px-4 py-2",children:(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)("span",{className:"text-xs text-gray-600",children:"Atanan Kullan\u0131c\u0131lar:"}),(0,za.jsx)("div",{className:"flex flex-wrap gap-1",children:g.map(e=>(0,za.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-white rounded-full border border-gray-200 text-xs text-gray-700",children:[(0,za.jsx)(ci,{size:10}),e.first_name," ",e.last_name]},e.id))})]})}),(0,za.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 py-6 space-y-3",children:[0===c.length?(0,za.jsx)("div",{className:"flex flex-col items-center justify-center h-full",children:(0,za.jsxs)("div",{className:"p-6 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl shadow-sm",children:[(0,za.jsx)(ul,{size:56,className:"mb-4 text-blue-400 mx-auto"}),(0,za.jsx)("p",{className:"text-base font-medium text-gray-700 mb-1",children:"Hen\xfcz mesaj yok"}),(0,za.jsx)("p",{className:"text-sm text-gray-500",children:"A\u015fa\u011f\u0131dan ilk mesaj\u0131n\u0131z\u0131 g\xf6nderin"})]})}):c.map(e=>(0,za.jsx)("div",{className:"flex ".concat(e.is_sent?"justify-end":"justify-start"," animate-fadeIn"),children:(0,za.jsxs)("div",{className:"max-w-[70%] rounded-2xl px-4 py-3 shadow-sm ".concat(e.is_sent?"bg-gradient-to-r from-blue-500 to-blue-600 text-white":"bg-white border border-gray-200 text-gray-900"," ").concat(e.is_sending?"opacity-60 animate-pulse":""),children:[e.media_url&&(0,za.jsxs)("div",{className:"mb-2",children:["image"===e.message_type&&(0,za.jsx)("img",{src:e.media_url,alt:e.file_name||"Image",className:"max-w-full max-h-64 rounded-xl cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.open(e.media_url,"_blank")}),"video"===e.message_type&&(0,za.jsx)("video",{src:e.media_url,controls:!0,className:"max-w-full max-h-64 rounded-xl"}),"document"===e.message_type&&(0,za.jsxs)("a",{href:e.media_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm hover:underline",children:[(0,za.jsx)(pl,{size:14}),e.file_name||"Dosya"]})]}),e.message_text&&(0,za.jsx)("p",{className:"text-sm break-words",children:e.message_text}),(0,za.jsx)("div",{className:"text-xs mt-1 ".concat(e.is_sent?"text-blue-100":"text-gray-400"),children:fo(new Date(e.timestamp),"HH:mm")})]})},e.id)),(0,za.jsx)("div",{ref:P})]}),C.length>0&&(0,za.jsxs)("div",{className:"px-4 py-3 bg-gradient-to-r from-blue-50 to-indigo-50 border-t border-blue-100",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)(gl,{size:16,className:"text-blue-600"}),(0,za.jsxs)("span",{className:"text-sm font-medium text-blue-900",children:[C.length," dosya se\xe7ildi"]})]}),(0,za.jsxs)("button",{onClick:B,className:"text-xs text-red-600 hover:text-red-700 font-medium flex items-center gap-1 hover:underline",children:[(0,za.jsx)(fl,{size:14}),"T\xfcm\xfcn\xfc Kald\u0131r"]})]}),(0,za.jsx)("div",{className:"flex items-center gap-2 flex-wrap",children:C.map((e,t)=>{return(0,za.jsxs)("div",{className:"group relative flex items-center gap-2 px-3 py-2 bg-white rounded-lg border border-blue-200 shadow-sm hover:shadow-md transition-all",children:[(0,za.jsx)("div",{className:"p-1.5 bg-blue-100 rounded",children:(r=e.type.split("/")[0],"image"===r?(0,za.jsx)(Bi,{size:16,className:"text-blue-500"}):"video"===r?(0,za.jsx)(ol,{size:16,className:"text-purple-500"}):(0,za.jsx)(cl,{size:16,className:"text-gray-500"}))}),(0,za.jsxs)("div",{className:"flex flex-col",children:[(0,za.jsx)("span",{className:"text-xs font-medium text-gray-900 max-w-[120px] truncate",children:e.name}),(0,za.jsxs)("span",{className:"text-[10px] text-gray-500",children:[(e.size/1024).toFixed(1)," KB"]})]}),(0,za.jsx)("button",{onClick:()=>(e=>{T(t=>t.filter((t,r)=>r!==e))})(t),className:"ml-2 p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded transition-colors",title:"Kald\u0131r",children:(0,za.jsx)(fl,{size:14})})]},t);var r})})]}),(0,za.jsxs)("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 border-t-2 border-gray-200 px-4 py-4",children:[(0,za.jsxs)("form",{onSubmit:H,className:"flex items-end gap-3",children:[(0,za.jsx)("input",{ref:A,type:"file",multiple:!0,accept:"image/*,video/*,audio/*,.pdf,.doc,.docx,.txt,.xlsx,.xls,.ppt,.pptx,.zip,.rar",onChange:e=>{if(!e.target.files)return;const t=Array.from(e.target.files);if(t.length+C.length>50)return void Ra.error("En fazla 50 dosya ekleyebilirsiniz");const r=t.filter(e=>e.size>52428800);r.length>0?Ra.error("Baz\u0131 dosyalar \xe7ok b\xfcy\xfck (max 50MB): ".concat(r.map(e=>e.name).join(", "))):(T(e=>[...e,...t]),Ra.success("".concat(t.length," dosya eklendi")))},className:"hidden"}),(0,za.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=A.current)||void 0===e?void 0:e.click()},className:"flex-shrink-0 p-3 text-gray-600 hover:text-blue-600 bg-white hover:bg-blue-50 rounded-xl border border-gray-200 hover:border-blue-300 transition-all shadow-sm hover:shadow-md",disabled:E,title:"Dosya Ekle",children:(0,za.jsx)(gl,{size:22})}),(0,za.jsxs)("div",{className:"flex-1 relative",children:[(0,za.jsx)("textarea",{value:S,onChange:e=>N(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),H(e))},placeholder:"Mesaj\u0131n\u0131z\u0131 yaz\u0131n... (Enter: G\xf6nder, Shift+Enter: Yeni sat\u0131r)",className:"w-full px-4 py-3 bg-white border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none shadow-sm transition-all placeholder:text-gray-400",rows:1,disabled:E,style:{minHeight:"48px",maxHeight:"120px"}}),S.trim()&&(0,za.jsxs)("div",{className:"absolute bottom-2 right-2 text-xs text-gray-400",children:[S.length," karakter"]})]}),(0,za.jsx)("button",{type:"submit",disabled:E||!S.trim()&&0===C.length,className:"flex-shrink-0 p-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:from-gray-400 disabled:to-gray-500 group",title:E?"G\xf6nderiliyor...":"G\xf6nder",children:E?(0,za.jsx)(tl,{size:22,className:"animate-spin"}):(0,za.jsx)(ml,{size:22,className:"group-hover:translate-x-0.5 group-hover:-translate-y-0.5 transition-transform"})})]}),(0,za.jsxs)("div",{className:"flex items-center justify-between mt-2 px-1",children:[(0,za.jsxs)("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[(0,za.jsx)(ul,{size:12}),"Enter ile h\u0131zl\u0131ca g\xf6nderin"]}),0===C.length&&(0,za.jsxs)("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[(0,za.jsx)(gl,{size:12}),"Dosya ekleyebilirsiniz"]})]})]}),m&&l&&a&&(0,za.jsx)(bo,{channelId:l.id,channelName:l.name,brandId:l.brand_id,currentAssignedUserIds:l.assigned_user_ids||[],currentUserId:a.id,onClose:()=>p(!1),onSuccess:()=>{F(),z()}})]}):null},jo=()=>{const{user:e}=Za(),t=Z(),[r,s]=(0,n.useState)([]),[a,i]=(0,n.useState)(!0),[l,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)({}),[u,h]=(0,n.useState)({bot_token:""}),[m,p]=(0,n.useState)(!1);(0,n.useEffect)(()=>{g()},[]);const g=async()=>{try{i(!0);const e=await el.getBots();s(e.bots)}catch(r){var e,t;console.error("Bot listesi y\xfcklenirken hata:",r),Ra.error((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Bot listesi y\xfcklenemedi")}finally{i(!1)}};return a?(0,za.jsx)("div",{className:"p-6",children:"Y\xfckleniyor..."}):(0,za.jsxs)("div",{className:"p-8",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Telegram Botlar\u0131"}),(0,za.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Telegram bot token'lar\u0131n\u0131 y\xf6netin"})]}),(0,za.jsxs)("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,za.jsx)(Li,{size:20}),"Bot Ekle"]})]}),(0,za.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,za.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,za.jsx)("div",{className:"text-sm text-gray-600",children:"Toplam Bot"}),(0,za.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:r.length})]}),(0,za.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,za.jsx)("div",{className:"text-sm text-gray-600",children:"Aktif Bot"}),(0,za.jsx)("div",{className:"text-2xl font-bold text-green-600",children:r.filter(e=>e.is_active).length})]}),(0,za.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,za.jsx)("div",{className:"text-sm text-gray-600",children:"Toplam Kanal"}),(0,za.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:r.reduce((e,t)=>e+(t.channel_count||0),0)})]})]}),(0,za.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,za.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,za.jsx)("thead",{className:"bg-gray-50",children:(0,za.jsxs)("tr",{children:[(0,za.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bot Ad\u0131"}),(0,za.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kullan\u0131c\u0131 Ad\u0131"}),(0,za.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Durum"}),(0,za.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Son Do\u011frulama"}),(0,za.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0130\u015flemler"})]})}),(0,za.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(e=>(0,za.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>t("/admin/telegram/bots/".concat(e.id)),children:[(0,za.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,za.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.bot_name}),(0,za.jsxs)("div",{className:"text-xs text-gray-500",children:[e.channel_count||0," kanal"]})]}),(0,za.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,za.jsxs)("div",{className:"text-sm text-gray-900",children:["@",e.bot_username]})}),(0,za.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,za.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"Aktif":"Pasif"})}),(0,za.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.last_verified_at?new Date(e.last_verified_at).toLocaleDateString():"Do\u011frulanmad\u0131"}),(0,za.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)("button",{onClick:t=>{var r;t.stopPropagation(),r=e.id,d(e=>Ie(Ie({},e),{},{botId:!e[r]}))},className:"text-gray-600 hover:text-gray-900",children:c[e.id]?(0,za.jsx)(ei,{size:16}):(0,za.jsx)(ti,{size:16})}),(0,za.jsx)("button",{onClick:t=>{t.stopPropagation(),(async e=>{if(window.confirm("Bu botu silmek istedi\u011finizden emin misiniz?"))try{await el.deleteBot(e),Ra.success("Bot silindi"),g()}catch(t){Ra.error("Bot silinemedi")}})(e.id)},className:"text-red-600 hover:text-red-900",children:(0,za.jsx)(il,{size:16})})]})})]},e.id))})]})}),l&&(0,za.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,za.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,za.jsx)("h2",{className:"text-lg font-semibold",children:"Bot Ekle"}),(0,za.jsx)("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600",children:(0,za.jsx)(Ka,{size:20})})]}),(0,za.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),u.bot_token&&""!==u.bot_token.trim()){p(!0);try{console.log("Sending bot data:",u);const e=await el.createBot(u);console.log("Bot creation response:",e),Ra.success("Bot ba\u015far\u0131yla eklendi! ".concat(e.discovered_channels_count||0," kanal otomatik ke\u015ffedildi ve eklendi.")),o(!1),h({bot_token:""}),g()}catch(s){var t,r,n;console.error("Bot eklenirken hata:",s),console.error("Error detail:",null===(t=s.response)||void 0===t?void 0:t.data),Ra.error(String((null===(r=s.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||"Bot eklenemedi"))}finally{p(!1)}}else Ra.error("L\xfctfen bot token girin")},children:[(0,za.jsxs)("div",{className:"mb-4",children:[(0,za.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bot Token *"}),(0,za.jsx)("input",{type:"password",value:u.bot_token,onChange:e=>h({bot_token:e.target.value}),placeholder:"BotFather'dan ald\u0131\u011f\u0131n\u0131z token",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,za.jsx)("button",{type:"submit",disabled:m,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:m?"Ekleniyor...":"Bot Ekle"})]})]})})]})},wo=()=>{const{botId:e}=ee(),t=Z(),[r,s]=(0,n.useState)(null),[a,i]=(0,n.useState)([]),[l,o]=(0,n.useState)(!0);(0,n.useEffect)(()=>{e&&c()},[e]);const c=async()=>{try{o(!0);const[t,r]=await Promise.all([el.getBot(Number(e)),el.getBotChannels(Number(e))]);s(t),i(r.channels)}catch(t){console.error("Bot detaylar\u0131 y\xfcklenirken hata:",t),Ra.error("Bot detaylar\u0131 y\xfcklenemedi")}finally{o(!1)}};return l?(0,za.jsx)("div",{className:"p-6",children:"Y\xfckleniyor..."}):r?(0,za.jsxs)("div",{className:"p-8",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,za.jsxs)("div",{className:"flex items-center gap-4",children:[(0,za.jsx)("button",{onClick:()=>t("/admin/telegram/bots"),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,za.jsx)(dl,{size:20})}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:r.bot_name}),(0,za.jsxs)("p",{className:"text-sm text-gray-600",children:["@",r.bot_username]})]})]}),(0,za.jsxs)("button",{onClick:async()=>{try{const t=await el.discoverChannelsForBot(Number(e));Ra.success(t.message||"Kanallar ke\u015ffedildi"),c()}catch(n){var t,r;Ra.error(String((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Ke\u015fif ba\u015far\u0131s\u0131z"))}},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,za.jsx)(tl,{size:18}),"Kanallar\u0131 Ke\u015ffet"]})]}),(0,za.jsx)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:(0,za.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("div",{className:"text-sm text-gray-600",children:"Durum"}),(0,za.jsx)("div",{className:"font-semibold ".concat(r.is_active?"text-green-600":"text-red-600"),children:r.is_active?"Aktif":"Pasif"})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("div",{className:"text-sm text-gray-600",children:"Do\u011frulama"}),(0,za.jsx)("div",{className:"font-semibold ".concat(r.is_verified?"text-green-600":"text-yellow-600"),children:r.is_verified?"Do\u011fruland\u0131":"Do\u011frulanmad\u0131"})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("div",{className:"text-sm text-gray-600",children:"Toplam Kanal"}),(0,za.jsx)("div",{className:"font-semibold text-gray-900",children:a.length})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("div",{className:"text-sm text-gray-600",children:"Ekleyen"}),(0,za.jsx)("div",{className:"font-semibold text-gray-900",children:r.creator_name||"Bilinmiyor"})]})]})}),(0,za.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,za.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,za.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["Bot Kanallar\u0131 (",a.length,")"]})}),(0,za.jsx)("div",{className:"overflow-x-auto",children:(0,za.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,za.jsx)("thead",{className:"bg-gray-50",children:(0,za.jsxs)("tr",{children:[(0,za.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Kanal"}),(0,za.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Marka"}),(0,za.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"\xdcye Say\u0131s\u0131"}),(0,za.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Atanan Kullan\u0131c\u0131lar"}),(0,za.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Durum"})]})}),(0,za.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===a.length?(0,za.jsx)("tr",{children:(0,za.jsx)("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:'Hen\xfcz kanal ke\u015ffedilmedi. "Kanallar\u0131 Ke\u015ffet" butonuna t\u0131klay\u0131n.'})}):a.map(e=>(0,za.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,za.jsx)("td",{className:"px-6 py-4",children:(0,za.jsxs)("div",{children:[(0,za.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),e.channel_username&&(0,za.jsxs)("div",{className:"text-sm text-gray-500",children:["@",e.channel_username]})]})}),(0,za.jsx)("td",{className:"px-6 py-4",children:e.brand_name?(0,za.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:e.brand_name}):(0,za.jsx)("span",{className:"text-gray-400 text-sm",children:"Atanmad\u0131"})}),(0,za.jsx)("td",{className:"px-6 py-4",children:(0,za.jsxs)("div",{className:"flex items-center gap-1 text-gray-700",children:[(0,za.jsx)(ci,{size:16}),(0,za.jsx)("span",{children:e.member_count})]})}),(0,za.jsx)("td",{className:"px-6 py-4",children:e.assigned_users.length>0?(0,za.jsx)("div",{className:"flex flex-wrap gap-1",children:e.assigned_users.map(e=>(0,za.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:e.name},e.id))}):(0,za.jsx)("span",{className:"text-gray-400 text-sm",children:"-"})}),(0,za.jsx)("td",{className:"px-6 py-4",children:(0,za.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(e.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.is_active?"Aktif":"Pasif"})})]},e.id))})]})})]})]}):(0,za.jsx)("div",{className:"p-6",children:"Bot bulunamad\u0131"})},_o=async()=>(await gs.get("/api/roles")).data,ko=async()=>({permissions:(await gs.get("/api/roles/permissions")).data}),So=async e=>(await gs.post("/api/roles",e)).data,No=async(e,t)=>(await gs.put("/api/roles/".concat(e),t)).data,Co=async e=>(await gs.patch("/api/roles/".concat(e,"/toggle-status"))).data,To=async e=>{await gs.delete("/api/roles/".concat(e))},Eo=Ua("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Oo=Ua("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),Po=e=>{let{user:t,brands:r,roles:s,onClose:a,onSave:i,onSaveSilent:l,currentUser:o}=e;const[c,d]=(0,n.useState)({email:(null===t||void 0===t?void 0:t.email)||"",password:"",first_name:(null===t||void 0===t?void 0:t.first_name)||"",last_name:(null===t||void 0===t?void 0:t.last_name)||"",role_id:(null===t||void 0===t?void 0:t.role_id)||void 0,brand_ids:(null===t||void 0===t?void 0:t.brand_ids)||[]}),[u,h]=(0,n.useState)({currentPassword:"",newPassword:""}),[m,p]=(0,n.useState)(!1),[g,f]=(0,n.useState)(!1);(0,n.useEffect)(()=>{t&&(d({email:t.email||"",password:"",first_name:t.first_name||"",last_name:t.last_name||"",role_id:t.role_id||void 0,brand_ids:t.brand_ids||[]}),o&&o.id===t.id?p(!0):p(!1))},[t,o]);const x=s.find(e=>e.id===c.role_id),y="super_admin"===(null===x||void 0===x?void 0:x.name),b="brand_manager"===(null===x||void 0===x?void 0:x.name),v="market_manager"===(null===x||void 0===x?void 0:x.name),j=!!x&&!y&&!b&&!v,w=e=>{const{name:t,value:r}=e.target;d(e=>Ie(Ie({},e),{},{[t]:"role_id"===t?Number(r):r}))},_=e=>{const{name:t,value:r}=e.target;h(e=>Ie(Ie({},e),{},{[t]:r}))};return(0,za.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,za.jsx)("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:(0,za.jsxs)("div",{className:"p-6",children:[(0,za.jsx)("h2",{className:"text-xl font-bold mb-4",children:t?"Kullan\u0131c\u0131y\u0131 D\xfczenle":"Kullan\u0131c\u0131 Olu\u015ftur"}),(0,za.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),f(!0);try{if(!t&&!c.password)return void Ra.error("Password is required for new users");if(!c.role_id)return void Ra.error("Rol se\xe7iniz");if((b||j)&&(!c.brand_ids||0===c.brand_ids.length))return void Ra.error(b?"Y\xf6netici i\xe7in en az bir marka se\xe7iniz":"\xc7al\u0131\u015fan i\xe7in en az bir marka se\xe7iniz");if(t&&m&&u.newPassword){if(!u.currentPassword)return void Ra.error("Mevcut \u015fifrenizi giriniz");try{if(await Ki(t.id,{current_password:u.currentPassword,new_password:u.newPassword}),Ra.success("\u015eifre ba\u015far\u0131yla g\xfcncellendi"),h({currentPassword:"",newPassword:""}),o&&o.id===t.id)return localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),void(window.location.href="/login");a()}catch(r){Ra.error(r.message||"\u015eifre g\xfcncellenemedi")}return}if(t&&!m&&u.newPassword){try{await Ki(t.id,{new_password:u.newPassword}),Ra.success("\u015eifre ba\u015far\u0131yla g\xfcncellendi"),h({currentPassword:"",newPassword:""}),a()}catch(r){Ra.error(r.message||"\u015eifre g\xfcncellenemedi")}return}const e=Ie({},c);t&&delete e.password,await i(e),a()}finally{f(!1)}},className:"space-y-4",children:[(0,za.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"Ad"}),(0,za.jsx)("input",{type:"text",name:"first_name",value:c.first_name,onChange:w,className:"form-input",required:!0})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"Soyad"}),(0,za.jsx)("input",{type:"text",name:"last_name",value:c.last_name,onChange:w,className:"form-input",required:!0})]})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"E-posta"}),(0,za.jsx)("input",{type:"email",name:"email",value:c.email,onChange:w,className:"form-input",required:!0})]}),!t&&(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"\u015eifre"}),(0,za.jsx)("input",{type:"password",name:"password",value:c.password,onChange:w,className:"form-input",required:!0})]}),m&&(0,za.jsxs)(za.Fragment,{children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"Mevcut \u015eifre"}),(0,za.jsx)("input",{type:"password",name:"currentPassword",value:u.currentPassword,onChange:_,className:"form-input",required:!!u.newPassword})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"Yeni \u015eifre"}),(0,za.jsx)("input",{type:"password",name:"newPassword",value:u.newPassword,onChange:_,className:"form-input"})]})]}),!m&&t&&(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"Yeni \u015eifre (Kullan\u0131c\u0131 i\xe7in s\u0131f\u0131rla)"}),(0,za.jsx)("input",{type:"password",name:"newPassword",value:u.newPassword,onChange:_,className:"form-input"})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"Rol"}),(0,za.jsxs)("select",{name:"role_id",value:c.role_id||"",onChange:w,className:"form-input",required:!0,children:[(0,za.jsx)("option",{value:"",children:"Rol Se\xe7in"}),s.map(e=>(0,za.jsx)("option",{value:e.id,children:e.display_name},e.id))]})]}),(b||v||j)&&(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"Markalar"}),(0,za.jsx)("div",{className:"space-y-2 max-h-32 overflow-y-auto border rounded p-2",children:r.map(e=>(0,za.jsxs)("label",{className:"flex items-center gap-2",children:[(0,za.jsx)("input",{type:"checkbox",checked:c.brand_ids.includes(e.id),onChange:t=>{return r=e.id,n=t.target.checked,void d(e=>Ie(Ie({},e),{},{brand_ids:n?[...e.brand_ids,r]:e.brand_ids.filter(e=>e!==r)}));var r,n},className:"rounded"}),(0,za.jsx)("span",{className:"text-sm",children:e.name})]},e.id))})]}),(0,za.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,za.jsx)("button",{type:"submit",className:"btn btn-primary flex-1",disabled:g,children:g?"\u0130\u015fleniyor...":t?"Kullan\u0131c\u0131y\u0131 G\xfcncelle":"Kullan\u0131c\u0131 Olu\u015ftur"}),(0,za.jsx)("button",{type:"button",onClick:a,className:"btn btn-secondary",children:"\u0130ptal"})]})]})]})})})},Do=()=>{const[e,t]=(0,n.useState)([]),[r,s]=(0,n.useState)([]),[a,i]=(0,n.useState)([]),[l,o]=(0,n.useState)(!0),[c,d]=(0,n.useState)(1),[u,h]=(0,n.useState)(0),[m,p]=(0,n.useState)(""),[g,f]=(0,n.useState)(""),[x,y]=(0,n.useState)(null),[b,v]=(0,n.useState)(!1),[j,w]=(0,n.useState)(!1),[_,k]=(0,n.useState)(null),{user:S,loading:N}=Za(),C=a.find(e=>"market_personel"===e.name);(0,n.useEffect)(()=>{N||(T(),E(),O())},[c,g,x,N]),(0,n.useEffect)(()=>{b&&C?f(C.display_name):b&&!C?(Ra.error("\xc7al\u0131\u015fan rol\xfc bulunamad\u0131"),v(!1)):b||f("")},[b,null===C||void 0===C?void 0:C.id]);const T=async()=>{try{o(!0);const e=await Hi(c,10,g||void 0,x||void 0);t(e.users),h(e.total)}catch(e){Ra.error(e.message||"Kullan\u0131c\u0131lar y\xfcklenemedi")}finally{o(!1)}},E=async()=>{try{const e=await Si(1,1e3);s(e.brands)}catch(e){}},O=async()=>{try{const e=await _o();i(e.roles)}catch(e){}},P=e.filter(e=>{if(!m)return!0;const t=m.toLowerCase();return e.email.toLowerCase().includes(t)||e.first_name.toLowerCase().includes(t)||e.last_name.toLowerCase().includes(t)});return N?(0,za.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,za.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,za.jsxs)("div",{className:"space-y-6",children:[(0,za.jsxs)("div",{className:"flex justify-between items-center",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Kullan\u0131c\u0131lar"}),(0,za.jsx)("p",{className:"text-gray-600",children:"Sistem kullan\u0131c\u0131lar\u0131n\u0131 ve \xe7al\u0131\u015fanlar\u0131 y\xf6netin"})]}),(0,za.jsxs)("button",{onClick:()=>w(!0),className:"btn btn-primary",children:[(0,za.jsx)(Li,{size:18,className:"mr-2"}),"Kullan\u0131c\u0131 Ekle"]})]}),(0,za.jsx)("div",{className:"card",children:(0,za.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"Arama"}),(0,za.jsxs)("div",{className:"relative",children:[(0,za.jsx)(nl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,za.jsx)("input",{type:"text",value:m,onChange:e=>p(e.target.value),className:"form-input pl-10",placeholder:"Kullan\u0131c\u0131larda ara..."})]})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"Rol"}),(0,za.jsxs)("select",{value:g,onChange:e=>{v(!1),f(e.target.value)},className:"form-input",disabled:b,children:[(0,za.jsx)("option",{value:"",children:"T\xfcm Roller"}),a.map(e=>(0,za.jsx)("option",{value:e.display_name,children:e.display_name},e.id))]})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"Marka"}),(0,za.jsxs)("select",{value:x||"",onChange:e=>y(e.target.value?Number(e.target.value):null),className:"form-input",children:[(0,za.jsx)("option",{value:"",children:"T\xfcm Markalar"}),r.map(e=>(0,za.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,za.jsx)("div",{className:"flex items-end",children:(0,za.jsx)("button",{onClick:()=>{p(""),f(""),y(null),v(!1)},className:"btn btn-secondary w-full",children:"Filtreleri Temizle"})})]})}),(0,za.jsxs)("div",{className:"card",children:[l?(0,za.jsx)("div",{className:"flex justify-center py-8",children:(0,za.jsx)("div",{className:"spinner"})}):(0,za.jsx)("div",{className:"overflow-x-auto",children:(0,za.jsxs)("table",{className:"w-full",children:[(0,za.jsx)("thead",{children:(0,za.jsxs)("tr",{className:"border-b",children:[(0,za.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Ad Soyad"}),(0,za.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"E-posta"}),(0,za.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Rol"}),(0,za.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Markalar"}),(0,za.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Durum"}),(0,za.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Son Giri\u015f"}),(0,za.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"\u0130\u015flemler"})]})}),(0,za.jsx)("tbody",{children:P.map(e=>(0,za.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,za.jsx)("td",{className:"py-3 px-4",children:(0,za.jsxs)("div",{className:"flex items-center gap-3",children:[(0,za.jsx)("div",{className:"h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,za.jsxs)("span",{className:"text-sm font-medium text-blue-600",children:[e.first_name[0],e.last_name[0]]})}),(0,za.jsxs)("div",{children:[(0,za.jsxs)("div",{className:"font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),e.is_2fa_enabled&&(0,za.jsx)("span",{className:"text-xs text-green-600",children:"2FA Aktif"})]})]})}),(0,za.jsx)("td",{className:"py-3 px-4 text-gray-600",children:e.email}),(0,za.jsx)("td",{className:"py-3 px-4",children:(0,za.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:e.role})}),(0,za.jsx)("td",{className:"py-3 px-4",children:e.brand_ids&&e.brand_ids.length>0?(0,za.jsx)("div",{className:"flex flex-wrap gap-1",children:e.brand_ids.map(e=>{const t=r.find(t=>t.id===e);return(0,za.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs",children:(null===t||void 0===t?void 0:t.name)||"Brand #".concat(e)},e)})}):(0,za.jsx)("span",{className:"text-gray-400 text-sm",children:"Marka yok"})}),(0,za.jsx)("td",{className:"py-3 px-4",children:(0,za.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"Aktif":"Pasif"})}),(0,za.jsx)("td",{className:"py-3 px-4 text-gray-600 text-sm",children:e.last_login?new Date(e.last_login).toLocaleDateString("tr-TR"):"Hi\xe7"}),(0,za.jsx)("td",{className:"py-3 px-4",children:(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)("button",{onClick:()=>k(e),className:"p-1 text-gray-400 hover:text-blue-600",title:"Kullan\u0131c\u0131y\u0131 d\xfczenle",children:(0,za.jsx)(Eo,{size:16})}),(0,za.jsx)("button",{onClick:()=>(async e=>{try{e.is_active?(await Yi(e.id),Ra.success("Kullan\u0131c\u0131 pasifle\u015ftirildi")):(await Vi(e.id),Ra.success("Kullan\u0131c\u0131 aktifle\u015ftirildi")),T()}catch(t){Ra.error(t.message||"Kullan\u0131c\u0131 durumu g\xfcncellenemedi")}})(e),className:"p-1 ".concat(e.is_active?"text-gray-400 hover:text-red-600":"text-gray-400 hover:text-green-600"),title:e.is_active?"Kullan\u0131c\u0131y\u0131 pasifle\u015ftir":"Kullan\u0131c\u0131y\u0131 aktifle\u015ftir",children:e.is_active?(0,za.jsx)(Oo,{size:16}):(0,za.jsx)(oi,{size:16})})]})})]},e.id))})]})}),u>10&&(0,za.jsxs)("div",{className:"flex justify-between items-center mt-4 pt-4 border-t",children:[(0,za.jsxs)("div",{className:"text-sm text-gray-600",children:[u," kullan\u0131c\u0131dan ",10*(c-1)+1,"-",Math.min(10*c,u)," aras\u0131 g\xf6steriliyor"]}),(0,za.jsxs)("div",{className:"flex gap-2",children:[(0,za.jsx)("button",{onClick:()=>d(c-1),disabled:1===c,className:"btn btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"\xd6nceki"}),(0,za.jsx)("button",{onClick:()=>d(c+1),disabled:10*c>=u,className:"btn btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Sonraki"})]})]})]}),(j||_)&&(0,za.jsx)(Po,{user:_,brands:r,roles:a,onClose:()=>{w(!1),k(null)},onSave:_?async e=>{if(_)try{const t=e.password&&""!==e.password.trim();await Wi(_.id,e,t),Ra.success("Kullan\u0131c\u0131 ba\u015far\u0131yla g\xfcncellendi"),k(null),T()}catch(t){Ra.error(t.message||"Kullan\u0131c\u0131 g\xfcncellenemedi")}}:async e=>{try{await Ui(e),Ra.success("Kullan\u0131c\u0131 ba\u015far\u0131yla olu\u015fturuldu"),w(!1),T()}catch(t){Ra.error(t.message||"Kullan\u0131c\u0131 olu\u015fturulamad\u0131")}},onSaveSilent:async e=>{if(_)try{await Wi(_.id,e),k(null),T()}catch(t){throw t}},currentUser:S})]})},Ao=async()=>(await gs.get("/api/categories-public/active")).data,Mo=async e=>(await gs.get("/api/categories/".concat(e))).data,Ro=async e=>(await gs.post("/api/categories/",e)).data,zo=async(e,t)=>(await gs.put("/api/categories/".concat(e),t)).data,Fo=async e=>{await gs.delete("/api/categories/".concat(e))},Lo=Ua("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),Io=Ua("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Bo=Ua("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Ho=e=>{let{brand:t,onClose:r,onSave:s,categories:a}=e;const[i,l]=(0,n.useState)({name:(null===t||void 0===t?void 0:t.name)||"",category_id:(null===t||void 0===t?void 0:t.category_id)||"",logo_url:(null===t||void 0===t?void 0:t.logo_url)||""}),[o,c]=(0,n.useState)("url"),[d,u]=(0,n.useState)(null),[h,m]=(0,n.useState)(null);(0,n.useEffect)(()=>{t?(l({name:t.name||"",category_id:t.category_id||"",logo_url:t.logo_url||""}),t.logo_url&&!t.logo_url.startsWith("blob:")?(c("url"),u(null),m(null)):c("upload")):(c("url"),u(null),m(null))},[t]);const p=e=>{const{name:t,value:r}=e.target;l(e=>Ie(Ie({},e),{},{[t]:r}))};return(0,za.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,za.jsx)("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:(0,za.jsxs)("div",{className:"p-6",children:[(0,za.jsx)("h2",{className:"text-xl font-bold mb-4",children:t?"Marka D\xfczenle":"Marka Olu\u015ftur"}),(0,za.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!i.name.trim())return void Ra.error("Marka ad\u0131 gereklidir");if("url"===o&&!i.logo_url.trim())return void Ra.error("Logo URL gereklidir");if("upload"===o&&!d)return void Ra.error("Logo dosyas\u0131 se\xe7ilmelidir");const r=Ie(Ie({},i),{},{category_id:i.category_id?Number(i.category_id):void 0});if("upload"===o&&d&&(r.logoFile=d,r.logo_url="temp"),"upload"===o&&d&&t)try{const e=await Mi(t.id,d);r.logo_url=e.logo_url}catch(n){return void Ra.error("Logo y\xfcklenemedi")}await s(r)},className:"space-y-4",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"Marka Ad\u0131 *"}),(0,za.jsx)("input",{type:"text",name:"name",value:i.name,onChange:p,className:"form-input",required:!0,placeholder:"Marka ad\u0131n\u0131 girin"})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"Kategori"}),(0,za.jsxs)("select",{name:"category_id",value:i.category_id||"",onChange:p,className:"form-input",children:[(0,za.jsx)("option",{value:"",children:"Kategori Se\xe7in"}),a&&a.length>0?a.map(e=>(0,za.jsx)("option",{value:e.id,children:e.name},e.id)):(0,za.jsx)("option",{disabled:!0,children:"Kategori y\xfckleniyor..."})]})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"Logo *"}),(0,za.jsxs)("div",{className:"flex gap-4 mb-4",children:[(0,za.jsxs)("label",{className:"flex items-center",children:[(0,za.jsx)("input",{type:"radio",name:"logoOption",value:"url",checked:"url"===o,onChange:e=>{c(e.target.value),u(null),m(null)},className:"mr-2"}),"URL ile"]}),(0,za.jsxs)("label",{className:"flex items-center",children:[(0,za.jsx)("input",{type:"radio",name:"logoOption",value:"upload",checked:"upload"===o,onChange:e=>{c(e.target.value),l(e=>Ie(Ie({},e),{},{logo_url:""}))},className:"mr-2"}),"Dosya Y\xfckle"]})]}),"url"===o&&(0,za.jsxs)("div",{children:[(0,za.jsx)("input",{type:"url",name:"logo_url",value:i.logo_url,onChange:p,className:"form-input",placeholder:"https://example.com/logo.png",required:!0}),(0,za.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Marka logosunun URL adresini girin"})]}),"upload"===o&&(0,za.jsxs)("div",{children:[(0,za.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r){if(!r.type.startsWith("image/"))return void Ra.error("Sadece resim dosyalar\u0131 y\xfcklenebilir");const e=[".jpg",".jpeg",".png",".gif",".webp",".svg"],t=r.name.toLowerCase().substring(r.name.lastIndexOf("."));if(!e.includes(t))return void Ra.error("Desteklenmeyen dosya format\u0131. Sadece JPG, PNG, GIF, WebP, SVG dosyalar\u0131 kabul edilir.");if(r.size>5242880)return void Ra.error("Dosya boyutu 5MB'dan k\xfc\xe7\xfck olmal\u0131d\u0131r");if(r.name.includes("..")||r.name.includes("/")||r.name.includes("\\"))return void Ra.error("Ge\xe7ersiz dosya ad\u0131");u(r);const n=new FileReader;n.onload=e=>{var t;m(null===(t=e.target)||void 0===t?void 0:t.result)},n.readAsDataURL(r)}},className:"form-input",required:!0}),(0,za.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG, GIF, WebP, SVG formatlar\u0131 desteklenir (Max: 5MB)"}),h&&(0,za.jsxs)("div",{className:"mt-3",children:[(0,za.jsx)("p",{className:"text-sm font-medium mb-2",children:"\xd6nizleme:"}),(0,za.jsx)("img",{src:h,alt:"Logo \xf6nizleme",className:"w-20 h-20 object-contain border border-gray-300 rounded"})]})]})]}),(0,za.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,za.jsx)("button",{type:"submit",className:"btn btn-primary flex-1",children:t?"Marka G\xfcncelle":"Marka Olu\u015ftur"}),(0,za.jsx)("button",{type:"button",onClick:r,className:"btn btn-secondary",children:"\u0130ptal"})]})]})]})})})},Uo=e=>{let{category:t,onClose:r,onSave:s,onDelete:a}=e;const[i,l]=(0,n.useState)({name:(null===t||void 0===t?void 0:t.name)||""});return(0,za.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,za.jsx)("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:(0,za.jsxs)("div",{className:"p-6",children:[(0,za.jsx)("h2",{className:"text-xl font-bold mb-4",children:t?"Kategori D\xfczenle":"Kategori Olu\u015ftur"}),(0,za.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),i.name.trim()?await s(i):Ra.error("Kategori ad\u0131 gereklidir")},className:"space-y-4",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"Kategori Ad\u0131 *"}),(0,za.jsx)("input",{type:"text",name:"name",value:i.name,onChange:e=>{const{name:t,value:r}=e.target;l(e=>Ie(Ie({},e),{},{[t]:r}))},className:"form-input",required:!0,placeholder:"Kategori ad\u0131n\u0131 girin"})]}),(0,za.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,za.jsx)("button",{type:"submit",className:"btn btn-primary flex-1",children:t?"Kategori G\xfcncelle":"Kategori Olu\u015ftur"}),t&&a&&(0,za.jsx)("button",{type:"button",onClick:async()=>{t&&a&&window.confirm("Bu kategoriyi silmek istedi\u011finizden emin misiniz?")&&await a(t.id)},className:"btn bg-red-600 hover:bg-red-700 text-white",children:"Sil"}),(0,za.jsx)("button",{type:"button",onClick:r,className:"btn btn-secondary",children:"\u0130ptal"})]})]})]})})})},Wo=e=>{let{request:t,onClose:r,onSave:s,categories:a}=e;const[i,l]=(0,n.useState)({name:(null===t||void 0===t?void 0:t.name)||"",category_id:(null===t||void 0===t?void 0:t.category_id)||void 0,logo_url:(null===t||void 0===t?void 0:t.logo_url)||"",request_message:(null===t||void 0===t?void 0:t.request_message)||""});(0,n.useEffect)(()=>{t&&l({name:t.name||"",category_id:t.category_id||void 0,logo_url:t.logo_url||"",request_message:t.request_message||""})},[t]);const o=e=>{const{name:t,value:r}=e.target;l(e=>Ie(Ie({},e),{},{[t]:r}))};return(0,za.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,za.jsx)("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:(0,za.jsxs)("div",{className:"p-6",children:[(0,za.jsx)("h2",{className:"text-xl font-bold mb-4",children:t?"Marka Talebi D\xfczenle":"Yeni Marka Talebi Olu\u015ftur"}),(0,za.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),i.name.trim()?i.logo_url.trim()?await s(i):Ra.error("Logo URL gereklidir"):Ra.error("Marka ad\u0131 gereklidir")},className:"space-y-4",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"Marka Ad\u0131 *"}),(0,za.jsx)("input",{type:"text",name:"name",value:i.name,onChange:o,className:"form-input",required:!0,placeholder:"Marka ad\u0131n\u0131 girin"})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"Kategori"}),(0,za.jsxs)("select",{name:"category_id",value:i.category_id||"",onChange:o,className:"form-input",children:[(0,za.jsx)("option",{value:"",children:"Kategori Se\xe7in"}),a&&a.length>0?a.map(e=>(0,za.jsx)("option",{value:e.name,children:e.name},e.id)):(0,za.jsx)("option",{disabled:!0,children:"Kategori y\xfckleniyor..."})]})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"Logo URL *"}),(0,za.jsx)("input",{type:"url",name:"logo_url",value:i.logo_url||"",onChange:o,className:"form-input",placeholder:"https://example.com/logo.png",required:!0}),(0,za.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Marka logosunun URL adresini girin"})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"Talep Mesaj\u0131"}),(0,za.jsx)("textarea",{name:"request_message",value:i.request_message||"",onChange:o,className:"form-input",rows:3,placeholder:"Yeni marka ekleme talebinizle ilgili a\xe7\u0131klama (iste\u011fe ba\u011fl\u0131)"})]}),(0,za.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,za.jsx)("button",{type:"submit",className:"btn btn-primary flex-1",children:t?"Talebi G\xfcncelle":"Talep Olu\u015ftur"}),(0,za.jsx)("button",{type:"button",onClick:r,className:"btn btn-secondary",children:"\u0130ptal"})]})]})]})})})},Ko=()=>{var e,t,r,s;const{user:a,loading:i}=Za(),l=Z(),[o,c]=(0,n.useState)([]),[d,u]=(0,n.useState)(new Set),[h,m]=(0,n.useState)(!0),[p,g]=(0,n.useState)(1),[f,x]=(0,n.useState)(0),[y,b]=(0,n.useState)(""),[v,j]=(0,n.useState)(!1),[w,_]=(0,n.useState)(null),[k,S]=(0,n.useState)(!1),[N,C]=(0,n.useState)(null),[T,E]=(0,n.useState)([]),[O,P]=(0,n.useState)(!1),[D,A]=(0,n.useState)(null),[M,R]=(0,n.useState)(""),[z,F]=(0,n.useState)("");(0,n.useEffect)(()=>{i||(L(),I())},[p,null===a||void 0===a?void 0:a.brand_ids,null===a||void 0===a?void 0:a.permissions,i]),(0,n.useEffect)(()=>{I()},[]);const L=async()=>{try{m(!0);const e=await Si(p,10);let t=e.brands;null!==a&&void 0!==a&&a.brand_ids&&a.brand_ids.length>0&&(t=e.brands),c(t),x(t.length)}catch(e){Ra.error("Failed to load brands")}finally{m(!1)}},I=async()=>{try{const e=await Ao();E(e),0===e.length&&Ra.error("Veritaban\u0131nda kategori bulunamad\u0131. L\xfctfen kategorileri kontrol edin.")}catch(n){var e,t,r;console.error("\u274c Kategoriler y\xfcklenemedi:",n),console.error("Error details:",null===(e=n.response)||void 0===e?void 0:e.data),Ra.error("Kategoriler y\xfcklenemedi: "+((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||n.message)),E([])}},B=o.filter(e=>{const t=!y||e.name.toLowerCase().includes(y.toLowerCase())||e.category&&e.category.name&&e.category.name.toLowerCase().includes(y.toLowerCase()),r=!M||e.category&&e.category.id&&e.category.id===parseInt(M),n=!z||"active"===z&&e.is_active||"inactive"===z&&!e.is_active;return t&&r&&n});return i?(0,za.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,za.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,za.jsxs)("div",{className:"space-y-6",children:[(0,za.jsxs)("div",{className:"flex justify-between items-center",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:null!==a&&void 0!==a&&a.brand_ids&&a.brand_ids.length>0?"Markalar\u0131m":"Markalar"}),(0,za.jsx)("p",{className:"text-gray-600",children:null!==a&&void 0!==a&&a.brand_ids&&a.brand_ids.length>0?"Y\xf6netti\u011finiz markalar\u0131n bilgilerini g\xf6r\xfcnt\xfcleyin":"Marka bilgilerini ve ayarlar\u0131n\u0131 y\xf6netin"})]}),(0,za.jsxs)("div",{className:"flex gap-2",children:[(null===a||void 0===a||null===(e=a.permissions)||void 0===e?void 0:e.includes("brands.manage"))&&(0,za.jsxs)(za.Fragment,{children:[(0,za.jsxs)("button",{onClick:()=>P(!0),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[(0,za.jsx)(Li,{size:20}),"Kategori Ekle"]}),(0,za.jsxs)("button",{onClick:()=>j(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[(0,za.jsx)(Li,{size:20}),"Marka Ekle"]})]}),(null===a||void 0===a?void 0:a.brand_ids)&&a.brand_ids.length>0&&!(null!==a&&void 0!==a&&null!==(t=a.permissions)&&void 0!==t&&t.includes("brands.manage"))&&(0,za.jsxs)("button",{onClick:()=>S(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[(0,za.jsx)(Li,{size:20}),"Marka Talebi"]})]})]}),(0,za.jsxs)("div",{className:"card",children:[(0,za.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,za.jsxs)("div",{className:"flex-1 lg:flex-[2]",children:[(0,za.jsx)("label",{className:"form-label",children:"Arama"}),(0,za.jsxs)("div",{className:"relative",children:[(0,za.jsx)(nl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,za.jsx)("input",{type:"text",value:y,onChange:e=>b(e.target.value),className:"form-input pl-10 w-full",placeholder:"Markalarda ara..."})]})]}),(0,za.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 lg:flex-[3]",children:[(0,za.jsxs)("div",{className:"flex-1",children:[(0,za.jsx)("label",{className:"form-label",children:"Kategori"}),(0,za.jsxs)("select",{value:M,onChange:e=>R(e.target.value),className:"form-input w-full",children:[(0,za.jsx)("option",{value:"",children:"T\xfcm Kategoriler"}),T.map(e=>(0,za.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,za.jsxs)("div",{className:"flex-1",children:[(0,za.jsx)("label",{className:"form-label",children:"Durum"}),(0,za.jsxs)("select",{value:z,onChange:e=>F(e.target.value),className:"form-input w-full",children:[(0,za.jsx)("option",{value:"",children:"T\xfcm Durumlar"}),(0,za.jsx)("option",{value:"active",children:"Aktif"}),(0,za.jsx)("option",{value:"inactive",children:"Pasif"})]})]}),(0,za.jsx)("div",{className:"flex-shrink-0 flex items-end",children:(0,za.jsxs)("button",{onClick:()=>{b(""),R(""),F("")},className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg flex items-center justify-center gap-2 transition-colors",title:"Filtreleri Temizle",children:[(0,za.jsx)(fl,{size:16}),(0,za.jsx)("span",{className:"hidden sm:inline",children:"Temizle"})]})})]})]}),(y||M||z)&&(0,za.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,za.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,za.jsx)("span",{className:"text-sm text-gray-600 font-medium",children:"Aktif Filtreler:"}),y&&(0,za.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:[(0,za.jsx)(nl,{size:12}),'"',y,'"',(0,za.jsx)("button",{onClick:()=>b(""),className:"hover:bg-blue-200 rounded-full p-0.5",children:(0,za.jsx)(fl,{size:10})})]}),M&&(0,za.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:[(0,za.jsx)(Lo,{size:12}),M,(0,za.jsx)("button",{onClick:()=>R(""),className:"hover:bg-green-200 rounded-full p-0.5",children:(0,za.jsx)(fl,{size:10})})]}),z&&(0,za.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full",children:["active"===z?"\u2713":"\u2717"," ","active"===z?"Aktif":"Pasif",(0,za.jsx)("button",{onClick:()=>F(""),className:"hover:bg-purple-200 rounded-full p-0.5",children:(0,za.jsx)(fl,{size:10})})]})]})})]}),(0,za.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:h?(0,za.jsx)("div",{className:"col-span-full flex justify-center py-8",children:(0,za.jsx)("div",{className:"spinner"})}):0===B.length?(0,za.jsx)("div",{className:"col-span-full text-center py-8 text-gray-500",children:"Marka bulunamad\u0131"}):B.map(e=>{var t,r;return(0,za.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-300 cursor-pointer",onClick:()=>(e=>{l("/admin/brands/".concat(e.id))})(e),children:[(0,za.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,za.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,za.jsx)("div",{className:"h-12 w-12 bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden border border-gray-200",children:e.logo_url?(0,za.jsx)("img",{src:e.logo_url.startsWith("http")?e.logo_url:"http://localhost:8000".concat(e.logo_url),alt:"".concat(e.name," logo"),className:"w-full h-full object-contain p-1",onError:t=>{const r=t.target;r.style.display="none";const n=r.parentElement;n&&(n.innerHTML='<span class="text-lg font-bold text-gray-400">'.concat(e.name[0],"</span>"))}}):(0,za.jsx)("span",{className:"text-lg font-bold text-gray-400",children:e.name[0]})}),(0,za.jsxs)("div",{className:"flex-1",children:[(0,za.jsxs)("h3",{className:"font-medium text-gray-900 flex items-center gap-1 text-base",children:[e.name,(0,za.jsx)("button",{onClick:t=>(async(e,t)=>{t.stopPropagation();const r=new Set(d);d.has(e.id)?r.delete(e.id):r.add(e.id),u(r)})(e,t),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:d.has(e.id)?"Daralt":"Geni\u015flet",children:d.has(e.id)?(0,za.jsx)(Io,{size:16,className:"text-gray-400"}):(0,za.jsx)(Bo,{size:16,className:"text-gray-400"})})]}),(0,za.jsx)("div",{className:"flex items-center gap-2 mt-1",children:e.category&&(0,za.jsx)("p",{className:"text-sm text-gray-500",children:"string"===typeof e.category?e.category:e.category.name})})]})]}),(0,za.jsxs)("div",{className:"flex items-center gap-0.5",children:[(null===a||void 0===a||null===(t=a.permissions)||void 0===t?void 0:t.includes("brands.manage"))&&(0,za.jsx)("button",{onClick:t=>{t.stopPropagation(),_(e),j(!0)},className:"p-2 hover:bg-blue-100 rounded-lg transition-colors",children:(0,za.jsx)(Eo,{size:16})}),(null===a||void 0===a||null===(r=a.permissions)||void 0===r?void 0:r.includes("brands.manage"))&&(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)("span",{className:"text-xs text-gray-500",children:e.is_active?"Aktif":"Pasif"}),(0,za.jsx)("button",{onClick:t=>{t.stopPropagation(),(async e=>{try{e.is_active?(await Ai(e.id),Ra.success("Brand deactivated")):(await Di(e.id),Ra.success("Brand activated")),L()}catch(n){var t,r;Ra.error((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Failed to update brand status")}})(e)},className:"relative inline-flex h-4 w-8 items-center rounded-full transition-colors ".concat(e.is_active?"bg-green-500":"bg-gray-300"),children:(0,za.jsx)("span",{className:"inline-block h-3 w-3 transform rounded-full bg-white transition-transform ".concat(e.is_active?"translate-x-4":"translate-x-0.5")})})]})]})]}),(0,za.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,za.jsx)("div",{className:"text-sm text-gray-400",children:new Date(e.created_at).toLocaleDateString("tr-TR")})})]},e.id)})}),(null===a||void 0===a||null===(r=a.permissions)||void 0===r?void 0:r.includes("brands.manage"))&&f>10&&(0,za.jsxs)("div",{className:"flex justify-between items-center",children:[(0,za.jsxs)("div",{className:"text-sm text-gray-600",children:[f," markadan ",10*(p-1)+1," - ",Math.min(10*p,f)," aras\u0131 g\xf6steriliyor"]}),(0,za.jsxs)("div",{className:"flex gap-2",children:[(0,za.jsx)("button",{onClick:()=>g(p-1),disabled:1===p,className:"btn btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"\xd6nceki"}),(0,za.jsx)("button",{onClick:()=>g(p+1),disabled:10*p>=f,className:"btn btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Sonraki"})]})]}),(v||w)&&(0,za.jsx)(Ho,{brand:w,onClose:()=>{j(!1),_(null)},onSave:w?async e=>{if(w)try{console.log("\ud83d\udd04 Updating brand:",w.id,e),await Pi(w.id,e),Ra.success("Marka ba\u015far\u0131yla g\xfcncellendi"),_(null),L()}catch(s){var t,r,n;console.error("\u274c Marka g\xfcncellenemedi:",s),console.error("Error details:",null===(t=s.response)||void 0===t?void 0:t.data),Ra.error("Marka g\xfcncellenemedi: "+((null===(r=s.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||s.message))}}:async e=>{try{console.log("\ud83d\udd04 Creating brand:",e);const t=await Ti(e);if(e.logoFile)try{await Mi(t.id,e.logoFile)}catch(s){console.warn("Logo y\xfcklenemedi:",s),Ra.error("Marka olu\u015fturuldu ancak logo y\xfcklenemedi")}Ra.success("Marka ba\u015far\u0131yla olu\u015fturuldu"),j(!1),L()}catch(a){var t,r,n;console.error("\u274c Marka olu\u015fturulamad\u0131:",a),console.error("Error details:",null===(t=a.response)||void 0===t?void 0:t.data),Ra.error("Marka olu\u015fturulamad\u0131: "+((null===(r=a.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||a.message))}},categories:T}),(O||D)&&(0,za.jsx)(Uo,{category:D,onClose:()=>{P(!1),A(null)},onSave:D?e=>(async e=>{if(D)try{console.log("\ud83d\udd04 Updating category:",D.id,e),await zo(D.id,e),Ra.success("Kategori ba\u015far\u0131yla g\xfcncellendi"),A(null),await I()}catch(s){var t,r,n;console.error("\u274c Kategori g\xfcncellenemedi:",s),console.error("Error details:",null===(t=s.response)||void 0===t?void 0:t.data),Ra.error("Kategori g\xfcncellenemedi: "+((null===(r=s.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||s.message))}})(e):e=>(async e=>{try{console.log("\ud83d\udd04 Creating category:",e),await Ro(e),Ra.success("Kategori ba\u015far\u0131yla olu\u015fturuldu"),P(!1),await I()}catch(s){var t,r,n;console.error("\u274c Kategori olu\u015fturulamad\u0131:",s),console.error("Error details:",null===(t=s.response)||void 0===t?void 0:t.data),Ra.error("Kategori olu\u015fturulamad\u0131: "+((null===(r=s.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||s.message))}})(e),onDelete:D?async e=>{if(window.confirm("Bu kategoriyi silmek istedi\u011finizden emin misiniz?"))try{await Fo(e),Ra.success("Kategori ba\u015far\u0131yla silindi"),await I()}catch(t){Ra.error("Kategori silinemedi")}}:void 0}),(k||N)&&(null===a||void 0===a?void 0:a.brand_ids)&&a.brand_ids.length>0&&!(null!==a&&void 0!==a&&null!==(s=a.permissions)&&void 0!==s&&s.includes("brands.manage"))&&(0,za.jsx)(Wo,{request:N,onClose:()=>{S(!1),C(null)},onSave:N?e=>(async e=>{if(N)try{await Oi(N.id,e),Ra.success("Marka talebi g\xfcncellendi"),C(null)}catch(n){var t,r;Ra.error((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Marka talebi g\xfcncellenemedi")}})(e):e=>(async e=>{try{await Ei(e),Ra.success("Marka ekleme talebiniz g\xf6nderildi"),S(!1)}catch(n){var t,r;Ra.error((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Marka talebi olu\u015fturulamad\u0131")}})(e),categories:T})]})},Vo=Ua("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),Yo=async function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,t=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0;const s=new URLSearchParams({page:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1).toString(),per_page:e.toString()});t&&s.append("brand_id",t.toString()),r&&s.append("search",r),n&&(n.product_type&&s.append("product_type",n.product_type),n.color&&s.append("color",n.color),n.size_range&&s.append("size_range",n.size_range),n.price_min&&s.append("price_min",n.price_min),n.price_max&&s.append("price_max",n.price_max),void 0!==n.incomplete&&s.append("incomplete",n.incomplete.toString()),void 0!==n.has_second_product&&s.append("has_second_product",n.has_second_product.toString()));const a="/api/products?".concat(s.toString());return(await gs.get(a)).data},Go=async e=>(await gs.get("/api/products/".concat(e))).data,qo=async e=>{const t=new FormData;e.forEach(e=>{t.append("files",e)});return(await gs.post("/api/products/upload-v2",t,{headers:{"Content-Type":"multipart/form-data"}})).data},Xo=async e=>(await gs.get("/api/products/upload-status/".concat(e))).data,$o=async e=>(await gs.put("/api/products/complete-bulk",e)).data,Jo=async(e,t)=>(await gs.put("/api/products/".concat(e),t)).data,Qo=async()=>(await gs.get("/api/products/filter-options")).data,Zo=async e=>(await gs.get("/api/templates/master",{params:e})).data,ec=async e=>(await gs.get("/api/templates/by-product/".concat(e))).data,tc=()=>{const{id:e}=ee(),t=Z(),{user:r}=Za(),[s,a]=(0,n.useState)(null),[i,l]=(0,n.useState)(null),[o,c]=(0,n.useState)([]),[d,u]=(0,n.useState)([]),[h,m]=(0,n.useState)([]),[p,g]=(0,n.useState)([]),[f,x]=(0,n.useState)(!0),[y,b]=(0,n.useState)("overview");(0,n.useEffect)(()=>{e&&v()},[e]);const v=async()=>{try{x(!0);const t=await Ci(parseInt(e));if(a(t),t.category_id)try{const e=await Mo(t.category_id);l(e)}catch(n){console.log("Category API not available or error:",n),l(null)}try{const e=(await Hi(1,1e3)).users.filter(e=>e.brand_ids&&e.brand_ids.includes(t.id));c(e)}catch(n){console.log("Users API not available or error:",n),c([])}try{const e=(await bi(1,100)).channels.filter(e=>e.brand_id===t.id);u(e)}catch(n){console.log("Social media channels API not available or error:",n),u([])}try{const e=(await Yo(1,100)).products.filter(e=>e.brand_id===t.id);m(e)}catch(n){console.log("Products API not available"),m([])}try{const e=(await Zo({skip:0,limit:100})).data.filter(e=>e.brand_id===t.id);g(e)}catch(n){g([])}}catch(n){var t,r;console.error("\u274c Marka detaylar\u0131 y\xfcklenemedi:",n),Ra.error("Marka detaylar\u0131 y\xfcklenemedi: "+((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||n.message))}finally{x(!1)}},j=e=>new Date(e).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return f?(0,za.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,za.jsxs)("div",{className:"text-center",children:[(0,za.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,za.jsx)("p",{className:"text-gray-600",children:"Marka detaylar\u0131 y\xfckleniyor..."})]})}):s?(0,za.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,za.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,za.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,za.jsxs)("div",{className:"flex items-center justify-between py-8",children:[(0,za.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,za.jsx)("button",{onClick:()=>t("/admin/brands"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Geri D\xf6n",children:(0,za.jsx)(dl,{size:20,className:"text-gray-600"})}),(0,za.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,za.jsx)("div",{className:"h-20 w-20 bg-gradient-to-br from-blue-50 to-indigo-100 rounded-2xl flex items-center justify-center overflow-hidden border-2 border-gray-200 shadow-lg",children:s.logo_url?(0,za.jsx)("img",{src:s.logo_url.startsWith("http")?s.logo_url:"http://localhost:8000".concat(s.logo_url),alt:"".concat(s.name," logo"),className:"w-full h-full object-contain p-3",onError:e=>{const t=e.target;t.style.display="none";const r=t.parentElement;r&&(r.innerHTML='<span class="text-3xl font-bold text-gray-500">'.concat(s.name[0],"</span>"))}}):(0,za.jsx)("span",{className:"text-3xl font-bold text-gray-500",children:s.name[0]})}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:s.name}),(0,za.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,za.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:i?i.name:"Kategori Yok"}),(0,za.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ".concat(s.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:s.is_active?"Aktif":"Pasif"})]})]})]})]}),"Super Admin"===(null===r||void 0===r?void 0:r.role)&&(0,za.jsx)("div",{className:"flex items-center space-x-3",children:(0,za.jsxs)("button",{onClick:async()=>{if(s)if("Super Admin"===(null===r||void 0===r?void 0:r.role)){if(window.confirm('"'.concat(s.name,'" markas\u0131n\u0131 silmek istedi\u011finizden emin misiniz? Bu i\u015flem geri al\u0131namaz.')))try{await Ri(s.id),Ra.success("Marka ba\u015far\u0131yla silindi"),t("/admin/brands")}catch(a){var e,n;console.error("\u274c Marka silinemedi:",a),Ra.error("Marka silinemedi: "+((null===(e=a.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.detail)||a.message))}}else Ra.error("Bu i\u015flem sadece Super Admin taraf\u0131ndan yap\u0131labilir.")},className:"btn btn-danger flex items-center space-x-2 px-4 py-2",children:[(0,za.jsx)(il,{size:16}),(0,za.jsx)("span",{children:"Sil"})]})})]})})}),(0,za.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,za.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,za.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300",children:(0,za.jsxs)("div",{className:"flex items-center",children:[(0,za.jsx)("div",{className:"p-4 bg-gradient-to-br from-blue-100 to-blue-200 rounded-2xl",children:(0,za.jsx)(ci,{size:28,className:"text-blue-600"})}),(0,za.jsxs)("div",{className:"ml-5",children:[(0,za.jsx)("p",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"\xc7al\u0131\u015fanlar"}),(0,za.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:o.filter(e=>"user"===e.role).length})]})]})}),(0,za.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300",children:(0,za.jsxs)("div",{className:"flex items-center",children:[(0,za.jsx)("div",{className:"p-4 bg-gradient-to-br from-green-100 to-green-200 rounded-2xl",children:(0,za.jsx)(ul,{size:28,className:"text-green-600"})}),(0,za.jsxs)("div",{className:"ml-5",children:[(0,za.jsx)("p",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Kanal"}),(0,za.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:d.length})]})]})}),(0,za.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300",children:(0,za.jsxs)("div",{className:"flex items-center",children:[(0,za.jsx)("div",{className:"p-4 bg-gradient-to-br from-purple-100 to-purple-200 rounded-2xl",children:(0,za.jsx)(pi,{size:28,className:"text-purple-600"})}),(0,za.jsxs)("div",{className:"ml-5",children:[(0,za.jsx)("p",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"\xdcr\xfcnler"}),(0,za.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:h.length})]})]})}),(0,za.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300",children:(0,za.jsxs)("div",{className:"flex items-center",children:[(0,za.jsx)("div",{className:"p-4 bg-gradient-to-br from-orange-100 to-orange-200 rounded-2xl",children:(0,za.jsx)(cl,{size:28,className:"text-orange-600"})}),(0,za.jsxs)("div",{className:"ml-5",children:[(0,za.jsx)("p",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"\u015eablonlar"}),(0,za.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:p.length})]})]})})]}),(0,za.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:[(0,za.jsx)("div",{className:"border-b border-gray-200 bg-gray-50",children:(0,za.jsx)("nav",{className:"flex space-x-8 px-8",children:[{id:"overview",label:"Genel Bak\u0131\u015f",icon:ti},{id:"users",label:"\xc7al\u0131\u015fanlar",icon:ci},{id:"channels",label:"Kanallar",icon:ul},{id:"products",label:"\xdcr\xfcnler",icon:pi},{id:"templates",label:"\u015eablonlar",icon:cl}].map(e=>(0,za.jsxs)("button",{onClick:()=>b(e.id),className:"flex items-center space-x-3 py-5 px-3 border-b-2 font-semibold text-sm transition-all duration-200 ".concat(y===e.id?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-600 hover:text-gray-800 hover:border-gray-300 hover:bg-gray-100"),children:[(0,za.jsx)(e.icon,{size:18}),(0,za.jsx)("span",{children:e.label})]},e.id))})}),(0,za.jsxs)("div",{className:"p-8",children:["overview"===y&&(0,za.jsx)("div",{className:"space-y-6",children:(0,za.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,za.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl p-8 border border-gray-200",children:[(0,za.jsxs)("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,za.jsx)(di,{size:20,className:"mr-2 text-blue-600"}),"Marka Bilgileri"]}),(0,za.jsxs)("div",{className:"space-y-4",children:[(0,za.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[(0,za.jsx)("span",{className:"text-gray-600 font-medium",children:"Marka Ad\u0131:"}),(0,za.jsx)("span",{className:"font-semibold text-gray-900",children:s.name})]}),(0,za.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[(0,za.jsx)("span",{className:"text-gray-600 font-medium",children:"Kategori:"}),(0,za.jsx)("span",{className:"font-semibold text-gray-900",children:i?i.name:"Belirtilmemi\u015f"})]}),(0,za.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[(0,za.jsx)("span",{className:"text-gray-600 font-medium",children:"Durum:"}),(0,za.jsx)("span",{className:"font-semibold px-3 py-1 rounded-full text-sm ".concat(s.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:s.is_active?"Aktif":"Pasif"})]}),(0,za.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[(0,za.jsx)("span",{className:"text-gray-600 font-medium",children:"Olu\u015fturulma:"}),(0,za.jsx)("span",{className:"font-semibold text-gray-900",children:j(s.created_at)})]}),(0,za.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,za.jsx)("span",{className:"text-gray-600 font-medium",children:"Son G\xfcncelleme:"}),(0,za.jsx)("span",{className:"font-semibold text-gray-900",children:j(s.updated_at)})]})]})]}),(0,za.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-2xl p-8 border border-gray-200",children:[(0,za.jsxs)("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,za.jsx)(ti,{size:20,className:"mr-2 text-blue-600"}),"Logo \xd6nizleme"]}),(0,za.jsx)("div",{className:"flex justify-center",children:(0,za.jsx)("div",{className:"h-40 w-40 bg-white rounded-3xl flex items-center justify-center overflow-hidden border-2 border-gray-200 shadow-xl",children:s.logo_url?(0,za.jsx)("img",{src:s.logo_url.startsWith("http")?s.logo_url:"http://localhost:8000".concat(s.logo_url),alt:"".concat(s.name," logo"),className:"w-full h-full object-contain p-6",onError:e=>{const t=e.target;t.style.display="none";const r=t.parentElement;r&&(r.innerHTML='<span class="text-5xl font-bold text-gray-400">'.concat(s.name[0],"</span>"))}}):(0,za.jsx)("span",{className:"text-5xl font-bold text-gray-400",children:s.name[0]})})})]})]})}),"users"===y&&(0,za.jsxs)("div",{className:"space-y-6",children:[(0,za.jsx)("div",{className:"flex items-center justify-between",children:(0,za.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,za.jsx)(ci,{size:20,className:"mr-2 text-blue-600"}),"Marka \xc7al\u0131\u015fanlar\u0131 (",o.filter(e=>"user"===e.role).length,")"]})}),(()=>{const e=o.filter(e=>"user"===e.role);return 0===e.length?(0,za.jsxs)("div",{className:"text-center py-16",children:[(0,za.jsx)(ci,{size:64,className:"mx-auto text-gray-400 mb-6"}),(0,za.jsx)("p",{className:"text-gray-500 text-lg font-medium",children:"Bu markaya ait \xe7al\u0131\u015fan bulunmuyor"}),(0,za.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Yeni \xe7al\u0131\u015fan eklemek i\xe7in l\xfctfen y\xf6neticinize ba\u015fvurun"})]}):(0,za.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>{var t;return(0,za.jsx)("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-2xl p-6 border border-gray-200 shadow-sm hover:shadow-md transition-all duration-300",children:(0,za.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,za.jsx)("div",{className:"h-12 w-12 bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl flex items-center justify-center",children:(0,za.jsx)("span",{className:"text-lg font-bold text-blue-600",children:(null===(t=e.first_name)||void 0===t?void 0:t[0])||e.email[0]})}),(0,za.jsxs)("div",{className:"flex-1",children:[(0,za.jsx)("h4",{className:"font-semibold text-gray-900",children:e.first_name&&e.last_name?"".concat(e.first_name," ").concat(e.last_name):e.email}),(0,za.jsx)("p",{className:"text-sm text-gray-600",children:e.email}),(0,za.jsx)("span",{className:"inline-block px-3 py-1 text-xs font-medium rounded-full mt-2 bg-green-100 text-green-800",children:"\xc7al\u0131\u015fan"})]})]})},e.id)})})})()]}),"channels"===y&&(0,za.jsxs)("div",{className:"space-y-6",children:[(0,za.jsx)("div",{className:"flex items-center justify-between",children:(0,za.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,za.jsx)(ul,{size:20,className:"mr-2 text-green-600"}),"Sosyal Medya Kanallar\u0131 (",d.length,")"]})}),0===d.length?(0,za.jsxs)("div",{className:"text-center py-16",children:[(0,za.jsx)(ul,{size:64,className:"mx-auto text-gray-400 mb-6"}),(0,za.jsx)("p",{className:"text-gray-500 text-lg font-medium",children:"Bu marka i\xe7in sosyal medya kanal\u0131 bulunmuyor"}),(0,za.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"L\xfctfen y\xf6neticinize ba\u015fvurun"}),(0,za.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Yeni kanal eklemek i\xe7in yukar\u0131daki butonu kullan\u0131n"})]}):(0,za.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(e=>(0,za.jsx)("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-2xl p-6 border border-gray-200 shadow-sm hover:shadow-md transition-all duration-300",children:(0,za.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,za.jsx)("div",{className:"h-12 w-12 bg-gradient-to-br from-green-100 to-green-200 rounded-xl flex items-center justify-center",children:(0,za.jsx)(Vo,{size:24,className:"text-green-600"})}),(0,za.jsxs)("div",{className:"flex-1",children:[(0,za.jsx)("h4",{className:"font-semibold text-gray-900",children:e.name}),(0,za.jsx)("p",{className:"text-sm text-gray-600",children:e.platform}),(0,za.jsx)("span",{className:"inline-block px-3 py-1 text-xs font-medium rounded-full mt-2 ".concat(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"Aktif":"Pasif"})]})]})},e.id))})]}),"products"===y&&(0,za.jsxs)("div",{className:"space-y-6",children:[(0,za.jsx)("div",{className:"flex items-center justify-between",children:(0,za.jsxs)("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[(0,za.jsx)(pi,{size:20,className:"mr-2 text-purple-600"}),"\xdcr\xfcnler (",h.length,")"]})}),0===h.length?(0,za.jsxs)("div",{className:"text-center py-16",children:[(0,za.jsx)(pi,{size:64,className:"mx-auto text-gray-400 mb-6"}),(0,za.jsx)("p",{className:"text-gray-500 text-lg font-medium",children:"Bu marka i\xe7in \xfcr\xfcn bulunmuyor"}),(0,za.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Yeni \xfcr\xfcn eklemek i\xe7in yukar\u0131daki butonu kullan\u0131n"})]}):(0,za.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(e=>(0,za.jsx)("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-2xl p-6 border border-gray-200 shadow-sm hover:shadow-md transition-all duration-300",children:(0,za.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,za.jsx)("div",{className:"h-12 w-12 bg-gradient-to-br from-purple-100 to-purple-200 rounded-xl flex items-center justify-center",children:(0,za.jsx)(pi,{size:24,className:"text-purple-600"})}),(0,za.jsxs)("div",{className:"flex-1",children:[(0,za.jsx)("h4",{className:"font-semibold text-gray-900",children:e.name}),(0,za.jsxs)("p",{className:"text-sm text-gray-600",children:[e.code," - ",e.color]}),(0,za.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:j(e.created_at)})]})]})},e.id))})]}),"templates"===y&&(0,za.jsxs)("div",{className:"space-y-6",children:[(0,za.jsx)("div",{className:"flex items-center justify-between",children:(0,za.jsxs)("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[(0,za.jsx)(cl,{size:20,className:"mr-2 text-orange-600"}),"\u015eablonlar (",p.length,")"]})}),0===p.length?(0,za.jsxs)("div",{className:"text-center py-16",children:[(0,za.jsx)(cl,{size:64,className:"mx-auto text-gray-400 mb-6"}),(0,za.jsx)("p",{className:"text-gray-500 text-lg font-medium",children:"Bu marka i\xe7in \u015fablon bulunmuyor"}),(0,za.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Yeni \u015fablon eklemek i\xe7in yukar\u0131daki butonu kullan\u0131n"})]}):(0,za.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(e=>(0,za.jsx)("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-2xl p-6 border border-gray-200 shadow-sm hover:shadow-md transition-all duration-300",children:(0,za.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,za.jsx)("div",{className:"h-12 w-12 bg-gradient-to-br from-orange-100 to-orange-200 rounded-xl flex items-center justify-center",children:(0,za.jsx)(cl,{size:24,className:"text-orange-600"})}),(0,za.jsxs)("div",{className:"flex-1",children:[(0,za.jsx)("h4",{className:"font-semibold text-gray-900",children:e.name}),(0,za.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),(0,za.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:j(e.created_at)})]})]})},e.id))})]})]})]})]})]}):(0,za.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,za.jsxs)("div",{className:"text-center",children:[(0,za.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Marka Bulunamad\u0131"}),(0,za.jsx)("p",{className:"text-gray-600 mb-6",children:"Arad\u0131\u011f\u0131n\u0131z marka bulunamad\u0131 veya silinmi\u015f olabilir."}),(0,za.jsx)("button",{onClick:()=>t("/admin/brands"),className:"btn btn-primary",children:"Markalar Sayfas\u0131na D\xf6n"})]})})},rc=Ua("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),nc={loading:"Y\xfckleniyor...",error:"Hata olu\u015ftu",success:"Ba\u015far\u0131l\u0131",save:"Kaydet",cancel:"\u0130ptal",delete:"Sil",edit:"D\xfczenle",add:"Ekle",search:"Ara",filter:"Filtrele",clear:"Temizle",employees:"\xc7al\u0131\u015fanlar",addEmployee:"\xc7al\u0131\u015fan Ekle",editEmployee:"\xc7al\u0131\u015fan D\xfczenle",deleteEmployee:"\xc7al\u0131\u015fan Sil",employeeName:"\xc7al\u0131\u015fan Ad\u0131",employeeEmail:"E-posta",employeePhone:"Telefon",employeeRole:"Rol",employeeStatus:"Durum",active:"Aktif",inactive:"Pasif",products:"\xdcr\xfcnler",addProduct:"\xdcr\xfcn Ekle",editProduct:"\xdcr\xfcn D\xfczenle",deleteProduct:"\xdcr\xfcn Sil",productName:"\xdcr\xfcn Ad\u0131",productCode:"\xdcr\xfcn Kodu",productPrice:"Fiyat",productStock:"Stok",productCategory:"Kategori",brands:"Markalar",addBrand:"Marka Ekle",editBrand:"Marka D\xfczenle",deleteBrand:"Marka Sil",brandName:"Marka Ad\u0131",brandDescription:"A\xe7\u0131klama",settings:"Ayarlar",generalSettings:"Genel Ayarlar",urlSettings:"URL Ayarlar\u0131",saveSettings:"Ayarlar\u0131 Kaydet",resetSettings:"Ayarlar\u0131 S\u0131f\u0131rla",mediaGallery:"Medya Galerisi",uploadImage:"Resim Y\xfckle",selectImage:"Resim Se\xe7",imagePreview:"Resim \xd6nizleme",socialMedia:"Sosyal Medya",channels:"Kanallar",addChannel:"Kanal Ekle",editChannel:"Kanal D\xfczenle",deleteChannel:"Kanal Sil",channelName:"Kanal Ad\u0131",channelType:"Kanal T\xfcr\xfc",channelStatus:"Durum",employee_requests:"\xc7al\u0131\u015fan Talepleri",add_employee_request:"\xc7al\u0131\u015fan Talebi Olu\u015ftur",my_employees:"\xc7al\u0131\u015fanlar\u0131m",my_employees_description:"Markalar\u0131n\u0131za ba\u011fl\u0131 \xe7al\u0131\u015fanlar\u0131 g\xf6r\xfcnt\xfcleyin ve y\xf6netin",requestLogs:"\u0130stek Kay\u0131tlar\u0131",auditLogs:"Denetim Kay\u0131tlar\u0131",logDetails:"Kay\u0131t Detaylar\u0131",filterLogs:"Kay\u0131tlar\u0131 Filtrele",exportLogs:"Kay\u0131tlar\u0131 D\u0131\u015fa Aktar"},sc=e=>{const[t,r]=(0,n.useState)(nc),[s,a]=(0,n.useState)(!1),[i,l]=(0,n.useState)(null);(0,n.useEffect)(()=>{e&&o(e)},[e]);const o=async e=>{try{a(!0),l(null);const t=c(e);r(e=>Ie(Ie({},e),t))}catch(t){l(t instanceof Error?t.message:"Failed to load texts")}finally{a(!1)}},c=e=>({employees:{pageTitle:"\xc7al\u0131\u015fan Y\xf6netimi",pageDescription:"\xc7al\u0131\u015fanlar\u0131 y\xf6netin ve d\xfczenleyin",noEmployees:"Hen\xfcz \xe7al\u0131\u015fan bulunmuyor",addNewEmployee:"Yeni \xc7al\u0131\u015fan Ekle"},products:{pageTitle:"\xdcr\xfcn Y\xf6netimi",pageDescription:"\xdcr\xfcnleri y\xf6netin ve d\xfczenleyin",noProducts:"Hen\xfcz \xfcr\xfcn bulunmuyor",addNewProduct:"Yeni \xdcr\xfcn Ekle"},brands:{pageTitle:"Marka Y\xf6netimi",pageDescription:"Markalar\u0131 y\xf6netin ve d\xfczenleyin",noBrands:"Hen\xfcz marka bulunmuyor",addNewBrand:"Yeni Marka Ekle"},settings:{pageTitle:"Sistem Ayarlar\u0131",pageDescription:"Sistem ayarlar\u0131n\u0131 y\xf6netin",saveSuccess:"Ayarlar ba\u015far\u0131yla kaydedildi",saveError:"Ayarlar kaydedilirken hata olu\u015ftu"},media:{pageTitle:"Medya Galerisi",pageDescription:"Medya dosyalar\u0131n\u0131 y\xf6netin",noMedia:"Hen\xfcz medya dosyas\u0131 bulunmuyor",uploadNewMedia:"Yeni Medya Y\xfckle"},socialMedia:{pageTitle:"Sosyal Medya Kanallar\u0131",pageDescription:"Sosyal medya kanallar\u0131n\u0131 y\xf6netin",noChannels:"Hen\xfcz kanal bulunmuyor",addNewChannel:"Yeni Kanal Ekle"},logs:{pageTitle:"Sistem Kay\u0131tlar\u0131",pageDescription:"Sistem kay\u0131tlar\u0131n\u0131 g\xf6r\xfcnt\xfcleyin",noLogs:"Hen\xfcz kay\u0131t bulunmuyor",exportSuccess:"Kay\u0131tlar ba\u015far\u0131yla d\u0131\u015fa aktar\u0131ld\u0131"}}[e]||{}),d=(e,r)=>t[e]||r||e,u=(0,n.useCallback)(function(){return d(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"title",arguments.length>1?arguments[1]:void 0)},[d]),h=(0,n.useCallback)(function(){return d(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"description",arguments.length>1?arguments[1]:void 0)},[d]),m=(0,n.useCallback)(function(){return d(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"button",arguments.length>1?arguments[1]:void 0)},[d]),p=(0,n.useCallback)(function(){return d(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"status",arguments.length>1?arguments[1]:void 0)},[d]);return{texts:t,loading:s,error:i,getText:d,getTitle:u,getDescription:h,getButtonText:m,getStatusText:p,updateText:(e,t)=>{r(r=>Ie(Ie({},r),{},{[e]:t}))},updateTexts:e=>{r(t=>Ie(Ie({},t),e))},resetTexts:()=>{r(nc)},loadPageTexts:o}},ac=e=>{let{brands:t,onClose:r,onSave:s,getButtonText:a}=e;const[i,l]=(0,n.useState)([]),[o,c]=(0,n.useState)(!0),[d,u]=(0,n.useState)({email:"",first_name:"",last_name:"",phone_number:"",role_id:0,brand_ids:[],request_message:""});(0,n.useEffect)(()=>{(async()=>{try{var e;const t=await _o();l(t.roles);const r=t.roles.find(e=>{var t,r;return"store_employee"===e.name||(null===(t=e.display_name)||void 0===t?void 0:t.includes("\xc7al\u0131\u015fan"))||(null===(r=e.display_name)||void 0===r?void 0:r.includes("Employee"))}),n=(null===r||void 0===r?void 0:r.id)||(null===(e=t.roles[0])||void 0===e?void 0:e.id)||0;u(e=>Ie(Ie({},e),{},{role_id:n}))}catch(t){console.error("Roller y\xfcklenemedi:",t),Ra.error("Roller y\xfcklenemedi")}finally{c(!1)}})()},[]);const h=i.find(e=>{var t,r;return"store_employee"===e.name||(null===(t=e.display_name)||void 0===t?void 0:t.includes("\xc7al\u0131\u015fan"))||(null===(r=e.display_name)||void 0===r?void 0:r.includes("Employee"))}),m=e=>{const{name:t,value:r}=e.target;u(e=>Ie(Ie({},e),{},{[t]:"role_id"===t?Number(r):r}))};return(0,za.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,za.jsx)("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:(0,za.jsxs)("div",{className:"p-6",children:[(0,za.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\xc7al\u0131\u015fan Talep Et"}),(0,za.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),d.first_name&&d.last_name&&d.email?0!==d.brand_ids.length?await s(d):Ra.error("En az bir marka se\xe7ilmelidir"):Ra.error("Ad, soyad ve e-posta alanlar\u0131 zorunludur")},className:"space-y-4",children:[(0,za.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"Ad"}),(0,za.jsx)("input",{type:"text",name:"first_name",value:d.first_name,onChange:m,className:"form-input",required:!0})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"Soyad"}),(0,za.jsx)("input",{type:"text",name:"last_name",value:d.last_name,onChange:m,className:"form-input",required:!0})]})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"E-posta"}),(0,za.jsx)("input",{type:"email",name:"email",value:d.email,onChange:m,className:"form-input",required:!0})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"Telefon (Opsiyonel)"}),(0,za.jsx)("input",{type:"tel",name:"phone_number",value:d.phone_number,onChange:m,className:"form-input",placeholder:"\xd6rn: +90 555 123 45 67"})]}),(0,za.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)(rc,{className:"h-4 w-4 text-blue-600"}),(0,za.jsxs)("span",{className:"text-sm text-blue-800 font-medium",children:["Rol: ",(null===h||void 0===h?void 0:h.display_name)||"\xc7al\u0131\u015fan"," (Otomatik)"]})]})}),(0,za.jsxs)("div",{children:[(0,za.jsxs)("label",{className:"form-label",children:["Markalar ",(0,za.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,za.jsx)("div",{className:"space-y-2 max-h-32 overflow-y-auto border rounded p-2",children:t.length>0?t.map(e=>(0,za.jsxs)("label",{className:"flex items-center gap-2",children:[(0,za.jsx)("input",{type:"checkbox",checked:d.brand_ids.includes(e.id),onChange:t=>{return r=e.id,n=t.target.checked,void u(e=>Ie(Ie({},e),{},{brand_ids:n?[...e.brand_ids,r]:e.brand_ids.filter(e=>e!==r)}));var r,n},className:"rounded"}),(0,za.jsx)("span",{className:"text-sm",children:e.name})]},e.id)):(0,za.jsx)("div",{className:"text-sm text-gray-500 p-2",children:"Size atanm\u0131\u015f marka bulunamad\u0131. L\xfctfen sistem y\xf6neticisi ile ileti\u015fime ge\xe7in."})}),0===d.brand_ids.length&&(0,za.jsx)("p",{className:"text-xs text-red-500 mt-1",children:"En az bir marka se\xe7ilmelidir."})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"Talep Mesaj\u0131 (Opsiyonel)"}),(0,za.jsx)("textarea",{name:"request_message",value:d.request_message,onChange:m,className:"form-input",rows:3,placeholder:"Bu \xe7al\u0131\u015fan hakk\u0131nda ek bilgi..."})]}),(0,za.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,za.jsx)("button",{type:"submit",className:"btn btn-primary flex-1",children:a("add_employee_request")}),(0,za.jsx)("button",{type:"button",onClick:r,className:"btn btn-secondary",children:"\u0130ptal"})]})]})]})})})},ic=e=>{let{request:t,onClose:r,onApprove:s,onReject:a,currentUser:i,getStatusText:l}=e;const[o,c]=(0,n.useState)("");return(0,za.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,za.jsx)("div",{className:"bg-white rounded-lg max-w-md w-full",children:(0,za.jsxs)("div",{className:"p-6",children:[(0,za.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Talep \u0130nceleme"}),(0,za.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("h3",{className:"font-medium text-gray-900",children:"\xc7al\u0131\u015fan Bilgileri"}),(0,za.jsxs)("p",{className:"text-sm text-gray-600",children:[t.first_name," ",t.last_name," (",t.email,")"]})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h3",{className:"font-medium text-gray-900",children:"Rol"}),(0,za.jsx)("p",{className:"text-sm text-gray-600",children:t.role_name})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h3",{className:"font-medium text-gray-900",children:"Markalar"}),(0,za.jsx)("p",{className:"text-sm text-gray-600",children:t.brand_names.join(", ")})]}),t.request_message&&(0,za.jsxs)("div",{children:[(0,za.jsx)("h3",{className:"font-medium text-gray-900",children:"Talep Mesaj\u0131"}),(0,za.jsx)("p",{className:"text-sm text-gray-600",children:t.request_message})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h3",{className:"font-medium text-gray-900",children:"Talep Eden"}),(0,za.jsx)("p",{className:"text-sm text-gray-600",children:t.requested_by_name})]}),t.admin_notes&&(0,za.jsxs)("div",{children:[(0,za.jsx)("h3",{className:"font-medium text-gray-900",children:"rejected"===t.status?"Red Nedeni":"Admin Notlar\u0131"}),(0,za.jsx)("div",{className:"text-sm p-3 rounded-lg ".concat("rejected"===t.status?"text-red-700 bg-red-50 border border-red-200":"text-gray-600 bg-gray-50"),children:t.admin_notes})]}),"pending"!==t.status&&(0,za.jsxs)("div",{children:[(0,za.jsx)("h3",{className:"font-medium text-gray-900",children:"Durum"}),(0,za.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs flex items-center gap-1 w-fit ".concat((e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(t.status)),children:[(e=>{switch(e){case"pending":default:return(0,za.jsx)(hi,{size:16});case"approved":return(0,za.jsx)(yo,{size:16});case"rejected":return(0,za.jsx)(fl,{size:16})}})(t.status),l(t.status)]})]})]}),"Super Admin"===(null===i||void 0===i?void 0:i.role)?(0,za.jsxs)("div",{className:"space-y-4",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"Admin Notlar\u0131"}),(0,za.jsx)("textarea",{value:o,onChange:e=>c(e.target.value),className:"form-input",rows:3,placeholder:"Onay/red nedeni veya ek notlar..."})]}),(0,za.jsxs)("div",{className:"flex gap-2",children:["pending"===t.status?(0,za.jsxs)(za.Fragment,{children:[(0,za.jsxs)("button",{onClick:async e=>{e.preventDefault(),await s(t.id,o)},className:"btn btn-success flex-1",children:[(0,za.jsx)(yo,{size:16,className:"mr-2"}),"Onayla"]}),(0,za.jsxs)("button",{onClick:()=>{o.trim()?a(t.id,o):alert("Reddetme nedeni belirtmelisiniz!")},className:"btn btn-danger flex-1",children:[(0,za.jsx)(fl,{size:16,className:"mr-2"}),"Reddet"]})]}):(0,za.jsx)("div",{className:"flex-1 text-center",children:(0,za.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ".concat("approved"===t.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"approved"===t.status?"Onayland\u0131":"Reddedildi"})}),(0,za.jsx)("button",{type:"button",onClick:r,className:"btn btn-secondary",children:"Kapat"})]})]}):(0,za.jsx)("div",{className:"flex justify-end",children:(0,za.jsx)("button",{type:"button",onClick:r,className:"btn btn-secondary",children:"Kapat"})})]})})})},lc=e=>{let{request:t,brands:r,onClose:s,onSave:a,currentUser:i}=e;const[l,o]=(0,n.useState)([]),[c,d]=(0,n.useState)(!0),[u,h]=(0,n.useState)({email:t.email||"",first_name:t.first_name||"",last_name:t.last_name||"",phone_number:t.phone_number||"",role_id:t.role_id||0,brand_ids:t.brand_ids||[],request_message:t.request_message||""});(0,n.useEffect)(()=>{(async()=>{try{const r=await _o();if(o(r.roles),!t.role_id||0===t.role_id){var e;const t=r.roles.find(e=>{var t,r;return"store_employee"===e.name||(null===(t=e.display_name)||void 0===t?void 0:t.includes("\xc7al\u0131\u015fan"))||(null===(r=e.display_name)||void 0===r?void 0:r.includes("Employee"))}),n=(null===t||void 0===t?void 0:t.id)||(null===(e=r.roles[0])||void 0===e?void 0:e.id)||0;h(e=>Ie(Ie({},e),{},{role_id:n}))}}catch(r){console.error("Roller y\xfcklenemedi:",r),Ra.error("Roller y\xfcklenemedi")}finally{d(!1)}})()},[t.role_id]);const m=e=>{const{name:t,value:r}=e.target;h(e=>Ie(Ie({},e),{},{[t]:"role_id"===t?Number(r):r}))};return(0,za.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,za.jsx)("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:(0,za.jsxs)("div",{className:"p-6",children:[(0,za.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Talep D\xfczenle"}),(0,za.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),u.first_name&&u.last_name&&u.email?0!==u.brand_ids.length?await a(u):Ra.error("En az bir marka se\xe7ilmelidir"):Ra.error("Ad, soyad ve e-posta alanlar\u0131 zorunludur")},className:"space-y-4",children:[(0,za.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"Ad"}),(0,za.jsx)("input",{type:"text",name:"first_name",value:u.first_name,onChange:m,className:"form-input",required:!0})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"Soyad"}),(0,za.jsx)("input",{type:"text",name:"last_name",value:u.last_name,onChange:m,className:"form-input",required:!0})]})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"E-posta"}),(0,za.jsx)("input",{type:"email",name:"email",value:u.email,onChange:m,className:"form-input",required:!0})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"Telefon (Opsiyonel)"}),(0,za.jsx)("input",{type:"tel",name:"phone_number",value:u.phone_number,onChange:m,className:"form-input",placeholder:"\xd6rn: +90 555 123 45 67"})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"Rol"}),(0,za.jsx)("select",{name:"role_id",value:u.role_id,onChange:m,className:"form-input",required:!0,children:l.length>0?l.map(e=>(0,za.jsx)("option",{value:e.id,children:e.display_name},e.id)):(0,za.jsx)("option",{value:"",children:"Rol y\xfckleniyor..."})})]}),(0,za.jsxs)("div",{children:[(0,za.jsxs)("label",{className:"form-label",children:["Markalar ",(0,za.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,za.jsx)("div",{className:"space-y-2 max-h-32 overflow-y-auto border rounded p-2",children:r.length>0?r.map(e=>(0,za.jsxs)("label",{className:"flex items-center gap-2",children:[(0,za.jsx)("input",{type:"checkbox",checked:u.brand_ids.includes(e.id),onChange:t=>{return r=e.id,n=t.target.checked,void h(e=>Ie(Ie({},e),{},{brand_ids:n?[...e.brand_ids,r]:e.brand_ids.filter(e=>e!==r)}));var r,n},className:"rounded"}),(0,za.jsx)("span",{className:"text-sm",children:e.name})]},e.id)):(0,za.jsx)("div",{className:"text-sm text-gray-500 p-2",children:"Super Admin"===(null===i||void 0===i?void 0:i.role)?"Talep sahibinin eri\u015febilece\u011fi marka bulunamad\u0131. Sistem y\xf6neticisi olarak t\xfcm markalar g\xf6sterilmektedir.":"Size atanm\u0131\u015f marka bulunamad\u0131. L\xfctfen sistem y\xf6neticisi ile ileti\u015fime ge\xe7in."})}),(0,za.jsx)("p",{className:"text-xs text-blue-600 mt-1",children:"\ud83d\udca1 Sadece talep sahibinin yetkili oldu\u011fu markalar g\xf6sterilmektedir."})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"Talep Mesaj\u0131 (Sadece G\xf6r\xfcnt\xfcleme)"}),(0,za.jsx)("textarea",{name:"request_message",value:u.request_message,readOnly:!0,className:"form-input bg-gray-50 cursor-not-allowed",rows:3,placeholder:u.request_message||"Talep mesaj\u0131 yok"}),(0,za.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"\ud83d\udca1 Bu mesaj ma\u011faza y\xf6neticisi taraf\u0131ndan yaz\u0131lm\u0131\u015ft\u0131r ve de\u011fi\u015ftirilemez."})]}),(0,za.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,za.jsx)("button",{type:"submit",className:"btn btn-primary flex-1",children:"G\xfcncelle"}),(0,za.jsx)("button",{type:"button",onClick:s,className:"btn btn-secondary",children:"\u0130ptal"})]})]})]})})})},oc=()=>{var e;const{user:t,loading:r}=Za(),{getTitle:s,getDescription:a,getButtonText:i,getStatusText:l}=sc(),[o,c]=(0,n.useState)([]),[d,u]=(0,n.useState)([]),[h,m]=(0,n.useState)(!0),[p,g]=(0,n.useState)(1),[f,x]=(0,n.useState)(0),[y,b]=(0,n.useState)(""),[v,j]=(0,n.useState)(!1),[w,_]=(0,n.useState)(null),[k,S]=(0,n.useState)(!1),[N,C]=(0,n.useState)(!1),[T,E]=(0,n.useState)(null);(0,n.useEffect)(()=>{r||(O(),P())},[p,y,r]);const O=async()=>{try{m(!0);const e=await qi(p,10,y||void 0);c(e.requests),x(e.total)}catch(e){Ra.error("Talepler y\xfcklenemedi")}finally{m(!1)}},P=async()=>{try{const e=await Si(1,100);u(e.brands)}catch(e){}},D=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},A=e=>{switch(e){case"pending":default:return(0,za.jsx)(hi,{size:16});case"approved":return(0,za.jsx)(yo,{size:16});case"rejected":return(0,za.jsx)(fl,{size:16})}};return r?(0,za.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,za.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,za.jsxs)("div",{className:"space-y-6",children:[(0,za.jsxs)("div",{className:"flex justify-between items-center",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:s("employee_requests")}),(0,za.jsx)("p",{className:"text-gray-600",children:a("employee_requests")})]}),(null===t||void 0===t||null===(e=t.permissions)||void 0===e?void 0:e.includes("employee_requests.manage"))&&(0,za.jsxs)("button",{onClick:()=>j(!0),className:"btn btn-primary",children:[(0,za.jsx)(Li,{size:18,className:"mr-2"}),i("add_employee_request")]})]}),(0,za.jsx)("div",{className:"card",children:(0,za.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"form-label",children:"Durum"}),(0,za.jsxs)("select",{value:y,onChange:e=>b(e.target.value),className:"form-input",children:[(0,za.jsx)("option",{value:"",children:"T\xfcm Durumlar"}),(0,za.jsx)("option",{value:"pending",children:"Bekleyen"}),(0,za.jsx)("option",{value:"approved",children:"Onaylanan"}),(0,za.jsx)("option",{value:"rejected",children:"Reddedilen"})]})]}),(0,za.jsx)("div",{className:"flex items-end",children:(0,za.jsx)("button",{onClick:()=>b(""),className:"btn btn-secondary",children:"Filtreleri Temizle"})})]})}),(0,za.jsxs)("div",{className:"card",children:[h?(0,za.jsx)("div",{className:"flex justify-center py-8",children:(0,za.jsx)("div",{className:"spinner"})}):(0,za.jsx)("div",{className:"overflow-x-auto",children:(0,za.jsxs)("table",{className:"w-full",children:[(0,za.jsx)("thead",{children:(0,za.jsxs)("tr",{className:"border-b",children:[(0,za.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"\xc7al\u0131\u015fan Bilgileri"}),(0,za.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Rol"}),(0,za.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Markalar"}),(0,za.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Durum"}),(0,za.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Talep Eden"}),(0,za.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Tarih"}),("Super Admin"===(null===t||void 0===t?void 0:t.role)||"Ma\u011faza Y\xf6neticisi"===(null===t||void 0===t?void 0:t.role))&&(0,za.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"\u0130\u015flemler"})]})}),(0,za.jsx)("tbody",{children:o.map(e=>(0,za.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,za.jsx)("td",{className:"py-3 px-4",children:(0,za.jsxs)("div",{className:"flex items-center gap-3",children:[(0,za.jsx)("div",{className:"h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,za.jsx)(rc,{size:16,className:"text-blue-600"})}),(0,za.jsxs)("div",{children:[(0,za.jsxs)("div",{className:"font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,za.jsx)("div",{className:"text-sm text-gray-600",children:e.email}),e.phone_number&&(0,za.jsx)("div",{className:"text-xs text-gray-500",children:e.phone_number})]})]})}),(0,za.jsx)("td",{className:"py-3 px-4",children:(0,za.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:e.role_name})}),(0,za.jsx)("td",{className:"py-3 px-4",children:(0,za.jsx)("div",{className:"flex flex-wrap gap-1",children:e.brand_names.map(e=>(0,za.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs flex items-center gap-1",children:[(0,za.jsx)(di,{size:12}),e]},e))})}),(0,za.jsx)("td",{className:"py-3 px-4",children:(0,za.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs flex items-center gap-1 w-fit ".concat(D(e.status)),children:[A(e.status),l(e.status)]})}),(0,za.jsx)("td",{className:"py-3 px-4 text-gray-600 text-sm",children:e.requested_by_name}),(0,za.jsx)("td",{className:"py-3 px-4 text-gray-600 text-sm",children:new Date(e.created_at).toLocaleDateString("tr-TR")}),"Super Admin"===(null===t||void 0===t?void 0:t.role)&&(0,za.jsx)("td",{className:"py-3 px-4",children:(0,za.jsxs)("div",{className:"flex items-center gap-1",children:[(0,za.jsxs)("button",{onClick:()=>(e=>{E(e),C(!0)})(e),className:"px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors text-xs flex items-center gap-1",title:"Talebi d\xfczenle",children:[(0,za.jsx)(Eo,{size:12}),"D\xfczenle"]}),(0,za.jsxs)("button",{onClick:()=>{_(e),S(!0)},className:"px-2 py-1 bg-gray-100 text-gray-600 rounded hover:bg-gray-200 transition-colors text-xs flex items-center gap-1",title:"Detaylar\u0131 g\xf6r\xfcnt\xfcle",children:[(0,za.jsx)(nl,{size:12}),"Detay"]})]})}),"Ma\u011faza Y\xf6neticisi"===(null===t||void 0===t?void 0:t.role)&&(0,za.jsx)("td",{className:"py-3 px-4",children:(0,za.jsxs)("button",{onClick:()=>{_(e),S(!0)},className:"px-2 py-1 bg-gray-100 text-gray-600 rounded hover:bg-gray-200 transition-colors text-xs flex items-center gap-1",title:"Detaylar\u0131 g\xf6r\xfcnt\xfcle",children:[(0,za.jsx)(nl,{size:12}),"Detay"]})})]},e.id))})]})}),f>10&&(0,za.jsxs)("div",{className:"flex justify-between items-center mt-4 pt-4 border-t",children:[(0,za.jsxs)("div",{className:"text-sm text-gray-600",children:[f," talepten ",10*(p-1)+1,"-",Math.min(10*p,f)," aras\u0131 g\xf6steriliyor"]}),(0,za.jsxs)("div",{className:"flex gap-2",children:[(0,za.jsx)("button",{onClick:()=>g(p-1),disabled:1===p,className:"btn btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"\xd6nceki"}),(0,za.jsx)("button",{onClick:()=>g(p+1),disabled:10*p>=f,className:"btn btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Sonraki"})]})]})]}),v&&(0,za.jsx)(ac,{brands:d.filter(e=>{var r;return null===t||void 0===t||null===(r=t.brand_ids)||void 0===r?void 0:r.includes(e.id)}),onClose:()=>j(!1),onSave:async e=>{try{if(!e.role_id||0===e.role_id)return void Ra.error("Rol bilgisi y\xfcklenemedi. L\xfctfen sayfay\u0131 yenileyin.");await Gi(e);Ra.success("\xc7al\u0131\u015fan talebi ba\u015far\u0131yla olu\u015fturuldu"),j(!1),O(),window.dispatchEvent(new CustomEvent("employeeRequestUpdated"))}catch(n){var t,r;const e=(null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Talep olu\u015fturulamad\u0131";console.error("Employee request creation error:",n),e.includes("Ge\xe7ersiz rol ID")||e.includes("foreign key")?Ra.error("Veritaban\u0131 tutars\u0131zl\u0131\u011f\u0131 tespit edildi. L\xfctfen sistem y\xf6neticisine ba\u015fvurun."):Ra.error(e)}},getButtonText:i}),N&&T&&(0,za.jsx)(lc,{request:T,brands:(()=>{if("Super Admin"===(null===t||void 0===t?void 0:t.role)){const e=d.filter(e=>{var t;return(null===(t=T.requested_by_brand_ids)||void 0===t?void 0:t.includes(e.id))||!1});return 0===e.length?(console.warn("Talep sahibinin markas\u0131 bulunamad\u0131, t\xfcm markalar g\xf6steriliyor"),d):e}return d.filter(e=>{var r;return(null===t||void 0===t||null===(r=t.brand_ids)||void 0===r?void 0:r.includes(e.id))||!1})})(),onClose:()=>{C(!1),E(null)},onSave:async e=>{if(T)try{var t,r;const n=[];T.first_name!==e.first_name&&n.push({field:"Ad",oldValue:T.first_name,newValue:e.first_name}),T.last_name!==e.last_name&&n.push({field:"Soyad",oldValue:T.last_name,newValue:e.last_name}),T.email!==e.email&&n.push({field:"E-posta",oldValue:T.email,newValue:e.email}),T.phone_number!==e.phone_number&&n.push({field:"Telefon",oldValue:T.phone_number||"Bo\u015f",newValue:e.phone_number||"Bo\u015f"}),T.role_id!==e.role_id&&n.push({field:"Rol ID",oldValue:T.role_id,newValue:e.role_id}),JSON.stringify(null===(t=T.brand_ids)||void 0===t?void 0:t.sort())!==JSON.stringify(null===(r=e.brand_ids)||void 0===r?void 0:r.sort())&&n.push({field:"Markalar",oldValue:T.brand_ids,newValue:e.brand_ids}),await Ji(T.id,e),Ra.success("Talep ba\u015far\u0131yla g\xfcncellendi"),C(!1),E(null),O()}catch(a){var n,s;Ra.error((null===(n=a.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.detail)||"Talep g\xfcncellenemedi")}},currentUser:t}),k&&w&&(0,za.jsx)(ic,{request:w,onClose:()=>{S(!1),_(null)},onApprove:async(e,t)=>{try{const r=o.find(t=>t.id===e);null===r||void 0===r||r.status;await Xi(e,t),Ra.success("Talep onayland\u0131 ve \xe7al\u0131\u015fan olu\u015fturuldu"),S(!1),_(null),O(),window.dispatchEvent(new CustomEvent("employeeRequestUpdated"))}catch(s){var r,n;Ra.error((null===(r=s.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||"Talep onaylanamad\u0131")}},onReject:async(e,t)=>{try{const r=o.find(t=>t.id===e);null===r||void 0===r||r.status;await $i(e,t),Ra.success("Talep reddedildi"),S(!1),_(null),O(),window.dispatchEvent(new CustomEvent("employeeRequestUpdated"))}catch(s){var r,n;Ra.error((null===(r=s.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.detail)||"Talep reddedilemedi")}},currentUser:t,getStatusText:l})]})},cc=()=>{const[e,t]=(0,n.useState)([]),[r,s]=(0,n.useState)([]),[a,i]=(0,n.useState)(!0),[l,o]=(0,n.useState)(""),[c,d]=(0,n.useState)(""),[u,h]=(0,n.useState)(!1),[m,p]=(0,n.useState)(null),[g,f]=(0,n.useState)(!1),[x,y]=(0,n.useState)(null);(0,n.useEffect)(()=>{b(),v()},[]);const b=(0,n.useCallback)(async()=>{try{i(!0);const e=await _o();t(e.roles)}catch(e){Ra.error("Roller y\xfcklenemedi")}finally{i(!1)}},[]),v=(0,n.useCallback)(async()=>{try{const e=await ko();s(e.permissions)}catch(e){}},[]),j=e.filter(e=>e.display_name.toLowerCase().includes(l.toLowerCase())||e.description.toLowerCase().includes(l.toLowerCase())),w=e=>{let{isOpen:t,onClose:s,onSubmit:a,role:i,title:l}=e;const[o,c]=(0,n.useState)({name:"",display_name:"",description:"",permission_ids:[]}),[d,u]=(0,n.useState)(new Set);(0,n.useEffect)(()=>{i?(c({name:i.name,display_name:i.display_name,description:i.description,permission_ids:i.permissions.map(e=>e.id)}),u(new Set(i.permissions.map(e=>e.id)))):(c({name:"",display_name:"",description:"",permission_ids:[]}),u(new Set))},[i]);if(!t)return null;const h=r.reduce((e,t)=>(e[t.module]||(e[t.module]=[]),e[t.module].push(t),e),{});return(0,za.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,za.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,za.jsx)("h2",{className:"text-xl font-bold mb-4",children:l}),(0,za.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!o.display_name)return void Ra.error("Rol ad\u0131 zorunludur");const t=o.display_name.toLowerCase().replace(/\u011f/g,"g").replace(/\xfc/g,"u").replace(/\u015f/g,"s").replace(/\u0131/g,"i").replace(/\xf6/g,"o").replace(/\xe7/g,"c").replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,""),r={name:o.name||t,display_name:o.display_name,description:o.description||"",permission_ids:Array.from(d)};await a(r)},className:"space-y-4",children:[(0,za.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rol Ad\u0131 *"}),(0,za.jsx)("input",{type:"text",value:o.display_name,onChange:e=>c(Ie(Ie({},o),{},{display_name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\xd6rn: \u0130\xe7erik Edit\xf6r\xfc",required:!0})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sistem Ad\u0131"}),(0,za.jsx)("input",{type:"text",value:o.name,onChange:e=>c(Ie(Ie({},o),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Otomatik olu\u015fturulur"}),(0,za.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Bo\u015f b\u0131rak\u0131l\u0131rsa rol ad\u0131ndan otomatik olu\u015fturulur"})]})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"A\xe7\u0131klama"}),(0,za.jsx)("textarea",{value:o.description,onChange:e=>c(Ie(Ie({},o),{},{description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Rol a\xe7\u0131klamas\u0131..."})]}),(0,za.jsxs)("div",{children:[(0,za.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["\u0130zinler (",d.size," se\xe7ili)"]}),(0,za.jsx)("div",{className:"space-y-4 max-h-64 overflow-y-auto border border-gray-200 rounded-lg p-4",children:Object.entries(h).map(e=>{let[t,n]=e;const s=n.map(e=>e.id),a=s.every(e=>d.has(e)),i=s.some(e=>d.has(e));return(0,za.jsxs)("div",{className:"border-b border-gray-100 pb-3 last:border-b-0",children:[(0,za.jsx)("div",{className:"flex items-center mb-2",children:(0,za.jsxs)("button",{type:"button",onClick:()=>(e=>{const t=r.filter(t=>t.module===e),n=t.map(e=>e.id),s=n.every(e=>d.has(e)),a=new Set(d);s?n.forEach(e=>a.delete(e)):n.forEach(e=>a.add(e)),u(a),c(Ie(Ie({},o),{},{permission_ids:Array.from(a)}))})(t),className:"flex items-center gap-2 px-3 py-1 rounded text-sm font-medium ".concat(a?"bg-blue-100 text-blue-800":i?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-600"),children:[a?(0,za.jsx)(Wa,{className:"h-4 w-4"}):i?(0,za.jsx)(Ka,{className:"h-4 w-4"}):(0,za.jsx)("div",{className:"h-4 w-4 border border-gray-300 rounded"}),t.charAt(0).toUpperCase()+t.slice(1),(0,za.jsxs)("span",{className:"text-xs",children:["(",n.filter(e=>d.has(e.id)).length,"/",n.length,")"]})]})}),(0,za.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 ml-4",children:n.map(e=>(0,za.jsxs)("label",{className:"flex items-start gap-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[(0,za.jsx)("input",{type:"checkbox",checked:d.has(e.id),onChange:()=>(e=>{const t=new Set(d);t.has(e)?t.delete(e):t.add(e),u(t),c(Ie(Ie({},o),{},{permission_ids:Array.from(t)}))})(e.id),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,za.jsxs)("div",{className:"flex-1",children:[(0,za.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.display_name}),(0,za.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]})]},e.id))})]},t)})})]}),(0,za.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,za.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:i?"G\xfcncelle":"Olu\u015ftur"}),(0,za.jsx)("button",{type:"button",onClick:s,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 transition-colors",children:"\u0130ptal"})]})]})]})})},_=e=>{let{isOpen:t,onClose:r,role:n}=e;if(!t||!n)return null;const s=(n.permissions||[]).reduce((e,t)=>(e[t.module]||(e[t.module]=[]),e[t.module].push(t),e),{});return(0,za.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,za.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,za.jsxs)("h2",{className:"text-xl font-bold",children:[n.display_name," - \u0130zinler"]}),(0,za.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:"\u2715"})]}),0===Object.keys(s).length?(0,za.jsxs)("div",{className:"text-center py-8",children:[(0,za.jsx)(li,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,za.jsx)("p",{className:"text-gray-500",children:"Bu rol i\xe7in hen\xfcz izin tan\u0131mlanmam\u0131\u015f"})]}):(0,za.jsx)("div",{className:"space-y-4",children:Object.entries(s).map(e=>{let[t,r]=e;return(0,za.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,za.jsxs)("h3",{className:"font-medium text-gray-900 mb-3 capitalize",children:[t," Mod\xfcl\xfc (",r.length," izin)"]}),(0,za.jsx)("div",{className:"space-y-2",children:r.map(e=>(0,za.jsxs)("div",{className:"flex items-start gap-3 p-2 bg-gray-50 rounded",children:[(0,za.jsx)(Wa,{className:"h-5 w-5 text-green-500 mt-0.5 flex-shrink-0"}),(0,za.jsxs)("div",{children:[(0,za.jsx)("div",{className:"font-medium text-sm text-gray-900",children:e.display_name}),(0,za.jsx)("div",{className:"text-xs text-gray-600",children:e.description})]})]},e.id))})]},t)})}),(0,za.jsx)("div",{className:"flex justify-end pt-4",children:(0,za.jsx)("button",{onClick:r,className:"bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 transition-colors",children:"Kapat"})})]})})};return(0,za.jsxs)("div",{className:"space-y-6",children:[(0,za.jsxs)("div",{className:"flex justify-between items-center",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Rol Y\xf6netimi"}),(0,za.jsx)("p",{className:"text-gray-600",children:"Sistem rollerini ve izinlerini y\xf6netin"})]}),(0,za.jsxs)("button",{onClick:()=>h(!0),className:"btn btn-primary",children:[(0,za.jsx)(Li,{size:18,className:"mr-2"}),"Yeni Rol Ekle"]})]}),(0,za.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:(0,za.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,za.jsxs)("div",{className:"relative",children:[(0,za.jsx)(nl,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,za.jsx)("input",{type:"text",placeholder:"Rol ara...",value:l,onChange:e=>o(e.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,za.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,za.jsx)("option",{value:"",children:"T\xfcm Mod\xfcller"}),(()=>{const e=new Set(r.map(e=>e.module)),t=[];return e.forEach(e=>t.push(e)),t})().map(e=>(0,za.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]})]})}),(0,za.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:a?(0,za.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,za.jsxs)("div",{className:"flex items-center gap-3",children:[(0,za.jsx)("div",{className:"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),(0,za.jsx)("span",{className:"text-gray-600",children:"Roller y\xfckleniyor..."})]})}):0===j.length?(0,za.jsxs)("div",{className:"text-center py-12",children:[(0,za.jsx)(li,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,za.jsx)("p",{className:"text-gray-500",children:"Hen\xfcz rol bulunmuyor"})]}):(0,za.jsx)("div",{className:"overflow-x-auto",children:(0,za.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,za.jsx)("thead",{className:"bg-gray-50",children:(0,za.jsxs)("tr",{children:[(0,za.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rol"}),(0,za.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"A\xe7\u0131klama"}),(0,za.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kullan\u0131c\u0131 Say\u0131s\u0131"}),(0,za.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Durum"}),(0,za.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0130\u015flemler"})]})}),(0,za.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map(e=>(0,za.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,za.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,za.jsxs)("div",{className:"flex items-center",children:[(0,za.jsx)("div",{className:"flex-shrink-0",children:(0,za.jsx)("div",{className:"h-8 w-8 rounded-full flex items-center justify-center ".concat(e.is_system_role?"bg-red-100":"bg-blue-100"),children:(0,za.jsx)(li,{className:"h-4 w-4 ".concat(e.is_system_role?"text-red-600":"text-blue-600")})})}),(0,za.jsxs)("div",{className:"ml-3",children:[(0,za.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.display_name}),(0,za.jsxs)("div",{className:"text-sm text-gray-500",children:[e.name,e.is_system_role&&(0,za.jsx)("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Sistem Rol\xfc"})]})]})]})}),(0,za.jsx)("td",{className:"px-6 py-4",children:(0,za.jsx)("div",{className:"text-sm text-gray-900 max-w-xs truncate",children:e.description})}),(0,za.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,za.jsxs)("div",{className:"flex items-center",children:[(0,za.jsx)(ci,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,za.jsxs)("span",{className:"text-sm text-gray-900",children:[e.user_count||0," kullan\u0131c\u0131"]})]})}),(0,za.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,za.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?"Aktif":"Pasif"})}),(0,za.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)("button",{onClick:()=>{y(e),f(!0)},className:"text-blue-600 hover:text-blue-900",title:"\u0130zinleri G\xf6r\xfcnt\xfcle",children:(0,za.jsx)(li,{size:16})}),!e.is_system_role&&(0,za.jsxs)(za.Fragment,{children:[(0,za.jsx)("button",{onClick:()=>p(e),className:"text-indigo-600 hover:text-indigo-900",title:"D\xfczenle",children:(0,za.jsx)(Eo,{size:16})}),(0,za.jsx)("button",{onClick:()=>(async e=>{if(e.is_system_role)Ra.error("Sistem rolleri de\u011fi\u015ftirilemez");else try{await Co(e.id),Ra.success("Rol ".concat(e.is_active?"pasifle\u015ftirildi":"aktifle\u015ftirildi")),b()}catch(n){var t,r;Ra.error((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Rol durumu de\u011fi\u015ftirilemedi")}})(e),className:e.is_active?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900",title:e.is_active?"Pasifle\u015ftir":"Aktifle\u015ftir",children:e.is_active?(0,za.jsx)(ei,{size:16}):(0,za.jsx)(ti,{size:16})}),(!e.user_count||0===e.user_count)&&(0,za.jsx)("button",{onClick:()=>(async e=>{if(e.is_system_role)Ra.error("Sistem rolleri silinemez");else if(e.user_count&&e.user_count>0)Ra.error("Bu role sahip kullan\u0131c\u0131lar oldu\u011fu i\xe7in silinemez");else if(window.confirm('"'.concat(e.display_name,'" rol\xfcn\xfc silmek istedi\u011finizden emin misiniz?')))try{await To(e.id),Ra.success("Rol ba\u015far\u0131yla silindi"),b()}catch(n){var t,r;Ra.error((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Rol silinemedi")}})(e),className:"text-red-600 hover:text-red-900",title:"Sil",children:(0,za.jsx)(Ka,{size:16})})]})]})})]},e.id))})]})})}),(0,za.jsx)(w,{isOpen:u,onClose:()=>h(!1),onSubmit:async e=>{try{await So(e),Ra.success("Rol ba\u015far\u0131yla olu\u015fturuldu"),h(!1),b()}catch(n){var t,r;Ra.error((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Rol olu\u015fturulamad\u0131")}},title:"Yeni Rol Olu\u015ftur"}),(0,za.jsx)(w,{isOpen:!!m,onClose:()=>p(null),onSubmit:async e=>{if(m)try{await No(m.id,e),Ra.success("Rol ba\u015far\u0131yla g\xfcncellendi"),p(null),b()}catch(n){var t,r;Ra.error((null===(t=n.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||"Rol g\xfcncellenemedi")}},role:m,title:"Rol D\xfczenle"}),(0,za.jsx)(_,{isOpen:g,onClose:()=>f(!1),role:x})]})},dc=Ua("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),uc=Ua("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),hc=Ua("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),mc=()=>{const{user:e}=Za(),[t,r]=(0,n.useState)([]),[s,a]=(0,n.useState)(!0),[i,l]=(0,n.useState)({}),[o,c]=(0,n.useState)("ocr"),[d,u]=(0,n.useState)({});(0,n.useEffect)(()=>{h();const e=sessionStorage.getItem("settings-scroll-position");e&&setTimeout(()=>{window.scrollTo(0,parseInt(e))},100);const t=()=>{sessionStorage.setItem("settings-scroll-position",window.scrollY.toString())};return window.addEventListener("scroll",t),()=>{window.removeEventListener("scroll",t)}},[]);const h=async()=>{try{a(!0);const e=await $a();r(e.settings);const t={};e.settings.forEach(e=>{t[e.key]=e.value}),l(t)}catch(e){Ra.error("Ayarlar y\xfcklenemedi")}finally{a(!1)}},m=(0,n.useRef)({}),p=(e,t)=>{l(r=>Ie(Ie({},r),{},{[e]:t})),m.current[e]&&clearTimeout(m.current[e]),m.current[e]=setTimeout(()=>{g(e,t)},2e3)},g=async(e,n)=>{try{const s=t.find(t=>t.key===e);if(s&&n===s.value)return;const a=(null===s||void 0===s?void 0:s.category)||"general";await Ja(e,n,a),r(t=>t.map(t=>t.key===e?Ie(Ie({},t),{},{value:n}):t)),l(t=>Ie(Ie({},t),{},{[e]:n}));const i=window.scrollY;sessionStorage.setItem("settings-scroll-position",i.toString()),Ra.success("".concat(e.replace(/_/g," ")," g\xfcncellendi"),{duration:2e3})}catch(i){var s,a;Ra.error((null===(s=i.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.detail)||"Ayar kaydedilemedi")}},f=t=>e?"Super Admin"===e.role?t:"Ma\u011faza Y\xf6neticisi"===e.role?t.filter(e=>["email","general"].includes(e.category)&&["from_email","from_name","company_name","support_email","support_phone","smtp_server","smtp_port","smtp_username","smtp_password","smtp_use_ssl","smtp_use_tls","site_name","site_description","site_url"].includes(e.key)):[]:t,x=e=>{const t=i[e.key]||"";if("true"===e.value||"false"===e.value)return(0,za.jsxs)("div",{className:"flex items-center gap-3",children:[(0,za.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,za.jsx)("input",{type:"checkbox",checked:"true"===t,onChange:t=>p(e.key,t.target.checked?"true":"false"),className:"sr-only peer"}),(0,za.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),(0,za.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"true"===t?"Aktif":"Pasif"})]});if("backup_frequency"===e.key)return(0,za.jsxs)("select",{value:t,onChange:t=>p(e.key,t.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white transition-all duration-200",children:[(0,za.jsx)("option",{value:"hourly",children:"\ud83d\udd50 Saatlik"}),(0,za.jsx)("option",{value:"daily",children:"\ud83d\udcc5 G\xfcnl\xfck"}),(0,za.jsx)("option",{value:"weekly",children:"\ud83d\udcc6 Haftal\u0131k"}),(0,za.jsx)("option",{value:"monthly",children:"\ud83d\uddd3\ufe0f Ayl\u0131k"})]});if("smtp_port"===e.key)return(0,za.jsxs)("select",{value:t,onChange:t=>p(e.key,t.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white transition-all duration-200",children:[(0,za.jsx)("option",{value:"25",children:"\ud83d\udd0c 25 (SMTP)"}),(0,za.jsx)("option",{value:"587",children:"\ud83d\udd12 587 (TLS)"}),(0,za.jsx)("option",{value:"465",children:"\ud83d\udd10 465 (SSL)"}),(0,za.jsx)("option",{value:"2525",children:"\ud83d\udd27 2525 (Alternatif)"})]});if("smtp_use_ssl"===e.key||"smtp_use_tls"===e.key||"enabled"===e.key)return(0,za.jsxs)("div",{className:"flex items-center gap-3",children:[(0,za.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,za.jsx)("input",{type:"checkbox",checked:"true"===t,onChange:t=>p(e.key,t.target.checked?"true":"false"),className:"sr-only peer"}),(0,za.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),(0,za.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"true"===t?"Aktif":"Pasif"})]});if(e.key.includes("password")){const r=d[e.key]||!1;return(0,za.jsxs)("div",{className:"relative",children:[(0,za.jsx)("input",{type:r?"text":"password",value:t,onChange:t=>p(e.key,t.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white transition-all duration-200 pr-10",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"}),(0,za.jsx)("button",{type:"button",onClick:()=>{return t=e.key,void u(e=>Ie(Ie({},e),{},{[t]:!e[t]}));var t},className:"absolute inset-y-0 right-0 pr-3 flex items-center hover:text-gray-600 transition-colors",children:r?(0,za.jsx)(ei,{className:"h-4 w-4 text-gray-400"}):(0,za.jsx)(ti,{className:"h-4 w-4 text-gray-400"})})]})}return e.key.includes("max_")||e.key.includes("timeout")||e.key.includes("expire")?(0,za.jsxs)("div",{className:"relative",children:[(0,za.jsx)("input",{type:"number",value:t,onChange:t=>p(e.key,t.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white transition-all duration-200",min:"0"}),(0,za.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:(0,za.jsx)("span",{className:"text-gray-400 text-sm",children:"\ud83d\udd22"})})]}):e.key.includes("description")||e.key.includes("message")?(0,za.jsx)("textarea",{value:t,onChange:t=>p(e.key,t.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white transition-all duration-200 resize-none",rows:3,placeholder:"A\xe7\u0131klama giriniz..."}):e.key.includes("email")?(0,za.jsxs)("div",{className:"relative",children:[(0,za.jsx)("input",{type:"email",value:t,onChange:t=>p(e.key,t.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white transition-all duration-200 pr-10",placeholder:"ornek@email.com"}),(0,za.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:(0,za.jsx)("span",{className:"text-gray-400 text-sm",children:"\ud83d\udce7"})})]}):(0,za.jsx)("input",{type:"text",value:t,onChange:t=>p(e.key,t.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white transition-all duration-200",placeholder:"De\u011fer giriniz..."})};return s?(0,za.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,za.jsxs)("div",{className:"flex items-center gap-3",children:[(0,za.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),(0,za.jsx)("span",{className:"text-gray-600",children:"Ayarlar y\xfckleniyor..."})]})}):(0,za.jsxs)("div",{className:"space-y-6",children:[(0,za.jsx)("div",{className:"flex justify-between items-center",children:(0,za.jsxs)("div",{children:[(0,za.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Sistem Ayarlar\u0131"}),(0,za.jsx)("p",{className:"text-gray-600",children:"Sistem geneli ayarlar\u0131n\u0131 y\xf6netin"})]})}),(0,za.jsx)("div",{className:"border-b border-gray-200",children:(0,za.jsx)("nav",{className:"-mb-px flex space-x-8",children:(t=>{const r=[{id:"ocr",name:"OCR / AI Ayarlar\u0131",icon:ti},{id:"upload",name:"Y\xfckleme Ayarlar\u0131",icon:dc},{id:"email",name:"E-posta Ayarlar\u0131",icon:uc},{id:"general",name:"Genel Ayarlar",icon:hc}];return null!==e&&void 0!==e&&null!==(t=e.permissions)&&void 0!==t&&t.includes("settings.manage")?r:r.filter(e=>["email","general"].includes(e.id))})().map(e=>{const t=e.icon;return(0,za.jsxs)("button",{onClick:()=>c(e.id),className:"flex items-center gap-2 py-2 px-1 border-b-2 font-medium text-sm ".concat(o===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,za.jsx)(t,{className:"h-4 w-4"}),e.name]},e.id)})})}),"email"===o&&(0,za.jsx)("div",{className:"space-y-6",children:(0,za.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,za.jsx)("div",{className:"px-6 py-5 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white",children:(0,za.jsx)("div",{className:"flex items-center justify-between",children:(0,za.jsxs)("div",{className:"flex items-center gap-3",children:[(0,za.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,za.jsx)(uc,{className:"h-5 w-5 text-green-600"})}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"E-posta Ayarlar\u0131"}),(0,za.jsxs)("p",{className:"text-sm text-gray-500",children:[f(t).filter(e=>"email"===e.category).length," ayar"]})]})]})})}),(0,za.jsx)("div",{className:"p-6",children:(0,za.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:f(t).filter(e=>"email"===e.category).sort((e,t)=>e.key.localeCompare(t.key)).map(e=>(0,za.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,za.jsxs)("div",{className:"flex items-start gap-3",children:[(0,za.jsx)("div",{className:"flex-shrink-0 p-2 rounded-lg bg-gray-100",children:(0,za.jsx)(uc,{className:"h-4 w-4 text-gray-600"})}),(0,za.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,za.jsxs)("div",{className:"mb-2",children:[(0,za.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:e.key.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}),(0,za.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]}),(0,za.jsx)("div",{children:x(e)})]})]})},e.id))})})]})}),"ocr"===o&&(0,za.jsx)("div",{className:"space-y-6",children:(0,za.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,za.jsx)("div",{className:"px-6 py-5 border-b border-gray-100 bg-gradient-to-r from-purple-50 to-white",children:(0,za.jsxs)("div",{className:"flex items-center gap-3",children:[(0,za.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,za.jsx)(ti,{className:"h-5 w-5 text-purple-600"})}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"OCR / AI Ayarlar\u0131"}),(0,za.jsx)("p",{className:"text-sm text-gray-500",children:"Google AI Vision API ve OCR i\u015fleme ayarlar\u0131"})]})]})}),(0,za.jsxs)("div",{className:"p-6",children:[(0,za.jsx)("div",{className:"space-y-4",children:f(t).filter(e=>"ocr"===e.category).sort((e,t)=>e.key.localeCompare(t.key)).map(e=>(0,za.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,za.jsxs)("div",{className:"flex items-start gap-3",children:[(0,za.jsx)("div",{className:"flex-shrink-0 p-2 rounded-lg bg-purple-100",children:(0,za.jsx)(ti,{className:"h-4 w-4 text-purple-600"})}),(0,za.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,za.jsxs)("div",{className:"mb-2",children:[(0,za.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:e.description||e.key.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}),(0,za.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["google_ai_api_key"===e.key&&"Google Cloud Console'dan al\u0131nabilir","parallel_workers"===e.key&&"Ayn\u0131 anda ka\xe7 g\xf6rsel i\u015flenebilir (\xf6nerilen: 10)","ocr_timeout"===e.key&&"Her bir OCR i\u015flemi i\xe7in maksimum bekleme s\xfcresi","ocr_retry_count"===e.key&&"Hata durumunda yeniden deneme say\u0131s\u0131"]})]}),(0,za.jsx)("div",{children:x(e)})]})]})},e.id))}),(0,za.jsx)("div",{className:"mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,za.jsxs)("div",{className:"flex gap-3",children:[(0,za.jsx)("div",{className:"flex-shrink-0",children:(0,za.jsx)("svg",{className:"h-5 w-5 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,za.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"\xd6nemli Notlar"}),(0,za.jsx)("div",{className:"mt-2 text-sm text-yellow-700",children:(0,za.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,za.jsx)("li",{children:"Google AI API Key de\u011fi\u015fikli\u011finden sonra sistemi yeniden ba\u015flat\u0131n"}),(0,za.jsx)("li",{children:"Parallel workers say\u0131s\u0131n\u0131 art\u0131rmak daha fazla Google API iste\u011fi yapar (maliyet art\u0131\u015f\u0131)"}),(0,za.jsx)("li",{children:"OCR timeout de\u011ferini \xe7ok d\xfc\u015f\xfck tutmay\u0131n (minimum 20 saniye \xf6nerilir)"})]})})]})]})})]})]})}),"upload"===o&&(0,za.jsx)("div",{className:"space-y-6",children:(0,za.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,za.jsx)("div",{className:"px-6 py-5 border-b border-gray-100 bg-gradient-to-r from-green-50 to-white",children:(0,za.jsxs)("div",{className:"flex items-center gap-3",children:[(0,za.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,za.jsx)(dc,{className:"h-5 w-5 text-green-600"})}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Dosya Y\xfckleme Ayarlar\u0131"}),(0,za.jsx)("p",{className:"text-sm text-gray-500",children:"Dosya y\xfckleme limitleri ve k\u0131s\u0131tlamalar\u0131"})]})]})}),(0,za.jsxs)("div",{className:"p-6",children:[(0,za.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:f(t).filter(e=>"upload"===e.category).sort((e,t)=>e.key.localeCompare(t.key)).map(e=>(0,za.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,za.jsxs)("div",{className:"flex items-start gap-3",children:[(0,za.jsx)("div",{className:"flex-shrink-0 p-2 rounded-lg bg-green-100",children:(0,za.jsx)(dc,{className:"h-4 w-4 text-green-600"})}),(0,za.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,za.jsxs)("div",{className:"mb-2",children:[(0,za.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:e.description||e.key.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}),(0,za.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["max_file_count"===e.key&&"Tek seferde y\xfcklenebilecek maksimum dosya say\u0131s\u0131","max_file_size_mb"===e.key&&"Her bir dosya i\xe7in maksimum boyut (MB cinsinden)","allowed_extensions"===e.key&&"\u0130zin verilen dosya uzant\u0131lar\u0131 (virg\xfclle ay\u0131r\u0131n)","total_upload_size_mb"===e.key&&"Toplam y\xfckleme boyutu limiti (MB cinsinden)","storage_path"===e.key&&"Dosyalar\u0131n kaydedilece\u011fi klas\xf6r yolu"]})]}),(0,za.jsx)("div",{children:x(e)})]})]})},e.id))}),(0,za.jsx)("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,za.jsxs)("div",{className:"flex gap-3",children:[(0,za.jsx)("div",{className:"flex-shrink-0",children:(0,za.jsx)("svg",{className:"h-5 w-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,za.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"Bilgi"}),(0,za.jsx)("div",{className:"mt-2 text-sm text-blue-700",children:(0,za.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,za.jsx)("li",{children:"Dosya say\u0131s\u0131 ve boyut limitleri anl\u0131k olarak uygulan\u0131r"}),(0,za.jsx)("li",{children:"\u0130zin verilen uzant\u0131lar\u0131 de\u011fi\u015ftirirken dikkatli olun (\xf6rn: jpg,jpeg,png,webp)"}),(0,za.jsx)("li",{children:"Toplam upload boyutu = (Dosya say\u0131s\u0131 \xd7 Ortalama dosya boyutu) i\xe7in yeterli olmal\u0131"}),(0,za.jsx)("li",{children:"\xd6nerilen: 500 dosya \xd7 2 MB = 1000 MB toplam limit"})]})})]})]})})]})]})}),"general"===o&&(0,za.jsx)("div",{className:"space-y-6",children:(0,za.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,za.jsx)("div",{className:"px-6 py-5 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white",children:(0,za.jsxs)("div",{className:"flex items-center gap-3",children:[(0,za.jsx)("div",{className:"p-2 bg-indigo-100 rounded-lg",children:(0,za.jsx)(hc,{className:"h-5 w-5 text-indigo-600"})}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Genel Ayarlar"}),(0,za.jsxs)("p",{className:"text-sm text-gray-500",children:[f(t).filter(e=>"general"===e.category).length," ayar"]})]})]})}),(0,za.jsx)("div",{className:"p-6",children:(0,za.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:f(t).filter(e=>"general"===e.category).sort((e,t)=>e.key.localeCompare(t.key)).map(e=>(0,za.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,za.jsxs)("div",{className:"flex items-start gap-3",children:[(0,za.jsx)("div",{className:"flex-shrink-0 p-2 rounded-lg bg-gray-100",children:(0,za.jsx)(hc,{className:"h-4 w-4 text-gray-600"})}),(0,za.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,za.jsxs)("div",{className:"mb-2",children:[(0,za.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:e.key.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}),(0,za.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]}),(0,za.jsx)("div",{children:x(e)})]})]})},e.id))})})]})})]})},pc=()=>{const{user:e}=Za(),{getTitle:t,getDescription:r}=sc(),[s,a]=(0,n.useState)([]),[i,l]=(0,n.useState)([]),[o,c]=(0,n.useState)(!0),[d,u]=(0,n.useState)(""),[h,m]=(0,n.useState)(null),[p,g]=(0,n.useState)(null),f=(0,n.useCallback)(async()=>{try{c(!0);const[t,r]=await Promise.allSettled([Hi(1,1e3),Si(1,1e3)]);if("fulfilled"===t.status){const r=t.value.users.filter(t=>t.id!==(null===e||void 0===e?void 0:e.id)&&t.brand_ids&&t.brand_ids.some(t=>(null===e||void 0===e?void 0:e.brand_ids)&&e.brand_ids.includes(t)));a(r)}if("fulfilled"===r.status){const t=r.value.brands.filter(t=>(null===e||void 0===e?void 0:e.brand_ids)&&e.brand_ids.includes(t.id));l(t)}}catch(t){Ra.error("\xc7al\u0131\u015fanlar y\xfcklenirken bir hata olu\u015ftu"),console.error("Error loading employees:",t)}finally{c(!1)}},[null===e||void 0===e?void 0:e.brand_ids]);(0,n.useEffect)(()=>{e&&f()},[e,f]);const x=s.filter(e=>{const t="".concat(e.first_name," ").concat(e.last_name," ").concat(e.email).toLowerCase().includes(d.toLowerCase()),r=!h||e.brand_ids&&e.brand_ids.includes(h),n=!p||"active"===p&&e.is_active||"inactive"===p&&!e.is_active;return t&&r&&n});return o?(0,za.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,za.jsxs)("div",{className:"flex items-center gap-3",children:[(0,za.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),(0,za.jsx)("span",{className:"text-gray-600",children:"\xc7al\u0131\u015fanlar y\xfckleniyor..."})]})}):(0,za.jsxs)("div",{className:"space-y-6",children:[(0,za.jsx)("div",{className:"flex justify-between items-center",children:(0,za.jsxs)("div",{children:[(0,za.jsx)("h1",{className:"text-3xl font-bold text-gray-900 animate-fade-in",children:t("my_employees")}),(0,za.jsx)("p",{className:"text-gray-600 mt-2",children:r("my_employees_description")})]})}),(0,za.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:(0,za.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,za.jsxs)("div",{className:"relative",children:[(0,za.jsx)(nl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),(0,za.jsx)("input",{type:"text",placeholder:"\xc7al\u0131\u015fan ara...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:d,onChange:e=>u(e.target.value)})]}),(0,za.jsxs)("select",{className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:h||"",onChange:e=>m(e.target.value?parseInt(e.target.value):null),children:[(0,za.jsx)("option",{value:"",children:"T\xfcm Markalar"}),i.map(e=>(0,za.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,za.jsxs)("select",{className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:p||"",onChange:e=>g(e.target.value||null),children:[(0,za.jsx)("option",{value:"",children:"T\xfcm Durumlar"}),(0,za.jsx)("option",{value:"active",children:"Aktif"}),(0,za.jsx)("option",{value:"inactive",children:"Pasif"})]})]})}),(0,za.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[x.length>0?(0,za.jsx)("div",{className:"overflow-x-auto",children:(0,za.jsxs)("table",{className:"w-full",children:[(0,za.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,za.jsxs)("tr",{children:[(0,za.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\xc7al\u0131\u015fan"}),(0,za.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"E-posta"}),(0,za.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Marka"}),(0,za.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rol"}),(0,za.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Durum"}),(0,za.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Son Giri\u015f"}),(0,za.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0130\u015flemler"})]})}),(0,za.jsx)("tbody",{className:"divide-y divide-gray-200",children:x.map(e=>{const t=i.filter(t=>{var r;return null===(r=e.brand_ids)||void 0===r?void 0:r.includes(t.id)}).map(e=>e.name).join(", ");return(0,za.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,za.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,za.jsxs)("div",{className:"flex items-center",children:[(0,za.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,za.jsx)("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:(0,za.jsx)(rc,{className:"h-5 w-5 text-blue-600"})})}),(0,za.jsx)("div",{className:"ml-4",children:(0,za.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.first_name," ",e.last_name]})})]})}),(0,za.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.email}),(0,za.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,za.jsxs)("div",{className:"flex items-center",children:[(0,za.jsx)(di,{className:"h-4 w-4 mr-1 text-gray-400"}),t||"Belirtilmemi\u015f"]})}),(0,za.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,za.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.role})}),(0,za.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,za.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?(0,za.jsxs)(za.Fragment,{children:[(0,za.jsx)(Wa,{className:"h-3 w-3 mr-1"}),"Aktif"]}):(0,za.jsxs)(za.Fragment,{children:[(0,za.jsx)(Ka,{className:"h-3 w-3 mr-1"}),"Pasif"]})})}),(0,za.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.last_login?new Date(e.last_login).toLocaleDateString("tr-TR"):"Hen\xfcz giri\u015f yok"}),(0,za.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,za.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,za.jsx)("button",{onClick:()=>{return t=e.id,void Ra("\xc7al\u0131\u015fan d\xfczenleme: ".concat(t));var t},className:"text-blue-600 hover:text-blue-900 p-1",title:"D\xfczenle",children:(0,za.jsx)(Eo,{size:16})}),(0,za.jsx)("button",{onClick:()=>{return t=e.id,void Ra("\xc7al\u0131\u015fan silme: ".concat(t));var t},className:"text-red-600 hover:text-red-900 p-1",title:"Sil",children:(0,za.jsx)(il,{size:16})})]})})]},e.id)})})]})}):(0,za.jsxs)("div",{className:"text-center py-12",children:[(0,za.jsx)(ci,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),(0,za.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"\xc7al\u0131\u015fan bulunamad\u0131"}),(0,za.jsx)("p",{className:"text-gray-500",children:"Filtrelerinize uygun \xe7al\u0131\u015fan bulunmamaktad\u0131r."})]}),x.length>0&&(0,za.jsxs)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[(0,za.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,za.jsx)("button",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"\xd6nceki"}),(0,za.jsx)("button",{className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Sonraki"})]}),(0,za.jsx)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:(0,za.jsx)("div",{children:(0,za.jsxs)("p",{className:"text-sm text-gray-700",children:["Toplam ",(0,za.jsx)("span",{className:"font-medium",children:x.length})," \xe7al\u0131\u015fan"]})})})]})]})]})},gc={baseUrl:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BASE_URL||"http://localhost:8000",apiUrl:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:8000/api",uploadUrl:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_UPLOAD_URL||"http://localhost:8000/uploads",imageUrl:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_IMAGE_URL||"http://localhost:8000/uploads",frontendUrl:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_FRONTEND_URL||"http://localhost:3000"},fc=()=>{const[e,t]=(0,n.useState)(gc),[r,s]=(0,n.useState)(!1),[a,i]=(0,n.useState)(null);(0,n.useEffect)(()=>{l()},[]);const l=async()=>{try{s(!0),i(null);const e=await $a();if(e&&e.url_config){const r=JSON.parse(e.url_config);t(e=>Ie(Ie({},e),r))}}catch(e){console.warn("Failed to load URL config from settings, using defaults:",e)}finally{s(!1)}};return{config:e,loading:r,error:a,updateConfig:async r=>{try{s(!0),i(null);const n=Ie(Ie({},e),r);t(n),await Qa([{key:"url_config",value:JSON.stringify(n)}])}catch(n){throw i(n instanceof Error?n.message:"Failed to update URL config"),n}finally{s(!1)}},resetConfig:()=>{t(gc)},getImageURL:t=>{if(!t)return"";if(t.startsWith("http://")||t.startsWith("https://"))return t;const r=t.split("/").pop()||t;return"".concat(e.apiUrl,"/images/").concat(r)},getUploadURL:()=>e.uploadUrl,getApiURL:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const r=t.startsWith("/")?t.slice(1):t;return"".concat(e.apiUrl,"/").concat(r)},getBaseURL:()=>e.baseUrl,getFrontendURL:()=>e.frontendUrl,loadUrlConfig:l}},xc=Ua("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),yc=Ua("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),bc=e=>{let{incompleteProducts:t,onComplete:r,onCancel:s}=e;const[a,i]=(0,n.useState)([]),[l,o]=(0,n.useState)({product_type:"",size_range:"",price:""}),[c,d]=(0,n.useState)(0);(0,n.useEffect)(()=>{const e=t.map(e=>Ie(Ie({},e),{},{product_type:"",size_range:"",price:void 0}));i(e)},[t]);const u=["ELB\u0130SE","PANTOLON","TAKIM","KOT","ETEK","CEKET","G\xd6MLEK","T\u0130\u015e\xd6RT","MONT","HIRKA","YELEK"],h=(e,t)=>{i(r=>r.map(r=>Ie(Ie({},r),{},{[e]:t})))},m=(e,t,r)=>{i(n=>n.map(n=>n.product_id===e?Ie(Ie({},n),{},{[t]:r}):n))},p=a[c];return(0,za.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,za.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,za.jsxs)("div",{children:[(0,za.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["Eksik Bilgiler - ",a.length," \xdcr\xfcn"]}),(0,za.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"\xdcr\xfcnlerin eksik bilgilerini tamamlay\u0131n"})]}),(0,za.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,za.jsx)(fl,{size:24})})]}),(0,za.jsxs)("div",{className:"flex h-[calc(90vh-140px)]",children:[(0,za.jsxs)("div",{className:"w-1/3 border-r border-gray-200 p-6",children:[(0,za.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,za.jsx)(xc,{size:18}),"Toplu Uygulama"]}),(0,za.jsxs)("div",{className:"space-y-4",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\xdcr\xfcn T\xfcr\xfc"}),(0,za.jsxs)("select",{value:l.product_type,onChange:e=>{o(t=>Ie(Ie({},t),{},{product_type:e.target.value})),h("product_type",e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,za.jsx)("option",{value:"",children:"Se\xe7in..."}),u.map(e=>(0,za.jsx)("option",{value:e,children:e},e))]})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Beden Aral\u0131\u011f\u0131"}),(0,za.jsx)("input",{type:"text",value:l.size_range,onChange:e=>{o(t=>Ie(Ie({},t),{},{size_range:e.target.value})),h("size_range",e.target.value)},placeholder:"\xf6rn: 36-42, 38-44",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fiyat (USD)"}),(0,za.jsx)("input",{type:"number",step:"0.01",value:l.price,onChange:e=>{o(t=>Ie(Ie({},t),{},{price:e.target.value})),h("price",e.target.value)},placeholder:"\xf6rn: 65.00",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,za.jsxs)("button",{onClick:()=>{o({product_type:"",size_range:"",price:""}),i(e=>e.map(e=>Ie(Ie({},e),{},{product_type:"",size_range:"",price:void 0})))},className:"w-full btn btn-secondary flex items-center justify-center gap-2",children:[(0,za.jsx)(yc,{size:16}),"S\u0131f\u0131rla"]})]})]}),(0,za.jsxs)("div",{className:"flex-1 p-6",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,za.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Bireysel D\xfczenlemeler"}),(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)("button",{onClick:()=>d(Math.max(0,c-1)),disabled:0===c,className:"btn btn-sm btn-secondary",children:"\xd6nceki"}),(0,za.jsxs)("span",{className:"text-sm text-gray-600",children:[c+1," / ",a.length]}),(0,za.jsx)("button",{onClick:()=>d(Math.min(a.length-1,c+1)),disabled:c===a.length-1,className:"btn btn-sm btn-secondary",children:"Sonraki"})]})]}),p&&(0,za.jsxs)("div",{className:"space-y-4",children:[(0,za.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,za.jsxs)("h4",{className:"font-medium text-gray-900",children:[p.code," ",p.color]}),(0,za.jsx)("div",{className:"flex items-center gap-2 mt-2",children:p.missing_fields.map(e=>(0,za.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full",children:[(0,za.jsx)(yi,{size:12}),"product_type"===e?"\xdcr\xfcn T\xfcr\xfc":"size_range"===e?"Beden":e]},e))})]}),p.missing_fields.includes("product_type")&&(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\xdcr\xfcn T\xfcr\xfc *"}),(0,za.jsxs)("select",{value:p.product_type||"",onChange:e=>m(p.product_id,"product_type",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,za.jsx)("option",{value:"",children:"Se\xe7in..."}),u.map(e=>(0,za.jsx)("option",{value:e,children:e},e))]})]}),p.missing_fields.includes("size_range")&&(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Beden Aral\u0131\u011f\u0131 *"}),(0,za.jsx)("input",{type:"text",value:p.size_range||"",onChange:e=>m(p.product_id,"size_range",e.target.value),placeholder:"\xf6rn: 36-42, 38-44",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fiyat (USD) - Opsiyonel"}),(0,za.jsx)("input",{type:"number",step:"0.01",value:p.price||"",onChange:e=>m(p.product_id,"price",e.target.value),placeholder:"\xf6rn: 65.00",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]})]}),(0,za.jsxs)("div",{className:"flex items-center justify-between p-6 border-t border-gray-200",children:[(0,za.jsxs)("div",{className:"text-sm text-gray-600",children:[a.filter(e=>(!e.missing_fields.includes("product_type")||e.product_type)&&(!e.missing_fields.includes("size_range")||e.size_range)).length," / ",a.length," \xfcr\xfcn tamamland\u0131"]}),(0,za.jsxs)("div",{className:"flex items-center gap-3",children:[(0,za.jsx)("button",{onClick:s,className:"btn btn-secondary",children:"\u0130ptal"}),(0,za.jsxs)("button",{onClick:()=>{if(a.some(e=>!(!e.missing_fields.includes("product_type")||e.product_type)||!(!e.missing_fields.includes("size_range")||e.size_range)))return void Ra.error("L\xfctfen t\xfcm eksik alanlar\u0131 doldurun");const e=a.map(e=>({product_id:e.product_id,product_type:e.product_type||void 0,size_range:e.size_range||void 0,price:e.price||void 0}));r(e)},className:"btn btn-primary flex items-center gap-2",children:[(0,za.jsx)(Wa,{size:16}),"Tamamla (",a.length," \xdcr\xfcn)"]})]})]})]})})},vc=Ua("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),jc=Ua("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),wc=Ua("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);const _c=new class{constructor(){this.defaultOptions={duration:4e3,position:"top-right"}}success(e,t){return Ra.success(e,{duration:(null===t||void 0===t?void 0:t.duration)||this.defaultOptions.duration,position:(null===t||void 0===t?void 0:t.position)||this.defaultOptions.position,style:null===t||void 0===t?void 0:t.style,className:null===t||void 0===t?void 0:t.className,id:null===t||void 0===t?void 0:t.id})}error(e,t){return Ra.error(e,{duration:(null===t||void 0===t?void 0:t.duration)||6e3,position:(null===t||void 0===t?void 0:t.position)||this.defaultOptions.position,style:null===t||void 0===t?void 0:t.style,className:null===t||void 0===t?void 0:t.className,id:null===t||void 0===t?void 0:t.id})}warning(e,t){return Ra(e,{duration:(null===t||void 0===t?void 0:t.duration)||this.defaultOptions.duration,position:(null===t||void 0===t?void 0:t.position)||this.defaultOptions.position,icon:(null===t||void 0===t?void 0:t.icon)||"\u26a0\ufe0f",style:(null===t||void 0===t?void 0:t.style)||{background:"#f59e0b",color:"#fff"},className:null===t||void 0===t?void 0:t.className,id:null===t||void 0===t?void 0:t.id})}info(e,t){return Ra(e,{duration:(null===t||void 0===t?void 0:t.duration)||this.defaultOptions.duration,position:(null===t||void 0===t?void 0:t.position)||this.defaultOptions.position,icon:(null===t||void 0===t?void 0:t.icon)||"\u2139\ufe0f",style:(null===t||void 0===t?void 0:t.style)||{background:"#3b82f6",color:"#fff"},className:null===t||void 0===t?void 0:t.className,id:null===t||void 0===t?void 0:t.id})}loading(e,t){return Ra.loading(e,{duration:(null===t||void 0===t?void 0:t.duration)||1/0,position:(null===t||void 0===t?void 0:t.position)||this.defaultOptions.position,style:null===t||void 0===t?void 0:t.style,className:null===t||void 0===t?void 0:t.className,id:null===t||void 0===t?void 0:t.id})}dismiss(e){Ra.dismiss(e)}dismissAll(){Ra.dismiss()}custom(e,t,r){return Ra(e,{duration:r||this.defaultOptions.duration,position:this.defaultOptions.position,style:{background:"error"===t?"#ef4444":"success"===t?"#10b981":"#3b82f6",color:"#fff"}})}async promise(e,t,r){return Ra.promise(e,t,{duration:(null===r||void 0===r?void 0:r.duration)||this.defaultOptions.duration,position:(null===r||void 0===r?void 0:r.position)||this.defaultOptions.position,style:null===r||void 0===r?void 0:r.style,className:null===r||void 0===r?void 0:r.className})}},kc=()=>{const{getImageURL:e}=fc(),[t,r]=(0,n.useState)([]),[s,a]=(0,n.useState)([]),[i,l]=(0,n.useState)({product_types:[],colors:[],size_ranges:[]}),[o,c]=(0,n.useState)(!0),[d,u]=(0,n.useState)(!1),[h,m]=(0,n.useState)(0),[p,g]=(0,n.useState)(""),[f,x]=(0,n.useState)(!1),y=(0,n.useRef)(!1),[b,v]=(0,n.useState)(null),[j,w]=(0,n.useState)({isRecovering:!1,jobId:null,progress:0}),[_,k]=(0,n.useState)(200),[S,N]=(0,n.useState)(20),[C,T]=(0,n.useState)(1e3),[E,O]=(0,n.useState)(()=>{const e=sessionStorage.getItem("mediaGallery_selectedBrand");return e?parseInt(e):null}),[P,D]=(0,n.useState)(()=>sessionStorage.getItem("mediaGallery_searchTerm")||""),[A,M]=(0,n.useState)(()=>sessionStorage.getItem("mediaGallery_viewMode")||"grid"),[R,z]=(0,n.useState)(()=>{const e=sessionStorage.getItem("mediaGallery_page");return e?parseInt(e):1}),[F,L]=(0,n.useState)(()=>{const e=sessionStorage.getItem("mediaGallery_filterProductType");return e?JSON.parse(e):[]}),[I,B]=(0,n.useState)(()=>{const e=sessionStorage.getItem("mediaGallery_filterColor");return e?JSON.parse(e):[]}),[H,U]=(0,n.useState)(()=>{const e=sessionStorage.getItem("mediaGallery_filterSizeRange");return e?JSON.parse(e):[]}),[W,K]=(0,n.useState)(()=>"true"===sessionStorage.getItem("mediaGallery_filterIncomplete")),[V,Y]=(0,n.useState)(()=>"true"===sessionStorage.getItem("mediaGallery_filterHasSecondProduct")),[G,q]=(0,n.useState)(()=>"true"===sessionStorage.getItem("mediaGallery_filterComplete")),[X,$]=(0,n.useState)(!1),[J,Q]=(0,n.useState)(()=>"true"===sessionStorage.getItem("mediaGallery_groupByDate")),[Z,ee]=(0,n.useState)({}),[te,re]=(0,n.useState)([]),[ne,se]=(0,n.useState)(!1),[ae,ie]=(0,n.useState)(1),[le,oe]=(0,n.useState)([]),[ce,de]=(0,n.useState)(!1),[ue,he]=(0,n.useState)(!1),[me,pe]=(0,n.useState)(null),ge=(0,n.useRef)(null);(0,n.useEffect)(()=>{E&&sessionStorage.setItem("mediaGallery_selectedBrand",E.toString()),sessionStorage.setItem("mediaGallery_searchTerm",P),sessionStorage.setItem("mediaGallery_viewMode",A),sessionStorage.setItem("mediaGallery_page",R.toString()),sessionStorage.setItem("mediaGallery_filterProductType",JSON.stringify(F)),sessionStorage.setItem("mediaGallery_filterColor",JSON.stringify(I)),sessionStorage.setItem("mediaGallery_filterSizeRange",JSON.stringify(H)),sessionStorage.setItem("mediaGallery_filterIncomplete",W.toString()),sessionStorage.setItem("mediaGallery_filterHasSecondProduct",V.toString()),sessionStorage.setItem("mediaGallery_filterComplete",G.toString()),sessionStorage.setItem("mediaGallery_groupByDate",J.toString())},[E,P,A,R,F,I,H,W,V,G,J]);const fe=(0,n.useCallback)(async()=>{try{const e=await $a(),t=e.settings.find(e=>"max_file_count"===e.key);t&&k(parseInt(t.value)||100);const r=e.settings.find(e=>"max_file_size_mb"===e.key);r&&N(parseInt(r.value)||10);const n=e.settings.find(e=>"total_upload_size_mb"===e.key);n&&T(parseInt(n.value)||500)}catch(e){console.error("Upload settings y\xfcklenemedi:",e)}},[]),xe=(0,n.useCallback)(async()=>{c(!0);try{const e={};F.length>0&&(e.product_type=F),I.length>0&&(e.color=I),H.length>0&&(e.size_range=H),W&&(e.incomplete=!0),G&&(e.complete=!0),V&&(e.has_second_product=!0);const t=await Yo(R,20,E||void 0,P||void 0,Object.keys(e).length>0?e:void 0);r(t.products),ie(t.total_pages),pe(null),J&&ye(t.products||[])}catch(n){var e,t;const r=null===n||void 0===n||null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail,s=r&&"string"===typeof r&&r.trim().length>0?r:"Urun listesi sunucudan alinirken bir hata olustu (HTTP 500). Lutfen sistem yoneticinize haber verin.";pe(s),Ra.error("Urunler yuklenirken hata olustu"),console.error("Error loading products:",n)}finally{c(!1)}},[R,E,P,F,I,H,W,V,J]),ye=(0,n.useCallback)(e=>{const t={};e.forEach(e=>{if(e.created_at){const r=new Date(e.created_at).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"});t[r]||(t[r]=[]),t[r].push(e)}});const r={};Object.keys(t).sort((e,r)=>{const n=new Date(t[e][0].created_at);return new Date(t[r][0].created_at).getTime()-n.getTime()}).forEach(e=>{r[e]=t[e]}),ee(r)},[]),be=(0,n.useCallback)(async()=>{try{const e=await Ni();a(e.brands)}catch(e){Ra.error("Markalar y\xfcklenirken hata olu\u015ftu"),console.error("Error loading brands:",e)}},[]),ve=(0,n.useCallback)(async()=>{try{const e=await Qo();l(e)}catch(e){console.error("Error loading filter options:",e),pe(e=>null!==e&&void 0!==e?e:"Filtre se\ufffdenekleri sunucudan alinamadi. Lutfen sistem yoneticinize haber verin.")}},[]),je=(0,n.useCallback)(()=>{pe(null),be(),ve(),xe()},[be,ve,xe]);(0,n.useEffect)(()=>{fe(),we()},[fe]);const we=(0,n.useCallback)(()=>{const e=localStorage.getItem("uploadJobId"),t=localStorage.getItem("uploadProgress");e&&t&&(w({isRecovering:!0,jobId:e,progress:parseInt(t)}),_e(e))},[]),_e=(0,n.useCallback)(async e=>{try{u(!0),m(parseInt(localStorage.getItem("uploadProgress")||"0")),g("Y\xfckleme devam ediyor...");const t=setInterval(async()=>{try{const r=await fetch("/api/upload/status/".concat(e)),n=await r.json();"completed"===n.status?(clearInterval(t),u(!1),m(100),g("Y\xfckleme tamamland\u0131!"),localStorage.removeItem("uploadJobId"),localStorage.removeItem("uploadProgress"),w({isRecovering:!1,jobId:null,progress:0}),window.location.reload(),Ra.success("Y\xfckleme ba\u015far\u0131yla tamamland\u0131!")):"failed"===n.status?(clearInterval(t),u(!1),g("Y\xfckleme ba\u015far\u0131s\u0131z!"),localStorage.removeItem("uploadJobId"),localStorage.removeItem("uploadProgress"),w({isRecovering:!1,jobId:null,progress:0}),Ra.error("Y\xfckleme ba\u015far\u0131s\u0131z oldu!")):n.progress&&(m(n.progress),localStorage.setItem("uploadProgress",n.progress.toString()))}catch(r){console.error("Upload status check error:",r)}},2e3)}catch(t){console.error("Upload recovery error:",t),w({isRecovering:!1,jobId:null,progress:0})}},[]),ke=(0,n.useCallback)(()=>{localStorage.removeItem("uploadJobId"),localStorage.removeItem("uploadProgress"),w({isRecovering:!1,jobId:null,progress:0}),u(!1),m(0),g("")},[]);(0,n.useEffect)(()=>()=>{x(!1),y.current=!1},[]),(0,n.useEffect)(()=>{const e=async()=>{try{c(!0);const e={};F.length>0&&(e.product_type=F),I.length>0&&(e.color=I),H.length>0&&(e.size_range=H),W&&(e.incomplete=!0),G&&(e.complete=!0),V&&(e.has_second_product=!0);const t=await Yo(R,20,E||void 0,P||void 0,Object.keys(e).length>0?e:void 0),n=t.products.filter(e=>"UNKNOWN"!==e.code&&"DEFAULT_CODE"!==e.code&&"UNKNOWN"!==e.color&&"DEFAULT"!==e.color);r(n),ie(t.total_pages),pe(null)}catch(n){var e,t;const r=null===n||void 0===n||null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail;pe(r&&"string"===typeof r?r:"Urun listesi sunucudan alinirken bir hata olustu (HTTP 500). Lutfen sistem yoneticinize haber verin."),Ra.error("Urunler yuklenirken hata olustu"),console.error("Error loading products:",n)}finally{c(!1)}};if(1===R)return ge.current&&clearTimeout(ge.current),ge.current=setTimeout(()=>{e()},500),()=>{ge.current&&clearTimeout(ge.current)};e()},[R,P,F,I,H,W,V,E]),(0,n.useEffect)(()=>{be(),ve()},[be,ve]);const Se=e=>e.is_processed?(0,za.jsx)(Wa,{className:"w-4 h-4 text-green-500"}):null,Ne=e=>e.is_processed?"Haz\u0131r":"\u0130\u015fleniyor",Ce=e=>{const t=(e.images||[]).filter(e=>{if("tag"===e.image_type||"collage"===e.image_type)return!1;const t=e.filename||e.original_filename||"";return!/tag|etiket/i.test(t)&&!!/\d+\.(jpg|jpeg|png)$/i.test(t)});if(0===t.length)return null;const r=[...t].sort((e,t)=>{const r=e.filename||e.original_filename||"",n=t.filename||t.original_filename||"",s=r.match(/(\d+)\.(jpg|jpeg|png)$/i),a=n.match(/(\d+)\.(jpg|jpeg|png)$/i);return(s?parseInt(s[1]):999999)-(a?parseInt(a[1]):999999)});return r[0]||null};return me?(0,za.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen px-6 text-center space-y-4",children:[(0,za.jsx)(yi,{className:"w-12 h-12 text-red-500"}),(0,za.jsxs)("div",{className:"space-y-2",children:[(0,za.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Veriler yuklenemedi"}),(0,za.jsx)("p",{className:"text-gray-600 max-w-xl",children:me})]}),(0,za.jsx)("button",{onClick:je,className:"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition-colors",children:"Tekrar dene"})]}):o?(0,za.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,za.jsxs)("div",{className:"flex items-center gap-3",children:[(0,za.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),(0,za.jsx)("span",{className:"text-gray-600",children:"Medya galerisi y\xfckleniyor..."})]})}):(0,za.jsxs)("div",{className:"space-y-6",children:[j.isRecovering&&(0,za.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4",children:(0,za.jsxs)("div",{className:"flex items-start gap-3",children:[(0,za.jsx)("div",{className:"p-2 bg-blue-100 rounded-full",children:(0,za.jsx)(tl,{className:"w-5 h-5 text-blue-600 animate-spin"})}),(0,za.jsxs)("div",{className:"flex-1",children:[(0,za.jsx)("h3",{className:"font-semibold text-blue-800 mb-1",children:"Y\xfckleme Devam Ediyor"}),(0,za.jsx)("p",{className:"text-blue-700 text-sm mb-3",children:"\xd6nceki y\xfckleme i\u015flemi devam ediyor. \u0130\u015flem tamamlanana kadar bekleyin."}),(0,za.jsxs)("div",{className:"flex items-center gap-4",children:[(0,za.jsx)("div",{className:"flex-1 bg-blue-200 rounded-full h-2",children:(0,za.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(j.progress,"%")}})}),(0,za.jsxs)("span",{className:"text-sm font-medium text-blue-800",children:[j.progress,"%"]}),(0,za.jsx)("button",{onClick:ke,className:"btn btn-sm btn-ghost text-blue-600 hover:text-blue-800",children:"\u0130ptal Et"})]})]})]})}),(0,za.jsx)("div",{className:"bg-gradient-to-r from-slate-50 to-blue-50 border border-slate-200 rounded-lg p-5",children:(0,za.jsxs)("div",{className:"flex items-start gap-4",children:[(0,za.jsx)("div",{className:"flex-shrink-0 pt-0.5",children:(0,za.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,za.jsx)(yi,{className:"w-5 h-5 text-blue-600"})})}),(0,za.jsxs)("div",{className:"flex-1",children:[(0,za.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Depolama Bilgisi"}),(0,za.jsxs)("p",{className:"text-sm text-gray-600 leading-relaxed",children:["\xdcr\xfcn g\xf6rselleri ve kolajlar ",(0,za.jsx)("span",{className:"font-medium text-gray-900",children:"24 saat"})," boyunca \xfccretsiz olarak saklanmaktad\u0131r. Daha uzun s\xfcre depolama i\xe7in premium paketlerimizi inceleyebilirsiniz."]})]}),(0,za.jsx)("div",{className:"flex-shrink-0",children:(0,za.jsx)("button",{className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-xs font-medium rounded transition-colors duration-200",children:"Premium"})})]})}),(0,za.jsxs)("div",{className:"flex justify-between items-center",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"\xdcr\xfcnler"}),(0,za.jsx)("p",{className:"text-gray-600",children:"\xdcr\xfcn g\xf6rsellerini y\xf6netin ve AI ile i\u015fleyin"})]}),(0,za.jsxs)("div",{className:"flex items-center gap-3",children:[(0,za.jsxs)("button",{onClick:()=>{var e;return null===(e=document.getElementById("file-upload"))||void 0===e?void 0:e.click()},className:"btn btn-primary flex items-center gap-2",children:[(0,za.jsx)(vc,{size:18}),"G\xf6rsel Y\xfckle"]}),(0,za.jsx)("input",{id:"file-upload",type:"file",multiple:!0,accept:"image/*",onChange:e=>{const t=(e=>{if(e.length>_)return{valid:!1,message:"Maksimum ".concat(_," dosya se\xe7ebilirsiniz. ").concat(e.length," dosya se\xe7tiniz. \u0130lk ").concat(_," dosya kabul edilecek."),validFiles:e.slice(0,_)};const t=[],r=[];let n=0;for(const s of e){const e=s.size/1048576;e>S?t.push("".concat(s.name," (").concat(e.toFixed(2)," MB)")):(r.push(s),n+=e)}return t.length>0?{valid:!1,message:"Baz\u0131 dosyalar \xe7ok b\xfcy\xfck (maksimum ".concat(S," MB):\n").concat(t.join("\n"),"\n\nBu dosyalar y\xfcklenmeyecek."),validFiles:r}:n>C?{valid:!1,message:"Toplam dosya boyutu \xe7ok b\xfcy\xfck: ".concat(n.toFixed(2)," MB. Maksimum: ").concat(C," MB. L\xfctfen daha az dosya se\xe7in."),validFiles:[]}:{valid:!0,validFiles:r}})(Array.from(e.target.files||[]));if(!t.valid)return Ra.error(t.message||"Dosya se\xe7imi ge\xe7ersiz"),void(t.validFiles.length>0&&(re(t.validFiles),se(!0)));re(t.validFiles),se(!0)},className:"hidden"})]})]}),(0,za.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,za.jsx)("h3",{className:"text-sm font-semibold text-gray-700",children:"Arama & Filtreleme"}),(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsxs)("button",{onClick:()=>$(!X),className:"flex items-center gap-2 px-3 py-1.5 text-sm rounded-lg transition-colors ".concat(X?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,za.jsx)(jc,{size:16}),X?"Filtreleri Gizle":"Geli\u015fmi\u015f Filtreler"]}),(F.length>0||I.length>0||H.length>0||W||G||V)&&(0,za.jsxs)("button",{onClick:()=>{L([]),B([]),U([]),K(!1),q(!1),Y(!1),D(""),z(1)},className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors",children:[(0,za.jsx)(fl,{size:16}),"T\xfcm\xfcn\xfc Temizle"]})]})]}),(0,za.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3",children:[(0,za.jsxs)("div",{className:"relative md:col-span-2",children:[(0,za.jsx)(nl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),(0,za.jsx)("input",{type:"text",placeholder:"\xdcr\xfcn ara...",value:P,onChange:e=>{D(e.target.value),z(1)},className:"w-full pl-9 pr-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,za.jsxs)("select",{value:E||"",onChange:e=>{O(Number(e.target.value)||null),z(1)},className:"px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,za.jsx)("option",{value:"",children:"T\xfcm Markalar"}),s.map(e=>(0,za.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)("button",{onClick:()=>M("grid"),className:"p-2 rounded-lg ".concat("grid"===A?"bg-blue-100 text-blue-600":"text-gray-400 hover:text-gray-600"),title:"Grid g\xf6r\xfcn\xfcm",children:(0,za.jsx)(Ii,{size:16})}),(0,za.jsx)("button",{onClick:()=>M("list"),className:"p-2 rounded-lg ".concat("list"===A?"bg-blue-100 text-blue-600":"text-gray-400 hover:text-gray-600"),title:"Liste g\xf6r\xfcn\xfcm",children:(0,za.jsx)(wc,{size:16})}),(0,za.jsxs)("button",{onClick:()=>Q(!J),className:"px-3 py-2 rounded-lg text-xs font-medium transition-colors ".concat(J?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"),title:"Tarihe g\xf6re grupla",children:["\ud83d\udcc5 ",J?"Gruplu":"Grup"]}),(0,za.jsx)("button",{onClick:xe,className:"p-2 rounded-lg text-gray-600 hover:bg-gray-100",title:"Yenile",children:(0,za.jsx)(tl,{size:16})})]})]}),X&&(0,za.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,za.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"\xdcr\xfcn Tipi"}),(0,za.jsx)("div",{className:"max-h-32 overflow-y-auto border border-gray-300 rounded-lg p-2 space-y-1",children:i.product_types.map(e=>(0,za.jsxs)("label",{className:"flex items-center space-x-2 text-sm",children:[(0,za.jsx)("input",{type:"checkbox",checked:F.includes(e),onChange:t=>{t.target.checked?L([...F,e]):L(F.filter(t=>t!==e)),z(1)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,za.jsx)("span",{children:e})]},e))})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Renk"}),(0,za.jsx)("div",{className:"max-h-32 overflow-y-auto border border-gray-300 rounded-lg p-2 space-y-1",children:i.colors.map(e=>(0,za.jsxs)("label",{className:"flex items-center space-x-2 text-sm",children:[(0,za.jsx)("input",{type:"checkbox",checked:I.includes(e),onChange:t=>{t.target.checked?B([...I,e]):B(I.filter(t=>t!==e)),z(1)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,za.jsx)("span",{children:e})]},e))})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Beden"}),(0,za.jsx)("div",{className:"max-h-32 overflow-y-auto border border-gray-300 rounded-lg p-2 space-y-1",children:i.size_ranges.map(e=>(0,za.jsxs)("label",{className:"flex items-center space-x-2 text-sm",children:[(0,za.jsx)("input",{type:"checkbox",checked:H.includes(e),onChange:t=>{t.target.checked?U([...H,e]):U(H.filter(t=>t!==e)),z(1)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,za.jsx)("span",{children:e})]},e))})]}),(0,za.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,za.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-700 cursor-pointer",children:[(0,za.jsx)("input",{type:"checkbox",checked:W,onChange:e=>{K(e.target.checked),z(1)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,za.jsx)("span",{children:"Eksik Bilgiler"})]}),(0,za.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-700 cursor-pointer",children:[(0,za.jsx)("input",{type:"checkbox",checked:G,onChange:e=>{q(e.target.checked),z(1)},className:"rounded border-gray-300 text-green-600 focus:ring-green-500"}),(0,za.jsx)("span",{children:"Tam Bilgiler"})]}),(0,za.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-700 cursor-pointer",children:[(0,za.jsx)("input",{type:"checkbox",checked:V,onChange:e=>{Y(e.target.checked),z(1)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,za.jsx)("span",{children:"\xc7ift \xdcr\xfcn"})]})]})]})})]}),0===t.length?(0,za.jsxs)("div",{className:"text-center py-12",children:[(0,za.jsx)(Bi,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,za.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Hen\xfcz \xfcr\xfcn yok"}),(0,za.jsx)("p",{className:"text-gray-600 mb-4",children:"\u0130lk \xfcr\xfcn g\xf6rsellerinizi y\xfckleyerek ba\u015flay\u0131n"}),(0,za.jsxs)("button",{onClick:()=>{var e;return null===(e=document.getElementById("file-upload"))||void 0===e?void 0:e.click()},className:"btn btn-primary",children:[(0,za.jsx)(Li,{size:18,className:"mr-2"}),"G\xf6rsel Y\xfckle"]})]}):J&&Object.keys(Z).length>0?(0,za.jsx)("div",{className:"space-y-8",children:Object.entries(Z).map(t=>{let[r,n]=t;return(0,za.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,za.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-gray-200",children:(0,za.jsxs)("div",{className:"flex items-center justify-between",children:[(0,za.jsxs)("h3",{className:"text-lg font-semibold text-gray-800",children:["\ud83d\udcc5 ",r]}),(0,za.jsxs)("span",{className:"bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded-full",children:[n.length," \xfcr\xfcn"]})]})}),(0,za.jsx)("div",{className:"p-6",children:(0,za.jsx)("div",{className:"grid"===A?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 2xl:grid-cols-4 gap-6":"space-y-4",children:n.map(t=>{var r,n;const s=Ce(t);return(0,za.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow ".concat("list"===A?"flex":""),children:[(0,za.jsx)("div",{className:"".concat("list"===A?"w-48 h-48 flex-shrink-0":"h-64"," bg-gray-100 relative overflow-hidden"),children:s?(0,za.jsx)("img",{src:e(s.file_path),alt:t.name,className:"w-full h-full object-contain bg-white",loading:"lazy",onError:e=>{e.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="100" height="100"%3E%3Crect fill="%23f3f4f6" width="100" height="100"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%239ca3af"%3ENo Image%3C/text%3E%3C/svg%3E'}}):(0,za.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,za.jsx)(Bi,{className:"w-8 h-8 text-gray-400"})})}),(0,za.jsxs)("div",{className:"p-4 ".concat("list"===A?"flex-1":""),children:[(0,za.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,za.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,za.jsx)("p",{className:"text-xs font-semibold text-blue-600 mb-1 truncate",title:t.brand_name||(null===(r=t.brand)||void 0===r?void 0:r.name),children:t.brand_name||(null===(n=t.brand)||void 0===n?void 0:n.name)||"Marka Yok"}),(0,za.jsx)("h3",{className:"font-medium text-gray-900 truncate",title:t.code,children:t.code.length>20?"".concat(t.code.substring(0,20),"..."):t.code}),(0,za.jsx)("p",{className:"text-sm text-gray-600 truncate",title:t.color,children:t.color&&t.color.length>15?"".concat(t.color.substring(0,15),"..."):t.color})]}),Se(t)]}),(0,za.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-3",children:[(0,za.jsxs)("span",{children:[(t.images||[]).length," g\xf6rsel"]}),(0,za.jsx)("span",{children:Ne(t)})]}),(0,za.jsxs)("div",{className:"space-y-1.5 mb-3",children:[(0,za.jsxs)("div",{className:"text-sm ".concat(t.product_type?"text-gray-600":"text-red-500 font-medium"),children:[(0,za.jsx)("span",{className:"font-medium text-gray-700",children:"Tip:"})," ",t.product_type||"\u274c Eksik"]}),(0,za.jsxs)("div",{className:"text-sm ".concat(t.size_range?"text-gray-600":"text-red-500 font-medium"),children:[(0,za.jsx)("span",{className:"font-medium text-gray-700",children:"Beden:"})," ",t.size_range||"\u274c Eksik"]}),(0,za.jsxs)("div",{className:"text-sm ".concat(t.price?"text-gray-600":"text-red-500 font-medium"),children:[(0,za.jsx)("span",{className:"font-medium text-gray-700",children:"Fiyat:"})," ",t.price?"$".concat(t.price):"\u274c Eksik"]})]}),(0,za.jsx)("div",{className:"flex items-center gap-2",children:(0,za.jsxs)("button",{onClick:()=>window.location.href="/admin/products/".concat(t.id),className:"btn btn-sm btn-secondary flex items-center gap-1",children:[(0,za.jsx)(ti,{size:14}),"Detay"]})})]})]},t.id)})})})]},r)})}):(0,za.jsx)("div",{className:"grid"===A?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 2xl:grid-cols-4 gap-6":"space-y-4",children:t.map(t=>{var r;const n=Ce(t);return(0,za.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow ".concat("list"===A?"flex":""),children:[(0,za.jsxs)("div",{className:"".concat("list"===A?"w-48 h-48 flex-shrink-0":"h-64"," bg-gray-100 relative overflow-hidden"),children:[n?(0,za.jsx)("img",{src:e(n.file_path),alt:t.name,className:"w-full h-full object-contain bg-white",loading:"lazy",onError:e=>{e.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="100" height="100"%3E%3Crect fill="%23f3f4f6" width="100" height="100"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%239ca3af"%3ENo Image%3C/text%3E%3C/svg%3E'}}):(0,za.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:(0,za.jsx)(Bi,{size:48,className:"text-gray-400"})}),(0,za.jsxs)("div",{className:"absolute top-2 right-2 bg-black bg-opacity-75 text-white text-xs px-2 py-1 rounded-full",children:[(null===(r=t.images)||void 0===r?void 0:r.length)||0," g\xf6rsel"]}),(0,za.jsxs)("div",{className:"absolute top-2 left-2 flex flex-col gap-1",children:[(!t.product_type||!t.color||!t.size_range||!t.price)&&(0,za.jsx)("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full font-medium",children:"\u274c Eksik"}),t.product_type&&t.color&&t.size_range&&t.price&&(0,za.jsx)("span",{className:"bg-green-500 text-white text-xs px-2 py-1 rounded-full font-medium",children:"\u2705 Tam"})]})]}),(0,za.jsxs)("div",{className:"p-4 ".concat("list"===A?"flex-1 flex flex-col justify-between":""),children:[(0,za.jsxs)("div",{className:"mb-3",children:[(0,za.jsx)("h3",{className:"font-semibold text-gray-900 text-lg mb-1",children:t.code}),(0,za.jsx)("p",{className:"text-gray-600 text-sm mb-2",children:t.name}),(0,za.jsx)("p",{className:"text-xs text-gray-500",children:t.brand_name})]}),(0,za.jsxs)("div",{className:"space-y-1 mb-4",children:[(0,za.jsxs)("div",{className:"text-sm ".concat(t.product_type?"text-gray-600":"text-red-500 font-medium"),children:[(0,za.jsx)("span",{className:"font-medium text-gray-700",children:"Tip:"})," ",t.product_type||"\u274c Eksik"]}),(0,za.jsxs)("div",{className:"text-sm ".concat(t.color?"text-gray-600":"text-red-500 font-medium"),children:[(0,za.jsx)("span",{className:"font-medium text-gray-700",children:"Renk:"})," ",t.color||"\u274c Eksik"]}),(0,za.jsxs)("div",{className:"text-sm ".concat(t.size_range?"text-gray-600":"text-red-500 font-medium"),children:[(0,za.jsx)("span",{className:"font-medium text-gray-700",children:"Beden:"})," ",t.size_range||"\u274c Eksik"]}),(0,za.jsxs)("div",{className:"text-sm ".concat(t.price?"text-gray-600":"text-red-500 font-medium"),children:[(0,za.jsx)("span",{className:"font-medium text-gray-700",children:"Fiyat:"})," ",t.price?"$".concat(t.price):"\u274c Eksik"]})]}),(0,za.jsx)("div",{className:"flex items-center gap-2",children:(0,za.jsxs)("button",{onClick:()=>window.location.href="/admin/products/".concat(t.id),className:"btn btn-sm btn-secondary flex items-center gap-1",children:[(0,za.jsx)(ti,{size:14}),"Detay"]})})]})]},t.id)})}),ae>1&&(0,za.jsx)("div",{className:"flex justify-center",children:(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)("button",{onClick:()=>z(Math.max(1,R-1)),disabled:1===R,className:"btn btn-sm btn-secondary",children:"\xd6nceki"}),(0,za.jsxs)("span",{className:"text-sm text-gray-600",children:["Sayfa ",R," / ",ae]}),(0,za.jsx)("button",{onClick:()=>z(Math.min(ae,R+1)),disabled:R===ae,className:"btn btn-sm btn-secondary",children:"Sonraki"})]})}),ne&&(0,za.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,za.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,za.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"G\xf6rsel Y\xfckle"}),(0,za.jsxs)("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg",children:[(0,za.jsx)("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Y\xfckleme Limitleri:"}),(0,za.jsxs)("div",{className:"text-xs text-blue-700 space-y-1",children:[(0,za.jsxs)("div",{children:["\u2022 Maksimum dosya say\u0131s\u0131: ",_," ",(0,za.jsx)("span",{className:"text-green-600",children:"\u26a1"})]}),(0,za.jsxs)("div",{children:["\u2022 Maksimum dosya boyutu: ",S," MB ",(0,za.jsx)("span",{className:"text-green-600",children:"\u26a1"})]}),(0,za.jsxs)("div",{children:["\u2022 Toplam y\xfckleme boyutu: ",C," MB ",(0,za.jsx)("span",{className:"text-green-600",children:"\u26a1"})]}),(0,za.jsx)("div",{className:"text-green-600 font-medium mt-2",children:"\ud83d\ude80 Optimize edilmi\u015f performans!"})]})]}),(0,za.jsx)("div",{className:"mb-4 p-3 bg-green-50 rounded-lg",children:(0,za.jsxs)("div",{className:"flex items-start gap-2",children:[(0,za.jsx)("div",{className:"text-green-600",children:"\u2139\ufe0f"}),(0,za.jsxs)("div",{className:"text-sm text-green-800",children:[(0,za.jsx)("p",{className:"font-medium",children:"Otomatik Marka Tespiti"}),(0,za.jsx)("p",{className:"mt-1",children:"Marka bilgisi etiketlerden otomatik olarak tespit edilecek. Sadece yetkili oldu\u011funuz markalar y\xfcklenecek."})]})]})}),(0,za.jsxs)("div",{className:"mb-4",children:[(0,za.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:[te.length," dosya se\xe7ildi",(()=>{const e=te.reduce((e,t)=>e+t.size/1048576,0);return(0,za.jsxs)("span",{className:"text-gray-500",children:[" ","(Toplam: ",e.toFixed(2)," MB)"]})})()]}),(0,za.jsxs)("div",{className:"max-h-32 overflow-y-auto border border-gray-200 rounded-lg p-2",children:[te.slice(0,10).map((e,t)=>{const r=e.size/1048576,n=r>S;return(0,za.jsxs)("div",{className:"text-xs truncate ".concat(n?"text-red-600":"text-gray-500"),children:[e.name," (",r.toFixed(2)," MB)",n&&(0,za.jsx)("span",{className:"text-red-600 font-medium",children:" - \xc7OK B\xdcY\xdcK!"})]},t)}),te.length>10&&(0,za.jsxs)("div",{className:"text-xs text-gray-400 italic",children:["... ve ",te.length-10," dosya daha"]})]})]}),d&&(0,za.jsxs)("div",{className:"mb-4",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,za.jsx)("span",{className:"text-sm text-gray-600",children:p}),(0,za.jsxs)("span",{className:"text-sm font-medium text-blue-600",children:[h,"%"]})]}),(0,za.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,za.jsx)("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300",style:{width:"".concat(h,"%")}})})]}),(0,za.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,za.jsx)("button",{onClick:()=>se(!1),className:"btn btn-secondary",disabled:d,children:"\u0130ptal"}),(0,za.jsx)("button",{onClick:async()=>{if(te.length)try{u(!0),m(0),g("".concat(te.length," dosya y\xfckleniyor..."));const e=await qo(te);if(e.job_id){localStorage.setItem("uploadJobId",e.job_id.toString()),localStorage.setItem("uploadProgress","0"),v(e.job_id.toString()),x(!0),y.current=!0;const t=async()=>{if(y.current)try{const r=await Xo(e.job_id),{status:n,processed_files:s,total_files:a,failed_files:i}=r,l=a>0?Math.round(s/a*100):0;m(l),"completed"===n?(g("Y\xfckleme tamamland\u0131! ".concat(s," dosya i\u015flendi")),x(!1),y.current=!1,localStorage.removeItem("uploadJobId"),localStorage.removeItem("uploadProgress"),v(null),e.incomplete_products&&e.incomplete_products.length>0?(oe(e.incomplete_products),de(!0),se(!1),_c.warning("K\u0131smi ba\u015far\u0131: ".concat(e.products_created," \xfcr\xfcn olu\u015fturuldu, ").concat(e.incomplete_products.length," \xfcr\xfcn eksik bilgi nedeniyle olu\u015fturulamad\u0131"))):(_c.success("".concat(e.products_created," \xfcr\xfcn ba\u015far\u0131yla olu\u015fturuldu")),re([]),se(!1),xe()),u(!1)):"failed"===n?(g("Y\xfckleme ba\u015far\u0131s\u0131z oldu"),x(!1),y.current=!1,localStorage.removeItem("uploadJobId"),localStorage.removeItem("uploadProgress"),v(null),_c.error("Y\xfckleme i\u015flemi ba\u015far\u0131s\u0131z oldu"),u(!1)):(g("".concat(s,"/").concat(a," dosya i\u015flendi (").concat(i," hata)")),y.current&&setTimeout(t,2e3))}catch(r){console.error("Progress polling error:",r),g("Y\xfckleme durumu kontrol edilemiyor"),y.current&&setTimeout(t,5e3)}};t()}else m(100),g("Y\xfckleme tamamland\u0131!"),e.success?e.incomplete_products&&e.incomplete_products.length>0?(oe(e.incomplete_products),de(!0),se(!1),_c.warning("K\u0131smi ba\u015far\u0131: ".concat(e.products_created," \xfcr\xfcn olu\u015fturuldu, ").concat(e.incomplete_products.length," \xfcr\xfcn eksik bilgi nedeniyle olu\u015fturulamad\u0131"))):(_c.success("".concat(e.products_created," \xfcr\xfcn ba\u015far\u0131yla olu\u015fturuldu")),re([]),se(!1),xe()):_c.error("Bilinmeyen hata olu\u015ftu"),u(!1)}catch(r){var e,t;const n=(null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Bilinmeyen hata";_c.custom(n,"error",5e3),console.error("Upload error:",r),u(!1),m(0),g(""),x(!1),y.current=!1}else _c.error("L\xfctfen y\xfcklenecek dosyalar\u0131 se\xe7in")},className:"btn btn-primary",disabled:d||te.length>_,children:d?"Y\xfckleniyor...":"Y\xfckle"})]})]})}),ce&&(0,za.jsx)(bc,{incompleteProducts:le,onComplete:async e=>{try{const t=await $o(e);t.success?(Ra.success("".concat(t.updated_count," \xfcr\xfcn bilgileri tamamland\u0131")),de(!1),oe([]),xe()):Ra.error("Bilgi tamamlama ba\u015far\u0131s\u0131z")}catch(t){Ra.error("Bilgi tamamlama s\u0131ras\u0131nda hata olu\u015ftu"),console.error("Complete error:",t)}},onCancel:()=>{de(!1),oe([])}})]})};function Sc(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Cc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nc(Object(r),!0).forEach(function(t){Sc(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nc(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Tc(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Ec(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}class Oc{constructor(){Sc(this,"browserShadowBlurConstant",1),Sc(this,"DPI",96),Sc(this,"devicePixelRatio","undefined"!=typeof window?window.devicePixelRatio:1),Sc(this,"perfLimitSizeTotal",2097152),Sc(this,"maxCacheSideLimit",4096),Sc(this,"minCacheSideLimit",256),Sc(this,"disableStyleCopyPaste",!1),Sc(this,"enableGLFiltering",!0),Sc(this,"textureSize",4096),Sc(this,"forceGLPutImageData",!1),Sc(this,"cachesBoundsOfCurve",!1),Sc(this,"fontPaths",{}),Sc(this,"NUM_FRACTION_DIGITS",4)}}const Pc=new class extends Oc{constructor(e){super(),this.configure(e)}configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this,e)}addFonts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.fontPaths=Cc(Cc({},this.fontPaths),e)}removeFonts(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(e=>{delete this.fontPaths[e]})}clearFonts(){this.fontPaths={}}restoreDefaults(e){const t=new Oc,r=(null==e?void 0:e.reduce((e,r)=>(e[r]=t[r],e),{}))||t;this.configure(r)}},Dc=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return console[e]("fabric",...r)};class Ac extends Error{constructor(e,t){super("fabric: ".concat(e),t)}}class Mc extends Ac{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}}class Rc{}class zc extends Rc{testPrecision(e,t){const r="precision ".concat(t," float;\nvoid main(){}"),n=e.createShader(e.FRAGMENT_SHADER);return!!n&&(e.shaderSource(n,r),e.compileShader(n),!!e.getShaderParameter(n,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(e=>this.testPrecision(t,e)),t.getExtension("WEBGL_lose_context").loseContext(),Dc("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const Fc={};let Lc;const Ic=()=>Lc||(Lc={document:document,window:window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new zc,dispose(){},copyPasteData:Fc}),Bc=()=>Ic().document,Hc=()=>Ic().window,Uc=()=>{var e;return Math.max(null!==(e=Pc.devicePixelRatio)&&void 0!==e?e:Hc().devicePixelRatio,1)},Wc=new class{constructor(){Sc(this,"charWidthsCache",{}),Sc(this,"boundsOfCurveCache",{})}getFontCache(e){let{fontFamily:t,fontStyle:r,fontWeight:n}=e;t=t.toLowerCase(),this.charWidthsCache[t]||(this.charWidthsCache[t]={});const s=this.charWidthsCache[t],a="".concat(r.toLowerCase(),"_").concat((n+"").toLowerCase());return s[a]||(s[a]={}),s[a]}clearFontCache(e){(e=(e||"").toLowerCase())?this.charWidthsCache[e]&&delete this.charWidthsCache[e]:this.charWidthsCache={}}limitDimsByArea(e){const{perfLimitSizeTotal:t}=Pc,r=Math.sqrt(t*e);return[Math.floor(r),Math.floor(t/r)]}},Kc="6.7.1";function Vc(){}const Yc=Math.PI/2,Gc=2*Math.PI,qc=Math.PI/180,Xc=Object.freeze([1,0,0,1,0,0]),$c=16,Jc=.4477152502,Qc="center",Zc="left",ed="top",td="bottom",rd="right",nd="none",sd=/\r?\n/,ad="moving",id="scaling",ld="rotating",od="rotate",cd="skewing",dd="resizing",ud="modifyPoly",hd="modifyPath",md="changed",pd="scale",gd="scaleX",fd="scaleY",xd="skewX",yd="skewY",bd="fill",vd="stroke",jd="modified",wd="json",_d="svg",kd=new class{constructor(){this[wd]=new Map,this[_d]=new Map}has(e){return this[wd].has(e)}getClass(e){const t=this[wd].get(e);if(!t)throw new Ac("No class registered for ".concat(e));return t}setClass(e,t){t?this[wd].set(t,e):(this[wd].set(e.type,e),this[wd].set(e.type.toLowerCase(),e))}getSVGClass(e){return this[_d].get(e)}setSVGClass(e,t){this[_d].set(null!=t?t:e.type.toLowerCase(),e)}},Sd=new class extends Array{remove(e){const t=this.indexOf(e);t>-1&&this.splice(t,1)}cancelAll(){const e=this.splice(0);return e.forEach(e=>e.abort()),e}cancelByCanvas(e){if(!e)return[];const t=this.filter(t=>{var r;return t.target===e||"object"==typeof t.target&&(null===(r=t.target)||void 0===r?void 0:r.canvas)===e});return t.forEach(e=>e.abort()),t}cancelByTarget(e){if(!e)return[];const t=this.filter(t=>t.target===e);return t.forEach(e=>e.abort()),t}};class Nd{constructor(){Sc(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),"object"==typeof e)return Object.entries(e).forEach(e=>{let[t,r]=e;this.on(t,r)}),()=>this.off(e);if(t){const r=e;return this.__eventListeners[r]||(this.__eventListeners[r]=[]),this.__eventListeners[r].push(t),()=>this.off(r,t)}return()=>!1}once(e,t){if("object"==typeof e){const t=[];return Object.entries(e).forEach(e=>{let[r,n]=e;t.push(this.once(r,n))}),()=>t.forEach(e=>e())}if(t){const r=this.on(e,function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];t.call(this,...n),r()});return r}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const r=this.__eventListeners[e],n=r.indexOf(t);n>-1&&r.splice(n,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(void 0===e)for(const r in this.__eventListeners)this._removeEventListener(r);else"object"==typeof e?Object.entries(e).forEach(e=>{let[t,r]=e;this._removeEventListener(t,r)}):this._removeEventListener(e,t)}fire(e,t){var r;if(!this.__eventListeners)return;const n=null===(r=this.__eventListeners[e])||void 0===r?void 0:r.concat();if(n)for(let s=0;s<n.length;s++)n[s].call(this,t||{})}}const Cd=(e,t)=>{const r=e.indexOf(t);return-1!==r&&e.splice(r,1),e},Td=e=>{if(0===e)return 1;switch(Math.abs(e)/Yc){case 1:case 3:return 0;case 2:return-1}return Math.cos(e)},Ed=e=>{if(0===e)return 0;const t=e/Yc,r=Math.sign(e);switch(t){case 1:return r;case 2:return 0;case 3:return-r}return Math.sin(e)};class Od{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;"object"==typeof e?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new Od(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new Od(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new Od(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new Od(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new Od(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new Od(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new Od(this.x/e.x,this.y/e.y)}scalarDivide(e){return new Od(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new Od(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)}midPointFrom(e){return this.lerp(e)}min(e){return new Od(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new Od(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,r=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=r}clone(){return new Od(this.x,this.y)}rotate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pd;const r=Ed(e),n=Td(e),s=this.subtract(t);return new Od(s.x*n-s.y*r,s.x*r+s.y*n).add(t)}transform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Od(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}}const Pd=new Od(0,0),Dd=e=>!!e&&Array.isArray(e._objects);function Ad(e){class t extends e{constructor(){super(...arguments),Sc(this,"_objects",[])}_onObjectAdded(e){}_onObjectRemoved(e){}_onStackOrderChanged(e){}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=this._objects.push(...t);return t.forEach(e=>this._onObjectAdded(e)),n}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return this._objects.splice(e,0,...r),r.forEach(e=>this._onObjectAdded(e)),this._objects.length}remove(){const e=this._objects,t=[];for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return n.forEach(r=>{const n=e.indexOf(r);-1!==n&&(e.splice(n,1),t.push(r),this._onObjectRemoved(r))}),t}forEachObject(e){this.getObjects().forEach((t,r,n)=>e(t,r,n))}getObjects(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?[...this._objects]:this._objects.filter(e=>e.isType(...t))}item(e){return this._objects[e]}isEmpty(){return 0===this._objects.length}size(){return this._objects.length}contains(e,r){return!!this._objects.includes(e)||!!r&&this._objects.some(r=>r instanceof t&&r.contains(e,!0))}complexity(){return this._objects.reduce((e,t)=>e+(t.complexity?t.complexity():0),0)}sendObjectToBack(e){return!(!e||e===this._objects[0])&&(Cd(this._objects,e),this._objects.unshift(e),this._onStackOrderChanged(e),!0)}bringObjectToFront(e){return!(!e||e===this._objects[this._objects.length-1])&&(Cd(this._objects,e),this._objects.push(e),this._onStackOrderChanged(e),!0)}sendObjectBackwards(e,t){if(!e)return!1;const r=this._objects.indexOf(e);if(0!==r){const n=this.findNewLowerIndex(e,r,t);return Cd(this._objects,e),this._objects.splice(n,0,e),this._onStackOrderChanged(e),!0}return!1}bringObjectForward(e,t){if(!e)return!1;const r=this._objects.indexOf(e);if(r!==this._objects.length-1){const n=this.findNewUpperIndex(e,r,t);return Cd(this._objects,e),this._objects.splice(n,0,e),this._onStackOrderChanged(e),!0}return!1}moveObjectTo(e,t){return e!==this._objects[t]&&(Cd(this._objects,e),this._objects.splice(t,0,e),this._onStackOrderChanged(e),!0)}findNewLowerIndex(e,t,r){let n;if(r){n=t;for(let r=t-1;r>=0;--r)if(e.isOverlapping(this._objects[r])){n=r;break}}else n=t-1;return n}findNewUpperIndex(e,t,r){let n;if(r){n=t;for(let r=t+1;r<this._objects.length;++r)if(e.isOverlapping(this._objects[r])){n=r;break}}else n=t+1;return n}collectObjects(e){let{left:t,top:r,width:n,height:s}=e,{includeIntersecting:a=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=[],l=new Od(t,r),o=l.add(new Od(n,s));for(let c=this._objects.length-1;c>=0;c--){const e=this._objects[c];e.selectable&&e.visible&&(a&&e.intersectsWithRect(l,o)||e.isContainedWithinRect(l,o)||a&&e.containsPoint(l)||a&&e.containsPoint(o))&&i.push(e)}return i}}return t}class Md extends Nd{_setOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return"object"==typeof e?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return"boolean"==typeof t&&this.set(e,!t),this}get(e){return this[e]}}function Rd(e){return Hc().requestAnimationFrame(e)}function zd(e){return Hc().cancelAnimationFrame(e)}let Fd=0;const Ld=()=>Fd++,Id=()=>{const e=Bc().createElement("canvas");if(!e||void 0===e.getContext)throw new Ac("Failed to create `canvas` element");return e},Bd=()=>Bc().createElement("img"),Hd=e=>{const t=Id();return t.width=e.width,t.height=e.height,t},Ud=(e,t,r)=>e.toDataURL("image/".concat(t),r),Wd=(e,t,r)=>new Promise((n,s)=>{e.toBlob(n,"image/".concat(t),r)}),Kd=e=>e*qc,Vd=e=>e/qc,Yd=e=>e.every((e,t)=>e===Xc[t]),Gd=(e,t,r)=>new Od(e).transform(t,r),qd=e=>{const t=1/(e[0]*e[3]-e[1]*e[2]),r=[t*e[3],-t*e[1],-t*e[2],t*e[0],0,0],{x:n,y:s}=new Od(e[4],e[5]).transform(r,!0);return r[4]=-n,r[5]=-s,r},Xd=(e,t,r)=>[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],r?0:e[0]*t[4]+e[2]*t[5]+e[4],r?0:e[1]*t[4]+e[3]*t[5]+e[5]],$d=(e,t)=>e.reduceRight((e,r)=>r&&e?Xd(r,e,t):r||e,void 0)||Xc.concat(),Jd=e=>{let[t,r]=e;return Math.atan2(r,t)},Qd=e=>{const t=Jd(e),r=Math.pow(e[0],2)+Math.pow(e[1],2),n=Math.sqrt(r),s=(e[0]*e[3]-e[2]*e[1])/n,a=Math.atan2(e[0]*e[2]+e[1]*e[3],r);return{angle:Vd(t),scaleX:n,scaleY:s,skewX:Vd(a),skewY:0,translateX:e[4]||0,translateY:e[5]||0}},Zd=function(e){return[1,0,0,1,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0]};function eu(){let{angle:e=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{x:t=0,y:r=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Kd(e),s=Td(n),a=Ed(n);return[s,a,-a,s,t?t-(s*t-a*r):0,r?r-(a*t+s*r):0]}const tu=function(e){return[e,0,0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,0,0]},ru=e=>Math.tan(Kd(e)),nu=e=>[1,0,ru(e),1,0,0],su=e=>[1,ru(e),0,1,0,0],au=e=>{let{scaleX:t=1,scaleY:r=1,flipX:n=!1,flipY:s=!1,skewX:a=0,skewY:i=0}=e,l=tu(n?-t:t,s?-r:r);return a&&(l=Xd(l,nu(a),!0)),i&&(l=Xd(l,su(i),!0)),l},iu=e=>{const{translateX:t=0,translateY:r=0,angle:n=0}=e;let s=Zd(t,r);n&&(s=Xd(s,eu({angle:n})));const a=au(e);return Yd(a)||(s=Xd(s,a)),s},lu=function(e){let{signal:t,crossOrigin:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,s){if(t&&t.aborted)return s(new Mc("loadImage"));const a=Bd();let i;t&&(i=function(e){a.src="",s(e)},t.addEventListener("abort",i,{once:!0}));const l=function(){a.onload=a.onerror=null,i&&(null==t||t.removeEventListener("abort",i)),n(a)};e?(a.onload=l,a.onerror=function(){i&&(null==t||t.removeEventListener("abort",i)),s(new Ac("Error loading ".concat(a.src)))},r&&(a.crossOrigin=r),a.src=e):l()})},ou=function(e){let{signal:t,reviver:r=Vc}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((n,s)=>{const a=[];t&&t.addEventListener("abort",s,{once:!0}),Promise.all(e.map(e=>kd.getClass(e.type).fromObject(e,{signal:t}).then(t=>(r(e,t),a.push(t),t)))).then(n).catch(e=>{a.forEach(e=>{e.dispose&&e.dispose()}),s(e)}).finally(()=>{t&&t.removeEventListener("abort",s)})})},cu=function(e){let{signal:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((r,n)=>{const s=[];t&&t.addEventListener("abort",n,{once:!0});const a=Object.values(e).map(e=>e&&e.type&&kd.has(e.type)?ou([e],{signal:t}).then(e=>{let[t]=e;return s.push(t),t}):e),i=Object.keys(e);Promise.all(a).then(e=>e.reduce((e,t,r)=>(e[i[r]]=t,e),{})).then(r).catch(e=>{s.forEach(e=>{e.dispose&&e.dispose()}),n(e)}).finally(()=>{t&&t.removeEventListener("abort",n)})})},du=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).reduce((t,r)=>(r in e&&(t[r]=e[r]),t),{})},uu=(e,t)=>Object.keys(e).reduce((r,n)=>(t(e[n],n,e)&&(r[n]=e[n]),r),{}),hu=(e,t)=>parseFloat(Number(e).toFixed(t)),mu=e=>"matrix("+e.map(e=>hu(e,Pc.NUM_FRACTION_DIGITS)).join(" ")+")",pu=e=>!!e&&void 0!==e.toLive,gu=e=>!!e&&"function"==typeof e.toObject,fu=e=>!!e&&void 0!==e.offsetX&&"source"in e,xu=e=>!!e&&"multiSelectionStacking"in e;function yu(e){const t=e&&bu(e);let r=0,n=0;if(!e||!t)return{left:r,top:n};let s=e;const a=t.documentElement,i=t.body||{scrollLeft:0,scrollTop:0};for(;s&&(s.parentNode||s.host)&&(s=s.parentNode||s.host,s===t?(r=i.scrollLeft||a.scrollLeft||0,n=i.scrollTop||a.scrollTop||0):(r+=s.scrollLeft||0,n+=s.scrollTop||0),1!==s.nodeType||"fixed"!==s.style.position););return{left:r,top:n}}const bu=e=>e.ownerDocument||null,vu=e=>{var t;return(null===(t=e.ownerDocument)||void 0===t?void 0:t.defaultView)||null},ju=function(e,t,r){let{width:n,height:s}=r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;e.width=n,e.height=s,a>1&&(e.setAttribute("width",(n*a).toString()),e.setAttribute("height",(s*a).toString()),t.scale(a,a))},wu=(e,t)=>{let{width:r,height:n}=t;r&&(e.style.width="number"==typeof r?"".concat(r,"px"):r),n&&(e.style.height="number"==typeof n?"".concat(n,"px"):n)};function _u(e){return void 0!==e.onselectstart&&(e.onselectstart=()=>!1),e.style.userSelect=nd,e}class ku{constructor(e){Sc(this,"_originalCanvasStyle",void 0),Sc(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(r=e)&&void 0!==r.getContext?e:e&&Bc().getElementById(e)||Id();var r;if(t.hasAttribute("data-fabric"))throw new Ac("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:r}=e;const{el:n}=this.lower;n.classList.remove("lower-canvas"),n.removeAttribute("data-fabric"),n.setAttribute("width","".concat(t)),n.setAttribute("height","".concat(r)),n.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:r,ctx:n}=this.lower;ju(r,n,e,t)}setCSSDimensions(e){wu(this.lower.el,e)}calcOffset(){return function(e){var t;const r=e&&bu(e),n={left:0,top:0};if(!r)return n;const s=(null===(t=vu(e))||void 0===t?void 0:t.getComputedStyle(e,null))||{};n.left+=parseInt(s.borderLeftWidth,10)||0,n.top+=parseInt(s.borderTopWidth,10)||0,n.left+=parseInt(s.paddingLeft,10)||0,n.top+=parseInt(s.paddingTop,10)||0;let a={left:0,top:0};const i=r.documentElement;void 0!==e.getBoundingClientRect&&(a=e.getBoundingClientRect());const l=yu(e);return{left:a.left+l.left-(i.clientLeft||0)+n.left,top:a.top+l.top-(i.clientTop||0)+n.top}}(this.lower.el)}dispose(){Ic().dispose(this.lower.el),delete this.lower}}const Su={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...Xc]};class Nu extends(Ad(Md)){get lowerCanvasEl(){var e;return null===(e=this.elements.lower)||void 0===e?void 0:e.el}get contextContainer(){var e;return null===(e=this.elements.lower)||void 0===e?void 0:e.ctx}static getDefaults(){return Nu.ownDefaults}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new ku(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const s=super.insertAt(e,...r);return r.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),s}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(Dc("warn","Canvas is trying to add an object that belongs to a different canvas.\nResulting to default behavior: removing object from previous canvas and adding to new canvas"),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?Uc():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t){const t=Cc({width:this.width,height:this.height},e);this.elements.setDimensions(t,this.getRetinaScaling()),this.hasLostContext=!0,this.width=t.width,this.height=t.height}r||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const r=e,n=[...this.viewportTransform],s=Gd(e,qd(n));n[0]=t,n[3]=t;const a=Gd(s,n);n[4]+=r.x-a.x,n[5]+=r.y-a.y,this.setViewportTransform(n)}setZoom(e){this.zoomToPoint(new Od(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new Od(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=Rd(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,r=qd(this.viewportTransform),n=Gd({x:0,y:0},r),s=Gd({x:e,y:t},r),a=n.min(s),i=n.max(s);return this.vptCoords={tl:a,tr:new Od(i.x,a.y),bl:new Od(a.x,i.y),br:i}}cancelRequestedRender(){this.nextRenderHandle&&(zd(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const r=this.viewportTransform,n=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),n&&(n._set("canvas",this),n.shouldCache(),n._transformDone=!0,n.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,n)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const r=this.viewportTransform;e.save(),e.transform(...r),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let r=0,n=t.length;r<n;++r)t[r]&&t[r].render(e)}_renderBackgroundOrOverlay(e,t){const r=this["".concat(t,"Color")],n=this["".concat(t,"Image")],s=this.viewportTransform,a=this["".concat(t,"Vpt")];if(!r&&!n)return;const i=pu(r);if(r){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=i?r.toLive(e):r,a&&e.transform(...s),i){e.transform(1,0,0,1,r.offsetX||0,r.offsetY||0);const t=r.gradientTransform||r.patternTransform;t&&e.transform(...t)}e.fill(),e.restore()}if(n){e.save();const{skipOffscreen:t}=this;this.skipOffscreen=a,a&&e.transform(...s),n.render(e),this.skipOffscreen=t,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new Od(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new Od(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new Od(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new Od(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new Od(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return Gd(this.getCenterPoint(),qd(this.viewportTransform))}_centerObject(e,t){e.setXY(t,Qc,Qc),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const r=this.clipPath,n=r&&!r.excludeFromExport?this._toObject(r,e,t):null;return Cc(Cc(Cc({version:Kc},du(this,t)),{},{objects:this._objects.filter(e=>!e.excludeFromExport).map(r=>this._toObject(r,e,t))},this.__serializeBgOverlay(e,t)),n?{clipPath:n}:null)}_toObject(e,t,r){let n;this.includeDefaultValues||(n=e.includeDefaultValues,e.includeDefaultValues=!1);const s=e[t](r);return this.includeDefaultValues||(e.includeDefaultValues=!!n),s}__serializeBgOverlay(e,t){const r={},n=this.backgroundImage,s=this.overlayImage,a=this.backgroundColor,i=this.overlayColor;return pu(a)?a.excludeFromExport||(r.background=a.toObject(t)):a&&(r.background=a),pu(i)?i.excludeFromExport||(r.overlay=i.toObject(t)):i&&(r.overlay=i),n&&!n.excludeFromExport&&(r.backgroundImage=this._toObject(n,e,t)),s&&!s.excludeFromExport&&(r.overlayImage=this._toObject(s,e,t)),r}toSVG(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const r=[];return this._setSVGPreamble(r,e),this._setSVGHeader(r,e),this.clipPath&&r.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,')" >\n')),this._setSVGBgOverlayColor(r,"background"),this._setSVGBgOverlayImage(r,"backgroundImage",t),this._setSVGObjects(r,t),this.clipPath&&r.push("</g>\n"),this._setSVGBgOverlayColor(r,"overlay"),this._setSVGBgOverlayImage(r,"overlayImage",t),r.push("</svg>"),r.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')}_setSVGHeader(e,t){const r=t.width||"".concat(this.width),n=t.height||"".concat(this.height),s=Pc.NUM_FRACTION_DIGITS,a=t.viewBox;let i;if(a)i='viewBox="'.concat(a.x," ").concat(a.y," ").concat(a.width," ").concat(a.height,'" ');else if(this.svgViewportTransformation){const e=this.viewportTransform;i='viewBox="'.concat(hu(-e[4]/e[0],s)," ").concat(hu(-e[5]/e[3],s)," ").concat(hu(this.width/e[0],s)," ").concat(hu(this.height/e[3],s),'" ')}else i='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',n,'" ',i,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",Kc,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),"</defs>\n")}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(Ld()),'<clipPath id="'.concat(t.clipPathId,'" >\n').concat(t.toClipPathSVG(e.reviver),"</clipPath>\n")):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(pu(t)){const r=this["".concat(e,"Vpt")],n=this.viewportTransform,s={isType:()=>!1,width:this.width/(r?n[0]:1),height:this.height/(r?n[3]:1)};return t.toSVG(s,{additionalTransform:r?mu(n):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},r=Pc.fontPaths;this._objects.forEach(function t(r){e.push(r),Dd(r)&&r._objects.forEach(t)}),e.forEach(e=>{if(!(n=e)||"function"!=typeof n._renderText)return;var n;const{styles:s,fontFamily:a}=e;!t[a]&&r[a]&&(t[a]=!0,s&&Object.values(s).forEach(e=>{Object.values(e).forEach(e=>{let{fontFamily:n=""}=e;!t[n]&&r[n]&&(t[n]=!0)})}))});const n=Object.keys(t).map(e=>"\t\t@font-face {\n\t\t\tfont-family: '".concat(e,"';\n\t\t\tsrc: url('").concat(r[e],"');\n\t\t}\n")).join("");return n?'\t<style type="text/css"><![CDATA[\n'.concat(n,"]]></style>\n"):""}_setSVGObjects(e,t){this.forEachObject(r=>{r.excludeFromExport||this._setSVGObject(e,r,t)})}_setSVGObject(e,t,r){e.push(t.toSVG(r))}_setSVGBgOverlayImage(e,t,r){const n=this[t];n&&!n.excludeFromExport&&n.toSVG&&e.push(n.toSVG(r))}_setSVGBgOverlayColor(e,t){const r=this["".concat(t,"Color")];if(r)if(pu(r)){const n=r.repeat||"",s=this.width,a=this.height,i=this["".concat(t,"Vpt")]?mu(qd(this.viewportTransform)):"";e.push('<rect transform="'.concat(i," translate(").concat(s/2,",").concat(a/2,')" x="').concat(r.offsetX-s/2,'" y="').concat(r.offsetY-a/2,'" width="').concat("repeat-y"!==n&&"no-repeat"!==n||!fu(r)?s:r.source.width,'" height="').concat("repeat-x"!==n&&"no-repeat"!==n||!fu(r)?a:r.source.height,'" fill="url(#SVGID_').concat(r.id,')"></rect>\n'))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',r,'"',"></rect>\n")}loadFromJSON(e,t){let{signal:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return Promise.reject(new Ac("`json` is undefined"));const n="string"==typeof e?JSON.parse(e):e,{objects:s=[],backgroundImage:a,background:i,overlayImage:l,overlay:o,clipPath:c}=n,d=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([ou(s,{reviver:t,signal:r}),cu({backgroundImage:a,backgroundColor:i,overlayImage:l,overlayColor:o,clipPath:c},{signal:r})]).then(e=>{let[t,r]=e;return this.clear(),this.add(...t),this.set(n),this.set(r),this.renderOnAddRemove=d,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=Hd(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{format:t="png",quality:r=1,multiplier:n=1,enableRetinaScaling:s=!1}=e,a=n*(s?this.getRetinaScaling():1);return Ud(this.toCanvasElement(a,e),t,r)}toBlob(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{format:t="png",quality:r=1,multiplier:n=1,enableRetinaScaling:s=!1}=e,a=n*(s?this.getRetinaScaling():1);return Wd(this.toCanvasElement(a,e),t,r)}toCanvasElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,{width:t,height:r,left:n,top:s,filter:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=(t||this.width)*e,l=(r||this.height)*e,o=this.getZoom(),c=this.width,d=this.height,u=this.skipControlsDrawing,h=o*e,m=this.viewportTransform,p=[h,0,0,h,(m[4]-(n||0))*e,(m[5]-(s||0))*e],g=this.enableRetinaScaling,f=Hd({width:i,height:l}),x=a?this._objects.filter(e=>a(e)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=p,this.width=i,this.height=l,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(f.getContext("2d"),x),this.viewportTransform=m,this.width=c,this.height=d,this.calcViewportBoundaries(),this.enableRetinaScaling=g,this.skipControlsDrawing=u,f}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),Sd.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const r=()=>{this.destroy(),e(!0)};r.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=r:r()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}Sc(Nu,"ownDefaults",Su);const Cu=["touchstart","touchmove","touchend"],Tu=e=>{const t=yu(e.target),r=function(e){const t=e.changedTouches;return t&&t[0]?t[0]:e}(e);return new Od(r.clientX+t.left,r.clientY+t.top)},Eu=e=>Cu.includes(e.type)||"touch"===e.pointerType,Ou=e=>{e.preventDefault(),e.stopPropagation()},Pu=e=>{let t=0,r=0,n=0,s=0;for(let a=0,i=e.length;a<i;a++){const{x:i,y:l}=e[a];(i>n||!a)&&(n=i),(i<t||!a)&&(t=i),(l>s||!a)&&(s=l),(l<r||!a)&&(r=l)}return{left:t,top:r,width:n-t,height:s-r}},Du=["translateX","translateY","scaleX","scaleY"],Au=(e,t)=>Mu(e,Xd(t,e.calcOwnMatrix())),Mu=(e,t)=>{const r=Qd(t),{translateX:n,translateY:s,scaleX:a,scaleY:i}=r,l=Tc(r,Du),o=new Od(n,s);e.flipX=!1,e.flipY=!1,Object.assign(e,l),e.set({scaleX:a,scaleY:i}),e.setPositionByOrigin(o,Qc,Qc)},Ru=e=>{e.scaleX=1,e.scaleY=1,e.skewX=0,e.skewY=0,e.flipX=!1,e.flipY=!1,e.rotate(0)},zu=e=>({scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,angle:e.angle,left:e.left,flipX:e.flipX,flipY:e.flipY,top:e.top}),Fu=(e,t,r)=>{const n=e/2,s=t/2,a=[new Od(-n,-s),new Od(n,-s),new Od(-n,s),new Od(n,s)].map(e=>e.transform(r)),i=Pu(a);return new Od(i.width,i.height)},Lu=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xc;return Xd(qd(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xc),e)},Iu=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xc,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xc;return e.transform(Lu(t,r))},Bu=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xc,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xc;return e.transform(Lu(t,r),!0)},Hu=(e,t,r)=>{const n=Lu(t,r);return Mu(e,Xd(n,e.calcOwnMatrix())),n},Uu=(e,t)=>{var r;const{transform:{target:n}}=t;null===(r=n.canvas)||void 0===r||r.fire("object:".concat(e),Cc(Cc({},t),{},{target:n})),n.fire(e,t)},Wu={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Ku=e=>"string"==typeof e?Wu[e]:e-.5,Vu="not-allowed";function Yu(e){return Ku(e.originX)===Ku(Qc)&&Ku(e.originY)===Ku(Qc)}function Gu(e){return.5-Ku(e)}const qu=(e,t)=>e[t],Xu=(e,t,r,n)=>({e:e,transform:t,pointer:new Od(r,n)});function $u(e,t){const r=e.getTotalAngle()+Vd(Math.atan2(t.y,t.x))+360;return Math.round(r%360/45)}function Ju(e,t,r,n,s){var a;let{target:i,corner:l}=e;const o=i.controls[l],c=(null===(a=i.canvas)||void 0===a?void 0:a.getZoom())||1,d=i.padding/c,u=function(e,t,r,n){const s=e.getRelativeCenterPoint(),a=void 0!==r&&void 0!==n?e.translateToGivenOrigin(s,Qc,Qc,r,n):new Od(e.left,e.top);return(e.angle?t.rotate(-Kd(e.angle),s):t).subtract(a)}(i,new Od(n,s),t,r);return u.x>=d&&(u.x-=d),u.x<=-d&&(u.x+=d),u.y>=d&&(u.y-=d),u.y<=d&&(u.y+=d),u.x-=o.offsetX,u.y-=o.offsetY,u}const Qu=(e,t,r,n)=>{const{target:s,offsetX:a,offsetY:i}=t,l=r-a,o=n-i,c=!qu(s,"lockMovementX")&&s.left!==l,d=!qu(s,"lockMovementY")&&s.top!==o;return c&&s.set(Zc,l),d&&s.set(ed,o),(c||d)&&Uu(ad,Xu(e,t,r,n)),c||d},Zu={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},eh=(e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e),th=(e,t,r,n)=>{e/=255,t/=255,r/=255;const s=Math.max(e,t,r),a=Math.min(e,t,r);let i,l;const o=(s+a)/2;if(s===a)i=l=0;else{const n=s-a;switch(l=o>.5?n/(2-s-a):n/(s+a),s){case e:i=(t-r)/n+(t<r?6:0);break;case t:i=(r-e)/n+2;break;case r:i=(e-t)/n+4}i/=6}return[Math.round(360*i),Math.round(100*l),Math.round(100*o),n]},rh=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1";return parseFloat(e)/(e.endsWith("%")?100:1)},nh=e=>Math.min(Math.round(e),255).toString(16).toUpperCase().padStart(2,"0"),sh=e=>{let[t,r,n,s=1]=e;const a=Math.round(.3*t+.59*r+.11*n);return[a,a,a,s]};class ah{constructor(e){if(Sc(this,"isUnrecognised",!1),e)if(e instanceof ah)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,r,n,s=1]=e;this.setSource([t,r,n,s])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in Zu&&(e=Zu[e]),"transparent"===e?[255,255,255,0]:ah.sourceFromHex(e)||ah.sourceFromRgb(e)||ah.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,r]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(r,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,r]=th(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(r,"%)")}toHsla(){const[e,t,r,n]=th(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(r,"%,").concat(n,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,r,n]=this.getSource();return"".concat(nh(e)).concat(nh(t)).concat(nh(r)).concat(nh(Math.round(255*n)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(sh(this.getSource())),this}toBlackWhite(e){const[t,,,r]=sh(this.getSource()),n=t<(e||127)?0:255;return this.setSource([n,n,n,r]),this}overlayWith(e){e instanceof ah||(e=new ah(e));const t=this.getSource(),r=e.getSource(),[n,s,a]=t.map((e,t)=>Math.round(.5*e+.5*r[t]));return this.setSource([n,s,a,t[3]]),this}static fromRgb(e){return ah.fromRgba(e)}static fromRgba(e){return new ah(ah.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[e,r,n]=t.slice(1,4).map(e=>{const t=parseFloat(e);return e.endsWith("%")?Math.round(2.55*t):t});return[e,r,n,rh(t[4])]}}static fromHsl(e){return ah.fromHsla(e)}static fromHsla(e){return new ah(ah.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const r=(ah.parseAngletoDegrees(t[1])%360+360)%360/360,n=parseFloat(t[2])/100,s=parseFloat(t[3])/100;let a,i,l;if(0===n)a=i=l=s;else{const e=s<=.5?s*(n+1):s+n-s*n,t=2*s-e;a=eh(t,e,r+1/3),i=eh(t,e,r),l=eh(t,e,r-1/3)}return[Math.round(255*a),Math.round(255*i),Math.round(255*l),rh(t[4])]}static fromHex(e){return new ah(ah.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let r;r=t.length<=4?t.split("").map(e=>e+e):t.match(/.{2}/g);const[n,s,a,i=255]=r.map(e=>parseInt(e,16));return[n,s,a,i/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),r=parseFloat(t);return t.includes("rad")?Vd(r):t.includes("turn")?360*r:r}}const ih=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$c;const r=/\D{0,2}$/.exec(e),n=parseFloat(e),s=Pc.DPI;switch(null==r?void 0:r[0]){case"mm":return n*s/25.4;case"cm":return n*s/2.54;case"in":return n*s;case"pt":return n*s/72;case"pc":return n*s/72*12;case"em":return n*t;default:return n}},lh=e=>{const[t,r]=e.trim().split(" "),[n,s]=(a=t)&&a!==nd?[a.slice(1,4),a.slice(5,8)]:a===nd?[a,a]:["Mid","Mid"];var a;return{meetOrSlice:r||"meet",alignX:n,alignY:s}},oh=function(e,t){let r,n,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t)if(t.toLive)r="url(#SVGID_".concat(t.id,")");else{const e=new ah(t),s=e.getAlpha();r=e.toRgb(),1!==s&&(n=s.toString())}else r="none";return s?"".concat(e,": ").concat(r,"; ").concat(n?"".concat(e,"-opacity: ").concat(n,"; "):""):"".concat(e,'="').concat(r,'" ').concat(n?"".concat(e,'-opacity="').concat(n,'" '):"")};class ch{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",n=this.strokeDashArray?this.strokeDashArray.join(" "):nd,s=this.strokeDashOffset?this.strokeDashOffset:"0",a=this.strokeLineCap?this.strokeLineCap:"butt",i=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",o=void 0!==this.opacity?this.opacity:"1",c=this.visible?"":" visibility: hidden;",d=e?"":this.getSvgFilter(),u=oh(bd,this.fill);return[oh(vd,this.stroke),"stroke-width: ",r,"; ","stroke-dasharray: ",n,"; ","stroke-linecap: ",a,"; ","stroke-dashoffset: ",s,"; ","stroke-linejoin: ",i,"; ","stroke-miterlimit: ",l,"; ",u,"fill-rule: ",t,"; ","opacity: ",o,";",d,c].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const r=e?this.calcTransformMatrix():this.calcOwnMatrix(),n='transform="'.concat(mu(r));return"".concat(n).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:r=""}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),s=e.indexOf("COMMON_PARTS");return e[s]=n,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:r,withShadow:n,additionalTransform:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=t?"":'style="'.concat(this.getSvgStyles(),'" '),i=n?'style="'.concat(this.getSvgFilter(),'" '):"",l=this.clipPath,o=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",c=l&&l.absolutePositioned,d=this.stroke,u=this.fill,h=this.shadow,m=[],p=e.indexOf("COMMON_PARTS");let g;l&&(l.clipPathId="CLIPPATH_".concat(Ld()),g='<clipPath id="'.concat(l.clipPathId,'" >\n').concat(l.toClipPathSVG(r),"</clipPath>\n")),c&&m.push("<g ",i,this.getSvgCommons()," >\n"),m.push("<g ",this.getSvgTransform(!1),c?"":i+this.getSvgCommons()," >\n");const f=[a,o,t?"":this.addPaintOrder()," ",s?'transform="'.concat(s,'" '):""].join("");return e[p]=f,pu(u)&&m.push(u.toSVG(this)),pu(d)&&m.push(d.toSVG(this)),h&&m.push(h.toSVG(this)),l&&m.push(g),m.push(e.join("")),m.push("</g>\n"),c&&m.push("</g>\n"),r?r(m.join("")):m.join("")}addPaintOrder(){return this.paintFirst!==bd?' paint-order="'.concat(this.paintFirst,'" '):""}}function dh(e){return new RegExp("^("+e.join("|")+")\\b","i")}const uh="textDecorationThickness",hh=["fontSize","fontWeight","fontFamily","fontStyle"],mh=["underline","overline","linethrough"],ph=[...hh,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],gh=[...ph,...mh,"textBackgroundColor","direction",uh],fh=[...hh,...mh,vd,"strokeWidth",bd,"deltaY","textBackgroundColor",uh],xh={_reNewline:sd,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:Zc,fontStyle:"normal",lineHeight:1.16,textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:Zc,pathAlign:"baseline",charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.28167,overline:-.81333},_fontSizeMult:1.13,[uh]:66.667},yh="justify",bh="justify-left",vh="justify-right",jh="justify-center";var wh,_h,kh;const Sh=String.raw(wh||(wh=Ec(["[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?"],["[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?"]))),Nh=String.raw(_h||(_h=Ec(["(?:s*,?s+|s*,s*)"],["(?:\\s*,?\\s+|\\s*,\\s*)"]))),Ch=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+Sh+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+Sh+"))?\\s+(.*)"),Th={cx:Zc,x:Zc,r:"radius",cy:ed,y:ed,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing","text-decoration-thickness":uh},Eh="font-size",Oh="clip-path",Ph=(dh(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),dh(["symbol","image","marker","pattern","view","svg"]),dh(["symbol","g","a","svg","clipPath","defs"])),Dh=(new RegExp(String.raw(kh||(kh=Ec(["^s*(",")","(",")","(",")","(",")s*$"],["^\\s*(",")","(",")","(",")","(",")\\s*$"])),Sh,Nh,Sh,Nh,Sh,Nh,Sh)),new Od(1,0)),Ah=new Od,Mh=(e,t)=>e.rotate(t),Rh=(e,t)=>new Od(t).subtract(e),zh=e=>e.distanceFrom(Ah),Fh=(e,t)=>Math.atan2(Hh(e,t),Uh(e,t)),Lh=e=>Fh(Dh,e),Ih=e=>e.eq(Ah)?e:e.scalarDivide(zh(e)),Bh=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Ih(new Od(-e.y,e.x).scalarMultiply(t?1:-1))},Hh=(e,t)=>e.x*t.y-e.y*t.x,Uh=(e,t)=>e.x*t.x+e.y*t.y,Wh=(e,t,r)=>{if(e.eq(t)||e.eq(r))return!0;const n=Hh(t,r),s=Hh(t,e),a=Hh(r,e);return n>=0?s>=0&&a<=0:!(s<=0&&a>=0)},Kh="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",Vh=new RegExp("(?:\\s|^)"+Kh+Kh+"("+Sh+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class Yh{constructor(e){const t="string"==typeof e?Yh.parseShadow(e):e;Object.assign(this,Yh.ownDefaults,t),this.id=Ld()}static parseShadow(e){const t=e.trim(),[,r=0,n=0,s=0]=(Vh.exec(t)||[]).map(e=>parseFloat(e)||0);return{color:(t.replace(Vh,"")||"rgb(0,0,0)").trim(),offsetX:r,offsetY:n,blur:s}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=Mh(new Od(this.offsetX,this.offsetY),Kd(-e.angle)),r=new ah(this.color);let n=40,s=40;return e.width&&e.height&&(n=100*hu((Math.abs(t.x)+this.blur)/e.width,Pc.NUM_FRACTION_DIGITS)+20,s=100*hu((Math.abs(t.y)+this.blur)/e.height,Pc.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(s,'%" height="').concat(100+2*s,'%" x="-').concat(n,'%" width="').concat(100+2*n,'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="').concat(hu(this.blur?this.blur/2:0,Pc.NUM_FRACTION_DIGITS),'"></feGaussianBlur>\n\t<feOffset dx="').concat(hu(t.x,Pc.NUM_FRACTION_DIGITS),'" dy="').concat(hu(t.y,Pc.NUM_FRACTION_DIGITS),'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="').concat(r.toRgb(),'" flood-opacity="').concat(r.getAlpha(),'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n')}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=Yh.ownDefaults;return this.includeDefaultValues?e:uu(e,(e,r)=>e!==t[r])}static async fromObject(e){return new this(e)}}Sc(Yh,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),Sc(Yh,"type","shadow"),kd.setClass(Yh,"shadow");const Gh=(e,t,r)=>Math.max(e,Math.min(t,r)),qh=[ed,Zc,gd,fd,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",xd,yd],Xh=[bd,vd,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],$h={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:Zc,originY:ed,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:bd,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},Jh=(e,t,r,n)=>(e<Math.abs(t)?(e=t,n=r/4):n=0===t&&0===e?r/Gc*Math.asin(1):r/Gc*Math.asin(t/e),{a:e,c:t,p:r,s:n}),Qh=(e,t,r,n,s)=>e*Math.pow(2,10*(n-=1))*Math.sin((n*s-t)*Gc/r),Zh=(e,t,r,n)=>-r*Math.cos(e/n*Yc)+r+t,em=(e,t,r,n)=>(e/=n)<1/2.75?r*(7.5625*e*e)+t:e<2/2.75?r*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?r*(7.5625*(e-=2.25/2.75)*e+.9375)+t:r*(7.5625*(e-=2.625/2.75)*e+.984375)+t,tm=(e,t,r,n)=>r-em(n-e,0,r,n)+t;var rm=Object.freeze({__proto__:null,defaultEasing:Zh,easeInBack:function(e,t,r,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1.70158;return r*(e/=n)*e*((s+1)*e-s)+t},easeInBounce:tm,easeInCirc:(e,t,r,n)=>-r*(Math.sqrt(1-(e/=n)*e)-1)+t,easeInCubic:(e,t,r,n)=>r*(e/n)**3+t,easeInElastic:(e,t,r,n)=>{const s=r;let a=0;if(0===e)return t;if(1===(e/=n))return t+r;a||(a=.3*n);const{a:i,s:l,p:o}=Jh(s,r,a,1.70158);return-Qh(i,l,o,e,n)+t},easeInExpo:(e,t,r,n)=>0===e?t:r*2**(10*(e/n-1))+t,easeInOutBack:function(e,t,r,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1.70158;return(e/=n/2)<1?r/2*(e*e*((1+(s*=1.525))*e-s))+t:r/2*((e-=2)*e*((1+(s*=1.525))*e+s)+2)+t},easeInOutBounce:(e,t,r,n)=>e<n/2?.5*tm(2*e,0,r,n)+t:.5*em(2*e-n,0,r,n)+.5*r+t,easeInOutCirc:(e,t,r,n)=>(e/=n/2)<1?-r/2*(Math.sqrt(1-e**2)-1)+t:r/2*(Math.sqrt(1-(e-=2)*e)+1)+t,easeInOutCubic:(e,t,r,n)=>(e/=n/2)<1?r/2*e**3+t:r/2*((e-2)**3+2)+t,easeInOutElastic:(e,t,r,n)=>{const s=r;let a=0;if(0===e)return t;if(2===(e/=n/2))return t+r;a||(a=n*(.3*1.5));const{a:i,s:l,p:o,c:c}=Jh(s,r,a,1.70158);return e<1?-.5*Qh(i,l,o,e,n)+t:i*Math.pow(2,-10*(e-=1))*Math.sin((e*n-l)*Gc/o)*.5+c+t},easeInOutExpo:(e,t,r,n)=>0===e?t:e===n?t+r:(e/=n/2)<1?r/2*2**(10*(e-1))+t:r/2*-(2**(-10*--e)+2)+t,easeInOutQuad:(e,t,r,n)=>(e/=n/2)<1?r/2*e**2+t:-r/2*(--e*(e-2)-1)+t,easeInOutQuart:(e,t,r,n)=>(e/=n/2)<1?r/2*e**4+t:-r/2*((e-=2)*e**3-2)+t,easeInOutQuint:(e,t,r,n)=>(e/=n/2)<1?r/2*e**5+t:r/2*((e-2)**5+2)+t,easeInOutSine:(e,t,r,n)=>-r/2*(Math.cos(Math.PI*e/n)-1)+t,easeInQuad:(e,t,r,n)=>r*(e/=n)*e+t,easeInQuart:(e,t,r,n)=>r*(e/=n)*e**3+t,easeInQuint:(e,t,r,n)=>r*(e/n)**5+t,easeInSine:(e,t,r,n)=>-r*Math.cos(e/n*Yc)+r+t,easeOutBack:function(e,t,r,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1.70158;return r*((e=e/n-1)*e*((s+1)*e+s)+1)+t},easeOutBounce:em,easeOutCirc:(e,t,r,n)=>r*Math.sqrt(1-(e=e/n-1)*e)+t,easeOutCubic:(e,t,r,n)=>r*((e/n-1)**3+1)+t,easeOutElastic:(e,t,r,n)=>{const s=r;let a=0;if(0===e)return t;if(1===(e/=n))return t+r;a||(a=.3*n);const{a:i,s:l,p:o,c:c}=Jh(s,r,a,1.70158);return i*2**(-10*e)*Math.sin((e*n-l)*Gc/o)+c+t},easeOutExpo:(e,t,r,n)=>e===n?t+r:r*-(2**(-10*e/n)+1)+t,easeOutQuad:(e,t,r,n)=>-r*(e/=n)*(e-2)+t,easeOutQuart:(e,t,r,n)=>-r*((e=e/n-1)*e**3-1)+t,easeOutQuint:(e,t,r,n)=>r*((e/n-1)**5+1)+t,easeOutSine:(e,t,r,n)=>r*Math.sin(e/n*Yc)+t});const nm=()=>!1;class sm{constructor(e){let{startValue:t,byValue:r,duration:n=500,delay:s=0,easing:a=Zh,onStart:i=Vc,onChange:l=Vc,onComplete:o=Vc,abort:c=nm,target:d}=e;Sc(this,"_state","pending"),Sc(this,"durationProgress",0),Sc(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=n,this.delay=s,this.easing=a,this._onStart=i,this._onChange=l,this._onComplete=o,this._abort=c,this.target=d,this.startValue=t,this.byValue=r,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return"aborted"===this._state||"completed"===this._state}start(){const e=e=>{"pending"===this._state&&(this.startTime=e||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>Rd(e),this.delay):Rd(e)}tick(e){const t=(e||+new Date)-this.startTime,r=Math.min(t,this.duration);this.durationProgress=r/this.duration;const{value:n,valueProgress:s}=this.calculate(r);this.value=Object.freeze(n),this.valueProgress=s,"aborted"!==this._state&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Rd(this.tick)))}register(){Sd.push(this)}unregister(){Sd.remove(this)}abort(){this._state="aborted",this.unregister()}}const am=["startValue","endValue"];class im extends sm{constructor(e){let{startValue:t=0,endValue:r=100}=e;super(Cc(Cc({},Tc(e,am)),{},{startValue:t,byValue:r-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const lm=["startValue","endValue"];class om extends sm{constructor(e){let{startValue:t=[0],endValue:r=[100]}=e;super(Cc(Cc({},Tc(e,lm)),{},{startValue:t,byValue:r.map((e,r)=>e-t[r])}))}calculate(e){const t=this.startValue.map((t,r)=>this.easing(e,t,this.byValue[r],this.duration,r));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const cm=["startValue","endValue","easing","onChange","onComplete","abort"],dm=(e,t,r,n)=>t+r*(1-Math.cos(e/n*Yc)),um=e=>e&&((t,r,n)=>e(new ah(t).toRgba(),r,n));class hm extends sm{constructor(e){let{startValue:t,endValue:r,easing:n=dm,onChange:s,onComplete:a,abort:i}=e,l=Tc(e,cm);const o=new ah(t).getSource(),c=new ah(r).getSource();super(Cc(Cc({},l),{},{startValue:o,byValue:c.map((e,t)=>e-o[t]),easing:n,onChange:um(s),onComplete:um(a),abort:um(i)}))}calculate(e){const[t,r,n,s]=this.startValue.map((t,r)=>this.easing(e,t,this.byValue[r],this.duration,r)),a=[...[t,r,n].map(Math.round),Gh(0,s,1)];return{value:a,valueProgress:a.map((e,t)=>0!==this.byValue[t]?Math.abs((e-this.startValue[t])/this.byValue[t]):0).find(e=>0!==e)||0}}}function mm(e){const t=(e=>Array.isArray(e.startValue)||Array.isArray(e.endValue))(e)?new om(e):new im(e);return t.start(),t}function pm(e){const t=new hm(e);return t.start(),t}class gm{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.points=this.points.concat(t.filter(e=>!this.includes(e))),this}static isPointContained(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t.eq(r))return e.eq(t);if(t.x===r.x)return e.x===t.x&&(n||e.y>=Math.min(t.y,r.y)&&e.y<=Math.max(t.y,r.y));if(t.y===r.y)return e.y===t.y&&(n||e.x>=Math.min(t.x,r.x)&&e.x<=Math.max(t.x,r.x));{const s=Rh(t,r),a=Rh(t,e).divide(s);return n?Math.abs(a.x)===Math.abs(a.y):a.x===a.y&&a.x>=0&&a.x<=1}}static isPointInPolygon(e,t){const r=new Od(e).setX(Math.min(e.x-1,...t.map(e=>e.x)));let n=0;for(let s=0;s<t.length;s++){const a=this.intersectSegmentSegment(t[s],t[(s+1)%t.length],e,r);if(a.includes(e))return!0;n+=Number("Intersection"===a.status)}return n%2==1}static intersectLineLine(e,t,r,n){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const i=t.x-e.x,l=t.y-e.y,o=n.x-r.x,c=n.y-r.y,d=e.x-r.x,u=e.y-r.y,h=o*u-c*d,m=i*u-l*d,p=c*i-o*l;if(0!==p){const t=h/p,r=m/p;return(s||0<=t&&t<=1)&&(a||0<=r&&r<=1)?new gm("Intersection").append(new Od(e.x+t*i,e.y+t*l)):new gm}if(0===h||0===m){const i=s||a||gm.isPointContained(e,r,n)||gm.isPointContained(t,r,n)||gm.isPointContained(r,e,t)||gm.isPointContained(n,e,t);return new gm(i?"Coincident":void 0)}return new gm("Parallel")}static intersectSegmentLine(e,t,r,n){return gm.intersectLineLine(e,t,r,n,!1,!0)}static intersectSegmentSegment(e,t,r,n){return gm.intersectLineLine(e,t,r,n,!1,!1)}static intersectLinePolygon(e,t,r){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const s=new gm,a=r.length;for(let i,l,o,c=0;c<a;c++){if(i=r[c],l=r[(c+1)%a],o=gm.intersectLineLine(e,t,i,l,n,!1),"Coincident"===o.status)return o;s.append(...o.points)}return s.points.length>0&&(s.status="Intersection"),s}static intersectSegmentPolygon(e,t,r){return gm.intersectLinePolygon(e,t,r,!1)}static intersectPolygonPolygon(e,t){const r=new gm,n=e.length,s=[];for(let a=0;a<n;a++){const i=e[a],l=e[(a+1)%n],o=gm.intersectSegmentPolygon(i,l,t);"Coincident"===o.status?(s.push(o),r.append(i,l)):r.append(...o.points)}return s.length>0&&s.length===e.length?new gm("Coincident"):(r.points.length>0&&(r.status="Intersection"),r)}static intersectPolygonRectangle(e,t,r){const n=t.min(r),s=t.max(r),a=new Od(s.x,n.y),i=new Od(n.x,s.y);return gm.intersectPolygonPolygon(e,[n,a,s,i])}}class fm extends Md{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?Gd(e,this.group.calcTransformMatrix()):e}setXY(e,t,r){this.group&&(e=Gd(e,qd(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,r)}getRelativeXY(){return new Od(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.originX,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.originY;this.setPositionByOrigin(e,t,r)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:r,bl:n}=this.aCoords||(this.aCoords=this.calcACoords()),s=[e,t,r,n];if(this.group){const e=this.group.calcTransformMatrix();return s.map(t=>Gd(t,e))}return s}intersectsWithRect(e,t){return"Intersection"===gm.intersectPolygonRectangle(this.getCoords(),e,t).status}intersectsWithObject(e){const t=gm.intersectPolygonPolygon(this.getCoords(),e.getCoords());return"Intersection"===t.status||"Coincident"===t.status||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:r,top:n,width:s,height:a}=this.getBoundingRect();return r>=e.x&&r+s<=t.x&&n>=e.y&&n+a<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return gm.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(r=>r.x<=t.x&&r.x>=e.x&&r.y<=t.y&&r.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.intersectsWithRect(e,t)||this.getCoords().every(r=>(r.x>=t.x||r.x<=e.x)&&(r.y>=t.y||r.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return Pu(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(gd,e),this._set(fd,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return(null===(e=this.canvas)||void 0===e?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?Vd(Jd(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return(null===(e=this.canvas)||void 0===e?void 0:e.viewportTransform)||Xc.concat()}calcACoords(){const e=eu({angle:this.angle}),{x:t,y:r}=this.getRelativeCenterPoint(),n=Zd(t,r),s=Xd(n,e),a=this._getTransformedDimensions(),i=a.x/2,l=a.y/2;return{tl:Gd({x:-i,y:-l},s),tr:Gd({x:i,y:-l},s),bl:Gd({x:-i,y:l},s),br:Gd({x:i,y:l},s)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,Ku(this.originX),Ku(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const r=this.transformMatrixKey(e),n=this.matrixCache;return n&&n.key.every((e,t)=>e===r[t])?n.value:(this.group&&(t=Xd(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:r,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const r=this.getRelativeCenterPoint(),n={angle:this.angle,translateX:r.x,translateY:r.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},s=iu(n);return this.ownMatrixCache={key:e,value:s},s}_getNonTransformedDimensions(){return new Od(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Cc({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),r=t.strokeWidth;let n=r,s=0;this.strokeUniform&&(n=0,s=r);const a=t.width+n,i=t.height+n;let l;return l=0===t.skewX&&0===t.skewY?new Od(a*t.scaleX,i*t.scaleY):Fu(a,i,au(t)),l.scalarAdd(s)}translateToGivenOrigin(e,t,r,n,s){let a=e.x,i=e.y;const l=Ku(n)-Ku(t),o=Ku(s)-Ku(r);if(l||o){const e=this._getTransformedDimensions();a+=l*e.x,i+=o*e.y}return new Od(a,i)}translateToCenterPoint(e,t,r){if(t===Qc&&r===Qc)return e;const n=this.translateToGivenOrigin(e,t,r,Qc,Qc);return this.angle?n.rotate(Kd(this.angle),e):n}translateToOriginPoint(e,t,r){const n=this.translateToGivenOrigin(e,Qc,Qc,t,r);return this.angle?n.rotate(Kd(this.angle),e):n}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?Gd(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new Od(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,r){const n=this.translateToCenterPoint(e,t,r),s=this.translateToOriginPoint(n,this.originX,this.originY);this.set({left:s.x,top:s.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),Zc,ed)}}const xm=["type"],ym=["extraParam"];let bm=class e extends fm{static getDefaults(){return e.ownDefaults}get type(){const e=this.constructor.type;return"FabricObject"===e?"object":e.toLowerCase()}set type(e){Dc("warn","Setting type has no effect",e)}constructor(t){super(),Sc(this,"_cacheContext",null),Object.assign(this,e.ownDefaults),this.setOptions(t)}_createCacheCanvas(){this._cacheCanvas=Id(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,r=e.height,n=Pc.maxCacheSideLimit,s=Pc.minCacheSideLimit;if(t<=n&&r<=n&&t*r<=Pc.perfLimitSizeTotal)return t<s&&(e.width=s),r<s&&(e.height=s),e;const a=t/r,[i,l]=Wc.limitDimsByArea(a),o=Gh(s,i,n),c=Gh(s,l,n);return t>o&&(e.zoomX/=t/o,e.width=o,e.capped=!0),r>c&&(e.zoomY/=r/c,e.height=c,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),r=t.x*e.x/this.scaleX,n=t.y*e.y/this.scaleY;return{width:Math.ceil(r+2),height:Math.ceil(n+2),zoomX:e.x,zoomY:e.y,x:r,y:n}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:r,height:n,zoomX:s,zoomY:a,x:i,y:l}=this._limitCacheSize(this._getCacheCanvasDimensions()),o=r!==e.width||n!==e.height,c=this.zoomX!==s||this.zoomY!==a;if(!e||!t)return!1;if(o||c){r!==e.width||n!==e.height?(e.width=r,e.height=n):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const o=i/2,c=l/2;return this.cacheTranslationX=Math.round(e.width/2-o)+o,this.cacheTranslationY=Math.round(e.height/2-c)+c,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(s,a),this.zoomX=s,this.zoomY=a,!0}return!1}setOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,r=this.calcTransformMatrix(!t);e.transform(r[0],r[1],r[2],r[3],r[4],r[5])}getObjectScaling(){if(!this.group)return new Od(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=Qd(this.calcTransformMatrix());return new Od(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),r=this.getCanvasRetinaScaling();return e.scalarMultiply(t*r)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:0===e?1e-4:e}_set(e,t){e!==gd&&e!==fd||(t=this._constrainScale(t)),e===gd&&t<0?(this.flipX=!this.flipX,t*=-1):"scaleY"===e&&t<0?(this.flipY=!this.flipY,t*=-1):"shadow"!==e||!t||t instanceof Yh||(t=new Yh(t));const r=this[e]!==t;return this[e]=t,r&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||r&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:r,cacheTranslationX:n,cacheTranslationY:s}=this,{width:a,height:i}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:r,cacheTranslationX:n,cacheTranslationY:s,width:a,height:i,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth}hasFill(){return this.fill&&"transparent"!==this.fill}needsItsOwnCache(){return!!(this.paintFirst===vd&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)}drawClipPathOnCache(e,t,r){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(r,0,0),e.restore()}drawObject(e,t,r){const n=this.fill,s=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,r),this.fill=n,this.stroke=s}createClipPathLayer(e,t){const r=Hd(t),n=r.getContext("2d");if(n.translate(t.cacheTranslationX,t.cacheTranslationY),n.scale(t.zoomX,t.zoomY),e._cacheCanvas=r,t.parentClipPaths.forEach(e=>{e.transform(n)}),t.parentClipPaths.push(e),e.absolutePositioned){const e=qd(this.calcTransformMatrix());n.transform(e[0],e[1],e[2],e[3],e[4],e[5])}return e.transform(n),e.drawObject(n,!0,t),r}_drawClipPath(e,t,r){if(!t)return;t._transformDone=!0;const n=this.createClipPathLayer(t,r);this.drawClipPathOnCache(e,t,n)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,r=this._cacheContext;return!(!t||!r||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&r&&!e&&(r.save(),r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,t.width,t.height),r.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const r=t.stroke;r&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,pu(r)?"percentage"===r.gradientUnits||r.gradientTransform||r.patternTransform?this._applyPatternForTransformedGradient(e,r):(e.strokeStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:r}=t;r&&(pu(r)?(e.fillStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.fillStyle=r)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&0!==t.length&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,r=this.canvas,n=this.getCanvasRetinaScaling(),[s,,,a]=(null==r?void 0:r.viewportTransform)||Xc,i=s*n,l=a*n,o=t.nonScaling?new Od(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*Pc.browserShadowBlurConstant*(i+l)*(o.x+o.y)/4,e.shadowOffsetX=t.offsetX*i*o.x,e.shadowOffsetY=t.offsetY*l*o.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!pu(t))return{offsetX:0,offsetY:0};const r=t.gradientTransform||t.patternTransform,n=-this.width/2+t.offsetX||0,s=-this.height/2+t.offsetY||0;return"percentage"===t.gradientUnits?e.transform(this.width,0,0,this.height,n,s):e.transform(1,0,0,1,n,s),r&&e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),{offsetX:n,offsetY:s}}_renderPaintInOrder(e){this.paintFirst===vd?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),"evenodd"===this.fillRule?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var r;const n=this._limitCacheSize(this._getCacheCanvasDimensions()),s=this.getCanvasRetinaScaling(),a=n.x/this.scaleX/s,i=n.y/this.scaleY/s,l=Hd({width:Math.ceil(a),height:Math.ceil(i)}),o=l.getContext("2d");o&&(o.beginPath(),o.moveTo(0,0),o.lineTo(a,0),o.lineTo(a,i),o.lineTo(0,i),o.closePath(),o.translate(a/2,i/2),o.scale(n.zoomX/this.scaleX/s,n.zoomY/this.scaleY/s),this._applyPatternGradientTransform(o,t),o.fillStyle=t.toLive(e),o.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(s*this.scaleX/n.zoomX,s*this.scaleY/n.zoomY),e.strokeStyle=null!==(r=o.createPattern(l,"no-repeat"))&&void 0!==r?r:"")}_findCenterFromElement(){return new Od(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(kd.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=zu(this),r=this.group,n=this.shadow,s=Math.abs,a=e.enableRetinaScaling?Uc():1,i=(e.multiplier||1)*a,l=e.canvasProvider||(e=>new Nu(e,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&Ru(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&Hu(this,this.getViewportTransform()),this.setCoords();const o=Id(),c=this.getBoundingRect(),d=this.shadow,u=new Od;if(d){const e=d.blur,t=d.nonScaling?new Od(1,1):this.getObjectScaling();u.x=2*Math.round(s(d.offsetX)+e)*s(t.x),u.y=2*Math.round(s(d.offsetY)+e)*s(t.y)}const h=c.width+u.x,m=c.height+u.y;o.width=Math.ceil(h),o.height=Math.ceil(m);const p=l(o);"jpeg"===e.format&&(p.backgroundColor="#fff"),this.setPositionByOrigin(new Od(p.width/2,p.height/2),Qc,Qc);const g=this.canvas;p._objects=[this],this.set("canvas",p),this.setCoords();const f=p.toCanvasElement(i||1,e);return this.set("canvas",g),this.shadow=n,r&&(this.group=r),this.set(t),this.setCoords(),p._objects=[],p.destroy(),f}toDataURL(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ud(this.toCanvasElement(e),e.format||"png",e.quality||1)}toBlob(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Wd(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:r,originY:n}=this;if(t){const{x:e,y:t}=this.getRelativeCenterPoint();this.originX=Qc,this.originY=Qc,this.left=e,this.top=t}if(this.set("angle",e),t){const{x:e,y:t}=this.translateToOriginPoint(this.getRelativeCenterPoint(),r,n);this.left=e,this.top=t,this.originX=r,this.originY=n}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){Sd.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&Ic().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((e,r)=>{let[n,s]=r;return e[n]=this._animate(n,s,t),e},{})}_animate(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=e.split("."),s=this.constructor.colorProperties.includes(n[n.length-1]),{abort:a,startValue:i,onChange:l,onComplete:o}=r,c=Cc(Cc({},r),{},{target:this,startValue:null!=i?i:n.reduce((e,t)=>e[t],this),endValue:t,abort:null==a?void 0:a.bind(this),onChange:(e,t,r)=>{n.reduce((t,r,s)=>(s===n.length-1&&(t[r]=e),t[r]),this),l&&l(e,t,r)},onComplete:(e,t,r)=>{this.setCoords(),o&&o(e,t,r)}});return s?pm(c):mm(c)}isDescendantOf(e){const{parent:t,group:r}=this;return t===e||r===e||!!t&&t.isDescendantOf(e)||!!r&&r!==t&&r.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do{t=t.parent,t&&e.push(t)}while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),r=e.getAncestors();if(0===t.length&&r.length>0&&this===r[r.length-1])return{fork:[],otherFork:[e,...r.slice(0,r.length-1)],common:[this]};for(let n,s=0;s<t.length;s++){if(n=t[s],n===e)return{fork:[this,...t.slice(0,s)],otherFork:[],common:t.slice(s)};for(let a=0;a<r.length;a++){if(this===r[a])return{fork:[],otherFork:[e,...r.slice(0,a)],common:[this,...t]};if(n===r[a])return{fork:[this,...t.slice(0,s)],otherFork:[e,...r.slice(0,a)],common:t.slice(s)}}}return{fork:[this,...t],otherFork:[e,...r],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const r=t.common[0]||this.canvas;if(!r)return;const n=t.fork.pop(),s=t.otherFork.pop(),a=r._objects.indexOf(n),i=r._objects.indexOf(s);return a>-1&&a>i}toObject(){const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).concat(e.customProperties,this.constructor.customProperties||[]);let r;const n=Pc.NUM_FRACTION_DIGITS,{clipPath:s,fill:a,stroke:i,shadow:l,strokeDashArray:o,left:c,top:d,originX:u,originY:h,width:m,height:p,strokeWidth:g,strokeLineCap:f,strokeDashOffset:x,strokeLineJoin:y,strokeUniform:b,strokeMiterLimit:v,scaleX:j,scaleY:w,angle:_,flipX:k,flipY:S,opacity:N,visible:C,backgroundColor:T,fillRule:E,paintFirst:O,globalCompositeOperation:P,skewX:D,skewY:A}=this;s&&!s.excludeFromExport&&(r=s.toObject(t.concat("inverted","absolutePositioned")));const M=e=>hu(e,n),R=Cc(Cc({},du(this,t)),{},{type:this.constructor.type,version:Kc,originX:u,originY:h,left:M(c),top:M(d),width:M(m),height:M(p),fill:gu(a)?a.toObject():a,stroke:gu(i)?i.toObject():i,strokeWidth:M(g),strokeDashArray:o?o.concat():o,strokeLineCap:f,strokeDashOffset:x,strokeLineJoin:y,strokeUniform:b,strokeMiterLimit:M(v),scaleX:M(j),scaleY:M(w),angle:M(_),flipX:k,flipY:S,opacity:M(N),shadow:l?l.toObject():l,visible:C,backgroundColor:T,fillRule:E,paintFirst:O,globalCompositeOperation:P,skewX:M(D),skewY:M(A)},r?{clipPath:r}:null);return this.includeDefaultValues?R:this._removeDefaultValues(R)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),r=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return uu(e,(e,t)=>{if(t===Zc||t===ed||"type"===t)return!0;const n=r[t];return e!==n&&!(Array.isArray(e)&&Array.isArray(n)&&0===e.length&&0===n.length)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=Tc(e,xm),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{extraParam:n}=r,s=Tc(r,ym);return cu(t,s).then(e=>n?(delete e[n],new this(t[n],e)):new this(e))}static fromObject(e,t){return this._fromObject(e,t)}};Sc(bm,"stateProperties",qh),Sc(bm,"cacheProperties",Xh),Sc(bm,"ownDefaults",$h),Sc(bm,"type","FabricObject"),Sc(bm,"colorProperties",[bd,vd,"backgroundColor"]),Sc(bm,"customProperties",[]),kd.setClass(bm),kd.setClass(bm,"object");const vm=(e,t,r)=>(n,s,a,i)=>{const l=t(n,s,a,i);return l&&Uu(e,Cc(Cc({},Xu(n,s,a,i)),r)),l};function jm(e){return(t,r,n,s)=>{const{target:a,originX:i,originY:l}=r,o=a.getRelativeCenterPoint(),c=a.translateToOriginPoint(o,i,l),d=e(t,r,n,s);return a.setPositionByOrigin(c,r.originX,r.originY),d}}const wm=vm(dd,jm((e,t,r,n)=>{const s=Ju(t,t.originX,t.originY,r,n);if(Ku(t.originX)===Ku(Qc)||Ku(t.originX)===Ku(rd)&&s.x<0||Ku(t.originX)===Ku(Zc)&&s.x>0){const{target:e}=t,r=e.strokeWidth/(e.strokeUniform?e.scaleX:1),n=Yu(t)?2:1,a=e.width,i=Math.abs(s.x*n/e.scaleX)-r;return e.set("width",Math.max(i,1)),a!==e.width}return!1}));function _m(e,t,r,n,s){n=n||{};const a=this.sizeX||n.cornerSize||s.cornerSize,i=this.sizeY||n.cornerSize||s.cornerSize,l=void 0!==n.transparentCorners?n.transparentCorners:s.transparentCorners,o=l?vd:bd,c=!l&&(n.cornerStrokeColor||s.cornerStrokeColor);let d,u=t,h=r;e.save(),e.fillStyle=n.cornerColor||s.cornerColor||"",e.strokeStyle=n.cornerStrokeColor||s.cornerStrokeColor||"",a>i?(d=a,e.scale(1,i/a),h=r*a/i):i>a?(d=i,e.scale(a/i,1),u=t*i/a):d=a,e.beginPath(),e.arc(u,h,d/2,0,Gc,!1),e[o](),c&&e.stroke(),e.restore()}function km(e,t,r,n,s){n=n||{};const a=this.sizeX||n.cornerSize||s.cornerSize,i=this.sizeY||n.cornerSize||s.cornerSize,l=void 0!==n.transparentCorners?n.transparentCorners:s.transparentCorners,o=l?vd:bd,c=!l&&(n.cornerStrokeColor||s.cornerStrokeColor),d=a/2,u=i/2;e.save(),e.fillStyle=n.cornerColor||s.cornerColor||"",e.strokeStyle=n.cornerStrokeColor||s.cornerStrokeColor||"",e.translate(t,r);const h=s.getTotalAngle();e.rotate(Kd(h)),e["".concat(o,"Rect")](-d,-u,a,i),c&&e.strokeRect(-d,-u,a,i),e.restore()}class Sm{constructor(e){Sc(this,"visible",!0),Sc(this,"actionName",pd),Sc(this,"angle",0),Sc(this,"x",0),Sc(this,"y",0),Sc(this,"offsetX",0),Sc(this,"offsetY",0),Sc(this,"sizeX",0),Sc(this,"sizeY",0),Sc(this,"touchSizeX",0),Sc(this,"touchSizeY",0),Sc(this,"cursorStyle","crosshair"),Sc(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,r,n){var s;let{tl:a,tr:i,br:l,bl:o}=n;return(null===(s=t.canvas)||void 0===s?void 0:s.getActiveObject())===t&&t.isControlVisible(e)&&gm.isPointInPolygon(r,[a,i,l,o])}getActionHandler(e,t,r){return this.actionHandler}getMouseDownHandler(e,t,r){return this.mouseDownHandler}getMouseUpHandler(e,t,r){return this.mouseUpHandler}cursorStyleHandler(e,t,r){return t.cursorStyle}getActionName(e,t,r){return t.actionName}getVisibility(e,t){var r,n;return null!==(r=null===(n=e._controlsVisibility)||void 0===n?void 0:n[t])&&void 0!==r?r:this.visible}setVisibility(e,t,r){this.visible=e}positionHandler(e,t,r,n){return new Od(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,r,n,s,a){const i=$d([Zd(r,n),eu({angle:e}),tu((s?this.touchSizeX:this.sizeX)||t,(s?this.touchSizeY:this.sizeY)||t)]);return{tl:new Od(-.5,-.5).transform(i),tr:new Od(.5,-.5).transform(i),br:new Od(.5,.5).transform(i),bl:new Od(-.5,.5).transform(i)}}render(e,t,r,n,s){"circle"===((n=n||{}).cornerStyle||s.cornerStyle)?_m.call(this,e,t,r,n,s):km.call(this,e,t,r,n,s)}}const Nm=(e,t,r)=>r.lockRotation?Vu:t.cursorStyle,Cm=vm(ld,jm((e,t,r,n)=>{let{target:s,ex:a,ey:i,theta:l,originX:o,originY:c}=t;const d=s.translateToOriginPoint(s.getRelativeCenterPoint(),o,c);if(qu(s,"lockRotation"))return!1;const u=Math.atan2(i-d.y,a-d.x),h=Math.atan2(n-d.y,r-d.x);let m=Vd(h-u+l);if(s.snapAngle&&s.snapAngle>0){const e=s.snapAngle,t=s.snapThreshold||e,r=Math.ceil(m/e)*e,n=Math.floor(m/e)*e;Math.abs(m-n)<t?m=n:Math.abs(m-r)<t&&(m=r)}m<0&&(m=360+m),m%=360;const p=s.angle!==m;return s.angle=m,p}));function Tm(e,t){const r=t.canvas,n=e[r.uniScaleKey];return r.uniformScaling&&!n||!r.uniformScaling&&n}function Em(e,t,r){const n=qu(e,"lockScalingX"),s=qu(e,"lockScalingY");if(n&&s)return!0;if(!t&&(n||s)&&r)return!0;if(n&&"x"===t)return!0;if(s&&"y"===t)return!0;const{width:a,height:i,strokeWidth:l}=e;return 0===a&&0===l&&"y"!==t||0===i&&0===l&&"x"!==t}const Om=["e","se","s","sw","w","nw","n","ne","e"],Pm=(e,t,r)=>{const n=Tm(e,r);if(Em(r,0!==t.x&&0===t.y?"x":0===t.x&&0!==t.y?"y":"",n))return Vu;const s=$u(r,t);return"".concat(Om[s],"-resize")};function Dm(e,t,r,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const a=t.target,i=s.by,l=Tm(e,a);let o,c,d,u,h,m;if(Em(a,i,l))return!1;if(t.gestureScale)c=t.scaleX*t.gestureScale,d=t.scaleY*t.gestureScale;else{if(o=Ju(t,t.originX,t.originY,r,n),h="y"!==i?Math.sign(o.x||t.signX||1):1,m="x"!==i?Math.sign(o.y||t.signY||1):1,t.signX||(t.signX=h),t.signY||(t.signY=m),qu(a,"lockScalingFlip")&&(t.signX!==h||t.signY!==m))return!1;if(u=a._getTransformedDimensions(),l&&!i){const e=Math.abs(o.x)+Math.abs(o.y),{original:r}=t,n=e/(Math.abs(u.x*r.scaleX/a.scaleX)+Math.abs(u.y*r.scaleY/a.scaleY));c=r.scaleX*n,d=r.scaleY*n}else c=Math.abs(o.x*a.scaleX/u.x),d=Math.abs(o.y*a.scaleY/u.y);Yu(t)&&(c*=2,d*=2),t.signX!==h&&"y"!==i&&(t.originX=Gu(t.originX),c*=-1,t.signX=h),t.signY!==m&&"x"!==i&&(t.originY=Gu(t.originY),d*=-1,t.signY=m)}const p=a.scaleX,g=a.scaleY;return i?("x"===i&&a.set(gd,c),"y"===i&&a.set(fd,d)):(!qu(a,"lockScalingX")&&a.set(gd,c),!qu(a,"lockScalingY")&&a.set(fd,d)),p!==a.scaleX||g!==a.scaleY}const Am=vm(id,jm((e,t,r,n)=>Dm(e,t,r,n))),Mm=vm(id,jm((e,t,r,n)=>Dm(e,t,r,n,{by:"x"}))),Rm=vm(id,jm((e,t,r,n)=>Dm(e,t,r,n,{by:"y"}))),zm=["target","ex","ey","skewingSide"],Fm={x:{counterAxis:"y",scale:gd,skew:xd,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:fd,skew:yd,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},Lm=["ns","nesw","ew","nwse"],Im=(e,t,r)=>{if(0!==t.x&&qu(r,"lockSkewingY"))return Vu;if(0!==t.y&&qu(r,"lockSkewingX"))return Vu;const n=$u(r,t)%4;return"".concat(Lm[n],"-resize")};function Bm(e,t,r,n,s){const{target:a}=r,{counterAxis:i,origin:l,lockSkewing:o,skew:c,flip:d}=Fm[e];if(qu(a,o))return!1;const{origin:u,flip:h}=Fm[i],m=Ku(r[u])*(a[h]?-1:1),p=-Math.sign(m)*(a[d]?-1:1),g=-(0===a[c]&&Ju(r,Qc,Qc,n,s)[e]>0||a[c]>0?1:-1)*p*.5+.5,f=vm(cd,jm((t,r,n,s)=>function(e,t,r){let{target:n,ex:s,ey:a,skewingSide:i}=t,l=Tc(t,zm);const{skew:o}=Fm[e],c=r.subtract(new Od(s,a)).divide(new Od(n.scaleX,n.scaleY))[e],d=n[o],u=l[o],h=Math.tan(Kd(u)),m="y"===e?n._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:n._getTransformedDimensions({scaleX:1,scaleY:1}).y,p=2*c*i/Math.max(m,1)+h,g=Vd(Math.atan(p));n.set(o,g);const f=d!==n[o];if(f&&"y"===e){const{skewX:e,scaleX:t}=n,r=n._getTransformedDimensions({skewY:d}),s=n._getTransformedDimensions(),a=0!==e?r.x/s.x:1;1!==a&&n.set(gd,a*t)}return f}(e,r,new Od(n,s))));return f(t,Cc(Cc({},r),{},{[l]:g,skewingSide:p}),n,s)}const Hm=(e,t,r,n)=>Bm("x",e,t,r,n),Um=(e,t,r,n)=>Bm("y",e,t,r,n);function Wm(e,t){return e[t.canvas.altActionKey]}const Km=(e,t,r)=>{const n=Wm(e,r);return 0===t.x?n?xd:fd:0===t.y?n?yd:gd:""},Vm=(e,t,r)=>Wm(e,r)?Im(0,t,r):Pm(e,t,r),Ym=(e,t,r,n)=>Wm(e,t.target)?Um(e,t,r,n):Mm(e,t,r,n),Gm=(e,t,r,n)=>Wm(e,t.target)?Hm(e,t,r,n):Rm(e,t,r,n),qm=()=>({ml:new Sm({x:-.5,y:0,cursorStyleHandler:Vm,actionHandler:Ym,getActionName:Km}),mr:new Sm({x:.5,y:0,cursorStyleHandler:Vm,actionHandler:Ym,getActionName:Km}),mb:new Sm({x:0,y:.5,cursorStyleHandler:Vm,actionHandler:Gm,getActionName:Km}),mt:new Sm({x:0,y:-.5,cursorStyleHandler:Vm,actionHandler:Gm,getActionName:Km}),tl:new Sm({x:-.5,y:-.5,cursorStyleHandler:Pm,actionHandler:Am}),tr:new Sm({x:.5,y:-.5,cursorStyleHandler:Pm,actionHandler:Am}),bl:new Sm({x:-.5,y:.5,cursorStyleHandler:Pm,actionHandler:Am}),br:new Sm({x:.5,y:.5,cursorStyleHandler:Pm,actionHandler:Am}),mtr:new Sm({x:0,y:-.5,actionHandler:Cm,cursorStyleHandler:Nm,offsetY:-40,withConnection:!0,actionName:od})}),Xm=()=>({mr:new Sm({x:.5,y:0,actionHandler:wm,cursorStyleHandler:Vm,actionName:dd}),ml:new Sm({x:-.5,y:0,actionHandler:wm,cursorStyleHandler:Vm,actionName:dd})}),$m=()=>Cc(Cc({},qm()),Xm());class Jm extends bm{static getDefaults(){return Cc(Cc({},super.getDefaults()),Jm.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),Jm.ownDefaults),this.setOptions(e)}static createControls(){return{controls:qm()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,r=t.target,n=t.action;if(this===r&&n&&n.startsWith(pd))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const r=Object.entries(this.oCoords);for(let n=r.length-1;n>=0;n--){const[s,a]=r[n],i=this.controls[s];if(i.shouldActivate(s,this,e,t?a.touchCorner:a.corner))return this.__corner=s,{key:s,control:i,coord:this.oCoords[s]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),r=Zd(t.x,t.y),n=eu({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),s=Xd(r,n),a=Xd(e,s),i=Xd(a,[1/e[0],0,0,1/e[3],0,0]),l=this.group?Qd(this.calcTransformMatrix()):void 0;l&&(l.scaleX=Math.abs(l.scaleX),l.scaleY=Math.abs(l.scaleY));const o=this._calculateCurrentDimensions(l),c={};return this.forEachControl((e,t)=>{const r=e.positionHandler(o,i,this,e);c[t]=Object.assign(r,this._calcCornerCoords(e,r))}),c}_calcCornerCoords(e,t){const r=this.getTotalAngle();return{corner:e.calcCornerCoords(r,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(r,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),r=this._calculateCurrentDimensions(),n=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/n[0],1/n[3]),e.rotate(Kd(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-r.x/2,-r.y/2,r.x,r.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=Cc({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},r);e.save(),e.strokeStyle=n.borderColor,this._setLineDash(e,n.borderDashArray),this.strokeBorders(e,t),n.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{hasBorders:r,hasControls:n}=this,s=Cc({hasBorders:r,hasControls:n},t),a=this.getViewportTransform(),i=s.hasBorders,l=s.hasControls,o=Xd(a,this.calcTransformMatrix()),c=Qd(o);e.save(),e.translate(c.translateX,c.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(c.angle-=180),e.rotate(Kd(this.group?c.angle:this.angle)),i&&this.drawBorders(e,c,t),l&&this.drawControls(e,t),e.restore()}drawBorders(e,t,r){let n;if(r&&r.forActiveSelection||this.group){const e=Fu(this.width,this.height,au(t)),r=this.isStrokeAccountedForInDimensions()?Pd:(this.strokeUniform?(new Od).scalarAdd(this.canvas?this.canvas.getZoom():1):new Od(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);n=e.add(r).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else n=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,n,r)}drawControlsConnectingLines(e,t){let r=!1;e.beginPath(),this.forEachControl((n,s)=>{n.withConnection&&n.getVisibility(this,s)&&(r=!0,e.moveTo(n.x*t.x,n.y*t.y),e.lineTo(n.x*t.x+n.offsetX,n.y*t.y+n.offsetY))}),r&&e.stroke()}drawControls(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.save();const r=this.getCanvasRetinaScaling(),{cornerStrokeColor:n,cornerDashArray:s,cornerColor:a}=this,i=Cc({cornerStrokeColor:n,cornerDashArray:s,cornerColor:a},t);e.setTransform(r,0,0,r,0,0),e.strokeStyle=e.fillStyle=i.cornerColor,this.transparentCorners||(e.strokeStyle=i.cornerStrokeColor),this._setLineDash(e,i.cornerDashArray),this.forEachControl((t,r)=>{if(t.getVisibility(this,r)){const n=this.oCoords[r];t.render(e,n.x,n.y,i,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.entries(e).forEach(e=>{let[t,r]=e;return this.setControlVisible(t,r)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const r=this.canvas.viewportTransform;t.save(),t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this.transform(t);const n=this.width+4,s=this.height+4;return t.clearRect(-n/2,-s/2,n,s),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function Qm(e,t){return t.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(r=>{"constructor"!==r&&Object.defineProperty(e.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r)||Object.create(null))})}),e}Sc(Jm,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class Zm extends Jm{}Qm(Zm,[ch]),kd.setClass(Zm),kd.setClass(Zm,"object");const ep=(e,t,r,n)=>{const s=2*(n=Math.round(n))+1,{data:a}=e.getImageData(t-n,r-n,s,s);for(let i=3;i<a.length;i+=4)if(a[i]>0)return!1;return!0};class tp{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new Od(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new Od(1/this.options.scaleX,1/this.options.scaleY):new Od(1,1)}createSideVector(e,t){const r=Rh(e,t);return this.options.strokeUniform?r.multiply(this.scale):r}projectOrthogonally(e,t,r){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,r)))}isSkewed(){return 0!==this.options.skewX||0!==this.options.skewY}applySkew(e){const t=new Od(e);return t.y+=t.x*Math.tan(Kd(this.options.skewY)),t.x+=t.y*Math.tan(Kd(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const rp=new Od;class np extends tp{static getOrthogonalRotationFactor(e,t){const r=t?Fh(e,t):Lh(e);return Math.abs(r)<Yc?-1:1}constructor(e,t,r,n){super(n),Sc(this,"AB",void 0),Sc(this,"AC",void 0),Sc(this,"alpha",void 0),Sc(this,"bisector",void 0),this.A=new Od(e),this.B=new Od(t),this.C=new Od(r),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=Fh(this.AB,this.AC),this.bisector=Ih(Mh(this.AB.eq(rp)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.strokeProjectionMagnitude;const n=this.createSideVector(e,t),s=Bh(n),a=np.getOrthogonalRotationFactor(s,this.bisector);return this.scaleUnitVector(s,r*a)}projectBevel(){const e=[];return(this.alpha%Gc==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),r=1/Math.sin(t/2),n=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*r),s=this.options.strokeUniform?zh(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return zh(n)/this.strokeProjectionMagnitude<=s&&e.push(this.applySkew(this.A.add(n))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const r=[],n=new Od(np.getOrthogonalRotationFactor(this.bisector),np.getOrthogonalRotationFactor(new Od(this.bisector.y,this.bisector.x)));return[new Od(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(n),new Od(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(n)].forEach(n=>{Wh(n,e,t)&&r.push(this.A.add(n))}),r}projectRoundWithSkew(e,t){const r=[],{skewX:n,skewY:s,scaleX:a,scaleY:i,strokeUniform:l}=this.options,o=new Od(Math.tan(Kd(n)),Math.tan(Kd(s))),c=this.strokeProjectionMagnitude,d=l?c/i/Math.sqrt(1/i**2+1/a**2*o.y**2):c/Math.sqrt(1+o.y**2),u=new Od(Math.sqrt(Math.max(c**2-d**2,0)),d),h=l?c/Math.sqrt(1+o.x**2*(1/i)**2/(1/a+1/a*o.x*o.y)**2):c/Math.sqrt(1+o.x**2/(1+o.x*o.y)**2),m=new Od(h,Math.sqrt(Math.max(c**2-h**2,0)));return[m,m.scalarMultiply(-1),u,u.scalarMultiply(-1)].map(e=>this.applySkew(l?e.multiply(this.strokeUniformScalar):e)).forEach(n=>{Wh(n,e,t)&&r.push(this.applySkew(this.A).add(n))}),r}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%Gc==0,r=this.applySkew(this.A),n=e[t?0:2].subtract(r),s=e[t?1:0].subtract(r),a=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),i=Hh(n,a)>0,l=i?n:s,o=i?s:n;return this.isSkewed()?e.push(...this.projectRoundWithSkew(l,o)):e.push(...this.projectRoundNoSkew(l,o)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class sp extends tp{constructor(e,t,r){super(r),this.A=new Od(e),this.T=new Od(t)}calcOrthogonalProjection(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.strokeProjectionMagnitude;const n=this.createSideVector(e,t);return this.scaleUnitVector(Bh(n),r)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new Od(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new np(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new Od(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),r=this.scaleUnitVector(Ih(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),n=this.A.add(r);e.push(n.add(t),n.subtract(t))}return e.map(e=>this.applySkew(e))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const ap=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=[];if(0===e.length)return n;const s=e.reduce((e,t)=>(e[e.length-1].eq(t)||e.push(new Od(t)),e),[new Od(e[0])]);if(1===s.length)r=!0;else if(!r){const e=s[0],t=((e,t)=>{for(let r=e.length-1;r>=0;r--)if(t(e[r]))return r;return-1})(s,t=>!t.eq(e));s.splice(t+1)}return s.forEach((e,s,a)=>{let i,l;0===s?(l=a[1],i=r?e:a[a.length-1]):s===a.length-1?(i=a[s-1],l=r?e:a[0]):(i=a[s-1],l=a[s+1]),r&&1===a.length?n.push(...new sp(e,e,t).project()):!r||0!==s&&s!==a.length-1?n.push(...new np(e,i,l,t).project()):n.push(...new sp(e,0===s?l:i,t).project())}),n},ip=e=>{const t={};return Object.keys(e).forEach(r=>{t[r]={},Object.keys(e[r]).forEach(n=>{t[r][n]=Cc({},e[r][n])})}),t},lp=e=>e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let op;const cp=e=>{if(op||op||(op="Intl"in Hc()&&"Segmenter"in Intl&&new Intl.Segmenter(void 0,{granularity:"grapheme"})),op){const t=op.segment(e);return Array.from(t).map(e=>{let{segment:t}=e;return t})}return dp(e)},dp=e=>{const t=[];for(let r,n=0;n<e.length;n++)!1!==(r=up(e,n))&&t.push(r);return t},up=(e,t)=>{const r=e.charCodeAt(t);if(isNaN(r))return"";if(r<55296||r>57343)return e.charAt(t);if(55296<=r&&r<=56319){if(e.length<=t+1)throw"High surrogate without following low surrogate";const r=e.charCodeAt(t+1);if(56320>r||r>57343)throw"High surrogate without following low surrogate";return e.charAt(t)+e.charAt(t+1)}if(0===t)throw"Low surrogate without preceding high surrogate";const n=e.charCodeAt(t-1);if(55296>n||n>56319)throw"Low surrogate without preceding high surrogate";return!1};var hp=Object.freeze({__proto__:null,capitalize:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"".concat(e.charAt(0).toUpperCase()).concat(t?e.slice(1):e.slice(1).toLowerCase())},escapeXml:lp,graphemeSplit:cp});const mp=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.fill!==t.fill||e.stroke!==t.stroke||e.strokeWidth!==t.strokeWidth||e.fontSize!==t.fontSize||e.fontFamily!==t.fontFamily||e.fontWeight!==t.fontWeight||e.fontStyle!==t.fontStyle||e.textDecorationThickness!==t.textDecorationThickness||e.textBackgroundColor!==t.textBackgroundColor||e.deltaY!==t.deltaY||r&&(e.overline!==t.overline||e.underline!==t.underline||e.linethrough!==t.linethrough)},pp=(e,t)=>{const r=t.split("\n"),n=[];let s=-1,a={};e=ip(e);for(let i=0;i<r.length;i++){const t=cp(r[i]);if(e[i])for(let r=0;r<t.length;r++){s++;const t=e[i][r];t&&Object.keys(t).length>0&&(mp(a,t,!0)?n.push({start:s,end:s+1,style:t}):n[n.length-1].end++),a=t||{}}else s+=t.length,a={}}return n},gp=(e,t)=>{if(!Array.isArray(e))return ip(e);const r=t.split(sd),n={};let s=-1,a=0;for(let i=0;i<r.length;i++){const t=cp(r[i]);for(let r=0;r<t.length;r++)s++,e[a]&&e[a].start<=s&&s<e[a].end&&(n[i]=n[i]||{},n[i][r]=Cc({},e[a].style),s===e[a].end-1&&a++)}return n},fp=["display","transform",bd,"fill-opacity","fill-rule","opacity",vd,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function xp(e,t){const r=e.nodeName,n=e.getAttribute("class"),s=e.getAttribute("id"),a="(?![a-zA-Z\\-]+)";let i;if(i=new RegExp("^"+r,"i"),t=t.replace(i,""),s&&t.length&&(i=new RegExp("#"+s+a,"i"),t=t.replace(i,"")),n&&t.length){const e=n.split(" ");for(let r=e.length;r--;)i=new RegExp("\\."+e[r]+a,"i"),t=t.replace(i,"")}return 0===t.length}function yp(e,t){let r=!0;const n=xp(e,t.pop());return n&&t.length&&(r=function(e,t){let r,n=!0;for(;e.parentElement&&1===e.parentElement.nodeType&&t.length;)n&&(r=t.pop()),n=xp(e=e.parentElement,r);return 0===t.length}(e,t)),n&&r&&0===t.length}const bp=e=>{var t;return null!==(t=Th[e])&&void 0!==t?t:e},vp=new RegExp("(".concat(Sh,")"),"gi");var jp,wp,_p,kp,Sp,Np,Cp;const Tp="(".concat(Sh,")"),Ep=String.raw(jp||(jp=Ec(["(skewX)(",")"],["(skewX)\\(","\\)"])),Tp),Op=String.raw(wp||(wp=Ec(["(skewY)(",")"],["(skewY)\\(","\\)"])),Tp),Pp=String.raw(_p||(_p=Ec(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),Tp,Tp,Tp),Dp=String.raw(kp||(kp=Ec(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),Tp,Tp),Ap=String.raw(Sp||(Sp=Ec(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),Tp,Tp),Mp=String.raw(Np||(Np=Ec(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),Tp,Tp,Tp,Tp,Tp,Tp),Rp="(?:".concat(Mp,"|").concat(Ap,"|").concat(Pp,"|").concat(Dp,"|").concat(Ep,"|").concat(Op,")"),zp="(?:".concat(Rp,"*)"),Fp=String.raw(Cp||(Cp=Ec(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),zp),Lp=new RegExp(Fp),Ip=new RegExp(Rp),Bp=new RegExp(Rp,"g");function Hp(e){const t=[];if(!(e=(e=>e.replace(vp," $1 ").replace(/,/gi," ").replace(/\s+/gi," "))(e).replace(/\s*([()])\s*/gi,"$1"))||e&&!Lp.test(e))return[...Xc];for(const r of e.matchAll(Bp)){const e=Ip.exec(r[0]);if(!e)continue;let n=Xc;const s=e.filter(e=>!!e),[,a,...i]=s,[l,o,c,d,u,h]=i.map(e=>parseFloat(e));switch(a){case"translate":n=Zd(l,o);break;case od:n=eu({angle:l},{x:o,y:c});break;case pd:n=tu(l,o);break;case xd:n=nu(l);break;case yd:n=su(l);break;case"matrix":n=[l,o,c,d,u,h]}t.push(n)}return $d(t)}function Up(e,t,r,n){const s=Array.isArray(t);let a,i=t;if(e!==bd&&e!==vd||t!==nd){if("strokeUniform"===e)return"non-scaling-stroke"===t;if("strokeDashArray"===e)i=t===nd?null:t.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===e)i=r&&r.transformMatrix?Xd(r.transformMatrix,Hp(t)):Hp(t);else if("visible"===e)i=t!==nd&&"hidden"!==t,r&&!1===r.visible&&(i=!1);else if("opacity"===e)i=parseFloat(t),r&&void 0!==r.opacity&&(i*=r.opacity);else if("textAnchor"===e)i="start"===t?Zc:"end"===t?rd:Qc;else if("charSpacing"===e||e===uh)a=ih(t,n)/n*1e3;else if("paintFirst"===e){const e=t.indexOf(bd),r=t.indexOf(vd);i=bd,(e>-1&&r>-1&&r<e||-1===e&&r>-1)&&(i=vd)}else{if("href"===e||"xlink:href"===e||"font"===e||"id"===e)return t;if("imageSmoothing"===e)return"optimizeQuality"===t;a=s?t.map(ih):ih(t,n)}}else i="";return!s&&isNaN(a)?i:a}function Wp(e,t){e.replace(/;\s*$/,"").split(";").forEach(e=>{if(!e)return;const[r,n]=e.split(":");t[r.trim().toLowerCase()]=n.trim()})}const Kp={stroke:"strokeOpacity",fill:"fillOpacity"};function Vp(e,t,r){if(!e)return{};let n,s={},a=$c;e.parentNode&&Ph.test(e.parentNode.nodeName)&&(s=Vp(e.parentElement,t,r),s.fontSize&&(n=a=ih(s.fontSize)));const i=Cc(Cc(Cc({},t.reduce((t,r)=>{const n=e.getAttribute(r);return n&&(t[r]=n),t},{})),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};for(const n in t)yp(e,n.split(" "))&&(r=Cc(Cc({},r),t[n]));return r}(e,r)),function(e){const t={},r=e.getAttribute("style");return r?("string"==typeof r?Wp(r,t):function(e,t){Object.entries(e).forEach(e=>{let[r,n]=e;void 0!==n&&(t[r.toLowerCase()]=n)})}(r,t),t):t}(e));i[Oh]&&e.setAttribute(Oh,i[Oh]),i[Eh]&&(n=ih(i[Eh],a),i[Eh]="".concat(n));const l={};for(const c in i){const e=bp(c),t=Up(e,i[c],s,n);l[e]=t}l&&l.font&&function(e,t){const r=e.match(Ch);if(!r)return;const n=r[1],s=r[3],a=r[4],i=r[5],l=r[6];n&&(t.fontStyle=n),s&&(t.fontWeight=isNaN(parseFloat(s))?s:parseFloat(s)),a&&(t.fontSize=ih(a)),l&&(t.fontFamily=l),i&&(t.lineHeight="normal"===i?1:i)}(l.font,l);const o=Cc(Cc({},s),l);return Ph.test(e.nodeName)?o:function(e){const t=Zm.getDefaults();return Object.entries(Kp).forEach(r=>{let[n,s]=r;if(void 0===e[s]||""===e[n])return;if(void 0===e[n]){if(!t[n])return;e[n]=t[n]}if(0===e[n].indexOf("url("))return;const a=new ah(e[n]);e[n]=a.setAlpha(hu(a.getAlpha()*e[s],2)).toRgba()}),e}(o)}const Yp=["left","top","width","height","visible"],Gp=["rx","ry"];class qp extends Zm{static getDefaults(){return Cc(Cc({},super.getDefaults()),qp.ownDefaults)}constructor(e){super(),Object.assign(this,qp.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:r}=this,n=-t/2,s=-r/2,a=this.rx?Math.min(this.rx,t/2):0,i=this.ry?Math.min(this.ry,r/2):0,l=0!==a||0!==i;e.beginPath(),e.moveTo(n+a,s),e.lineTo(n+t-a,s),l&&e.bezierCurveTo(n+t-Jc*a,s,n+t,s+Jc*i,n+t,s+i),e.lineTo(n+t,s+r-i),l&&e.bezierCurveTo(n+t,s+r-Jc*i,n+t-Jc*a,s+r,n+t-a,s+r),e.lineTo(n+a,s+r),l&&e.bezierCurveTo(n+Jc*a,s+r,n,s+r-Jc*i,n,s+r-i),e.lineTo(n,s+i),l&&e.bezierCurveTo(n,s+Jc*i,n+Jc*a,s,n+a,s),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return super.toObject([...Gp,...e])}_toSVG(){const{width:e,height:t,rx:r,ry:n}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(r,'" ry="').concat(n,'" width="').concat(e,'" height="').concat(t,'" />\n')]}static async fromElement(e,t,r){const n=Vp(e,this.ATTRIBUTE_NAMES,r),{left:s=0,top:a=0,width:i=0,height:l=0,visible:o=!0}=n,c=Tc(n,Yp);return new this(Cc(Cc(Cc({},t),c),{},{left:s,top:a,width:i,height:l,visible:Boolean(o&&i&&l)}))}}Sc(qp,"type","Rect"),Sc(qp,"cacheProperties",[...Xh,...Gp]),Sc(qp,"ownDefaults",{rx:0,ry:0}),Sc(qp,"ATTRIBUTE_NAMES",[...fp,"x","y","rx","ry","width","height"]),kd.setClass(qp),kd.setSVGClass(qp);const Xp="initialization",$p="added",Jp="removed",Qp="imperative",Zp=(e,t)=>{const{strokeUniform:r,strokeWidth:n,width:s,height:a,group:i}=t,l=i&&i!==e?Lu(i.calcTransformMatrix(),e.calcTransformMatrix()):null,o=l?t.getRelativeCenterPoint().transform(l):t.getRelativeCenterPoint(),c=!t.isStrokeAccountedForInDimensions(),d=r&&c?Bu(new Od(n,n),void 0,e.calcTransformMatrix()):Pd,u=!r&&c?n:0,h=Fu(s+u,a+u,$d([l,t.calcOwnMatrix()],!0)).add(d).scalarDivide(2);return[o.subtract(h),o.add(h)]};class eg{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:r,strategy:n}=e;return t===Xp||t===Qp||!!r&&n!==r}shouldLayoutClipPath(e){let{type:t,target:{clipPath:r}}=e;return t!==Xp&&r&&!r.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:r,target:n}=t;if(r===Qp&&t.overrides)return t.overrides;if(0===e.length)return;const{left:s,top:a,width:i,height:l}=Pu(e.map(e=>Zp(n,e)).reduce((e,t)=>e.concat(t),[])),o=new Od(i,l),c=new Od(s,a).add(o.scalarDivide(2));if(r===Xp){const e=this.getInitialSize(t,{size:o,center:c});return{center:c,relativeCorrection:new Od(0,0),size:e}}return{center:c.transform(n.calcOwnMatrix()),size:o}}}Sc(eg,"type","strategy");class tg extends eg{shouldPerformLayout(e){return!0}}Sc(tg,"type","fit-content"),kd.setClass(tg);const rg=["strategy"],ng=["target","strategy","bubbles","prevStrategy"],sg="layoutManager";class ag{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new tg;Sc(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=Cc(Cc({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const r=this.getLayoutResult(t);r&&this.commitLayout(t,r),this.onAfterLayout(t,r),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:r}=t;return[jd,ad,dd,ld,id,cd,md,ud,hd].map(t=>e.on(t,e=>this.performLayout(t===jd?{type:"object_modified",trigger:t,e:e,target:r}:{type:"object_modifying",trigger:t,e:e,target:r})))}subscribe(e,t){this.unsubscribe(e,t);const r=this.attachHandlers(e,t);this._subscriptions.set(e,r)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(e=>e()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:r}=e,{canvas:n}=t;if(r===Xp||r===$p?this.subscribeTargets(e):r===Jp&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),n&&n.fire("object:layout:before",{target:t,context:e}),r===Qp&&e.deep){const r=Tc(e,rg);t.forEachObject(e=>e.layoutManager&&e.layoutManager.performLayout(Cc(Cc({},r),{},{bubbles:!1,target:e})))}}getLayoutResult(e){const{target:t,strategy:r,type:n}=e,s=r.calcLayoutResult(e,t.getObjects());if(!s)return;const a=n===Xp?new Od:t.getRelativeCenterPoint(),{center:i,correction:l=new Od,relativeCorrection:o=new Od}=s,c=a.subtract(i).add(l).transform(n===Xp?Xc:qd(t.calcOwnMatrix()),!0).add(o);return{result:s,prevCenter:a,nextCenter:i,offset:c}}commitLayout(e,t){const{target:r}=e,{result:{size:n},nextCenter:s}=t;var a,i;r.set({width:n.x,height:n.y}),this.layoutObjects(e,t),e.type===Xp?r.set({left:null!==(a=e.x)&&void 0!==a?a:s.x+n.x*Ku(r.originX),top:null!==(i=e.y)&&void 0!==i?i:s.y+n.y*Ku(r.originY)}):(r.setPositionByOrigin(s,Qc,Qc),r.setCoords(),r.set("dirty",!0))}layoutObjects(e,t){const{target:r}=e;r.forEachObject(n=>{n.group===r&&this.layoutObject(e,t,n)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,r.clipPath)}layoutObject(e,t,r){let{offset:n}=t;r.set({left:r.left+n.x,top:r.top+n.y})}onAfterLayout(e,t){const{target:r,strategy:n,bubbles:s,prevStrategy:a}=e,i=Tc(e,ng),{canvas:l}=r;r.fire("layout:after",{context:e,result:t}),l&&l.fire("object:layout:after",{context:e,result:t,target:r});const o=r.parent;s&&null!=o&&o.layoutManager&&((i.path||(i.path=[])).push(r),o.layoutManager.performLayout(Cc(Cc({},i),{},{target:o}))),r.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(e=>e.forEach(e=>e())),e.clear()}toObject(){return{type:sg,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}kd.setClass(ag,sg);const ig=["type","objects","layoutManager"];class lg extends ag{performLayout(){}}class og extends(Ad(Zm)){static getDefaults(){return Cc(Cc({},super.getDefaults()),og.ownDefaults)}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),Sc(this,"_activeObjects",[]),Sc(this,"__objectSelectionTracker",void 0),Sc(this,"__objectSelectionDisposer",void 0),Object.assign(this,og.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var r;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(e=>{this.enterGroup(e,!1)}),this.layoutManager=null!==(r=t.layoutManager)&&void 0!==r?r:new ag,this.layoutManager.performLayout({type:Xp,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(Dc("error","Group: circular object trees are not supported, this call has no effect"),!1):-1===this._objects.indexOf(e)||(Dc("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((e,t,r)=>this.canEnterGroup(e)&&r.indexOf(e)===t)}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=this._filterObjectsBeforeEnteringGroup(t),s=super.add(...n);return this._onAfterObjectsChange($p,n),s}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const s=this._filterObjectsBeforeEnteringGroup(r),a=super.insertAt(e,...s);return this._onAfterObjectsChange($p,s),a}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(Jp,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const r=this[e];return super._set(e,t),"canvas"===e&&r!==t&&(this._objects||[]).forEach(r=>{r._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:r}=t;const n=this._activeObjects;if(e)n.push(r),this._set("dirty",!0);else if(n.length>0){const e=n.indexOf(r);e>-1&&(n.splice(e,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&Mu(e,Xd(qd(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const r=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();r&&(r===e||e.isDescendantOf(r))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(Mu(e,Xd(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const r=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;r>-1&&this._activeObjects.splice(r,1)}shouldCache(){const e=Zm.prototype.shouldCache.call(this);if(e)for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1;return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,r){this._renderBackground(e);for(let s=0;s<this._objects.length;s++){var n;const t=this._objects[s];null!==(n=this.canvas)&&void 0!==n&&n.preserveObjectStacking&&t.group!==this?(e.save(),e.transform(...qd(this.calcTransformMatrix())),t.render(e),e.restore()):t.group===this&&t.render(e)}this._drawClipPath(e,this.clipPath,r)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.layoutManager.performLayout(Cc({target:this,type:Qp},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const r=this.includeDefaultValues;return this._objects.filter(function(e){return!e.excludeFromExport}).map(function(n){const s=n.includeDefaultValues;n.includeDefaultValues=r;const a=n[e||"toObject"](t);return n.includeDefaultValues=s,a})}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=this.layoutManager.toObject();return Cc(Cc(Cc({},super.toObject(["subTargetCheck","interactive",...e])),"fit-content"!==t.strategy||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=qp.prototype._toSVG.call(this),r=t.indexOf("COMMON_PARTS");t[r]='for="group" ';const n=t.join("");return e?e(n):n}_toSVG(e){const t=["<g ","COMMON_PARTS"," >\n"],r=this._createSVGBgRect(e);r&&t.push("\t\t",r);for(let n=0;n<this._objects.length;n++)t.push("\t\t",this._objects[n].toSVG(e));return t.push("</g>\n"),t}getSvgStyles(){const e=void 0!==this.opacity&&1!==this.opacity?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],r=this._createSVGBgRect(e);r&&t.push("\t",r);for(let n=0;n<this._objects.length;n++)t.push("\t",this._objects[n].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:r,objects:n=[],layoutManager:s}=e,a=Tc(e,ig);return Promise.all([ou(n,t),cu(a,t)]).then(e=>{let[t,r]=e;const n=new this(t,Cc(Cc(Cc({},a),r),{},{layoutManager:new lg}));if(s){const e=kd.getClass(s.type),t=kd.getClass(s.strategy);n.layoutManager=new e(new t)}else n.layoutManager=new ag;return n.layoutManager.subscribeTargets({type:Xp,target:n,targets:n.getObjects()}),n.setCoords(),n})}}Sc(og,"type","Group"),Sc(og,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),kd.setClass(og);const cg=(e,t)=>Math.min(t.width/e.width,t.height/e.height),dg=(e,t)=>Math.max(t.width/e.width,t.height/e.height),ug="\\s*,?\\s*",hg="".concat(ug,"(").concat(Sh,")"),mg="".concat(hg).concat(hg).concat(hg).concat(ug,"([01])").concat(ug,"([01])").concat(hg).concat(hg),pg={m:"l",M:"L"},gg=(e,t,r,n,s,a,i,l,o,c,d)=>{const u=Td(e),h=Ed(e),m=Td(t),p=Ed(t),g=r*s*m-n*a*p+i,f=n*s*m+r*a*p+l;return["C",c+o*(-r*s*h-n*a*u),d+o*(-n*s*h+r*a*u),g+o*(r*s*p+n*a*m),f+o*(n*s*p-r*a*m),g,f]},fg=(e,t,r,n)=>{const s=Math.atan2(t,e),a=Math.atan2(n,r);return a>=s?a-s:2*Math.PI-(s-a)};function xg(e,t,r,n,s,a,i,l){let o;if(Pc.cachesBoundsOfCurve&&(o=[...arguments].join(),Wc.boundsOfCurveCache[o]))return Wc.boundsOfCurveCache[o];const c=Math.sqrt,d=Math.abs,u=[],h=[[0,0],[0,0]];let m=6*e-12*r+6*s,p=-3*e+9*r-9*s+3*i,g=3*r-3*e;for(let v=0;v<2;++v){if(v>0&&(m=6*t-12*n+6*a,p=-3*t+9*n-9*a+3*l,g=3*n-3*t),d(p)<1e-12){if(d(m)<1e-12)continue;const e=-g/m;0<e&&e<1&&u.push(e);continue}const e=m*m-4*g*p;if(e<0)continue;const r=c(e),s=(-m+r)/(2*p);0<s&&s<1&&u.push(s);const i=(-m-r)/(2*p);0<i&&i<1&&u.push(i)}let f=u.length;const x=f,y=jg(e,t,r,n,s,a,i,l);for(;f--;){const{x:e,y:t}=y(u[f]);h[0][f]=e,h[1][f]=t}h[0][x]=e,h[1][x]=t,h[0][x+1]=i,h[1][x+1]=l;const b=[new Od(Math.min(...h[0]),Math.min(...h[1])),new Od(Math.max(...h[0]),Math.max(...h[1]))];return Pc.cachesBoundsOfCurve&&(Wc.boundsOfCurveCache[o]=b),b}const yg=(e,t,r)=>{let[n,s,a,i,l,o,c,d]=r;const u=((e,t,r,n,s,a,i)=>{if(0===r||0===n)return[];let l=0,o=0,c=0;const d=Math.PI,u=i*qc,h=Ed(u),m=Td(u),p=.5*(-m*e-h*t),g=.5*(-m*t+h*e),f=r**2,x=n**2,y=g**2,b=p**2,v=f*x-f*y-x*b;let j=Math.abs(r),w=Math.abs(n);if(v<0){const e=Math.sqrt(1-v/(f*x));j*=e,w*=e}else c=(s===a?-1:1)*Math.sqrt(v/(f*y+x*b));const _=c*j*g/w,k=-c*w*p/j,S=m*_-h*k+.5*e,N=h*_+m*k+.5*t;let C=fg(1,0,(p-_)/j,(g-k)/w),T=fg((p-_)/j,(g-k)/w,(-p-_)/j,(-g-k)/w);0===a&&T>0?T-=2*d:1===a&&T<0&&(T+=2*d);const E=Math.ceil(Math.abs(T/d*2)),O=[],P=T/E,D=8/3*Math.sin(P/4)*Math.sin(P/4)/Math.sin(P/2);let A=C+P;for(let M=0;M<E;M++)O[M]=gg(C,A,m,h,j,w,S,N,D,l,o),l=O[M][5],o=O[M][6],C=A,A+=P;return O})(c-e,d-t,s,a,l,o,i);for(let h=0,m=u.length;h<m;h++)u[h][1]+=e,u[h][2]+=t,u[h][3]+=e,u[h][4]+=t,u[h][5]+=e,u[h][6]+=t;return u},bg=e=>{let t=0,r=0,n=0,s=0;const a=[];let i,l=0,o=0;for(const c of e){const e=[...c];let d;switch(e[0]){case"l":e[1]+=t,e[2]+=r;case"L":t=e[1],r=e[2],d=["L",t,r];break;case"h":e[1]+=t;case"H":t=e[1],d=["L",t,r];break;case"v":e[1]+=r;case"V":r=e[1],d=["L",t,r];break;case"m":e[1]+=t,e[2]+=r;case"M":t=e[1],r=e[2],n=e[1],s=e[2],d=["M",t,r];break;case"c":e[1]+=t,e[2]+=r,e[3]+=t,e[4]+=r,e[5]+=t,e[6]+=r;case"C":l=e[3],o=e[4],t=e[5],r=e[6],d=["C",e[1],e[2],l,o,t,r];break;case"s":e[1]+=t,e[2]+=r,e[3]+=t,e[4]+=r;case"S":"C"===i?(l=2*t-l,o=2*r-o):(l=t,o=r),t=e[3],r=e[4],d=["C",l,o,e[1],e[2],t,r],l=d[3],o=d[4];break;case"q":e[1]+=t,e[2]+=r,e[3]+=t,e[4]+=r;case"Q":l=e[1],o=e[2],t=e[3],r=e[4],d=["Q",l,o,t,r];break;case"t":e[1]+=t,e[2]+=r;case"T":"Q"===i?(l=2*t-l,o=2*r-o):(l=t,o=r),t=e[1],r=e[2],d=["Q",l,o,t,r];break;case"a":e[6]+=t,e[7]+=r;case"A":yg(t,r,e).forEach(e=>a.push(e)),t=e[6],r=e[7];break;case"z":case"Z":t=n,r=s,d=["Z"]}d?(a.push(d),i=d[0]):i=""}return a},vg=(e,t,r,n)=>Math.sqrt((r-e)**2+(n-t)**2),jg=(e,t,r,n,s,a,i,l)=>o=>{const c=o**3,d=(e=>3*e**2*(1-e))(o),u=(e=>3*e*(1-e)**2)(o),h=(e=>(1-e)**3)(o);return new Od(i*c+s*d+r*u+e*h,l*c+a*d+n*u+t*h)},wg=e=>e**2,_g=e=>2*e*(1-e),kg=e=>(1-e)**2,Sg=(e,t,r,n,s,a,i,l)=>o=>{const c=wg(o),d=_g(o),u=kg(o),h=3*(u*(r-e)+d*(s-r)+c*(i-s)),m=3*(u*(n-t)+d*(a-n)+c*(l-a));return Math.atan2(m,h)},Ng=(e,t,r,n,s,a)=>i=>{const l=wg(i),o=_g(i),c=kg(i);return new Od(s*l+r*o+e*c,a*l+n*o+t*c)},Cg=(e,t,r,n,s,a)=>i=>{const l=1-i,o=2*(l*(r-e)+i*(s-r)),c=2*(l*(n-t)+i*(a-n));return Math.atan2(c,o)},Tg=(e,t,r)=>{let n=new Od(t,r),s=0;for(let a=1;a<=100;a+=1){const t=e(a/100);s+=vg(n.x,n.y,t.x,t.y),n=t}return s},Eg=e=>{let t,r,n=0,s=0,a=0,i=0,l=0;const o=[];for(const c of e){const e={x:s,y:a,command:c[0],length:0};switch(c[0]){case"M":r=e,r.x=i=s=c[1],r.y=l=a=c[2];break;case"L":r=e,r.length=vg(s,a,c[1],c[2]),s=c[1],a=c[2];break;case"C":t=jg(s,a,c[1],c[2],c[3],c[4],c[5],c[6]),r=e,r.iterator=t,r.angleFinder=Sg(s,a,c[1],c[2],c[3],c[4],c[5],c[6]),r.length=Tg(t,s,a),s=c[5],a=c[6];break;case"Q":t=Ng(s,a,c[1],c[2],c[3],c[4]),r=e,r.iterator=t,r.angleFinder=Cg(s,a,c[1],c[2],c[3],c[4]),r.length=Tg(t,s,a),s=c[3],a=c[4];break;case"Z":r=e,r.destX=i,r.destY=l,r.length=vg(s,a,i,l),s=i,a=l}n+=r.length,o.push(r)}return o.push({length:n,x:s,y:a}),o},Og=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Eg(e),n=0;for(;t-r[n].length>0&&n<r.length-2;)t-=r[n].length,n++;const s=r[n],a=t/s.length,i=e[n];switch(s.command){case"M":return{x:s.x,y:s.y,angle:0};case"Z":return Cc(Cc({},new Od(s.x,s.y).lerp(new Od(s.destX,s.destY),a)),{},{angle:Math.atan2(s.destY-s.y,s.destX-s.x)});case"L":return Cc(Cc({},new Od(s.x,s.y).lerp(new Od(i[1],i[2]),a)),{},{angle:Math.atan2(i[2]-s.y,i[1]-s.x)});case"C":case"Q":return((e,t)=>{let r,n=0,s=0,a={x:e.x,y:e.y},i=Cc({},a),l=.01,o=0;const c=e.iterator,d=e.angleFinder;for(;s<t&&l>1e-4;)i=c(n),o=n,r=vg(a.x,a.y,i.x,i.y),r+s>t?(n-=l,l/=2):(a=i,n+=l,s+=r);return Cc(Cc({},i),{},{angle:d(o)})})(s,t)}},Pg=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),Dg=new RegExp(mg,"g"),Ag=new RegExp(Sh,"gi"),Mg={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},Rg=e=>{var t;const r=[],n=null!==(t=e.match(Pg))&&void 0!==t?t:[];for(const s of n){const e=s[0];if("z"===e||"Z"===e){r.push([e]);continue}const t=Mg[e.toLowerCase()];let n=[];if("a"===e||"A"===e){Dg.lastIndex=0;for(let e=null;e=Dg.exec(s);)n.push(...e.slice(1))}else n=s.match(Ag)||[];for(let s=0;s<n.length;s+=t){const a=new Array(t),i=pg[e];a[0]=s>0&&i?i:e;for(let e=0;e<t;e++)a[e+1]=parseFloat(n[s+e]);r.push(a)}}return r},zg=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=new Od(e[0]),n=new Od(e[1]),s=1,a=0;const i=[],l=e.length,o=l>2;let c;for(o&&(s=e[2].x<n.x?-1:e[2].x===n.x?0:1,a=e[2].y<n.y?-1:e[2].y===n.y?0:1),i.push(["M",r.x-s*t,r.y-a*t]),c=1;c<l;c++){if(!r.eq(n)){const e=r.midPointFrom(n);i.push(["Q",r.x,r.y,e.x,e.y])}r=e[c],c+1<e.length&&(n=e[c+1])}return o&&(s=r.x>e[c-2].x?1:r.x===e[c-2].x?0:-1,a=r.y>e[c-2].y?1:r.y===e[c-2].y?0:-1),i.push(["L",r.x+s*t,r.y+a*t]),i},Fg=(e,t)=>e.map(e=>e.map((e,r)=>0===r||void 0===t?e:hu(e,t)).join(" ")).join(" ");function Lg(e,t){const r=e.style;r&&t&&("string"==typeof t?r.cssText+=";"+t:Object.entries(t).forEach(e=>{let[t,n]=e;return r.setProperty(t,n)}))}const Ig=(e,t)=>Math.floor(Math.random()*(t-e+1))+e;function Bg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t.onComplete||Vc,n=new(Hc().XMLHttpRequest),s=t.signal,a=function(){n.abort()},i=function(){s&&s.removeEventListener("abort",a),n.onerror=n.ontimeout=Vc};if(s&&s.aborted)throw new Mc("request");return s&&s.addEventListener("abort",a,{once:!0}),n.onreadystatechange=function(){4===n.readyState&&(i(),r(n),n.onreadystatechange=Vc)},n.onerror=n.ontimeout=i,n.open("get",e,!0),n.send(),n}const Hg=(e,t)=>{let r=e._findCenterFromElement();e.transformMatrix&&((e=>{if(e.transformMatrix){const{scaleX:t,scaleY:r,angle:n,skewX:s}=Qd(e.transformMatrix);e.flipX=!1,e.flipY=!1,e.set(gd,t),e.set(fd,r),e.angle=n,e.skewX=s,e.skewY=0}})(e),r=r.transform(e.transformMatrix)),delete e.transformMatrix,t&&(e.scaleX*=t.scaleX,e.scaleY*=t.scaleY,e.cropX=t.cropX,e.cropY=t.cropY,r.x+=t.offsetLeft,r.y+=t.offsetTop,e.width=t.width,e.height=t.height),e.setPositionByOrigin(r,Qc,Qc)};Object.freeze({__proto__:null,addTransformToObject:Au,animate:mm,animateColor:pm,applyTransformToObject:Mu,calcAngleBetweenVectors:Fh,calcDimensionsMatrix:au,calcPlaneChangeMatrix:Lu,calcVectorRotation:Lh,cancelAnimFrame:zd,capValue:Gh,composeMatrix:iu,copyCanvasElement:e=>{var t;const r=Hd(e);return null===(t=r.getContext("2d"))||void 0===t||t.drawImage(e,0,0),r},cos:Td,createCanvasElement:Id,createImage:Bd,createRotateMatrix:eu,createScaleMatrix:tu,createSkewXMatrix:nu,createSkewYMatrix:su,createTranslateMatrix:Zd,createVector:Rh,crossProduct:Hh,degreesToRadians:Kd,dotProduct:Uh,ease:rm,enlivenObjectEnlivables:cu,enlivenObjects:ou,findScaleToCover:dg,findScaleToFit:cg,getBoundsOfCurve:xg,getOrthonormalVector:Bh,getPathSegmentsInfo:Eg,getPointOnPath:Og,getPointer:Tu,getRandomInt:Ig,getRegularPolygonPath:(e,t)=>{const r=2*Math.PI/e;let n=-Yc;e%2==0&&(n+=r/2);const s=new Array(e+1);for(let a=0;a<e;a++){const e=a*r+n,{x:i,y:l}=new Od(Td(e),Ed(e)).scalarMultiply(t);s[a]=[0===a?"M":"L",i,l]}return s[e]=["Z"],s},getSmoothPathFromPoints:zg,getSvgAttributes:e=>{const t=["instantiated_by_use","style","id","class"];switch(e){case"linearGradient":return t.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);case"radialGradient":return t.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);case"stop":return t.concat(["offset","stop-color","stop-opacity"])}return t},getUnitVector:Ih,groupSVGElements:(e,t)=>e&&1===e.length?e[0]:new og(e,t),hasStyleChanged:mp,invertTransform:qd,isBetweenVectors:Wh,isIdentityMatrix:Yd,isTouchEvent:Eu,isTransparent:ep,joinPath:Fg,loadImage:lu,magnitude:zh,makeBoundingBoxFromPoints:Pu,makePathSimpler:bg,matrixToSVG:mu,mergeClipPaths:(e,t)=>{var r;let n=e,s=t;n.inverted&&!s.inverted&&(n=t,s=e),Hu(s,null===(r=s.group)||void 0===r?void 0:r.calcTransformMatrix(),n.calcTransformMatrix());const a=n.inverted&&s.inverted;return a&&(n.inverted=s.inverted=!1),new og([n],{clipPath:s,inverted:a})},multiplyTransformMatrices:Xd,multiplyTransformMatrixArray:$d,parsePath:Rg,parsePreserveAspectRatioAttribute:lh,parseUnit:ih,pick:du,projectStrokeOnPoints:ap,qrDecompose:Qd,radiansToDegrees:Vd,removeFromArray:Cd,removeTransformFromObject:(e,t)=>{const r=qd(t),n=Xd(r,e.calcOwnMatrix());Mu(e,n)},removeTransformMatrixForSvgParsing:Hg,request:Bg,requestAnimFrame:Rd,resetObjectTransform:Ru,rotatePoint:(e,t,r)=>e.rotate(r,t),rotateVector:Mh,saveObjectTransform:zu,sendObjectToPlane:Hu,sendPointToPlane:Iu,sendVectorToPlane:Bu,setStyle:Lg,sin:Ed,sizeAfterTransform:Fu,string:hp,stylesFromArray:gp,stylesToArray:pp,toBlob:Wd,toDataURL:Ud,toFixed:hu,transformPath:(e,t,r)=>(r&&(t=Xd(t,[1,0,0,1,-r.x,-r.y])),e.map(e=>{const r=[...e];for(let n=1;n<e.length-1;n+=2){const{x:s,y:a}=Gd({x:e[n],y:e[n+1]},t);r[n]=s,r[n+1]=a}return r})),transformPoint:Gd});class Ug extends ku{constructor(e){let{allowTouchScrolling:t=!1,containerClass:r=""}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),Sc(this,"upper",void 0),Sc(this,"container",void 0);const{el:n}=this.lower,s=this.createUpperCanvas();this.upper={el:s,ctx:s.getContext("2d")},this.applyCanvasStyle(n,{allowTouchScrolling:t}),this.applyCanvasStyle(s,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const a=this.createContainerElement();a.classList.add(r),n.parentNode&&n.parentNode.replaceChild(a,n),a.append(n,s),this.container=a}createUpperCanvas(){const{el:e}=this.lower,t=Id();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=Bc().createElement("div");return e.setAttribute("data-fabric","wrapper"),Lg(e,{position:"relative"}),_u(e),e}applyCanvasStyle(e,t){const{styles:r,allowTouchScrolling:n}=t;Lg(e,Cc(Cc({},r),{},{"touch-action":n?"manipulation":nd})),_u(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:r,ctx:n}=this.upper;ju(r,n,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),wu(this.upper.el,e),wu(this.container,e)}cleanupDOM(e){const t=this.container,{el:r}=this.lower,{el:n}=this.upper;super.cleanupDOM(e),t.removeChild(n),t.removeChild(r),t.parentNode&&t.parentNode.replaceChild(r,t)}dispose(){super.dispose(),Ic().dispose(this.upper.el),delete this.upper,delete this.container}}class Wg extends Nu{constructor(){super(...arguments),Sc(this,"targets",[]),Sc(this,"_hoveredTargets",[]),Sc(this,"_objectsToRender",void 0),Sc(this,"_currentTransform",null),Sc(this,"_groupSelector",null),Sc(this,"contextTopDirty",!1)}static getDefaults(){return Cc(Cc({},super.getDefaults()),Wg.ownDefaults)}get upperCanvasEl(){var e;return null===(e=this.elements.upper)||void 0===e?void 0:e.el}get contextTop(){var e;return null===(e=this.elements.upper)||void 0===e?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new Ug(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),r=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=r,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,r){const n=this.targetFindTolerance,s=this.pixelFindContext;this.clearContext(s),s.save(),s.translate(-t+n,-r+n),s.transform(...this.viewportTransform);const a=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(s),e.selectionBackgroundColor=a,s.restore();const i=Math.round(n*this.getRetinaScaling());return ep(s,i,i,i)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(t=>!!t&&!0===e[t]):e[t])}_shouldClearSelection(e,t){const r=this.getActiveObjects(),n=this._activeObject;return!!(!t||t&&n&&r.length>1&&-1===r.indexOf(t)&&n!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&n&&n!==t)}_shouldCenterTransform(e,t,r){if(!e)return;let n;return t===pd||t===gd||t===fd||t===dd?n=this.centeredScaling||e.centeredScaling:t===od&&(n=this.centeredRotation||e.centeredRotation),n?!r:r}_getOriginFromCorner(e,t){const r={x:e.originX,y:e.originY};return t?(["ml","tl","bl"].includes(t)?r.x=rd:["mr","tr","br"].includes(t)&&(r.x=Zc),["tl","mt","tr"].includes(t)?r.y=td:["bl","mb","br"].includes(t)&&(r.y=ed),r):r}_setupCurrentTransform(e,t,r){var n;const s=t.group?Iu(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:a="",control:i}=t.getActiveControl()||{},l=r&&i?null===(n=i.getActionHandler(e,t,i))||void 0===n?void 0:n.bind(i):Qu,o=((e,t,r,n)=>{if(!t||!e)return"drag";const s=n.controls[t];return s.getActionName(r,s,n)})(r,a,e,t),c=e[this.centeredKey],d=this._shouldCenterTransform(t,o,c)?{x:Qc,y:Qc}:this._getOriginFromCorner(t,a),u={target:t,action:o,actionHandler:l,actionPerformed:!1,corner:a,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:s.x-t.left,offsetY:s.y-t.top,originX:d.x,originY:d.y,ex:s.x,ey:s.y,lastX:s.x,lastY:s.y,theta:Kd(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:c,original:Cc(Cc({},zu(t)),{},{originX:d.x,originY:d.y})};this._currentTransform=u,this.fire("before:transform",{e:e,transform:u})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:r,deltaX:n,deltaY:s}=this._groupSelector,a=new Od(t,r).transform(this.viewportTransform),i=new Od(t+n,r+s).transform(this.viewportTransform),l=this.selectionLineWidth/2;let o=Math.min(a.x,i.x),c=Math.min(a.y,i.y),d=Math.max(a.x,i.x),u=Math.max(a.y,i.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(o,c,d-o,u-c)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,o+=l,c+=l,d-=l,u-=l,Zm.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(o,c,d-o,u-c))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),r=this._activeObject,n=this.getActiveObjects();if(this.targets=[],r&&n.length>=1){if(r.findControl(t,Eu(e)))return r;if(n.length>1&&this.searchPossibleTargets([r],t))return r;if(r===this.searchPossibleTargets([r],t)){if(this.preserveObjectStacking){const n=this.targets;this.targets=[];const s=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&s&&s!==r?(this.targets=n,r):s}return r}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let r=e.getCoords();const n=this.getZoom(),s=e.padding/n;if(s){const[e,t,n,a]=r,i=Math.atan2(t.y-e.y,t.x-e.x),l=Td(i)*s,o=Ed(i)*s,c=l+o,d=l-o;r=[new Od(e.x-d,e.y-c),new Od(t.x+c,t.y-d),new Od(n.x+d,n.y+c),new Od(a.x-c,a.y+d)]}return gm.isPointInPolygon(t,r)}_checkTarget(e,t){if(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,Iu(t,void 0,this.viewportTransform))){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;if(!this.isTargetTransparent(e,t.x,t.y))return!0}return!1}_searchPossibleTargets(e,t){let r=e.length;for(;r--;){const n=e[r];if(this._checkTarget(n,t)){if(Dd(n)&&n.subTargetCheck){const e=this._searchPossibleTargets(n._objects,t);e&&this.targets.push(e)}return n}}}searchPossibleTargets(e,t){const r=this._searchPossibleTargets(e,t);if(r&&Dd(r)&&r.interactive&&this.targets[0]){const e=this.targets;for(let t=e.length-1;t>0;t--){const r=e[t];if(!Dd(r)||!r.interactive)return r}return e[0]}return r}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=this.upperCanvasEl,n=r.getBoundingClientRect();let s=Tu(e),a=n.width||0,i=n.height||0;a&&i||(ed in n&&td in n&&(i=Math.abs(n.top-n.bottom)),rd in n&&Zc in n&&(a=Math.abs(n.right-n.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,t||(s=Iu(s,void 0,this.viewportTransform));const l=this.getRetinaScaling();1!==l&&(s.x/=l,s.y/=l);const o=0===a||0===i?new Od(1,1):new Od(r.width/a,r.height/i);return s.multiply(o)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=Id(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return xu(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let r=!1,n=!1;const s=this.getActiveObjects(),a=[],i=[];e.forEach(e=>{s.includes(e)||(r=!0,e.fire("deselected",{e:t,target:e}),i.push(e))}),s.forEach(n=>{e.includes(n)||(r=!0,n.fire("selected",{e:t,target:n}),a.push(n))}),e.length>0&&s.length>0?(n=!0,r&&this.fire("selection:updated",{e:t,selected:a,deselected:i})):s.length>0?(n=!0,this.fire("selection:created",{e:t,selected:a})):e.length>0&&(n=!0,this.fire("selection:cleared",{e:t,deselected:i})),n&&(this._objectsToRender=void 0)}setActiveObject(e,t){const r=this.getActiveObjects(),n=this._setActiveObject(e,t);return this._fireSelectionEvents(r,t),n}_setActiveObject(e,t){const r=this._activeObject;return r!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,xu(e)&&r!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const r=this._activeObject;return!!r&&!r.onDeselect({e:e,object:t})&&(this._currentTransform&&this._currentTransform.target===r&&this.endCurrentTransform(e),xu(r)&&r===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),r=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e:e,deselected:[r]});const n=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),n}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,r=t.target,n={e:e,target:r,transform:t,action:t.action};r._scaling&&(r._scaling=!1),r.setCoords(),t.actionPerformed&&(this.fire("object:modified",n),r.fire(jd,n))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;xu(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,r){const n=this._realizeGroupTransformOnObject(e),s=super._toObject(e,t,r);return e.set(n),s}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&xu(t)&&this._activeObject===t){const r=du(e,["angle","flipX","flipY",Zc,gd,fd,xd,yd,ed]);return Au(e,t.calcOwnMatrix()),r}return{}}_setSVGObject(e,t,r){const n=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,r),t.set(n)}}Sc(Wg,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class Kg{constructor(e){Sc(this,"targets",[]),Sc(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:t}=e.getActiveObject()||{};t&&t.focus()},r=e.upperCanvasEl;r.addEventListener("click",t),this.__disposer=()=>r.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),Cd(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;(null===(t=this.target)||void 0===t?void 0:t.isEditing)&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const Vg=["target","oldTarget","fireCanvas","e"],Yg={passive:!1},Gg=(e,t)=>{const r=e.getViewportPoint(t),n=e.getScenePoint(t);return{viewportPoint:r,scenePoint:n,pointer:r,absolutePointer:n}},qg=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.addEventListener(...r)},Xg=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.removeEventListener(...r)},$g={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class Jg extends Wg{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),Sc(this,"_isClick",void 0),Sc(this,"textEditingManager",new Kg(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(e=>{this[e]=this[e].bind(this)}),this.addOrRemove(qg,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const r=this.upperCanvasEl,n=this._getEventPrefix();e(vu(r),"resize",this._onResize),e(r,n+"down",this._onMouseDown),e(r,"".concat(n,"move"),this._onMouseMove,Yg),e(r,"".concat(n,"out"),this._onMouseOut),e(r,"".concat(n,"enter"),this._onMouseEnter),e(r,"wheel",this._onMouseWheel),e(r,"contextmenu",this._onContextMenu),e(r,"click",this._onClick),e(r,"dblclick",this._onClick),e(r,"dragstart",this._onDragStart),e(r,"dragend",this._onDragEnd),e(r,"dragover",this._onDragOver),e(r,"dragenter",this._onDragEnter),e(r,"dragleave",this._onDragLeave),e(r,"drop",this._onDrop),this.enablePointerEvents||e(r,"touchstart",this._onTouchStart,Yg)}removeListeners(){this.addOrRemove(Xg,"remove");const e=this._getEventPrefix(),t=bu(this.upperCanvasEl);Xg(t,"".concat(e,"up"),this._onMouseUp),Xg(t,"touchend",this._onTouchEnd,Yg),Xg(t,"".concat(e,"move"),this._onMouseMove,Yg),Xg(t,"touchmove",this._onMouseMove,Yg),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,r=Cc({e:e},Gg(this,e));this.fire("mouse:out",Cc(Cc({},r),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",Cc({},r)),this._hoveredTargets.forEach(e=>{this.fire("mouse:out",Cc(Cc({},r),{},{target:e})),e&&e.fire("mouseout",Cc({},r))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",Cc({e:e},Gg(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const r={e:e,target:t};return this.fire("dragstart",r),t.fire("dragstart",r),void qg(this.upperCanvasEl,"drag",this._onDragProgress)}Ou(e)}_renderDragEffects(e,t,r){let n=!1;const s=this._dropTarget;s&&s!==t&&s!==r&&(s.clearContextTop(),n=!0),null==t||t.clearContextTop(),r!==t&&(null==r||r.clearContextTop());const a=this.contextTop;a.save(),a.transform(...this.viewportTransform),t&&(a.save(),t.transform(a),t.renderDragSourceEffect(e),a.restore(),n=!0),r&&(a.save(),r.transform(a),r.renderDropTargetEffect(e),a.restore(),n=!0),a.restore(),n&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==nd,r=t?this._activeObject:void 0,n={e:e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:r};Xg(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",n),this._dragSource&&this._dragSource.fire("dragend",n),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e:e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:r,targets:n}=this.findDragTargets(e),s=this._dragSource,a={e:e,target:r,subTargets:n,dragSource:s,canDrop:!1,dropTarget:void 0};let i;this.fire(t,a),this._fireEnterLeaveEvents(r,a),r&&(r.canDrop(e)&&(i=r),r.fire(t,a));for(let l=0;l<n.length;l++){const r=n[l];r.canDrop(e)&&(i=r),r.fire(t,a)}this._renderDragEffects(e,s,i),this._dropTarget=i}_onDragEnter(e){const{target:t,targets:r}=this.findDragTargets(e),n={e:e,target:t,subTargets:r,dragSource:this._dragSource};this.fire("dragenter",n),this._fireEnterLeaveEvents(t,n)}_onDragLeave(e){const t={e:e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:r}=this.findDragTargets(e),n=this._basicEventHandler("drop:before",Cc({e:e,target:t,subTargets:r,dragSource:this._dragSource},Gg(this,e)));n.didDrop=!1,n.dropTarget=void 0,this._basicEventHandler("drop",n),this.fire("drop:after",n)}_onContextMenu(e){const t=this.findTarget(e),r=this.targets||[],n=this._basicEventHandler("contextmenu:before",{e:e,target:t,subTargets:r});return this.stopContextMenu&&Ou(e),this._basicEventHandler("contextmenu",n),!1}_onClick(e){const t=e.detail;t>3||t<2||(this._cacheTransformEventData(e),2==t&&"dblclick"===e.type&&this._handleEvent(e,"dblclick"),3==t&&this._handleEvent(e,"tripleclick"),this._resetTransformEventData())}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return!0===e.isPrimary||!1!==e.isPrimary&&("touchend"===e.type&&0===e.touches.length||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const r=this._activeObject;void 0===this.mainTouchId&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||r&&this._target===r)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const n=this.upperCanvasEl,s=this._getEventPrefix(),a=bu(n);qg(a,"touchend",this._onTouchEnd,Yg),t&&qg(a,"touchmove",this._onMouseMove,Yg),Xg(n,"".concat(s,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();Xg(t,"".concat(r,"move"),this._onMouseMove,Yg);const n=bu(t);qg(n,"".concat(r,"up"),this._onMouseUp),qg(n,"".concat(r,"move"),this._onMouseMove,Yg)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),r=bu(this.upperCanvasEl);Xg(r,"touchend",this._onTouchEnd,Yg),Xg(r,"touchmove",this._onMouseMove,Yg),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{qg(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();if(this._isMainEvent(e)){const e=bu(this.upperCanvasEl);Xg(e,"".concat(r,"up"),this._onMouseUp),Xg(e,"".concat(r,"move"),this._onMouseMove,Yg),qg(t,"".concat(r,"move"),this._onMouseMove,Yg)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const r=this._currentTransform,n=this._isClick,s=this._target,{button:a}=e;if(a)return(this.fireMiddleClick&&1===a||this.fireRightClick&&2===a)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let i,l,o=!1;if(r&&(this._finalizeCurrentTransform(e),o=r.actionPerformed),!n){const t=s===this._activeObject;this.handleSelection(e),o||(o=this._shouldRender(s)||!t&&s===this._activeObject)}if(s){const t=s.findControl(this.getViewportPoint(e),Eu(e)),{key:n,control:a}=t||{};if(l=n,s.selectable&&s!==this._activeObject&&"up"===s.activeOn)this.setActiveObject(s,e),o=!0;else if(a){const t=a.getMouseUpHandler(e,s,a);t&&(i=this.getScenePoint(e),t.call(a,e,r,i.x,i.y))}s.isMoving=!1}if(r&&(r.target!==s||r.corner!==l)){const t=r.target&&r.target.controls[r.corner],n=t&&t.getMouseUpHandler(e,r.target,t);i=i||this.getScenePoint(e),n&&n.call(t,e,r,i.x,i.y)}this._setCursorFromEvent(e,s),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,s&&(s.__corner=void 0),o?this.requestRenderAll():n||null!==(t=this._activeObject)&&void 0!==t&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:r,subTargets:n=[]}=t;this.fire(e,t),r&&r.fire(e,t);for(let s=0;s<n.length;s++)n[s]!==r&&n[s].fire(e,t);return t}_handleEvent(e,t,r){const n=this._target,s=this.targets||[],a=Cc(Cc(Cc({e:e,target:n,subTargets:s},Gg(this,e)),{},{transform:this._currentTransform},"up:before"===t||"up"===t?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{}),"down:before"===t||"down"===t?r:{});this.fire("mouse:".concat(t),a),n&&n.fire("mouse".concat(t),a);for(let i=0;i<s.length;i++)s[i]!==n&&s[i].fire("mouse".concat(t),a)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e:e,pointer:t}),this._handleEvent(e,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e:e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e:e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target,r=!!t&&t===this._activeObject;const{button:n}=e;if(n)return(this.fireMiddleClick&&1===n||this.fireRightClick&&2===n)&&this._handleEvent(e,"down",{alreadySelected:r}),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e))return;if(this._currentTransform)return;let s=this._shouldRender(t),a=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,a=!0,s=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const t=this.getScenePoint(e);this._groupSelector={x:t.x,y:t.y,deltaY:0,deltaX:0}}if(r=!!t&&t===this._activeObject,t){t.selectable&&"down"===t.activeOn&&this.setActiveObject(t,e);const n=t.findControl(this.getViewportPoint(e),Eu(e));if(t===this._activeObject&&(n||!a)){this._setupCurrentTransform(e,t,r);const s=n?n.control:void 0,a=this.getScenePoint(e),i=s&&s.getMouseDownHandler(e,t,s);i&&i.call(s,e,this._currentTransform,a.x,a.y)}}s&&(this._objectsToRender=void 0),this._handleEvent(e,"down",{alreadySelected:r}),s&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=Iu(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const r=this.getScenePoint(e);t.deltaX=r.x-t.x,t.deltaY=r.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const t=this.findTarget(e);this._setCursorFromEvent(e,t),this._fireOverOutEvents(e,t)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const r=this._hoveredTarget,n=this._hoveredTargets,s=this.targets,a=Math.max(n.length,s.length);this.fireSyntheticInOutEvents("mouse",{e:e,target:t,oldTarget:r,fireCanvas:!0});for(let i=0;i<a;i++)this.fireSyntheticInOutEvents("mouse",{e:e,target:s[i],oldTarget:n[i]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const r=this._draggedoverTarget,n=this._hoveredTargets,s=this.targets,a=Math.max(n.length,s.length);this.fireSyntheticInOutEvents("drag",Cc(Cc({},t),{},{target:e,oldTarget:r,fireCanvas:!0}));for(let i=0;i<a;i++)this.fireSyntheticInOutEvents("drag",Cc(Cc({},t),{},{target:s[i],oldTarget:n[i]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:r,oldTarget:n,fireCanvas:s,e:a}=t,i=Tc(t,Vg);const{targetIn:l,targetOut:o,canvasIn:c,canvasOut:d}=$g[e],u=n!==r;if(n&&u){const e=Cc(Cc({},i),{},{e:a,target:n,nextTarget:r},Gg(this,a));s&&this.fire(d,e),n.fire(o,e)}if(r&&u){const e=Cc(Cc({},i),{},{e:a,target:r,previousTarget:n},Gg(this,a));s&&this.fire(c,e),r.fire(l,e)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),r=this._currentTransform,n=r.target,s=n.group?Iu(t,void 0,n.group.calcTransformMatrix()):t;r.shiftKey=e.shiftKey,r.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,r,s),r.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,r){const{action:n,actionHandler:s,target:a}=t,i=!!s&&s(e,t,r.x,r.y);i&&a.setCoords(),"drag"===n&&i&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||i}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let r=t.hoverCursor||this.hoverCursor;const n=xu(this._activeObject)?this._activeObject:null,s=(!n||t.group!==n)&&t.findControl(this.getViewportPoint(e));if(s){const r=s.control;this.setCursor(r.cursorStyleHandler(e,r,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(e=>{r=e.hoverCursor||r}),this.setCursor(r)}handleMultiSelection(e,t){const r=this._activeObject,n=xu(r);if(r&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(r!==t||n)&&(n||!t.isDescendantOf(r)&&!r.isDescendantOf(t))&&!t.onSelect({e:e})&&!r.getActiveControl()){if(n){const n=r.getObjects();if(t===r){const r=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(n,r)||this.searchPossibleTargets(this._objects,r))||!t.selectable)return!1}t.group===r?(r.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],1===r.size()&&this._setActiveObject(r.item(0),e)):(r.multiSelectAdd(t),this._hoveredTarget=r,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(n,e)}else{r.isEditing&&r.exitEditing();const n=new(kd.getClass("ActiveSelection"))([],{canvas:this});n.multiSelectAdd(r,t),this._hoveredTarget=n,this._setActiveObject(n,e),this._fireSelectionEvents([r],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:r,deltaX:n,deltaY:s}=this._groupSelector,a=new Od(t,r),i=a.add(new Od(n,s)),l=a.min(i),o=a.max(i).subtract(l),c=this.collectObjects({left:l.x,top:l.y,width:o.x,height:o.y},{includeIntersecting:!this.selectionFullyContained}),d=a.eq(i)?c[0]?[c[0]]:[]:c.length>1?c.filter(t=>!t.onSelect({e:e})).reverse():c;if(1===d.length)this.setActiveObject(d[0],e);else if(d.length>1){const t=kd.getClass("ActiveSelection");this.setActiveObject(new t(d,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const Qg={x1:0,y1:0,x2:0,y2:0},Zg=Cc(Cc({},Qg),{},{r1:0,r2:0}),ef=(e,t)=>isNaN(e)&&"number"==typeof t?t:e,tf=/^(\d+\.\d+)%|(\d+)%$/;function rf(e){return e&&tf.test(e)}function nf(e,t){const r="number"==typeof e?e:"string"==typeof e?parseFloat(e)/(rf(e)?100:1):NaN;return Gh(0,ef(r,t),1)}const sf=/\s*;\s*/,af=/\s*:\s*/;function lf(e,t){let r,n;const s=e.getAttribute("style");if(s){const e=s.split(sf);""===e[e.length-1]&&e.pop();for(let t=e.length;t--;){const[s,a]=e[t].split(af).map(e=>e.trim());"stop-color"===s?r=a:"stop-opacity"===s&&(n=a)}}const a=new ah(r||e.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:nf(e.getAttribute("offset"),0),color:a.toRgb(),opacity:ef(parseFloat(n||e.getAttribute("stop-opacity")||""),1)*a.getAlpha()*t}}function of(e,t){const r=[],n=e.getElementsByTagName("stop"),s=nf(t,1);for(let a=n.length;a--;)r.push(lf(n[a],s));return r}function cf(e){return"linearGradient"===e.nodeName||"LINEARGRADIENT"===e.nodeName?"linear":"radial"}function df(e){return"userSpaceOnUse"===e.getAttribute("gradientUnits")?"pixels":"percentage"}function uf(e,t){return e.getAttribute(t)}function hf(e,t){return function(e,t){let r,{width:n,height:s,gradientUnits:a}=t;return Object.keys(e).reduce((t,i)=>{const l=e[i];return"Infinity"===l?r=1:"-Infinity"===l?r=0:(r="string"==typeof l?parseFloat(l):l,"string"==typeof l&&rf(l)&&(r*=.01,"pixels"===a&&("x1"!==i&&"x2"!==i&&"r2"!==i||(r*=n),"y1"!==i&&"y2"!==i||(r*=s)))),t[i]=r,t},{})}("linear"===cf(e)?function(e){return{x1:uf(e,"x1")||0,y1:uf(e,"y1")||0,x2:uf(e,"x2")||"100%",y2:uf(e,"y2")||0}}(e):function(e){return{x1:uf(e,"fx")||uf(e,"cx")||"50%",y1:uf(e,"fy")||uf(e,"cy")||"50%",r1:0,x2:uf(e,"cx")||"50%",y2:uf(e,"cy")||"50%",r2:uf(e,"r")||"50%"}}(e),Cc(Cc({},t),{},{gradientUnits:df(e)}))}class mf{constructor(e){const{type:t="linear",gradientUnits:r="pixels",coords:n={},colorStops:s=[],offsetX:a=0,offsetY:i=0,gradientTransform:l,id:o}=e||{};Object.assign(this,{type:t,gradientUnits:r,coords:Cc(Cc({},"radial"===t?Zg:Qg),n),colorStops:s,offsetX:a,offsetY:i,gradientTransform:l,id:o?"".concat(o,"_").concat(Ld()):Ld()})}addColorStop(e){for(const t in e){const r=new ah(e[t]);this.colorStops.push({offset:parseFloat(t),color:r.toRgb(),opacity:r.getAlpha()})}return this}toObject(e){return Cc(Cc({},du(this,e)),{},{type:this.type,coords:Cc({},this.coords),colorStops:this.colorStops.map(e=>Cc({},e)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[],n=this.gradientTransform?this.gradientTransform.concat():Xc.concat(),s="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox",a=this.colorStops.map(e=>Cc({},e)).sort((e,t)=>e.offset-t.offset);let i=-this.offsetX,l=-this.offsetY;var o;"objectBoundingBox"===s?(i/=e.width,l/=e.height):(i+=e.width/2,l+=e.height/2),(o=e)&&"function"==typeof o._renderPathCommands&&"percentage"!==this.gradientUnits&&(i-=e.pathOffset.x,l-=e.pathOffset.y),n[4]-=i,n[5]-=l;const c=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(s,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(mu(n),'"'),""].join(" ");if("linear"===this.type){const{x1:e,y1:t,x2:n,y2:s}=this.coords;r.push("<linearGradient ",c,' x1="',e,'" y1="',t,'" x2="',n,'" y2="',s,'">\n')}else if("radial"===this.type){const{x1:e,y1:t,x2:n,y2:s,r1:i,r2:l}=this.coords,o=i>l;r.push("<radialGradient ",c,' cx="',o?e:n,'" cy="',o?t:s,'" r="',o?i:l,'" fx="',o?n:e,'" fy="',o?s:t,'">\n'),o&&(a.reverse(),a.forEach(e=>{e.offset=1-e.offset}));const d=Math.min(i,l);if(d>0){const e=d/Math.max(i,l);a.forEach(t=>{t.offset+=e*(1-t.offset)})}}return a.forEach(e=>{let{color:t,offset:n,opacity:s}=e;r.push("<stop ",'offset="',100*n+"%",'" style="stop-color:',t,void 0!==s?";stop-opacity: "+s:";",'"/>\n')}),r.push("linear"===this.type?"</linearGradient>":"</radialGradient>","\n"),r.join("")}toLive(e){const{x1:t,y1:r,x2:n,y2:s,r1:a,r2:i}=this.coords,l="linear"===this.type?e.createLinearGradient(t,r,n,s):e.createRadialGradient(t,r,a,n,s,i);return this.colorStops.forEach(e=>{let{color:t,opacity:r,offset:n}=e;l.addColorStop(n,void 0!==r?new ah(t).setAlpha(r).toRgba():t)}),l}static async fromObject(e){const{colorStops:t,gradientTransform:r}=e;return new this(Cc(Cc({},e),{},{colorStops:t?t.map(e=>Cc({},e)):void 0,gradientTransform:r?[...r]:void 0}))}static fromElement(e,t,r){const n=df(e),s=t._findCenterFromElement();return new this(Cc({id:e.getAttribute("id")||void 0,type:cf(e),coords:hf(e,{width:r.viewBoxWidth||r.width,height:r.viewBoxHeight||r.height}),colorStops:of(e,r.opacity),gradientUnits:n,gradientTransform:Hp(e.getAttribute("gradientTransform")||"")},"pixels"===n?{offsetX:t.width/2-s.x,offsetY:t.height/2-s.y}:{offsetX:0,offsetY:0}))}}Sc(mf,"type","Gradient"),kd.setClass(mf,"gradient"),kd.setClass(mf,"linear"),kd.setClass(mf,"radial");const pf=["type","source","patternTransform"];class gf{get type(){return"pattern"}set type(e){Dc("warn","Setting type has no effect",e)}constructor(e){Sc(this,"repeat","repeat"),Sc(this,"offsetX",0),Sc(this,"offsetY",0),Sc(this,"crossOrigin",""),this.id=Ld(),Object.assign(this,e)}isImageSource(){return!!this.source&&"string"==typeof this.source.src}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&0!==this.source.naturalWidth&&0!==this.source.naturalHeight)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const{repeat:t,crossOrigin:r}=this;return Cc(Cc({},du(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:r,offsetX:hu(this.offsetX,Pc.NUM_FRACTION_DIGITS),offsetY:hu(this.offsetY,Pc.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:r}=e;const{source:n,repeat:s,id:a}=this,i=ef(this.offsetX/t,0),l=ef(this.offsetY/r,0),o="repeat-y"===s||"no-repeat"===s?1+Math.abs(i||0):ef(n.width/t,0),c="repeat-x"===s||"no-repeat"===s?1+Math.abs(l||0):ef(n.height/r,0);return['<pattern id="SVGID_'.concat(a,'" x="').concat(i,'" y="').concat(l,'" width="').concat(o,'" height="').concat(c,'">'),'<image x="0" y="0" width="'.concat(n.width,'" height="').concat(n.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join("\n")}static async fromObject(e,t){let{type:r,source:n,patternTransform:s}=e,a=Tc(e,pf);const i=await lu(n,Cc(Cc({},t),{},{crossOrigin:a.crossOrigin}));return new this(Cc(Cc({},a),{},{patternTransform:s&&s.slice(0),source:i}))}}Sc(gf,"type","Pattern"),kd.setClass(gf),kd.setClass(gf,"pattern");const ff=["path","left","top"],xf=["d"];class yf extends Zm{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{path:r,left:n,top:s}=t,a=Tc(t,ff);super(),Object.assign(this,yf.ownDefaults),this.setOptions(a),this._setPath(e||[],!0),"number"==typeof n&&this.set(Zc,n),"number"==typeof s&&this.set(ed,s)}_setPath(e,t){this.path=bg(Array.isArray(e)?e:Rg(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new Od(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,r=-this.pathOffset.y;e.beginPath();for(const n of this.path)switch(n[0]){case"L":e.lineTo(n[1]+t,n[2]+r);break;case"M":e.moveTo(n[1]+t,n[2]+r);break;case"C":e.bezierCurveTo(n[1]+t,n[2]+r,n[3]+t,n[4]+r,n[5]+t,n[6]+r);break;case"Q":e.quadraticCurveTo(n[1]+t,n[2]+r,n[3]+t,n[4]+r);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Cc(Cc({},super.toObject(e)),{},{path:this.path.map(e=>e.slice())})}toDatalessObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=Fg(this.path,Pc.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,'" stroke-linecap="round" />\n')]}_getOffsetTransform(){const e=Pc.NUM_FRACTION_DIGITS;return" translate(".concat(hu(-this.pathOffset.x,e),", ").concat(hu(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:r,pathOffset:n}=this._calcDimensions();this.set({width:t,height:r,pathOffset:n}),e&&this.setPositionByOrigin(n,Qc,Qc)}_calcBoundsFromPath(){const e=[];let t=0,r=0,n=0,s=0;for(const a of this.path)switch(a[0]){case"L":n=a[1],s=a[2],e.push({x:t,y:r},{x:n,y:s});break;case"M":n=a[1],s=a[2],t=n,r=s;break;case"C":e.push(...xg(n,s,a[1],a[2],a[3],a[4],a[5],a[6])),n=a[5],s=a[6];break;case"Q":e.push(...xg(n,s,a[1],a[2],a[1],a[2],a[3],a[4])),n=a[3],s=a[4];break;case"Z":n=t,s=r}return Pu(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return Cc(Cc({},e),{},{pathOffset:new Od(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,r){const n=Vp(e,this.ATTRIBUTE_NAMES,r),{d:s}=n;return new this(s,Cc(Cc(Cc({},Tc(n,xf)),t),{},{left:void 0,top:void 0}))}}Sc(yf,"type","Path"),Sc(yf,"cacheProperties",[...Xh,"path","fillRule"]),Sc(yf,"ATTRIBUTE_NAMES",[...fp,"d"]),kd.setClass(yf),kd.setSVGClass(yf);const bf=["left","top","radius"],vf=["radius","startAngle","endAngle","counterClockwise"];class jf extends Zm{static getDefaults(){return Cc(Cc({},super.getDefaults()),jf.ownDefaults)}constructor(e){super(),Object.assign(this,jf.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),"radius"===e&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,Kd(this.startAngle),Kd(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(gd)}getRadiusY(){return this.get("radius")*this.get(fd)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return super.toObject([...vf,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(0===e)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),'" />\n'];{const{radius:t}=this,r=Kd(this.startAngle),n=Kd(this.endAngle),s=Td(r)*t,a=Ed(r)*t,i=Td(n)*t,l=Ed(n)*t,o=e>180?1:0,c=this.counterClockwise?0:1;return['<path d="M '.concat(s," ").concat(a," A ").concat(t," ").concat(t," 0 ").concat(o," ").concat(c," ").concat(i," ").concat(l,'" '),"COMMON_PARTS"," />\n"]}}static async fromElement(e,t,r){const n=Vp(e,this.ATTRIBUTE_NAMES,r),{left:s=0,top:a=0,radius:i=0}=n;return new this(Cc(Cc({},Tc(n,bf)),{},{radius:i,left:s-i,top:a-i}))}static fromObject(e){return super._fromObject(e)}}Sc(jf,"type","Circle"),Sc(jf,"cacheProperties",[...Xh,...vf]),Sc(jf,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),Sc(jf,"ATTRIBUTE_NAMES",["cx","cy","r",...fp]),kd.setClass(jf),kd.setSVGClass(jf);const wf=["x1","y1","x2","y2"],_f=["x1","y1","x2","y2"],kf=["x1","x2","y1","y2"];class Sf extends Zm{constructor(){let[e,t,r,n]=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,0],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),Object.assign(this,Sf.ownDefaults),this.setOptions(s),this.x1=e,this.x2=r,this.y1=t,this.y2=n,this._setWidthHeight();const{left:a,top:i}=s;"number"==typeof a&&this.set(Zc,a),"number"==typeof i&&this.set(ed,i)}_setWidthHeight(){const{x1:e,y1:t,x2:r,y2:n}=this;this.width=Math.abs(r-e),this.height=Math.abs(n-t);const{left:s,top:a,width:i,height:l}=Pu([{x:e,y:t},{x:r,y:n}]),o=new Od(s+i/2,a+l/2);this.setPositionByOrigin(o,Qc,Qc)}_set(e,t){return super._set(e,t),kf.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const r=e.strokeStyle;var n;pu(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=null!==(n=this.stroke)&&void 0!==n?n:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=r}_findCenterFromElement(){return new Od((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Cc(Cc({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return"butt"===this.strokeLineCap&&(0===this.width&&(e.y-=this.strokeWidth),0===this.height&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:r,y2:n,width:s,height:a}=this,i=e<=t?-1:1,l=r<=n?-1:1;return{x1:i*s/2,x2:i*-s/2,y1:l*a/2,y2:l*-a/2}}_toSVG(){const{x1:e,x2:t,y1:r,y2:n}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(r,'" x2="').concat(t,'" y2="').concat(n,'" />\n')]}static async fromElement(e,t,r){const n=Vp(e,this.ATTRIBUTE_NAMES,r),{x1:s=0,y1:a=0,x2:i=0,y2:l=0}=n;return new this([s,a,i,l],Tc(n,wf))}static fromObject(e){let{x1:t,y1:r,x2:n,y2:s}=e,a=Tc(e,_f);return this._fromObject(Cc(Cc({},a),{},{points:[t,r,n,s]}),{extraParam:"points"})}}Sc(Sf,"type","Line"),Sc(Sf,"cacheProperties",[...Xh,...kf]),Sc(Sf,"ATTRIBUTE_NAMES",fp.concat(kf)),kd.setClass(Sf),kd.setSVGClass(Sf);class Nf extends Zm{static getDefaults(){return Cc(Cc({},super.getDefaults()),Nf.ownDefaults)}constructor(e){super(),Object.assign(this,Nf.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,r),e.lineTo(0,-r),e.lineTo(t,r),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}Sc(Nf,"type","Triangle"),Sc(Nf,"ownDefaults",{width:100,height:100}),kd.setClass(Nf),kd.setSVGClass(Nf);const Cf=["rx","ry"];class Tf extends Zm{static getDefaults(){return Cc(Cc({},super.getDefaults()),Tf.ownDefaults)}constructor(e){super(),Object.assign(this,Tf.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(gd)}getRy(){return this.get("ry")*this.get(fd)}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return super.toObject([...Cf,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,'" />\n')]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,Gc,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,r){const n=Vp(e,this.ATTRIBUTE_NAMES,r);return n.left=(n.left||0)-n.rx,n.top=(n.top||0)-n.ry,new this(n)}}Sc(Tf,"type","Ellipse"),Sc(Tf,"cacheProperties",[...Xh,...Cf]),Sc(Tf,"ownDefaults",{rx:0,ry:0}),Sc(Tf,"ATTRIBUTE_NAMES",[...fp,"cx","cy","rx","ry"]),kd.setClass(Tf),kd.setSVGClass(Tf);const Ef=["left","top"],Of={exactBoundingBox:!1};class Pf extends Zm{static getDefaults(){return Cc(Cc({},super.getDefaults()),Pf.ownDefaults)}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),Sc(this,"strokeDiff",void 0),Object.assign(this,Pf.ownDefaults),this.setOptions(t),this.points=e;const{left:r,top:n}=t;this.initialized=!0,this.setBoundingBox(!0),"number"==typeof r&&this.set(Zc,r),"number"==typeof n&&this.set(ed,n)}isOpen(){return!0}_projectStrokeOnPoints(e){return ap(this.points,e,this.isOpen())}_calcDimensions(e){e=Cc({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(e=>e.projectedPoint):this.points;if(0===t.length)return{left:0,top:0,width:0,height:0,pathOffset:new Od,strokeOffset:new Od,strokeDiff:new Od};const r=Pu(t),n=au(Cc(Cc({},e),{},{scaleX:1,scaleY:1})),s=Pu(this.points.map(e=>Gd(e,n,!0))),a=new Od(this.scaleX,this.scaleY);let i=r.left+r.width/2,l=r.top+r.height/2;return this.exactBoundingBox&&(i-=l*Math.tan(Kd(this.skewX)),l-=i*Math.tan(Kd(this.skewY))),Cc(Cc({},r),{},{pathOffset:new Od(i,l),strokeOffset:new Od(s.left,s.top).subtract(new Od(r.left,r.top)).multiply(a),strokeDiff:new Od(r.width,r.height).subtract(new Od(s.width,s.height)).multiply(a)})}_findCenterFromElement(){const e=Pu(this.points);return new Od(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:r,width:n,height:s,pathOffset:a,strokeOffset:i,strokeDiff:l}=this._calcDimensions();this.set({width:n,height:s,pathOffset:a,strokeOffset:i,strokeDiff:l}),e&&this.setPositionByOrigin(new Od(t+n/2,r+s/2),Qc,Qc)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new Od(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.exactBoundingBox){let a;if(Object.keys(e).some(e=>this.strokeUniform||this.constructor.layoutProperties.includes(e))){var t,r;const{width:n,height:s}=this._calcDimensions(e);a=new Od(null!==(t=e.width)&&void 0!==t?t:n,null!==(r=e.height)&&void 0!==r?r:s)}else{var n,s;a=new Od(null!==(n=e.width)&&void 0!==n?n:this.width,null!==(s=e.height)&&void 0!==s?s:this.height)}return a.multiply(new Od(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const r=this.initialized&&this[e]!==t,n=super._set(e,t);return this.exactBoundingBox&&r&&((e===gd||e===fd)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),n}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Cc(Cc({},super.toObject(e)),{},{points:this.points.map(e=>{let{x:t,y:r}=e;return{x:t,y:r}})})}_toSVG(){const e=[],t=this.pathOffset.x,r=this.pathOffset.y,n=Pc.NUM_FRACTION_DIGITS;for(let s=0,a=this.points.length;s<a;s++)e.push(hu(this.points[s].x-t,n),",",hu(this.points[s].y-r,n)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),'" />\n')]}_render(e){const t=this.points.length,r=this.pathOffset.x,n=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-r,this.points[0].y-n);for(let s=0;s<t;s++){const t=this.points[s];e.lineTo(t.x-r,t.y-n)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,r){return new this(function(e){if(!e)return[];const t=e.replace(/,/g," ").trim().split(/\s+/),r=[];for(let n=0;n<t.length;n+=2)r.push({x:parseFloat(t[n]),y:parseFloat(t[n+1])});return r}(e.getAttribute("points")),Cc(Cc({},Tc(Vp(e,this.ATTRIBUTE_NAMES,r),Ef)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}Sc(Pf,"ownDefaults",Of),Sc(Pf,"type","Polyline"),Sc(Pf,"layoutProperties",[xd,yd,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),Sc(Pf,"cacheProperties",[...Xh,"points"]),Sc(Pf,"ATTRIBUTE_NAMES",[...fp]),kd.setClass(Pf),kd.setSVGClass(Pf);class Df extends Pf{isOpen(){return!1}}Sc(Df,"ownDefaults",Of),Sc(Df,"type","Polygon"),kd.setClass(Df),kd.setSVGClass(Df);class Af extends Zm{isEmptyStyles(e){if(!this.styles)return!0;if(void 0!==e&&!this.styles[e])return!0;const t=void 0===e?this.styles:{line:this.styles[e]};for(const r in t)for(const e in t[r])for(const n in t[r][e])return!1;return!0}styleHas(e,t){if(!this.styles)return!1;if(void 0!==t&&!this.styles[t])return!1;const r=void 0===t?this.styles:{0:this.styles[t]};for(const n in r)for(const t in r[n])if(void 0!==r[n][t][e])return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let r,n,s=0,a=!0,i=0;for(const l in t){r=0;for(const i in t[l]){const o=t[l][i]||{};s++,void 0!==o[e]?(n?o[e]!==n&&(a=!1):n=o[e],o[e]===this[e]&&delete o[e]):a=!1,0!==Object.keys(o).length?r++:delete t[l][i]}0===r&&delete t[l]}for(let l=0;l<this._textLines.length;l++)i+=this._textLines[l].length;a&&s===i&&(this[e]=n,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let r,n,s;for(n in t){for(s in r=t[n],r)delete r[s][e],0===Object.keys(r[s]).length&&delete r[s];0===Object.keys(r).length&&delete t[n]}}_extendStyles(e,t){const{lineIndex:r,charIndex:n}=this.get2DCursorLocation(e);this._getLineStyle(r)||this._setLineStyle(r);const s=uu(Cc(Cc({},this._getStyleDeclaration(r,n)),t),e=>void 0!==e);this._setStyleDeclaration(r,n,s)}getSelectionStyles(e,t,r){const n=[];for(let s=e;s<(t||e);s++)n.push(this.getStyleAtPosition(s,r));return n}getStyleAtPosition(e,t){const{lineIndex:r,charIndex:n}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(r,n):this._getStyleDeclaration(r,n)}setSelectionStyles(e,t,r){for(let n=t;n<(r||t);n++)this._extendStyles(n,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var r;const n=this.styles&&this.styles[e];return n&&null!==(r=n[t])&&void 0!==r?r:{}}getCompleteStyleDeclaration(e,t){return Cc(Cc({},du(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,r){this.styles[e][t]=r}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}Sc(Af,"_styleProperties",fh);const Mf=/  +/g,Rf=/"/g;function zf(e,t,r,n,s){return"\t\t".concat(function(e,t){let{left:r,top:n,width:s,height:a}=t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pc.NUM_FRACTION_DIGITS;const l=oh(bd,e,!1),[o,c,d,u]=[r,n,s,a].map(e=>hu(e,i));return"<rect ".concat(l,' x="').concat(o,'" y="').concat(c,'" width="').concat(d,'" height="').concat(u,'"></rect>')}(e,{left:t,top:r,width:n,height:s}),"\n")}const Ff=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let Lf;class If extends Af{static getDefaults(){return Cc(Cc({},super.getDefaults()),If.ownDefaults)}constructor(e,t){super(),Sc(this,"__charBounds",[]),Object.assign(this,If.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=Eg(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(yh)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,r,n,s,a,i;for(let l=0,o=this._textLines.length;l<o;l++)if((this.textAlign===yh||l!==o-1&&!this.isEndOfWrapping(l))&&(n=0,s=this._textLines[l],t=this.getLineWidth(l),t<this.width&&(i=this.textLines[l].match(this._reSpacesAndTabs)))){r=i.length,e=(this.width-t)/r;for(let t=0;t<=s.length;t++)a=this.__charBounds[l][t],this._reSpaceAndTab.test(s[t])?(a.width+=e,a.kernedWidth+=e,a.left+=n,n+=e):a.left+=n}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const r=t?this._unwrappedTextLines:this._textLines;let n;for(n=0;n<r.length;n++){if(e<=r[n].length)return{lineIndex:n,charIndex:e};e-=r[n].length+this.missingNewlineOffset(n,t)}return{lineIndex:n-1,charIndex:r[n-1].length<e?r[n-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===vd?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,r){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case Qc:e.textBaseline="middle";break;case"ascender":e.textBaseline=ed;break;case"descender":e.textBaseline=td}e.font=this._getFontDeclaration(t,r)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,r=this._textLines.length;t<r;t++){const r=this.getLineWidth(t);r>e&&(e=r)}return e}_renderTextLine(e,t,r,n,s,a){this._renderChars(e,t,r,n,s,a)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,r=this._getLeftOffset();let n=this._getTopOffset();for(let s=0,a=this._textLines.length;s<a;s++){const t=this.getHeightOfLine(s);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",s)){n+=t;continue}const a=this._textLines[s].length,i=this._getLineLeftOffset(s);let l,o,c=0,d=0,u=this.getValueOfPropertyAt(s,0,"textBackgroundColor");for(let h=0;h<a;h++){const a=this.__charBounds[s][h];o=this.getValueOfPropertyAt(s,h,"textBackgroundColor"),this.path?(e.save(),e.translate(a.renderLeft,a.renderTop),e.rotate(a.angle),e.fillStyle=o,o&&e.fillRect(-a.width/2,-t/this.lineHeight*(1-this._fontSizeFraction),a.width,t/this.lineHeight),e.restore()):o!==u?(l=r+i+d,"rtl"===this.direction&&(l=this.width-l-c),e.fillStyle=u,u&&e.fillRect(l,n,c,t/this.lineHeight),d=a.left,c=a.width,u=o):c+=a.kernedWidth}o&&!this.path&&(l=r+i+d,"rtl"===this.direction&&(l=this.width-l-c),e.fillStyle=o,e.fillRect(l,n,c,t/this.lineHeight)),n+=t}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,r,n){const s=Wc.getFontCache(t),a=this._getFontDeclaration(t),i=r+e,l=r&&a===this._getFontDeclaration(n),o=t.fontSize/this.CACHE_FONT_SIZE;let c,d,u,h;if(r&&void 0!==s[r]&&(u=s[r]),void 0!==s[e]&&(h=c=s[e]),l&&void 0!==s[i]&&(d=s[i],h=d-u),void 0===c||void 0===u||void 0===d){const n=function(){if(!Lf){const e=Hd({width:0,height:0});Lf=e.getContext("2d")}return Lf}();this._setTextStyles(n,t,!0),void 0===c&&(h=c=n.measureText(e).width,s[e]=c),void 0===u&&l&&r&&(u=n.measureText(r).width,s[r]=u),l&&void 0===d&&(d=n.measureText(i).width,s[i]=d,h=d-u)}return{width:c*o,kernedWidth:h*o}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return 0!==this.charSpacing&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,r,n=0;const s=this.pathSide===rd,a=this.path,i=this._textLines[e],l=i.length,o=new Array(l);this.__charBounds[e]=o;for(let c=0;c<l;c++){const s=i[c];r=this._getGraphemeBox(s,e,c,t),o[c]=r,n+=r.kernedWidth,t=s}if(o[l]={left:r?r.left+r.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},a&&a.segmentsInfo){let e=0;const t=a.segmentsInfo[a.segmentsInfo.length-1].length;switch(this.textAlign){case Zc:e=s?t-n:0;break;case Qc:e=(t-n)/2;break;case rd:e=s?0:t-n}e+=this.pathStartOffset*(s?-1:1);for(let n=s?l-1:0;s?n>=0:n<l;s?n--:n++)r=o[n],e>t?e%=t:e<0&&(e+=t),this._setGraphemeOnPath(e,r),e+=r.kernedWidth}return{width:n,numOfSpaces:0}}_setGraphemeOnPath(e,t){const r=e+t.kernedWidth/2,n=this.path,s=Og(n.path,r,n.segmentsInfo);t.renderLeft=s.x-n.pathOffset.x,t.renderTop=s.y-n.pathOffset.y,t.angle=s.angle+(this.pathSide===rd?Math.PI:0)}_getGraphemeBox(e,t,r,n,s){const a=this.getCompleteStyleDeclaration(t,r),i=n?this.getCompleteStyleDeclaration(t,r-1):{},l=this._measureChar(e,a,n,i);let o,c=l.kernedWidth,d=l.width;0!==this.charSpacing&&(o=this._getWidthOfCharSpacing(),d+=o,c+=o);const u={width:d,left:0,height:a.fontSize,kernedWidth:c,deltaY:a.deltaY};if(r>0&&!s){const e=this.__charBounds[t][r-1];u.left=e.left+e.width+l.kernedWidth-l.width}return u}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let r=1,n=this._textLines[e].length;r<n;r++)t=Math.max(this.getHeightOfChar(e,r),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let r=0,n=this._textLines.length;r<n;r++)e=this.getHeightOfLine(r),t+=r===n-1?e/this.lineHeight:e;return t}_getLeftOffset(){return"ltr"===this.direction?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let r=0;const n=this._getLeftOffset(),s=this._getTopOffset();for(let a=0,i=this._textLines.length;a<i;a++){const i=this.getHeightOfLine(a),l=i/this.lineHeight,o=this._getLineLeftOffset(a);this._renderTextLine(t,e,this._textLines[a],n+o,s+r+l,a),r+=i}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(bd))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,r,n,s,a){const i=this.getHeightOfLine(a),l=this.textAlign.includes(yh),o=this.path,c=!l&&0===this.charSpacing&&this.isEmptyStyles(a)&&!o,d="ltr"===this.direction,u="ltr"===this.direction?1:-1,h=t.direction;let m,p,g,f,x,y="",b=0;if(t.save(),h!==this.direction&&(t.canvas.setAttribute("dir",d?"ltr":"rtl"),t.direction=d?"ltr":"rtl",t.textAlign=d?Zc:rd),s-=i*this._fontSizeFraction/this.lineHeight,c)return this._renderChar(e,t,a,0,r.join(""),n,s),void t.restore();for(let v=0,j=r.length-1;v<=j;v++)f=v===j||this.charSpacing||o,y+=r[v],g=this.__charBounds[a][v],0===b?(n+=u*(g.kernedWidth-g.width),b+=g.width):b+=g.kernedWidth,l&&!f&&this._reSpaceAndTab.test(r[v])&&(f=!0),f||(m=m||this.getCompleteStyleDeclaration(a,v),p=this.getCompleteStyleDeclaration(a,v+1),f=mp(m,p,!1)),f&&(o?(t.save(),t.translate(g.renderLeft,g.renderTop),t.rotate(g.angle),this._renderChar(e,t,a,v,y,-b/2,0),t.restore()):(x=n,this._renderChar(e,t,a,v,y,x,s)),y="",m=p,n+=u*b,b=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,r=this.height+this.strokeWidth,n=Hd({width:t,height:r}),s=n.getContext("2d");return n.width=t,n.height=r,s.beginPath(),s.moveTo(0,0),s.lineTo(t,0),s.lineTo(t,r),s.lineTo(0,r),s.closePath(),s.translate(t/2,r/2),s.fillStyle=e.toLive(s),this._applyPatternGradientTransform(s,e),s.fill(),s.createPattern(n,"no-repeat")}handleFiller(e,t,r){let n,s;return pu(r)?"percentage"===r.gradientUnits||r.gradientTransform||r.patternTransform?(n=-this.width/2,s=-this.height/2,e.translate(n,s),e[t]=this._applyPatternGradientTransformText(r),{offsetX:n,offsetY:s}):(e[t]=r.toLive(e),this._applyPatternGradientTransform(e,r)):(e[t]=r,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:r,strokeWidth:n}=t;return e.lineWidth=n,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",r)}_setFillStyles(e,t){let{fill:r}=t;return this.handleFiller(e,"fillStyle",r)}_renderChar(e,t,r,n,s,a,i){const l=this._getStyleDeclaration(r,n),o=this.getCompleteStyleDeclaration(r,n),c="fillText"===e&&o.fill,d="strokeText"===e&&o.stroke&&o.strokeWidth;if(d||c){if(t.save(),t.font=this._getFontDeclaration(o),l.textBackgroundColor&&this._removeShadow(t),l.deltaY&&(i+=l.deltaY),c){const e=this._setFillStyles(t,o);t.fillText(s,a-e.offsetX,i-e.offsetY)}if(d){const e=this._setStrokeStyles(t,o);t.strokeText(s,a-e.offsetX,i-e.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,r){const n=this.get2DCursorLocation(e,!0),s=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,"fontSize"),a=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,"deltaY"),i={fontSize:s*r.size,deltaY:a+s*r.baseline};this.setSelectionStyles(i,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),r=this.width-t,n=this.textAlign,s=this.direction,a=this.isEndOfWrapping(e);let i=0;return n===yh||n===jh&&!a||n===vh&&!a||n===bh&&!a?0:(n===Qc&&(i=r/2),n===rd&&(i=r),n===jh&&(i=r/2),n===vh&&(i=r),"rtl"===s&&(n===rd||n===yh||n===vh?i=0:n===Zc||n===bh?i=-r:n!==Qc&&n!==jh||(i=-r/2)),i)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(void 0!==this.__lineWidths[e])return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,r){var n;return null!==(n=this._getStyleDeclaration(e,t)[r])&&void 0!==n?n:this[r]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let r=this._getTopOffset();const n=this._getLeftOffset(),s=this.path,a=this._getWidthOfCharSpacing(),i="linethrough"===t?.5:"overline"===t?1:0,l=this.offsets[t];for(let o=0,c=this._textLines.length;o<c;o++){const c=this.getHeightOfLine(o);if(!this[t]&&!this.styleHas(t,o)){r+=c;continue}const d=this._textLines[o],u=c/this.lineHeight,h=this._getLineLeftOffset(o);let m=0,p=0,g=this.getValueOfPropertyAt(o,0,t),f=this.getValueOfPropertyAt(o,0,bd),x=this.getValueOfPropertyAt(o,0,uh),y=g,b=f,v=x;const j=r+u*(1-this._fontSizeFraction);let w=this.getHeightOfChar(o,0),_=this.getValueOfPropertyAt(o,0,"deltaY");for(let r=0,a=d.length;r<a;r++){const a=this.__charBounds[o][r];y=this.getValueOfPropertyAt(o,r,t),b=this.getValueOfPropertyAt(o,r,bd),v=this.getValueOfPropertyAt(o,r,uh);const c=this.getHeightOfChar(o,r),d=this.getValueOfPropertyAt(o,r,"deltaY");if(s&&y&&b){const t=this.fontSize*v/1e3;e.save(),e.fillStyle=f,e.translate(a.renderLeft,a.renderTop),e.rotate(a.angle),e.fillRect(-a.kernedWidth/2,l*c+d-i*t,a.kernedWidth,t),e.restore()}else if((y!==g||b!==f||c!==w||v!==x||d!==_)&&p>0){const t=this.fontSize*x/1e3;let r=n+h+m;"rtl"===this.direction&&(r=this.width-r-p),g&&f&&x&&(e.fillStyle=f,e.fillRect(r,j+l*w+_-i*t,p,t)),m=a.left,p=a.width,g=y,x=v,f=b,w=c,_=d}else p+=a.kernedWidth}let k=n+h+m;"rtl"===this.direction&&(k=this.width-k-p),e.fillStyle=b;const S=this.fontSize*v/1e3;y&&b&&v&&e.fillRect(k,j+l*w+_-i*S,p-a,S),r+=c}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:r=this.fontWeight,fontSize:n=this.fontSize}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;const a=e.includes("'")||e.includes('"')||e.includes(",")||If.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,r,"".concat(s?this.CACHE_FONT_SIZE:n,"px"),a].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return cp(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),r=new Array(t.length),n=["\n"];let s=[];for(let a=0;a<t.length;a++)r[a]=this.graphemeSplit(t[a]),s=s.concat(r[a],n);return s.pop(),{_unwrappedLines:r,lines:t,graphemeText:s,graphemeLines:r}}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Cc(Cc({},super.toObject([...gh,...e])),{},{styles:pp(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:r}=this.constructor;super.set(e,t);let n=!1,s=!1;if("object"==typeof e)for(const a in e)"path"===a&&this.setPathInfo(),n=n||r.includes(a),s=s||"path"===a;else n=r.includes(e),s="path"===e;return s&&this.setPathInfo(),n&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,r){const n=Vp(e,If.ATTRIBUTE_NAMES,r),s=Cc(Cc({},t),n),{textAnchor:a=Zc,textDecoration:i="",dx:l=0,dy:o=0,top:c=0,left:d=0,fontSize:u=$c,strokeWidth:h=1}=s,m=Tc(s,Ff),p=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),Cc({left:d+l,top:c+o,underline:i.includes("underline"),overline:i.includes("overline"),linethrough:i.includes("line-through"),strokeWidth:0,fontSize:u},m)),g=p.getScaledHeight()/p.height,f=((p.height+p.strokeWidth)*p.lineHeight-p.height)*g,x=p.getScaledHeight()+f;let y=0;return a===Qc&&(y=p.getScaledWidth()/2),a===rd&&(y=p.getScaledWidth()),p.set({left:p.left-y,top:p.top-(x-p.fontSize*(.07+p._fontSizeFraction))/p.lineHeight,strokeWidth:h}),p}static fromObject(e){return this._fromObject(Cc(Cc({},e),{},{styles:gp(e.styles||{},e.text)}),{extraParam:"text"})}}Sc(If,"textLayoutProperties",ph),Sc(If,"cacheProperties",[...Xh,...gh]),Sc(If,"ownDefaults",xh),Sc(If,"type","Text"),Sc(If,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),Sc(If,"ATTRIBUTE_NAMES",fp.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),Qm(If,[class extends ch{_toSVG(){const e=this._getSVGLeftTopOffsets(),t=this._getSVGTextAndBg(e.textTop,e.textLeft);return this._wrapSVGTextAndBg(t)}toSVG(e){const t=this._createBaseSVGMarkup(this._toSVG(),{reviver:e,noStyle:!0,withShadow:!0}),r=this.path;return r?t+r._createBaseSVGMarkup(r._toSVG(),{reviver:e,withShadow:!0,additionalTransform:mu(this.calcOwnMatrix())}):t}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(e){let{textBgRects:t,textSpans:r}=e;const n=this.getSvgTextDecoration(this);return[t.join(""),'\t\t<text xml:space="preserve" ','font-family="'.concat(this.fontFamily.replace(Rf,"'"),'" '),'font-size="'.concat(this.fontSize,'" '),this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",n?'text-decoration="'.concat(n,'" '):"","rtl"===this.direction?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",r.join(""),"</text>\n"]}_getSVGTextAndBg(e,t){const r=[],n=[];let s,a=e;this.backgroundColor&&n.push(...zf(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let i=0,l=this._textLines.length;i<l;i++)s=this._getLineLeftOffset(i),"rtl"===this.direction&&(s+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",i))&&this._setSVGTextLineBg(n,i,t+s,a),this._setSVGTextLineText(r,i,t+s,a),a+=this.getHeightOfLine(i);return{textSpans:r,textBgRects:n}}_createTextCharSpan(e,t,r,n,s){const a=Pc.NUM_FRACTION_DIGITS,i=this.getSvgSpanStyles(t,e!==e.trim()||!!e.match(Mf)),l=i?'style="'.concat(i,'"'):"",o=t.deltaY,c=o?' dy="'.concat(hu(o,a),'" '):"",{angle:d,renderLeft:u,renderTop:h,width:m}=s;let p="";if(void 0!==u){const e=m/2;d&&(p=' rotate="'.concat(hu(Vd(d),a),'"'));const t=eu({angle:Vd(d)});t[4]=u,t[5]=h;const s=new Od(-e,0).transform(t);r=s.x,n=s.y}return'<tspan x="'.concat(hu(r,a),'" y="').concat(hu(n,a),'" ').concat(c).concat(p).concat(l,">").concat(lp(e),"</tspan>")}_setSVGTextLineText(e,t,r,n){const s=this.getHeightOfLine(t),a=this.textAlign.includes(yh),i=this._textLines[t];let l,o,c,d,u,h="",m=0;n+=s*(1-this._fontSizeFraction)/this.lineHeight;for(let p=0,g=i.length-1;p<=g;p++)u=p===g||this.charSpacing||this.path,h+=i[p],c=this.__charBounds[t][p],0===m?(r+=c.kernedWidth-c.width,m+=c.width):m+=c.kernedWidth,a&&!u&&this._reSpaceAndTab.test(i[p])&&(u=!0),u||(l=l||this.getCompleteStyleDeclaration(t,p),o=this.getCompleteStyleDeclaration(t,p+1),u=mp(l,o,!0)),u&&(d=this._getStyleDeclaration(t,p),e.push(this._createTextCharSpan(h,d,r,n,c)),h="",l=o,"rtl"===this.direction?r-=m:r+=m,m=0)}_setSVGTextLineBg(e,t,r,n){const s=this._textLines[t],a=this.getHeightOfLine(t)/this.lineHeight;let i,l=0,o=0,c=this.getValueOfPropertyAt(t,0,"textBackgroundColor");for(let d=0;d<s.length;d++){const{left:s,width:u,kernedWidth:h}=this.__charBounds[t][d];i=this.getValueOfPropertyAt(t,d,"textBackgroundColor"),i!==c?(c&&e.push(...zf(c,r+o,n,l,a)),o=s,l=u,c=i):l+=h}i&&e.push(...zf(c,r+o,n,l,a))}_getSVGLineTopOffset(e){let t,r=0;for(t=0;t<e;t++)r+=this.getHeightOfLine(t);const n=this.getHeightOfLine(t);return{lineTop:r,offset:(this._fontSizeMult-this._fontSizeFraction)*n/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(e){return"".concat(super.getSvgStyles(e)," text-decoration-thickness: ").concat(hu(this.textDecorationThickness*this.getObjectScaling().y/10,Pc.NUM_FRACTION_DIGITS),"%; white-space: pre;")}getSvgSpanStyles(e,t){const{fontFamily:r,strokeWidth:n,stroke:s,fill:a,fontSize:i,fontStyle:l,fontWeight:o,deltaY:c,textDecorationThickness:d,linethrough:u,overline:h,underline:m}=e,p=this.getSvgTextDecoration({underline:null!=m?m:this.underline,overline:null!=h?h:this.overline,linethrough:null!=u?u:this.linethrough}),g=d||this.textDecorationThickness;return[s?oh(vd,s):"",n?"stroke-width: ".concat(n,"; "):"",r?"font-family: ".concat(r.includes("'")||r.includes('"')?r:"'".concat(r,"'"),"; "):"",i?"font-size: ".concat(i,"px; "):"",l?"font-style: ".concat(l,"; "):"",o?"font-weight: ".concat(o,"; "):"",p?"text-decoration: ".concat(p,"; text-decoration-thickness: ").concat(hu(g*this.getObjectScaling().y/10,Pc.NUM_FRACTION_DIGITS),"%; "):"",a?oh(bd,a):"",c?"baseline-shift: ".concat(-c,"; "):"",t?"white-space: pre; ":""].join("")}getSvgTextDecoration(e){return["overline","underline","line-through"].filter(t=>e[t.replace("-","")]).join(" ")}}]),kd.setClass(If),kd.setSVGClass(If);class Bf{constructor(e){Sc(this,"target",void 0),Sc(this,"__mouseDownInPlace",!1),Sc(this,"__dragStartFired",!1),Sc(this,"__isDraggingOver",!1),Sc(this,"__dragStartSelection",void 0),Sc(this,"__dragImageDisposer",void 0),Sc(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(e=>e()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,r=t.getSelectionStartFromPointer(e);return t.isEditing&&r>=t.selectionStart&&r<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var r;let{selectionStart:n,selectionEnd:s}=t;const a=this.target,i=a.canvas,l=new Od(a.flipX?-1:1,a.flipY?-1:1),o=a._getCursorBoundaries(n),c=new Od(o.left+o.leftOffset,o.top+o.topOffset).multiply(l).transform(a.calcTransformMatrix()),d=i.getScenePoint(e).subtract(c),u=a.getCanvasRetinaScaling(),h=a.getBoundingRect(),m=c.subtract(new Od(h.left,h.top)),p=i.viewportTransform,g=m.add(d).transform(p,!0),f=a.backgroundColor,x=ip(a.styles);a.backgroundColor="";const y={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};a.setSelectionStyles(y,0,n),a.setSelectionStyles(y,s,a.text.length),a.dirty=!0;const b=a.toCanvasElement({enableRetinaScaling:i.enableRetinaScaling,viewportTransform:!0});a.backgroundColor=f,a.styles=x,a.dirty=!0,Lg(b,{position:"fixed",left:"".concat(-b.width,"px"),border:nd,width:"".concat(b.width/u,"px"),height:"".concat(b.height/u,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{b.remove()},bu(e.target||this.target.hiddenTextarea).body.appendChild(b),null===(r=e.dataTransfer)||void 0===r||r.setDragImage(b,g.x,g.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,r=this.isActive();if(r&&e.dataTransfer){const r=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},n=t._text.slice(r.selectionStart,r.selectionEnd).join(""),s=Cc({text:t.text,value:n},r);e.dataTransfer.setData("text/plain",n),e.dataTransfer.setData("application/fabric",JSON.stringify({value:n,styles:t.getSelectionStyles(r.selectionStart,r.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,s)}return t.abortCursorAnimation(),r}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),r=this.__dragStartSelection;return t<r.selectionStart||t>r.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const r=this.targetCanDrop(t);!this.__isDraggingOver&&r&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,r=this.targetCanDrop(t);!this.__isDraggingOver&&r?this.__isDraggingOver=!0:this.__isDraggingOver&&!r&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:r}=e,n=r.defaultPrevented;this.__isDraggingOver=!1,r.preventDefault();let s=null===(t=r.dataTransfer)||void 0===t?void 0:t.getData("text/plain");if(s&&!n){const t=this.target,n=t.canvas;let a=t.getSelectionStartFromPointer(r);const{styles:i}=r.dataTransfer.types.includes("application/fabric")?JSON.parse(r.dataTransfer.getData("application/fabric")):{},l=s[Math.max(0,s.length-1)],o=0;if(this.__dragStartSelection){const e=this.__dragStartSelection.selectionStart,r=this.__dragStartSelection.selectionEnd;a>e&&a<=r?a=e:a>r&&(a-=r-e),t.removeChars(e,r),delete this.__dragStartSelection}t._reNewline.test(l)&&(t._reNewline.test(t._text[a])||a===t._text.length)&&(s=s.trimEnd()),e.didDrop=!0,e.dropTarget=t,t.insertChars(s,i,a),n.setActiveObject(t),t.enterEditing(r),t.selectionStart=Math.min(a+o,t._text.length),t.selectionEnd=Math.min(t.selectionStart+s.length,t._text.length),t.hiddenTextarea.value=t.text,t._updateTextarea(),t.hiddenTextarea.focus(),t.fire(md,{index:a+o,action:"drop"}),n.fire("text:changed",{target:t}),n.contextTopDirty=!0,n.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var r;const e=this.target,n=this.target.canvas,{selectionStart:s,selectionEnd:a}=this.__dragStartSelection,i=(null===(r=t.dataTransfer)||void 0===r?void 0:r.dropEffect)||nd;i===nd?(e.selectionStart=s,e.selectionEnd=a,e._updateTextarea(),e.hiddenTextarea.focus()):(e.clearContextTop(),"move"===i&&(e.removeChars(s,a),e.selectionStart=e.selectionEnd=s,e.hiddenTextarea&&(e.hiddenTextarea.value=e.text),e._updateTextarea(),e.fire(md,{index:s,action:"dragend"}),n.fire("text:changed",{target:e}),n.requestRenderAll()),e.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const Hf=/[ \n\.,;!\?\-]/;class Uf extends If{constructor(){super(...arguments),Sc(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:r,delay:n,onComplete:s}=e;return mm({startValue:this._currentCursorOpacity,endValue:t,duration:r,delay:n,onComplete:s,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:e=>{this._currentCursorOpacity=e,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;null===(e=this._currentTickCompleteState)||void 0===e||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,r=e-1;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r--;for(;/\S/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findWordBoundaryRight(e){let t=0,r=e;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r++;for(;/\S/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}findLineBoundaryLeft(e){let t=0,r=e-1;for(;!/\n/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findLineBoundaryRight(e){let t=0,r=e;for(;!/\n/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}searchWordBoundary(e,t){const r=this._text;let n=e>0&&this._reSpace.test(r[e])&&(-1===t||!sd.test(r[e-1]))?e-1:e,s=r[n];for(;n>0&&n<r.length&&!Hf.test(s);)n+=t,s=r[n];return-1===t&&Hf.test(s)&&n++,n}selectWord(e){var t;e=null!==(t=e)&&void 0!==t?t:this.selectionStart;const r=this.searchWordBoundary(e,-1),n=Math.max(r,this.searchWordBoundary(e,1));this.selectionStart=r,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){var t;e=null!==(t=e)&&void 0!==t?t:this.selectionStart;const r=this.findLineBoundaryLeft(e),n=this.findLineBoundaryRight(e);this.selectionStart=r,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e:e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e:e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;bu(t).activeElement!==t&&t.focus();const r=this.getSelectionStartFromPointer(e),n=this.selectionStart,s=this.selectionEnd;(r===this.__selectionStartOnMouseDown&&n!==s||n!==r&&s!==r)&&(r>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=r):(this.selectionStart=r,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===n&&this.selectionEnd===s||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,r){const n=r.slice(0,e),s=this.graphemeSplit(n).length;if(e===t)return{selectionStart:s,selectionEnd:s};const a=r.slice(e,t);return{selectionStart:s,selectionEnd:s+this.graphemeSplit(a).length}}fromGraphemeToStringSelection(e,t,r){const n=r.slice(0,e).join("").length;return e===t?{selectionStart:n,selectionEnd:n}:{selectionStart:n,selectionEnd:n+r.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),r=this.get2DCursorLocation(e),n=r.lineIndex,s=r.charIndex,a=this.getValueOfPropertyAt(n,s,"fontSize")*this.lineHeight,i=t.leftOffset,l=this.getCanvasRetinaScaling(),o=this.canvas.upperCanvasEl,c=o.width/l,d=o.height/l,u=c-a,h=d-a,m=new Od(t.left+i,t.top+t.topOffset+a).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new Od(o.clientWidth/c,o.clientHeight/d));return m.x<0&&(m.x=0),m.x>u&&(m.x=u),m.y<0&&(m.y=0),m.y>h&&(m.y=h),m.x+=this.canvas._offset.left,m.y+=this.canvas._offset.top,{left:"".concat(m.x,"px"),top:"".concat(m.y,"px"),fontSize:"".concat(a,"px"),charHeight:a}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(jd),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:r,charIndex:n}=this.get2DCursorLocation(e,!0),{lineIndex:s,charIndex:a}=this.get2DCursorLocation(t,!0);if(r!==s){if(this.styles[r])for(let e=n;e<this._unwrappedTextLines[r].length;e++)delete this.styles[r][e];if(this.styles[s])for(let e=a;e<this._unwrappedTextLines[s].length;e++){const t=this.styles[s][e];t&&(this.styles[r]||(this.styles[r]={}),this.styles[r][n+e-a]=t)}for(let e=r+1;e<=s;e++)delete this.styles[e];this.shiftLineStyles(s,r-s)}else if(this.styles[r]){const e=this.styles[r],t=a-n;for(let r=n;r<a;r++)delete e[r];for(const n in this.styles[r]){const r=parseInt(n,10);r>=a&&(e[r-t]=e[n],delete e[n])}}}shiftLineStyles(e,t){const r=Object.assign({},this.styles);for(const n in this.styles){const s=parseInt(n,10);s>e&&(this.styles[s+t]=r[s],r[s-t]||delete this.styles[s])}}insertNewlineStyleObject(e,t,r,n){const s={},a=this._unwrappedTextLines[e].length,i=a===t;let l=!1;r||(r=1),this.shiftLineStyles(e,r);const o=this.styles[e]?this.styles[e][0===t?t:t-1]:void 0;for(const d in this.styles[e]){const r=parseInt(d,10);r>=t&&(l=!0,s[r-t]=this.styles[e][d],i&&0===t||delete this.styles[e][d])}let c=!1;for(l&&!i&&(this.styles[e+r]=s,c=!0),(c||a>t)&&r--;r>0;)n&&n[r-1]?this.styles[e+r]={0:Cc({},n[r-1])}:o?this.styles[e+r]={0:Cc({},o)}:delete this.styles[e+r],r--;this._forceClearCache=!0}insertCharStyleObject(e,t,r,n){this.styles||(this.styles={});const s=this.styles[e],a=s?Cc({},s):{};r||(r=1);for(const l in a){const e=parseInt(l,10);e>=t&&(s[e+r]=a[e],a[e-r]||delete s[e])}if(this._forceClearCache=!0,n){for(;r--;)Object.keys(n[r]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+r]=Cc({},n[r]));return}if(!s)return;const i=s[t?t-1:1];for(;i&&r--;)this.styles[e][t+r]=Cc({},i)}insertNewStyleBlock(e,t,r){const n=this.get2DCursorLocation(t,!0),s=[0];let a,i=0;for(let l=0;l<e.length;l++)"\n"===e[l]?(i++,s[i]=0):s[i]++;for(s[0]>0&&(this.insertCharStyleObject(n.lineIndex,n.charIndex,s[0],r),r=r&&r.slice(s[0]+1)),i&&this.insertNewlineStyleObject(n.lineIndex,n.charIndex+s[0],i),a=1;a<i;a++)s[a]>0?this.insertCharStyleObject(n.lineIndex+a,0,s[a],r):r&&this.styles[n.lineIndex+a]&&r[0]&&(this.styles[n.lineIndex+a][0]=r[0]),r=r&&r.slice(s[a]+1);s[a]>0&&this.insertCharStyleObject(n.lineIndex+a,0,s[a],r)}removeChars(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r;n>r&&this.removeStyleFromTo(r,n);const s=this.graphemeSplit(e);this.insertNewStyleBlock(s,r,t),this._text=[...this._text.slice(0,r),...s,...this._text.slice(n)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,r){r<=e?(t===e?this._selectionDirection=Zc:this._selectionDirection===rd&&(this._selectionDirection=Zc,this.selectionEnd=e),this.selectionStart=r):r>e&&r<t?this._selectionDirection===rd?this.selectionEnd=r:this.selectionStart=r:(t===e?this._selectionDirection=rd:this._selectionDirection===Zc&&(this._selectionDirection=rd,this.selectionStart=t),this.selectionEnd=r)}}class Wf extends Uf{initHiddenTextarea(){const e=this.canvas&&bu(this.canvas.getElement())||Bc(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(e=>{let[r,n]=e;return t.setAttribute(r,n)});const{top:r,left:n,fontSize:s}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(r,"; left: ").concat(n,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(s,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(e=>{let[r,n]=e;return t.addEventListener(r,this[n].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste,{value:r,selectionStart:n,selectionEnd:s}=this.hiddenTextarea;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const a=()=>{this.updateFromTextArea(),this.fire(md),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(""===this.hiddenTextarea.value)return this.styles={},void a();const i=this._splitTextIntoLines(r).graphemeText,l=this._text.length,o=i.length,c=this.selectionStart,d=this.selectionEnd,u=c!==d;let h,m,p,g,f=o-l;const x=this.fromStringToGraphemeSelection(n,s,r),y=c>x.selectionStart;u?(m=this._text.slice(c,d),f+=d-c):o<l&&(m=y?this._text.slice(d+f,d):this._text.slice(c,c-f));const b=i.slice(x.selectionEnd-f,x.selectionEnd);if(m&&m.length&&(b.length&&(h=this.getSelectionStyles(c,c+1,!1),h=b.map(()=>h[0])),u?(p=c,g=d):y?(p=d-m.length,g=d):(p=d,g=d+m.length),this.removeStyleFromTo(p,g)),b.length){const{copyPasteData:e}=Ic();t&&b.join("")===e.copiedText&&!Pc.disableStyleCopyPaste&&(h=e.copiedTextStyle),this.insertNewStyleBlock(b,c,h)}a()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:r,selectionEnd:n}=t;this.compositionStart=r,this.compositionEnd=n,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=Ic();e.copiedText=this.getSelectedText(),Pc.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let r,n=this._getLineLeftOffset(e);return t>0&&(r=this.__charBounds[e][t-1],n+=r.left+r.width),n}getDownCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),n=this.get2DCursorLocation(r),s=n.lineIndex;if(s===this._textLines.length-1||e.metaKey||34===e.keyCode)return this._text.length-r;const a=n.charIndex,i=this._getWidthBeforeCursor(s,a),l=this._getIndexOnLine(s+1,i);return this._textLines[s].slice(a).length+l+1+this.missingNewlineOffset(s)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),n=this.get2DCursorLocation(r),s=n.lineIndex;if(0===s||e.metaKey||33===e.keyCode)return-r;const a=n.charIndex,i=this._getWidthBeforeCursor(s,a),l=this._getIndexOnLine(s-1,i),o=this._textLines[s].slice(0,a),c=this.missingNewlineOffset(s-1);return-this._textLines[s-1].length+l-o.length+(1-c)}_getIndexOnLine(e,t){const r=this._textLines[e];let n,s,a=this._getLineLeftOffset(e),i=0;for(let l=0,o=r.length;l<o;l++)if(n=this.__charBounds[e][l].width,a+=n,a>t){s=!0;const e=a-n,r=a,o=Math.abs(e-t);i=Math.abs(r-t)<o?l:l-1;break}return s||(i=r.length-1),i}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const r=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===rd);if(t.shiftKey?this.moveCursorWithShift(r):this.moveCursorWithoutShift(r),0!==r){const e=this.text.length;this.selectionStart=Gh(0,this.selectionStart,e),this.selectionEnd=Gh(0,this.selectionEnd,e),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===Zc?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),0!==e}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),0!==e}moveCursorLeft(e){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",e)}_move(e,t,r){let n;if(e.altKey)n=this["findWordBoundary".concat(r)](this[t]);else{if(!e.metaKey&&35!==e.keyCode&&36!==e.keyCode)return this[t]+="Left"===r?-1:1,!0;n=this["findLineBoundary".concat(r)](this[t])}return void 0!==n&&this[t]!==n&&(this[t]=n,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=Zc,this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===rd&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection=Zc,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const r="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[r](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===Zc&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=rd,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=rd,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const Kf=e=>!!e.button;class Vf extends Wf{constructor(){super(...arguments),Sc(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new Bf(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}doubleClickHandler(e){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}tripleClickHandler(e){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}_mouseDownHandler(e){let{e:t,alreadySelected:r}=e;this.canvas&&this.editable&&!Kf(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),r&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=r||this.isEditing)))}mouseUpHandler(e){let{e:t,transform:r}=e;const n=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const e=this.canvas._activeObject;if(e&&e!==this)return}!this.editable||this.group&&!this.group.interactive||r&&r.actionPerformed||Kf(t)||n||this.selected&&!this.getActiveControl()&&(this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),r=this.selectionStart,n=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(r,n,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(qd(this.calcTransformMatrix())).add(new Od(-this._getLeftOffset(),-this._getTopOffset()));let r=0,n=0,s=0;for(let o=0;o<this._textLines.length&&r<=t.y;o++)r+=this.getHeightOfLine(o),s=o,o>0&&(n+=this._textLines[o-1].length+this.missingNewlineOffset(o-1));let a=Math.abs(this._getLineLeftOffset(s));const i=this._textLines[s].length,l=this.__charBounds[s];for(let o=0;o<i;o++){const e=a+l[o].kernedWidth;if(t.x<=e){Math.abs(t.x-e)<=Math.abs(t.x-a)&&n++;break}a=e,n++}return Math.min(this.flipX?i-n:n,this._text.length)}}const Yf="moveCursorUp",Gf="moveCursorDown",qf="moveCursorLeft",Xf="moveCursorRight",$f="exitEditing",Jf=(e,t)=>{const r=t.getRetinaScaling();e.setTransform(r,0,0,r,0,0);const n=t.viewportTransform;e.transform(n[0],n[1],n[2],n[3],n[4],n[5])},Qf=Cc({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:$f,27:$f,33:Yf,34:Gf,35:Xf,36:qf,37:qf,38:Yf,39:Xf,40:Gf},keysMapRtl:{9:$f,27:$f,33:Yf,34:Gf,35:qf,36:Xf,37:Xf,38:Yf,39:qf,40:Gf},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class Zf extends Vf{static getDefaults(){return Cc(Cc({},super.getDefaults()),Zf.ownDefaults)}get type(){const e=super.type;return"itext"===e?"i-text":e}constructor(e,t){super(e,Cc(Cc({},Zf.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):("canvas"===e&&(this.canvas instanceof Jg&&this.canvas.textEditingManager.remove(this),t instanceof Jg&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectionStart||0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selectionEnd,r=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,r)}setSelectionStyles(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selectionStart||0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,r)}get2DCursorLocation(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const r=super.toCanvasElement(e);return this.isEditing=t,r}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries(),r=this.findAncestorsWithClipPath(),n=r.length>0;let s,a=e;if(n){s=Hd(e.canvas),a=s.getContext("2d"),Jf(a,this.canvas);const t=this.calcTransformMatrix();a.transform(t[0],t[1],t[2],t[3],t[4],t[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(a,t):this.renderCursor(a,t),n)for(const i of r){const t=i.clipPath,r=Hd(e.canvas),n=r.getContext("2d");if(Jf(n,this.canvas),!t.absolutePositioned){const e=i.calcTransformMatrix();n.transform(e[0],e[1],e[2],e[3],e[4],e[5])}t.transform(n),t.drawObject(n,!0,{}),this.drawClipPathOnCache(a,t,r)}n&&(e.setTransform(1,0,0,1,0,0),e.drawImage(s,0,0)),this.canvas.contextTopDirty=!0,e.restore()}findAncestorsWithClipPath(){const e=[];let t=this;for(;t;)t.clipPath&&e.push(t),t=t.parent;return e}_getCursorBoundaries(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const r=this._getLeftOffset(),n=this._getTopOffset(),s=this._getCursorBoundariesOffsets(e,t);return{left:r,top:n,leftOffset:s.left,topOffset:s.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,r=0;const{charIndex:n,lineIndex:s}=this.get2DCursorLocation(e);for(let o=0;o<s;o++)t+=this.getHeightOfLine(o);const a=this._getLineLeftOffset(s),i=this.__charBounds[s][n];i&&(r=i.left),0!==this.charSpacing&&n===this._textLines[s].length&&(r-=this._getWidthOfCharSpacing());const l={top:t,left:a+(r>0?r:0)};return"rtl"===this.direction&&(this.textAlign===rd||this.textAlign===yh||this.textAlign===vh?l.left*=-1:this.textAlign===Zc||this.textAlign===bh?l.left=a-(r>0?r:0):this.textAlign!==Qc&&this.textAlign!==jh||(l.left=a-(r>0?r:0))),l}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectionStart,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getCursorBoundaries(e);const r=this.get2DCursorLocation(e),n=r.lineIndex,s=r.charIndex>0?r.charIndex-1:0,a=this.getValueOfPropertyAt(n,s,"fontSize"),i=this.getObjectScaling().x*this.canvas.getZoom(),l=this.cursorWidth/i,o=this.getValueOfPropertyAt(n,s,"deltaY"),c=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(n)/this.lineHeight-a*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(n,s,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-l/2,top:c+t.top+o,width:l,height:a}}_renderCursor(e,t,r){const{color:n,opacity:s,left:a,top:i,width:l,height:o}=this.getCursorRenderingData(r,t);e.fillStyle=n,e.globalAlpha=s,e.fillRect(a,i,l,o)}renderSelection(e,t){const r={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,r,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,r){const n=t.selectionStart,s=t.selectionEnd,a=this.textAlign.includes(yh),i=this.get2DCursorLocation(n),l=this.get2DCursorLocation(s),o=i.lineIndex,c=l.lineIndex,d=i.charIndex<0?0:i.charIndex,u=l.charIndex<0?0:l.charIndex;for(let h=o;h<=c;h++){const t=this._getLineLeftOffset(h)||0;let n=this.getHeightOfLine(h),s=0,i=0,l=0;if(h===o&&(i=this.__charBounds[o][d].left),h>=o&&h<c)l=a&&!this.isEndOfWrapping(h)?this.width:this.getLineWidth(h)||5;else if(h===c)if(0===u)l=this.__charBounds[c][u].left;else{const e=this._getWidthOfCharSpacing();l=this.__charBounds[c][u-1].left+this.__charBounds[c][u-1].width-e}s=n,(this.lineHeight<1||h===c&&this.lineHeight>1)&&(n/=this.lineHeight);let m=r.left+t+i,p=n,g=0;const f=l-i;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",p=1,g=n):e.fillStyle=this.selectionColor,"rtl"===this.direction&&(this.textAlign===rd||this.textAlign===yh||this.textAlign===vh?m=this.width-m-f:this.textAlign===Zc||this.textAlign===bh?m=r.left+t-l:this.textAlign!==Qc&&this.textAlign!==jh||(m=r.left+t-l)),e.fillRect(m,r.top+r.topOffset+g,f,p),r.topOffset+=s}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,bd)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}Sc(Zf,"ownDefaults",Qf),Sc(Zf,"type","IText"),kd.setClass(Zf),kd.setClass(Zf,"i-text");class ex extends Zf{static getDefaults(){return Cc(Cc({},super.getDefaults()),ex.ownDefaults)}constructor(e,t){super(e,Cc(Cc({},ex.ownDefaults),t))}static createControls(){return{controls:$m()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(yh)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,r=0,n=0;const s={};for(let a=0;a<e.graphemeLines.length;a++)"\n"===e.graphemeText[n]&&a>0?(r=0,n++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[n])&&a>0&&(r++,n++),s[a]={line:t,offset:r},n+=e.graphemeLines[a].length,r+=e.graphemeLines[a].length;return s}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const e=this._styleMap[t];e&&(t=e.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,r=0,n=e+1,s=!1;const a=this._styleMap[e],i=this._styleMap[e+1];a&&(e=a.line,r=a.offset),i&&(n=i.line,s=n===e,t=i.offset);const l=void 0===e?this.styles:{line:this.styles[e]};for(const o in l)for(const e in l[o]){const n=parseInt(e,10);if(n>=r&&(!s||n<t))for(const t in l[o][e])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[e];if(!r)return{};e=r.line,t=r.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,r){const n=this._styleMap[e];super._setStyleDeclaration(n.line,n.offset+t,r)}_deleteStyleDeclaration(e,t){const r=this._styleMap[e];super._deleteStyleDeclaration(r.line,r.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const r=this.getGraphemeDataForRender(e),n=[];for(let s=0;s<r.wordsData.length;s++)n.push(...this._wrapLine(s,t,r));return this.isWrapping=!1,n}getGraphemeDataForRender(e){const t=this.splitByGrapheme,r=t?"":" ";let n=0;return{wordsData:e.map((e,s)=>{let a=0;const i=t?this.graphemeSplit(e):this.wordSplit(e);return 0===i.length?[{word:[],width:0}]:i.map(e=>{const i=t?[e]:this.graphemeSplit(e),l=this._measureWord(i,s,a);return n=Math.max(l,n),a+=i.length+r.length,{word:i,width:l}})}),largestWordWidth:n}}_measureWord(e,t){let r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=0;for(let a=0,i=e.length;a<i;a++)s+=this._getGraphemeBox(e[a],t,a+n,r,!0).kernedWidth,r=e[a];return s}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,r){let{largestWordWidth:n,wordsData:s}=r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const i=this._getWidthOfCharSpacing(),l=this.splitByGrapheme,o=[],c=l?"":" ";let d=0,u=[],h=0,m=0,p=!0;t-=a;const g=Math.max(t,n,this.dynamicMinWidth),f=s[e];let x;for(h=0,x=0;x<f.length;x++){const{word:t,width:r}=f[x];h+=t.length,d+=m+r-i,d>g&&!p?(o.push(u),u=[],d=r,p=!0):d+=i,p||l||u.push(c),u=u.concat(t),m=l?0:this._measureWord([c],e,h),h++,p=!1}return x&&o.push(u),n+a>this.dynamicMinWidth&&(this.dynamicMinWidth=n-i+a),o}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),r=this._wrapText(t.lines,this.width),n=new Array(r.length);for(let s=0;s<r.length;s++)n[s]=r[s].join("");return t.lines=n,t.graphemeLines=r,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const r=parseInt(t,10);if(this._textLines[r]){const r=this._styleMap[t].line;e.set("".concat(r),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}Sc(ex,"type","Textbox"),Sc(ex,"textLayoutProperties",[...Zf.textLayoutProperties,"width"]),Sc(ex,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),kd.setClass(ex);class tx extends eg{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:r}=e,{clipPath:n,group:s}=r;if(!n||!this.shouldPerformLayout(e))return;const{width:a,height:i}=Pu(Zp(r,n)),l=new Od(a,i);if(n.absolutePositioned)return{center:Iu(n.getRelativeCenterPoint(),void 0,s?s.calcTransformMatrix():void 0),size:l};{const s=n.getRelativeCenterPoint().transform(r.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:r=new Od,correction:n=new Od}=this.calcBoundingBox(t,e)||{};return{center:r.add(s),correction:n.subtract(s),size:l}}return{center:r.getRelativeCenterPoint().add(s),size:l}}}}Sc(tx,"type","clip-path"),kd.setClass(tx);class rx extends eg{getInitialSize(e,t){let{target:r}=e,{size:n}=t;return new Od(r.width||n.x,r.height||n.y)}}Sc(rx,"type","fixed"),kd.setClass(rx);class nx extends ag{subscribeTargets(e){const t=e.target;e.targets.reduce((e,t)=>(t.parent&&e.add(t.parent),e),new Set).forEach(e=>{e.layoutManager.subscribeTargets({target:e,targets:[t]})})}unsubscribeTargets(e){const t=e.target,r=t.getObjects();e.targets.reduce((e,t)=>(t.parent&&e.add(t.parent),e),new Set).forEach(e=>{!r.some(t=>t.parent===e)&&e.layoutManager.unsubscribeTargets({target:e,targets:[t]})})}}class sx extends og{static getDefaults(){return Cc(Cc({},super.getDefaults()),sx.ownDefaults)}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),Object.assign(this,sx.ownDefaults),this.setOptions(t);const{left:r,top:n,layoutManager:s}=t;this.groupInit(e,{left:r,top:n,layoutManager:null!=s?s:new nx})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];"selection-order"===this.multiSelectionStacking?this.add(...t):t.forEach(e=>{const t=this._objects.findIndex(t=>t.isInFrontOf(e)),r=-1===t?this.size():t;this.insertAt(r,e)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(Dc("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const r=new Set;t.forEach(e=>{const{parent:t}=e;t&&r.add(t)}),e===Jp?r.forEach(e=>{e._onAfterObjectsChange($p,t)}):r.forEach(e=>{e._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,r){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const n=Cc(Cc({hasControls:!1},r),{},{forActiveSelection:!0});for(let s=0;s<this._objects.length;s++)this._objects[s]._renderControls(e,n);super._renderControls(e,t),e.restore()}}Sc(sx,"type","ActiveSelection"),Sc(sx,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),kd.setClass(sx),kd.setClass(sx,"activeSelection");class ax{constructor(){Sc(this,"resources",{})}applyFilters(e,t,r,n,s){const a=s.getContext("2d");if(!a)return;a.drawImage(t,0,0,r,n);const i={sourceWidth:r,sourceHeight:n,imageData:a.getImageData(0,0,r,n),originalEl:t,originalImageData:a.getImageData(0,0,r,n),canvasEl:s,ctx:a,filterBackend:this};e.forEach(e=>{e.applyTo(i)});const{imageData:l}=i;return l.width===r&&l.height===n||(s.width=l.width,s.height=l.height),a.putImageData(l,0,0),i}}class ix{constructor(){let{tileSize:e=Pc.textureSize}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Sc(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),Sc(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const r=Hd({width:e,height:t}),n=r.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});n&&(n.clearColor(0,0,0,0),this.canvas=r,this.gl=n)}applyFilters(e,t,r,n,s,a){const i=this.gl,l=s.getContext("2d");if(!i||!l)return;let o;a&&(o=this.getCachedTexture(a,t));const c={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:r,sourceHeight:n,destinationWidth:r,destinationHeight:n,context:i,sourceTexture:this.createTexture(i,r,n,o?void 0:t),targetTexture:this.createTexture(i,r,n),originalTexture:o||this.createTexture(i,r,n,o?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:s},d=i.createFramebuffer();return i.bindFramebuffer(i.FRAMEBUFFER,d),e.forEach(e=>{e&&e.applyTo(c)}),function(e){const t=e.targetCanvas,r=t.width,n=t.height,s=e.destinationWidth,a=e.destinationHeight;r===s&&n===a||(t.width=s,t.height=a)}(c),this.copyGLTo2D(i,c),i.bindTexture(i.TEXTURE_2D,null),i.deleteTexture(c.sourceTexture),i.deleteTexture(c.targetTexture),i.deleteFramebuffer(d),l.setTransform(1,0,0,1,0,0),c}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,r,n,s){const{NEAREST:a,TEXTURE_2D:i,RGBA:l,UNSIGNED_BYTE:o,CLAMP_TO_EDGE:c,TEXTURE_MAG_FILTER:d,TEXTURE_MIN_FILTER:u,TEXTURE_WRAP_S:h,TEXTURE_WRAP_T:m}=e,p=e.createTexture();return e.bindTexture(i,p),e.texParameteri(i,d,s||a),e.texParameteri(i,u,s||a),e.texParameteri(i,h,c),e.texParameteri(i,m,c),n?e.texImage2D(i,0,l,l,o,n):e.texImage2D(i,0,l,t,r,0,l,o,null),p}getCachedTexture(e,t,r){const{textureCache:n}=this;if(n[e])return n[e];{const s=this.createTexture(this.gl,t.width,t.height,t,r);return s&&(n[e]=s),s}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const r=e.canvas,n=t.targetCanvas,s=n.getContext("2d");if(!s)return;s.translate(0,n.height),s.scale(1,-1);const a=r.height-n.height;s.drawImage(r,0,a,n.width,n.height,0,0,n.width,n.height)}copyGLTo2DPutImageData(e,t){const r=t.targetCanvas.getContext("2d"),n=t.destinationWidth,s=t.destinationHeight,a=n*s*4;if(!r)return;const i=new Uint8Array(this.imageBuffer,0,a),l=new Uint8ClampedArray(this.imageBuffer,0,a);e.readPixels(0,0,n,s,e.RGBA,e.UNSIGNED_BYTE,i);const o=new ImageData(l,n,s);r.putImageData(o,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const r=e.getExtension("WEBGL_debug_renderer_info");if(r){const n=e.getParameter(r.UNMASKED_RENDERER_WEBGL),s=e.getParameter(r.UNMASKED_VENDOR_WEBGL);n&&(t.renderer=n.toLowerCase()),s&&(t.vendor=s.toLowerCase())}return this.gpuInfo=t,t}}let lx;function ox(){return!lx&&(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(lx=function(){const{WebGLProbe:e}=Ic();return e.queryWebGL(Id()),Pc.enableGLFiltering&&e.isSupported(Pc.textureSize)?new ix({tileSize:Pc.textureSize}):new ax}()),lx}const cx=["filters","resizeFilter","src","crossOrigin","type"],dx=["cropX","cropY"];class ux extends Zm{static getDefaults(){return Cc(Cc({},super.getDefaults()),ux.ownDefaults)}constructor(e,t){super(),Sc(this,"_lastScaleX",1),Sc(this,"_lastScaleY",1),Sc(this,"_filterScalingX",1),Sc(this,"_filterScalingY",1),this.filters=[],Object.assign(this,ux.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(Ld()),this.setElement("string"==typeof e?(this.canvas&&bu(this.canvas.getElement())||Bc()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(r),null===(t=e.classList)||void 0===t||t.add(ux.CSS_CANVAS),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=ox(!1);t instanceof ix&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&Ic().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||0===this.strokeWidth)return;const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,-r),e.lineTo(t,-r),e.lineTo(t,r),e.lineTo(-t,r),e.lineTo(-t,-r),e.closePath()}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=[];return this.filters.forEach(e=>{e&&t.push(e.toObject())}),Cc(Cc({},super.toObject([...dx,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,r=-this.width/2,n=-this.height/2;let s=[],a=[],i="",l="";if(!t)return[];if(this.hasCrop()){const e=Ld();s.push('<clipPath id="imageCrop_'+e+'">\n','\t<rect x="'+r+'" y="'+n+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),i=' clip-path="url(#imageCrop_'+e+')" '}if(this.imageSmoothing||(l=' image-rendering="optimizeSpeed"'),e.push("\t<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(r-this.cropX,'" y="').concat(n-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(l).concat(i,"></image>\n")),this.stroke||this.strokeDashArray){const e=this.fill;this.fill=null,a=['\t<rect x="'.concat(r,'" y="').concat(n,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),'" />\n')],this.fill=e}return s=this.paintFirst!==bd?s.concat(a,e):s.concat(e,a),s}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return lu(e,{crossOrigin:t,signal:r}).then(e=>{void 0!==t&&this.set({crossOrigin:t}),this.setElement(e)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),n=r.x,s=r.y,a=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||n>t&&s>t)return this._element=a,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=n,void(this._lastScaleY=s);const i=Hd(a),{width:l,height:o}=a;this._element=i,this._lastScaleX=e.scaleX=n,this._lastScaleY=e.scaleY=s,ox().applyFilters([e],a,l,o,this._element),this._filterScalingX=i.width/this._originalElement.width,this._filterScalingY=i.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.filters||[];if(e=e.filter(e=>e&&!e.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),0===e.length)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,r=t.naturalWidth||t.width,n=t.naturalHeight||t.height;if(this._element===this._originalElement){const e=Hd({width:r,height:n});this._element=e,this._filteredEl=e}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,n),this._lastScaleX=1,this._lastScaleY=1);ox().applyFilters(e,this._originalElement,r,n,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const r=this._filterScalingX,n=this._filterScalingY,s=this.width,a=this.height,i=Math.max(this.cropX,0),l=Math.max(this.cropY,0),o=t.naturalWidth||t.width,c=t.naturalHeight||t.height,d=i*r,u=l*n,h=Math.min(s*r,o-d),m=Math.min(a*n,c-u),p=-s/2,g=-a/2,f=Math.min(s,o/r-i),x=Math.min(a,c/n-l);t&&e.drawImage(t,d,u,h,m,p,g,f,x)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getOriginalSize();this.width=e||r.width,this.height=t||r.height}parsePreserveAspectRatioAttribute(){const e=lh(this.preserveAspectRatio||""),t=this.width,r=this.height,n={width:t,height:r};let s,a=this._element.width,i=this._element.height,l=1,o=1,c=0,d=0,u=0,h=0;return!e||e.alignX===nd&&e.alignY===nd?(l=t/a,o=r/i):("meet"===e.meetOrSlice&&(l=o=cg(this._element,n),s=(t-a*l)/2,"Min"===e.alignX&&(c=-s),"Max"===e.alignX&&(c=s),s=(r-i*o)/2,"Min"===e.alignY&&(d=-s),"Max"===e.alignY&&(d=s)),"slice"===e.meetOrSlice&&(l=o=dg(this._element,n),s=a-t/l,"Mid"===e.alignX&&(u=s/2),"Max"===e.alignX&&(u=s),s=i-r/o,"Mid"===e.alignY&&(h=s/2),"Max"===e.alignY&&(h=s),a=t/l,i=r/o)),{width:a,height:i,scaleX:l,scaleY:o,offsetLeft:c,offsetTop:d,cropX:u,cropY:h}}static fromObject(e,t){let{filters:r,resizeFilter:n,src:s,crossOrigin:a,type:i}=e,l=Tc(e,cx);return Promise.all([lu(s,Cc(Cc({},t),{},{crossOrigin:a})),r&&ou(r,t),n&&ou([n],t),cu(l,t)]).then(e=>{let[t,r=[],[n]=[],a={}]=e;return new this(t,Cc(Cc({},l),{},{src:s,filters:r,resizeFilter:n},a))})}static fromURL(e){let{crossOrigin:t=null,signal:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return lu(e,{crossOrigin:t,signal:r}).then(e=>new this(e,n))}static async fromElement(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const n=Vp(e,this.ATTRIBUTE_NAMES,r);return this.fromURL(n["xlink:href"]||n.href,t,n).catch(e=>(Dc("log","Unable to parse Image",e),null))}}Sc(ux,"type","Image"),Sc(ux,"cacheProperties",[...Xh,...dx]),Sc(ux,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),Sc(ux,"CSS_CANVAS","canvas-img"),Sc(ux,"ATTRIBUTE_NAMES",[...fp,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),kd.setClass(ux),kd.setSVGClass(ux);dh(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const hx=ud,mx=e=>function(t,r,n){const{points:s,pathOffset:a}=n;return new Od(s[e]).subtract(a).transform(Xd(n.getViewportTransform(),n.calcTransformMatrix()))},px=(e,t,r,n)=>{const{target:s,pointIndex:a}=t,i=s,l=Iu(new Od(r,n),void 0,i.calcOwnMatrix());return i.points[a]=l.add(i.pathOffset),i.setDimensions(),i.set("dirty",!0),!0},gx=(e,t)=>function(r,n,s,a){const i=n.target,l=new Od(i.points[(e>0?e:i.points.length)-1]),o=l.subtract(i.pathOffset).transform(i.calcOwnMatrix()),c=t(r,Cc(Cc({},n),{},{pointIndex:e}),s,a),d=l.subtract(i.pathOffset).transform(i.calcOwnMatrix()).subtract(o);return i.left-=d.x,i.top-=d.y,c},fx=e=>vm(hx,gx(e,px)),xx=(e,t,r)=>{const{path:n,pathOffset:s}=e,a=n[t];return new Od(a[r]-s.x,a[r+1]-s.y).transform(Xd(e.getViewportTransform(),e.calcTransformMatrix()))};function yx(e,t,r){const{commandIndex:n,pointIndex:s}=this;return xx(r,n,s)}function bx(e,t,r,n){const{target:s}=t,{commandIndex:a,pointIndex:i}=this,l=((e,t,r,n,s)=>{const{path:a,pathOffset:i}=e,l=a[(n>0?n:a.length)-1],o=new Od(l[s],l[s+1]),c=o.subtract(i).transform(e.calcOwnMatrix()),d=Iu(new Od(t,r),void 0,e.calcOwnMatrix());a[n][s]=d.x+i.x,a[n][s+1]=d.y+i.y,e.setDimensions();const u=o.subtract(e.pathOffset).transform(e.calcOwnMatrix()).subtract(c);return e.left-=u.x,e.top-=u.y,e.set("dirty",!0),!0})(s,r,n,a,i);return Uu(this.actionName,Cc(Cc({},Xu(e,t,r,n)),{},{commandIndex:a,pointIndex:i})),l}class vx extends Sm{constructor(e){super(e)}render(e,t,r,n,s){const a=Cc(Cc({},n),{},{cornerColor:this.controlFill,cornerStrokeColor:this.controlStroke,transparentCorners:!this.controlFill});super.render(e,t,r,a,s)}}class jx extends vx{constructor(e){super(e)}render(e,t,r,n,s){const{path:a}=s,{commandIndex:i,pointIndex:l,connectToCommandIndex:o,connectToPointIndex:c}=this;e.save(),e.strokeStyle=this.controlStroke,this.connectionDashArray&&e.setLineDash(this.connectionDashArray);const[d]=a[i],u=xx(s,o,c);if("Q"===d){const n=xx(s,i,l+2);e.moveTo(n.x,n.y),e.lineTo(t,r)}else e.moveTo(t,r);e.lineTo(u.x,u.y),e.stroke(),e.restore(),super.render(e,t,r,n,s)}}const wx=(e,t,r,n,s,a)=>new(r?jx:vx)(Cc(Cc({commandIndex:e,pointIndex:t,actionName:"modifyPath",positionHandler:yx,actionHandler:bx,connectToCommandIndex:s,connectToPointIndex:a},n),r?n.controlPointStyle:n.pointStyle));Object.freeze({__proto__:null,changeWidth:wm,createObjectDefaultControls:qm,createPathControls:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};let n="M";return e.path.forEach((e,s)=>{const a=e[0];switch("Z"!==a&&(r["c_".concat(s,"_").concat(a)]=wx(s,e.length-2,!1,t)),a){case"C":r["c_".concat(s,"_C_CP_1")]=wx(s,1,!0,t,s-1,(e=>"C"===e?5:"Q"===e?3:1)(n)),r["c_".concat(s,"_C_CP_2")]=wx(s,3,!0,t,s,5);break;case"Q":r["c_".concat(s,"_Q_CP_1")]=wx(s,1,!0,t,s,3)}n=a}),r},createPolyActionHandler:fx,createPolyControls:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};for(let n=0;n<("number"==typeof e?e:e.points.length);n++)r["p".concat(n)]=new Sm(Cc({actionName:hx,positionHandler:mx(n),actionHandler:fx(n)},t));return r},createPolyPositionHandler:mx,createResizeControls:Xm,createTextboxDefaultControls:$m,dragHandler:Qu,factoryPolyActionHandler:gx,getLocalPoint:Ju,polyActionHandler:px,renderCircleControl:_m,renderSquareControl:km,rotationStyleHandler:Nm,rotationWithSnapping:Cm,scaleCursorStyleHandler:Pm,scaleOrSkewActionName:Km,scaleSkewCursorStyleHandler:Vm,scalingEqually:Am,scalingX:Mm,scalingXOrSkewingY:Ym,scalingY:Rm,scalingYOrSkewingX:Gm,skewCursorStyleHandler:Im,skewHandlerX:Hm,skewHandlerY:Um,wrapWithFireEvent:vm,wrapWithFixedAnchor:jm});const _x=e=>void 0!==e.webgl,kx="precision highp float",Sx="\n    ".concat(kx,";\n    varying vec2 vTexCoord;\n    uniform sampler2D uTexture;\n    void main() {\n      gl_FragColor = texture2D(uTexture, vTexCoord);\n    }"),Nx=["type"],Cx=["type"],Tx=new RegExp(kx,"g");class Ex{get type(){return this.constructor.type}constructor(){let e=Tc(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Nx);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return Sx}getVertexSource(){return"\n    attribute vec2 aPosition;\n    varying vec2 vTexCoord;\n    void main() {\n      vTexCoord = aPosition;\n      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n    }"}createProgram(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getFragmentSource(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:n="highp"}}=Ic();"highp"!==n&&(t=t.replace(Tx,kx.replace("highp",n)));const s=e.createShader(e.VERTEX_SHADER),a=e.createShader(e.FRAGMENT_SHADER),i=e.createProgram();if(!s||!a||!i)throw new Ac("Vertex, fragment shader or program creation error");if(e.shaderSource(s,r),e.compileShader(s),!e.getShaderParameter(s,e.COMPILE_STATUS))throw new Ac("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(s)));if(e.shaderSource(a,t),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS))throw new Ac("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(a)));if(e.attachShader(i,s),e.attachShader(i,a),e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS))throw new Ac('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(i)));const l=this.getUniformLocations(e,i)||{};return l.uStepW=e.getUniformLocation(i,"uStepW"),l.uStepH=e.getUniformLocation(i,"uStepH"),{program:i,attributeLocations:this.getAttributeLocations(e,i),uniformLocations:l}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const r=this.constructor.uniformLocations,n={};for(let s=0;s<r.length;s++)n[r[s]]=e.getUniformLocation(t,r[s]);return n}sendAttributeData(e,t,r){const n=t.aPosition,s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.enableVertexAttribArray(n),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const r=e.destinationWidth,n=e.destinationHeight;e.sourceWidth===r&&e.sourceHeight===n||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,r,n)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){_x(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,r=this.retrieveShader(e);0===e.pass&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(r.program),this.sendAttributeData(t,r.attributeLocations,e.aPosition),t.uniform1f(r.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(r.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,r.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,r){e.activeTexture(r),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:r}=e,n=Hd({width:t,height:r});e.helpLayer=n}}toObject(){const e=Object.keys(this.constructor.defaults||{});return Cc({type:this.type},e.reduce((e,t)=>(e[t]=this[t],e),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(Tc(e,Cx))}}Sc(Ex,"type","BaseFilter"),Sc(Ex,"uniformLocations",[]);const Ox={multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",difference:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"\n    if (uColor.r < 0.5) {\n      gl_FragColor.r *= 2.0 * uColor.r;\n    } else {\n      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n    }\n    if (uColor.g < 0.5) {\n      gl_FragColor.g *= 2.0 * uColor.g;\n    } else {\n      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n    }\n    if (uColor.b < 0.5) {\n      gl_FragColor.b *= 2.0 * uColor.b;\n    } else {\n      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n    }\n    ",tint:"\n    gl_FragColor.rgb *= (1.0 - uColor.a);\n    gl_FragColor.rgb += uColor.rgb;\n    "};class Px extends Ex{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return"\n      precision highp float;\n      uniform sampler2D uTexture;\n      uniform vec4 uColor;\n      varying vec2 vTexCoord;\n      void main() {\n        vec4 color = texture2D(uTexture, vTexCoord);\n        gl_FragColor = color;\n        if (color.a > 0.0) {\n          ".concat(Ox[this.mode],"\n        }\n      }\n      ")}applyTo2d(e){let{imageData:{data:t}}=e;const r=new ah(this.color).getSource(),n=this.alpha,s=r[0]*n,a=r[1]*n,i=r[2]*n,l=1-n;for(let o=0;o<t.length;o+=4){const e=t[o],r=t[o+1],n=t[o+2];let c,d,u;switch(this.mode){case"multiply":c=e*s/255,d=r*a/255,u=n*i/255;break;case"screen":c=255-(255-e)*(255-s)/255,d=255-(255-r)*(255-a)/255,u=255-(255-n)*(255-i)/255;break;case"add":c=e+s,d=r+a,u=n+i;break;case"difference":c=Math.abs(e-s),d=Math.abs(r-a),u=Math.abs(n-i);break;case"subtract":c=e-s,d=r-a,u=n-i;break;case"darken":c=Math.min(e,s),d=Math.min(r,a),u=Math.min(n,i);break;case"lighten":c=Math.max(e,s),d=Math.max(r,a),u=Math.max(n,i);break;case"overlay":c=s<128?2*e*s/255:255-2*(255-e)*(255-s)/255,d=a<128?2*r*a/255:255-2*(255-r)*(255-a)/255,u=i<128?2*n*i/255:255-2*(255-n)*(255-i)/255;break;case"exclusion":c=s+e-2*s*e/255,d=a+r-2*a*r/255,u=i+n-2*i*n/255;break;case"tint":c=s+e*l,d=a+r*l,u=i+n*l}t[o]=c,t[o+1]=d,t[o+2]=u}}sendUniformData(e,t){const r=new ah(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,e.uniform4fv(t.uColor,r)}}Sc(Px,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),Sc(Px,"type","BlendColor"),Sc(Px,"uniformLocations",["uColor"]),kd.setClass(Px);const Dx={multiply:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform sampler2D uImage;\n    uniform vec4 uColor;\n    varying vec2 vTexCoord;\n    varying vec2 vTexCoord2;\n    void main() {\n      vec4 color = texture2D(uTexture, vTexCoord);\n      vec4 color2 = texture2D(uImage, vTexCoord2);\n      color.rgba *= color2.rgba;\n      gl_FragColor = color;\n    }\n    ",mask:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform sampler2D uImage;\n    uniform vec4 uColor;\n    varying vec2 vTexCoord;\n    varying vec2 vTexCoord2;\n    void main() {\n      vec4 color = texture2D(uTexture, vTexCoord);\n      vec4 color2 = texture2D(uImage, vTexCoord2);\n      color.a = color2.a;\n      gl_FragColor = color;\n    }\n    "},Ax=["type","image"];class Mx extends Ex{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return Dx[this.mode]}getVertexSource(){return"\n    attribute vec2 aPosition;\n    varying vec2 vTexCoord;\n    varying vec2 vTexCoord2;\n    uniform mat3 uTransformMatrix;\n    void main() {\n      vTexCoord = aPosition;\n      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\n      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n    }\n    "}applyToWebGL(e){const t=e.context,r=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,r,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:r}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/r,1]}applyTo2d(e){let{imageData:{data:t,width:r,height:n},filterBackend:{resources:s}}=e;const a=this.image;s.blendImage||(s.blendImage=Id());const i=s.blendImage,l=i.getContext("2d");i.width!==r||i.height!==n?(i.width=r,i.height=n):l.clearRect(0,0,r,n),l.setTransform(a.scaleX,0,0,a.scaleY,a.left,a.top),l.drawImage(a.getElement(),0,0,r,n);const o=l.getImageData(0,0,r,n).data;for(let c=0;c<t.length;c+=4){const e=t[c],r=t[c+1],n=t[c+2],s=t[c+3],a=o[c],i=o[c+1],l=o[c+2],d=o[c+3];switch(this.mode){case"multiply":t[c]=e*a/255,t[c+1]=r*i/255,t[c+2]=n*l/255,t[c+3]=s*d/255;break;case"mask":t[c+3]=d}}}sendUniformData(e,t){const r=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,r)}toObject(){return Cc(Cc({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:r,image:n}=e,s=Tc(e,Ax);return ux.fromObject(n,t).then(e=>new this(Cc(Cc({},s),{},{image:e})))}}Sc(Mx,"type","BlendImage"),Sc(Mx,"defaults",{mode:"multiply",alpha:1}),Sc(Mx,"uniformLocations",["uTransformMatrix","uImage"]),kd.setClass(Mx);class Rx extends Ex{getFragmentSource(){return"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform vec2 uDelta;\n    varying vec2 vTexCoord;\n    const float nSamples = 15.0;\n    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);\n    float random(vec3 scale) {\n      /* use the fragment position for a different seed per-pixel */\n      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n    }\n    void main() {\n      vec4 color = vec4(0.0);\n      float totalC = 0.0;\n      float totalA = 0.0;\n      float offset = random(v3offset);\n      for (float t = -nSamples; t <= nSamples; t++) {\n        float percent = (t + offset - 0.5) / nSamples;\n        vec4 sample = texture2D(uTexture, vTexCoord + uDelta * percent);\n        float weight = 1.0 - abs(percent);\n        float alpha = weight * sample.a;\n        color.rgb += sample.rgb * alpha;\n        color.a += alpha;\n        totalA += weight;\n        totalC += alpha;\n      }\n      gl_FragColor.rgb = color.rgb / totalC;\n      gl_FragColor.a = color.a / totalA;\n    }\n  "}applyTo(e){_x(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){let{imageData:{data:t,width:r,height:n}}=e;this.aspectRatio=r/n,this.horizontal=!0;let s=this.getBlurValue()*r;const a=new Uint8ClampedArray(t),i=4*r;for(let l=0;l<t.length;l+=4){let e=0,r=0,n=0,o=0,c=0;const d=l-l%i,u=d+i;for(let a=-14;a<15;a++){const i=a/15,h=4*Math.floor(s*i),m=1-Math.abs(i);let p=l+h;p<d?p=d:p>u&&(p=u);const g=t[p+3]*m;e+=t[p]*g,r+=t[p+1]*g,n+=t[p+2]*g,o+=g,c+=m}a[l]=e/o,a[l+1]=r/o,a[l+2]=n/o,a[l+3]=o/c}this.horizontal=!1,s=this.getBlurValue()*n;for(let l=0;l<a.length;l+=4){let e=0,r=0,n=0,o=0,c=0;const d=l%i,u=a.length-i+d;for(let t=-14;t<15;t++){const h=t/15,m=Math.floor(s*h)*i,p=1-Math.abs(h);let g=l+m;g<d?g=d:g>u&&(g=u);const f=a[g+3]*p;e+=a[g]*f,r+=a[g+1]*f,n+=a[g+2]*f,o+=f,c+=p}t[l]=e/o,t[l+1]=r/o,t[l+2]=n/o,t[l+3]=o/c}}sendUniformData(e,t){const r=this.chooseRightDelta();e.uniform2fv(t.uDelta,r)}isNeutralState(){return 0===this.blur}getBlurValue(){let e=1;const{horizontal:t,aspectRatio:r}=this;return t?r>1&&(e=1/r):r<1&&(e=r),e*this.blur*.12}chooseRightDelta(){const e=this.getBlurValue();return this.horizontal?[e,0]:[0,e]}}Sc(Rx,"type","Blur"),Sc(Rx,"defaults",{blur:0}),Sc(Rx,"uniformLocations",["uDelta"]),kd.setClass(Rx);class zx extends Ex{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uBrightness;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    color.rgb += uBrightness;\n    gl_FragColor = color;\n  }\n"}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.round(255*this.brightness);for(let n=0;n<t.length;n+=4)t[n]+=r,t[n+1]+=r,t[n+2]+=r}isNeutralState(){return 0===this.brightness}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}Sc(zx,"type","Brightness"),Sc(zx,"defaults",{brightness:0}),Sc(zx,"uniformLocations",["uBrightness"]),kd.setClass(zx);const Fx={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class Lx extends Ex{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  varying vec2 vTexCoord;\n  uniform mat4 uColorMatrix;\n  uniform vec4 uConstants;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    color *= uColorMatrix;\n    color += uConstants;\n    gl_FragColor = color;\n  }"}applyTo2d(e){const t=e.imageData.data,r=this.matrix,n=this.colorsOnly;for(let s=0;s<t.length;s+=4){const e=t[s],a=t[s+1],i=t[s+2];if(t[s]=e*r[0]+a*r[1]+i*r[2]+255*r[4],t[s+1]=e*r[5]+a*r[6]+i*r[7]+255*r[9],t[s+2]=e*r[10]+a*r[11]+i*r[12]+255*r[14],!n){const n=t[s+3];t[s]+=n*r[3],t[s+1]+=n*r[8],t[s+2]+=n*r[13],t[s+3]=e*r[15]+a*r[16]+i*r[17]+n*r[18]+255*r[19]}}}sendUniformData(e,t){const r=this.matrix,n=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],s=[r[4],r[9],r[14],r[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,n),e.uniform4fv(t.uConstants,s)}toObject(){return Cc(Cc({},super.toObject()),{},{matrix:[...this.matrix]})}}function Ix(e,t){var r;const n=(Sc(r=class extends Lx{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",e),Sc(r,"defaults",{colorsOnly:!1,matrix:t}),r);return kd.setClass(n,e),n}Sc(Lx,"type","ColorMatrix"),Sc(Lx,"defaults",Fx),Sc(Lx,"uniformLocations",["uColorMatrix","uConstants"]),kd.setClass(Lx);const Bx=Ix("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]),Hx=Ix("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]),Ux=Ix("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]),Wx=Ix("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]),Kx=Ix("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]),Vx=Ix("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]),Yx=Ix("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class Gx extends Ex{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){_x(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(e=>kd.getClass(e.type).fromObject(e,t))).then(e=>new this({subFilters:e}))}}Sc(Gx,"type","Composed"),kd.setClass(Gx);class qx extends Ex{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uContrast;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\n    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;\n    gl_FragColor = color;\n  }"}isNeutralState(){return 0===this.contrast}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.floor(255*this.contrast),n=259*(r+255)/(255*(259-r));for(let s=0;s<t.length;s+=4)t[s]=n*(t[s]-128)+128,t[s+1]=n*(t[s+1]-128)+128,t[s+2]=n*(t[s+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}Sc(qx,"type","Contrast"),Sc(qx,"defaults",{contrast:0}),Sc(qx,"uniformLocations",["uContrast"]),kd.setClass(qx);const Xx={Convolute_3_1:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[9];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 0);\n      for (float h = 0.0; h < 3.0; h+=1.0) {\n        for (float w = 0.0; w < 3.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\n          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n        }\n      }\n      gl_FragColor = color;\n    }\n    ",Convolute_3_0:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[9];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 1);\n      for (float h = 0.0; h < 3.0; h+=1.0) {\n        for (float w = 0.0; w < 3.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\n          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n        }\n      }\n      float alpha = texture2D(uTexture, vTexCoord).a;\n      gl_FragColor = color;\n      gl_FragColor.a = alpha;\n    }\n    ",Convolute_5_1:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[25];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 0);\n      for (float h = 0.0; h < 5.0; h+=1.0) {\n        for (float w = 0.0; w < 5.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\n          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n        }\n      }\n      gl_FragColor = color;\n    }\n    ",Convolute_5_0:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[25];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 1);\n      for (float h = 0.0; h < 5.0; h+=1.0) {\n        for (float w = 0.0; w < 5.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\n          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n        }\n      }\n      float alpha = texture2D(uTexture, vTexCoord).a;\n      gl_FragColor = color;\n      gl_FragColor.a = alpha;\n    }\n    ",Convolute_7_1:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[49];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 0);\n      for (float h = 0.0; h < 7.0; h+=1.0) {\n        for (float w = 0.0; w < 7.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\n          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n        }\n      }\n      gl_FragColor = color;\n    }\n    ",Convolute_7_0:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[49];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 1);\n      for (float h = 0.0; h < 7.0; h+=1.0) {\n        for (float w = 0.0; w < 7.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\n          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n        }\n      }\n      float alpha = texture2D(uTexture, vTexCoord).a;\n      gl_FragColor = color;\n      gl_FragColor.a = alpha;\n    }\n    ",Convolute_9_1:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[81];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 0);\n      for (float h = 0.0; h < 9.0; h+=1.0) {\n        for (float w = 0.0; w < 9.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\n          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n        }\n      }\n      gl_FragColor = color;\n    }\n    ",Convolute_9_0:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[81];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 1);\n      for (float h = 0.0; h < 9.0; h+=1.0) {\n        for (float w = 0.0; w < 9.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\n          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n        }\n      }\n      float alpha = texture2D(uTexture, vTexCoord).a;\n      gl_FragColor = color;\n      gl_FragColor.a = alpha;\n    }\n    "};class $x extends Ex{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return Xx[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,r=t.data,n=this.matrix,s=Math.round(Math.sqrt(n.length)),a=Math.floor(s/2),i=t.width,l=t.height,o=e.ctx.createImageData(i,l),c=o.data,d=this.opaque?1:0;let u,h,m,p,g,f,x,y,b,v,j,w,_;for(j=0;j<l;j++)for(v=0;v<i;v++){for(g=4*(j*i+v),u=0,h=0,m=0,p=0,_=0;_<s;_++)for(w=0;w<s;w++)x=j+_-a,f=v+w-a,x<0||x>=l||f<0||f>=i||(y=4*(x*i+f),b=n[_*s+w],u+=r[y]*b,h+=r[y+1]*b,m+=r[y+2]*b,d||(p+=r[y+3]*b));c[g]=u,c[g+1]=h,c[g+2]=m,c[g+3]=d?r[g+3]:p}e.imageData=o}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return Cc(Cc({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}Sc($x,"type","Convolute"),Sc($x,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),Sc($x,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),kd.setClass($x);const Jx="Gamma";class Qx extends Ex{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform vec3 uGamma;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    vec3 correction = (1.0 / uGamma);\n    color.r = pow(color.r, correction.r);\n    color.g = pow(color.g, correction.g);\n    color.b = pow(color.b, correction.b);\n    gl_FragColor = color;\n    gl_FragColor.rgb *= color.a;\n  }\n"}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.gamma,n=1/r[0],s=1/r[1],a=1/r[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const i=this.rgbValues;for(let l=0;l<256;l++)i.r[l]=255*Math.pow(l/255,n),i.g[l]=255*Math.pow(l/255,s),i.b[l]=255*Math.pow(l/255,a);for(let l=0;l<t.length;l+=4)t[l]=i.r[t[l]],t[l+1]=i.g[t[l+1]],t[l+2]=i.b[t[l+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return 1===e[0]&&1===e[1]&&1===e[2]}toObject(){return{type:Jx,gamma:this.gamma.concat()}}}Sc(Qx,"type",Jx),Sc(Qx,"defaults",{gamma:[1,1,1]}),Sc(Qx,"uniformLocations",["uGamma"]),kd.setClass(Qx);const Zx={average:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = texture2D(uTexture, vTexCoord);\n      float average = (color.r + color.b + color.g) / 3.0;\n      gl_FragColor = vec4(average, average, average, color.a);\n    }\n    ",lightness:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform int uMode;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 col = texture2D(uTexture, vTexCoord);\n      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\n      gl_FragColor = vec4(average, average, average, col.a);\n    }\n    ",luminosity:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform int uMode;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 col = texture2D(uTexture, vTexCoord);\n      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\n      gl_FragColor = vec4(average, average, average, col.a);\n    }\n    "};class ey extends Ex{applyTo2d(e){let{imageData:{data:t}}=e;for(let r,n=0;n<t.length;n+=4){const e=t[n],s=t[n+1],a=t[n+2];switch(this.mode){case"average":r=(e+s+a)/3;break;case"lightness":r=(Math.min(e,s,a)+Math.max(e,s,a))/2;break;case"luminosity":r=.21*e+.72*s+.07*a}t[n+2]=t[n+1]=t[n]=r}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return Zx[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}Sc(ey,"type","Grayscale"),Sc(ey,"defaults",{mode:"average"}),Sc(ey,"uniformLocations",["uMode"]),kd.setClass(ey);const ty=Cc(Cc({},Fx),{},{rotation:0});class ry extends Lx{calculateMatrix(){const e=this.rotation*Math.PI,t=Td(e),r=Ed(e),n=1/3,s=Math.sqrt(n)*r,a=1-t;this.matrix=[t+a/3,n*a-s,n*a+s,0,0,n*a+s,t+n*a,n*a-s,0,0,n*a-s,n*a+s,t+n*a,0,0,0,0,0,1,0]}isNeutralState(){return 0===this.rotation}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}Sc(ry,"type","HueRotation"),Sc(ry,"defaults",ty),kd.setClass(ry);class ny extends Ex{applyTo2d(e){let{imageData:{data:t}}=e;for(let r=0;r<t.length;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2],this.alpha&&(t[r+3]=255-t[r+3])}getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform int uInvert;\n  uniform int uAlpha;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    if (uInvert == 1) {\n      if (uAlpha == 1) {\n        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);\n      } else {\n        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n      }\n    } else {\n      gl_FragColor = color;\n    }\n  }\n"}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}Sc(ny,"type","Invert"),Sc(ny,"defaults",{alpha:!1,invert:!0}),Sc(ny,"uniformLocations",["uInvert","uAlpha"]),kd.setClass(ny);class sy extends Ex{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uStepH;\n  uniform float uNoise;\n  uniform float uSeed;\n  varying vec2 vTexCoord;\n  float rand(vec2 co, float seed, float vScale) {\n    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n  }\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\n    gl_FragColor = color;\n  }\n"}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.noise;for(let n=0;n<t.length;n+=4){const e=(.5-Math.random())*r;t[n]+=e,t[n+1]+=e,t[n+2]+=e}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return 0===this.noise}}Sc(sy,"type","Noise"),Sc(sy,"defaults",{noise:0}),Sc(sy,"uniformLocations",["uNoise","uSeed"]),kd.setClass(sy);class ay extends Ex{applyTo2d(e){let{imageData:{data:t,width:r,height:n}}=e;for(let s=0;s<n;s+=this.blocksize)for(let e=0;e<r;e+=this.blocksize){const a=4*s*r+4*e,i=t[a],l=t[a+1],o=t[a+2],c=t[a+3];for(let d=s;d<Math.min(s+this.blocksize,n);d++)for(let n=e;n<Math.min(e+this.blocksize,r);n++){const e=4*d*r+4*n;t[e]=i,t[e+1]=l,t[e+2]=o,t[e+3]=c}}}isNeutralState(){return 1===this.blocksize}getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uBlocksize;\n  uniform float uStepW;\n  uniform float uStepH;\n  varying vec2 vTexCoord;\n  void main() {\n    float blockW = uBlocksize * uStepW;\n    float blockH = uBlocksize * uStepH;\n    int posX = int(vTexCoord.x / blockW);\n    int posY = int(vTexCoord.y / blockH);\n    float fposX = float(posX);\n    float fposY = float(posY);\n    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\n    vec4 color = texture2D(uTexture, squareCoords);\n    gl_FragColor = color;\n  }\n"}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}Sc(ay,"type","Pixelate"),Sc(ay,"defaults",{blocksize:4}),Sc(ay,"uniformLocations",["uBlocksize"]),kd.setClass(ay);class iy extends Ex{getFragmentSource(){return"\nprecision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\n  gl_FragColor = texture2D(uTexture, vTexCoord);\n  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\n    gl_FragColor.a = 0.0;\n  }\n}\n"}applyTo2d(e){let{imageData:{data:t}}=e;const r=255*this.distance,n=new ah(this.color).getSource(),s=[n[0]-r,n[1]-r,n[2]-r],a=[n[0]+r,n[1]+r,n[2]+r];for(let i=0;i<t.length;i+=4){const e=t[i],r=t[i+1],n=t[i+2];e>s[0]&&r>s[1]&&n>s[2]&&e<a[0]&&r<a[1]&&n<a[2]&&(t[i+3]=0)}}sendUniformData(e,t){const r=new ah(this.color).getSource(),n=this.distance,s=[0+r[0]/255-n,0+r[1]/255-n,0+r[2]/255-n,1],a=[r[0]/255+n,r[1]/255+n,r[2]/255+n,1];e.uniform4fv(t.uLow,s),e.uniform4fv(t.uHigh,a)}}Sc(iy,"type","RemoveColor"),Sc(iy,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),Sc(iy,"uniformLocations",["uLow","uHigh"]),kd.setClass(iy);class ly extends Ex{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,r=this.getFilterWindow(),n=new Array(r);for(let s=1;s<=r;s++)n[s-1]=e(s*t);return n}generateShader(e){const t=new Array(e);for(let r=1;r<=e;r++)t[r-1]="".concat(r,".0 * uDelta");return"\n      precision highp float;\n      uniform sampler2D uTexture;\n      uniform vec2 uDelta;\n      varying vec2 vTexCoord;\n      uniform float uTaps[".concat(e,"];\n      void main() {\n        vec4 color = texture2D(uTexture, vTexCoord);\n        float sum = 1.0;\n        ").concat(t.map((e,t)=>"\n              color += texture2D(uTexture, vTexCoord + ".concat(e,") * uTaps[").concat(t,"] + texture2D(uTexture, vTexCoord - ").concat(e,") * uTaps[").concat(t,"];\n              sum += 2.0 * uTaps[").concat(t,"];\n            ")).join("\n"),"\n        gl_FragColor = color / sum;\n      }\n    ")}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){_x(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return 1===this.scaleX&&1===this.scaleY}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<1.1920929e-7&&t>-1.1920929e-7)return 1;const r=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(r)/r}}applyTo2d(e){const t=e.imageData,r=this.scaleX,n=this.scaleY;this.rcpScaleX=1/r,this.rcpScaleY=1/n;const s=t.width,a=t.height,i=Math.round(s*r),l=Math.round(a*n);let o;o="sliceHack"===this.resizeType?this.sliceByTwo(e,s,a,i,l):"hermite"===this.resizeType?this.hermiteFastResize(e,s,a,i,l):"bilinear"===this.resizeType?this.bilinearFiltering(e,s,a,i,l):"lanczos"===this.resizeType?this.lanczosResize(e,s,a,i,l):new ImageData(i,l),e.imageData=o}sliceByTwo(e,t,r,n,s){const a=e.imageData,i=.5;let l=!1,o=!1,c=t*i,d=r*i;const u=e.filterBackend.resources;let h=0,m=0;const p=t;let g=0;u.sliceByTwo||(u.sliceByTwo=Id());const f=u.sliceByTwo;(f.width<1.5*t||f.height<r)&&(f.width=1.5*t,f.height=r);const x=f.getContext("2d");for(x.clearRect(0,0,1.5*t,r),x.putImageData(a,0,0),n=Math.floor(n),s=Math.floor(s);!l||!o;)t=c,r=d,n<Math.floor(c*i)?c=Math.floor(c*i):(c=n,l=!0),s<Math.floor(d*i)?d=Math.floor(d*i):(d=s,o=!0),x.drawImage(f,h,m,t,r,p,g,c,d),h=p,m=g,g+=d;return x.getImageData(h,m,n,s)}lanczosResize(e,t,r,n,s){const a=e.imageData.data,i=e.ctx.createImageData(n,s),l=i.data,o=this.lanczosCreate(this.lanczosLobes),c=this.rcpScaleX,d=this.rcpScaleY,u=2/this.rcpScaleX,h=2/this.rcpScaleY,m=Math.ceil(c*this.lanczosLobes/2),p=Math.ceil(d*this.lanczosLobes/2),g={},f={x:0,y:0},x={x:0,y:0};return function e(y){let b,v,j,w,_,k,S,N,C,T,E;for(f.x=(y+.5)*c,x.x=Math.floor(f.x),b=0;b<s;b++){for(f.y=(b+.5)*d,x.y=Math.floor(f.y),_=0,k=0,S=0,N=0,C=0,v=x.x-m;v<=x.x+m;v++)if(!(v<0||v>=t)){T=Math.floor(1e3*Math.abs(v-f.x)),g[T]||(g[T]={});for(let e=x.y-p;e<=x.y+p;e++)e<0||e>=r||(E=Math.floor(1e3*Math.abs(e-f.y)),g[T][E]||(g[T][E]=o(Math.sqrt(Math.pow(T*u,2)+Math.pow(E*h,2))/1e3)),j=g[T][E],j>0&&(w=4*(e*t+v),_+=j,k+=j*a[w],S+=j*a[w+1],N+=j*a[w+2],C+=j*a[w+3]))}w=4*(b*n+y),l[w]=k/_,l[w+1]=S/_,l[w+2]=N/_,l[w+3]=C/_}return++y<n?e(y):i}(0)}bilinearFiltering(e,t,r,n,s){let a,i,l,o,c,d,u,h,m,p,g,f,x,y=0;const b=this.rcpScaleX,v=this.rcpScaleY,j=4*(t-1),w=e.imageData.data,_=e.ctx.createImageData(n,s),k=_.data;for(u=0;u<s;u++)for(h=0;h<n;h++)for(c=Math.floor(b*h),d=Math.floor(v*u),m=b*h-c,p=v*u-d,x=4*(d*t+c),g=0;g<4;g++)a=w[x+g],i=w[x+4+g],l=w[x+j+g],o=w[x+j+4+g],f=a*(1-m)*(1-p)+i*m*(1-p)+l*p*(1-m)+o*m*p,k[y++]=f;return _}hermiteFastResize(e,t,r,n,s){const a=this.rcpScaleX,i=this.rcpScaleY,l=Math.ceil(a/2),o=Math.ceil(i/2),c=e.imageData.data,d=e.ctx.createImageData(n,s),u=d.data;for(let h=0;h<s;h++)for(let e=0;e<n;e++){const r=4*(e+h*n);let s=0,d=0,m=0,p=0,g=0,f=0,x=0;const y=(h+.5)*i;for(let n=Math.floor(h*i);n<(h+1)*i;n++){const r=Math.abs(y-(n+.5))/o,i=(e+.5)*a,u=r*r;for(let o=Math.floor(e*a);o<(e+1)*a;o++){let e=Math.abs(i-(o+.5))/l;const r=Math.sqrt(u+e*e);r>1&&r<-1||(s=2*r*r*r-3*r*r+1,s>0&&(e=4*(o+n*t),x+=s*c[e+3],m+=s,c[e+3]<255&&(s=s*c[e+3]/250),p+=s*c[e],g+=s*c[e+1],f+=s*c[e+2],d+=s))}}u[r]=p/d,u[r+1]=g/d,u[r+2]=f/d,u[r+3]=x/m}return d}}Sc(ly,"type","Resize"),Sc(ly,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),Sc(ly,"uniformLocations",["uDelta","uTaps"]),kd.setClass(ly);class oy extends Ex{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uSaturation;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    float rgMax = max(color.r, color.g);\n    float rgbMax = max(rgMax, color.b);\n    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\n    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\n    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\n    gl_FragColor = color;\n  }\n"}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.saturation;for(let n=0;n<t.length;n+=4){const e=t[n],s=t[n+1],a=t[n+2],i=Math.max(e,s,a);t[n]+=i!==e?(i-e)*r:0,t[n+1]+=i!==s?(i-s)*r:0,t[n+2]+=i!==a?(i-a)*r:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return 0===this.saturation}}Sc(oy,"type","Saturation"),Sc(oy,"defaults",{saturation:0}),Sc(oy,"uniformLocations",["uSaturation"]),kd.setClass(oy);class cy extends Ex{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uVibrance;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    float max = max(color.r, max(color.g, color.b));\n    float avg = (color.r + color.g + color.b) / 3.0;\n    float amt = (abs(max - avg) * 2.0) * uVibrance;\n    color.r += max != color.r ? (max - color.r) * amt : 0.00;\n    color.g += max != color.g ? (max - color.g) * amt : 0.00;\n    color.b += max != color.b ? (max - color.b) * amt : 0.00;\n    gl_FragColor = color;\n  }\n"}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.vibrance;for(let n=0;n<t.length;n+=4){const e=t[n],s=t[n+1],a=t[n+2],i=Math.max(e,s,a),l=(e+s+a)/3,o=2*Math.abs(i-l)/255*r;t[n]+=i!==e?(i-e)*o:0,t[n+1]+=i!==s?(i-s)*o:0,t[n+2]+=i!==a?(i-a)*o:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return 0===this.vibrance}}Sc(cy,"type","Vibrance"),Sc(cy,"defaults",{vibrance:0}),Sc(cy,"uniformLocations",["uVibrance"]),kd.setClass(cy);Object.freeze({__proto__:null,BaseFilter:Ex,BlackWhite:Yx,BlendColor:Px,BlendImage:Mx,Blur:Rx,Brightness:zx,Brownie:Bx,ColorMatrix:Lx,Composed:Gx,Contrast:qx,Convolute:$x,Gamma:Qx,Grayscale:ey,HueRotation:ry,Invert:ny,Kodachrome:Ux,Noise:sy,Pixelate:ay,Polaroid:Kx,RemoveColor:iy,Resize:ly,Saturation:oy,Sepia:Vx,Technicolor:Wx,Vibrance:cy,Vintage:Hx});const dy=e=>{let{templateData:t,width:r=700,height:s=900,className:a=""}=e;const i=(0,n.useRef)(null),[l,o]=(0,n.useState)(null),[c,d]=(0,n.useState)(!0),[u,h]=(0,n.useState)(null);return(0,n.useEffect)(()=>{if(i.current&&t){try{d(!0),h(null);const e=new Jg(i.current,{width:r,height:s,backgroundColor:t.background||"#ffffff",selection:!1,interactive:!1});e.loadFromJSON(t,()=>{e.renderAll(),o(e),d(!1),console.log("Fabric.js template loaded successfully")})}catch(e){console.error("Error loading Fabric.js template:",e),h("\u015eablon y\xfcklenirken hata olu\u015ftu"),d(!1)}return()=>{l&&l.dispose()}}},[t,r,s]),c?(0,za.jsx)("div",{className:"flex items-center justify-center bg-gray-100 rounded-lg ".concat(a),style:{width:r,height:s},children:(0,za.jsxs)("div",{className:"text-center",children:[(0,za.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),(0,za.jsx)("p",{className:"text-sm text-gray-600",children:"\u015eablon y\xfckleniyor..."})]})}):u?(0,za.jsx)("div",{className:"flex items-center justify-center bg-red-50 rounded-lg ".concat(a),style:{width:r,height:s},children:(0,za.jsx)("div",{className:"text-center",children:(0,za.jsx)("p",{className:"text-sm text-red-600",children:u})})}):(0,za.jsx)("div",{className:"bg-white rounded-lg border ".concat(a),children:(0,za.jsx)("canvas",{ref:i})})},uy=Ua("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),hy=Ua("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),my=Ua("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),py=()=>{var e,t,r;const{getImageURL:s}=fc(),{productId:a}=ee(),i=Z(),[l,o]=(0,n.useState)(null),[c,d]=(0,n.useState)(!0),[u,h]=(0,n.useState)(0),[m,p]=(0,n.useState)(!1),[g,f]=(0,n.useState)(1),[x,y]=(0,n.useState)({x:0,y:0}),[b,v]=(0,n.useState)([]),[j,w]=(0,n.useState)(null),[_,k]=(0,n.useState)(!1),[S,N]=(0,n.useState)({exists:!1,loading:!1}),C=(0,n.useCallback)(async()=>{if(a)try{d(!0);const e=await Go(parseInt(a));o(e);const t=await ec(parseInt(a));v(t.templates||[]),await T(parseInt(a))}catch(e){Ra.error("\xdcr\xfcn y\xfcklenirken hata olu\u015ftu"),console.error("Error loading product:",e)}finally{d(!1)}},[a]),T=(0,n.useCallback)(async e=>{try{N(e=>Ie(Ie({},e),{},{loading:!0}));const t=await fetch("/api/products/".concat(e,"/collage")),r=await t.json();r.success&&r.exists?N({exists:!0,url:r.collage_url,loading:!1}):N({exists:!1,loading:!1})}catch(t){console.error("Error loading collage:",t),N({exists:!1,loading:!1})}},[]);(0,n.useEffect)(()=>{C()},[C]);const E=(0,n.useMemo)(()=>(null===l||void 0===l?void 0:l.images)||[],[l]);if(c)return(0,za.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,za.jsxs)("div",{className:"flex items-center gap-3",children:[(0,za.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),(0,za.jsx)("span",{className:"text-gray-600",children:"Y\xfckleniyor..."})]})});if(!l)return(0,za.jsxs)("div",{className:"text-center py-12",children:[(0,za.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"\xdcr\xfcn bulunamad\u0131"}),(0,za.jsxs)("button",{onClick:()=>i("/admin/media-gallery"),className:"btn btn-primary mt-4",children:[(0,za.jsx)(dl,{size:18,className:"mr-2"}),"Geri D\xf6n"]})]});const O=e=>{let{label:t,value:r}=e;const n=!r;return(0,za.jsxs)("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 rounded-lg",children:[(0,za.jsx)("span",{className:"text-xs text-gray-500 w-20",children:t}),(0,za.jsx)("span",{className:"text-sm font-medium ".concat(n?"text-red-500":"text-gray-900"),children:r||"Eksik"})]})};return(0,za.jsxs)("div",{className:"space-y-4",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between",children:[(0,za.jsxs)("button",{onClick:()=>i(-1),className:"btn btn-secondary btn-sm flex items-center gap-2",children:[(0,za.jsx)(dl,{size:16}),(0,za.jsx)("span",{children:"Geri"})]}),(0,za.jsx)("h1",{className:"text-xl font-bold",children:l.code}),(0,za.jsx)("div",{className:"w-20"})]}),(0,za.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,za.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,za.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden cursor-zoom-in",onClick:()=>p(!0),children:(0,za.jsxs)("div",{className:"aspect-square relative",children:[E[u]&&(0,za.jsx)("img",{src:s(E[u].file_path),alt:l.code,className:"w-full h-full object-contain bg-white"}),(0,za.jsxs)("div",{className:"absolute top-4 right-4 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded",children:[u+1," / ",E.length]})]})}),(0,za.jsx)("div",{className:"grid grid-cols-6 gap-2",children:E.map((e,t)=>(0,za.jsx)("div",{onClick:()=>h(t),className:"aspect-square rounded-lg overflow-hidden border-2 cursor-pointer transition-all ".concat(u===t?"border-blue-500 shadow-lg":"border-gray-200 hover:border-gray-300"),children:(0,za.jsx)("img",{src:s(e.file_path),alt:"".concat(l.code," - ").concat(t+1),className:"w-full h-full object-contain bg-white"})},e.id))})]}),(0,za.jsx)("div",{className:"space-y-4",children:l.has_second_product&&l.code_2?(0,za.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,za.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,za.jsxs)("h3",{className:"text-sm font-semibold text-gray-700 mb-3 pb-2 border-b",children:[l.code," ",l.color]}),(0,za.jsxs)("div",{className:"space-y-1",children:[(0,za.jsx)(O,{label:"Marka",value:l.brand_name||(null===(e=l.brand)||void 0===e?void 0:e.name)}),(0,za.jsx)(O,{label:"\xdcr\xfcn Kodu",value:l.code}),(0,za.jsx)(O,{label:"\xdcr\xfcn Tipi",value:l.product_type}),(0,za.jsx)(O,{label:"\xdcr\xfcn Rengi",value:l.color}),(0,za.jsx)(O,{label:"\xdcr\xfcn Beden Aral\u0131\u011f\u0131",value:l.size_range}),(0,za.jsx)(O,{label:"\xdcr\xfcn Fiyat\u0131",value:l.price?"".concat(l.price," USD"):null})]})]}),(0,za.jsxs)("div",{className:"bg-blue-50 rounded-lg border border-blue-200 p-4",children:[(0,za.jsxs)("h3",{className:"text-sm font-semibold text-blue-700 mb-3 pb-2 border-b border-blue-200",children:[l.code_2," ",l.color_2]}),(0,za.jsxs)("div",{className:"space-y-1",children:[(0,za.jsx)(O,{label:"Marka",value:l.brand_name||(null===(t=l.brand)||void 0===t?void 0:t.name)}),(0,za.jsx)(O,{label:"\xdcr\xfcn Kodu",value:l.code_2}),(0,za.jsx)(O,{label:"\xdcr\xfcn Tipi",value:l.product_type_2}),(0,za.jsx)(O,{label:"\xdcr\xfcn Rengi",value:l.color_2}),(0,za.jsx)(O,{label:"\xdcr\xfcn Beden Aral\u0131\u011f\u0131",value:l.size_range_2}),(0,za.jsx)(O,{label:"\xdcr\xfcn Fiyat\u0131",value:l.price_2?"".concat(l.price_2," USD"):null})]})]})]}):(0,za.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,za.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3 pb-2 border-b",children:"\xdcr\xfcn Bilgileri"}),(0,za.jsxs)("div",{className:"space-y-1",children:[(0,za.jsx)(O,{label:"Marka",value:l.brand_name||(null===(r=l.brand)||void 0===r?void 0:r.name)}),(0,za.jsx)(O,{label:"\xdcr\xfcn Kodu",value:l.code}),(0,za.jsx)(O,{label:"\xdcr\xfcn Tipi",value:l.product_type}),(0,za.jsx)(O,{label:"\xdcr\xfcn Rengi",value:l.color}),(0,za.jsx)(O,{label:"\xdcr\xfcn Beden Aral\u0131\u011f\u0131",value:l.size_range}),(0,za.jsx)(O,{label:"\xdcr\xfcn Fiyat\u0131",value:l.price?"".concat(l.price," USD"):null})]})]})})]}),m&&E[u]&&(0,za.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-95 flex items-center justify-center z-50 overflow-hidden",onClick:()=>{p(!1),f(1)},onWheel:e=>{e.preventDefault(),e.stopPropagation()},children:(0,za.jsxs)("div",{className:"relative w-full h-full flex items-center justify-center p-4",onClick:e=>e.stopPropagation(),onWheel:e=>{e.stopPropagation();const t=e.deltaY>0?-.1:.1;f(e=>Math.max(1,Math.min(3,e+t)))},onMouseMove:e=>{if(g>1){const t=e.currentTarget.getBoundingClientRect(),r=(e.clientX-t.left)/t.width*100,n=(e.clientY-t.top)/t.height*100;y({x:r,y:n})}},children:[(0,za.jsx)("button",{onClick:()=>p(!1),className:"absolute top-4 right-4 text-white bg-black bg-opacity-70 rounded-full p-3 hover:bg-opacity-90 z-10",children:(0,za.jsx)(fl,{size:24})}),(0,za.jsx)("div",{className:"relative overflow-hidden",style:{width:"90vw",height:"90vh",cursor:g>1?"move":"zoom-in"},children:(0,za.jsx)("img",{src:s(E[u].file_path),alt:"".concat(l.code," - ").concat(u+1),className:"w-full h-full object-contain transition-transform duration-200",style:{transform:"scale(".concat(g,")"),transformOrigin:g>1?"".concat(x.x,"% ").concat(x.y,"%"):"center"}})}),(0,za.jsxs)("div",{className:"absolute top-4 left-4 bg-black bg-opacity-50 text-white text-sm px-3 py-2 rounded flex items-center gap-2",children:[(0,za.jsx)(uy,{size:16}),Math.round(100*g),"%",(0,za.jsx)("span",{className:"text-xs text-gray-300",children:"(Scroll to zoom)"})]}),E.length>1&&(0,za.jsxs)(za.Fragment,{children:[(0,za.jsx)("button",{onClick:()=>h(u>0?u-1:E.length-1),className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-75",children:(0,za.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,za.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,za.jsx)("button",{onClick:()=>h(u<E.length-1?u+1:0),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-75",children:(0,za.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,za.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),(0,za.jsxs)("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 text-white bg-black bg-opacity-50 rounded-full px-3 py-1 text-sm",children:[u+1," / ",E.length]})]})}),_&&j&&(0,za.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,za.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,za.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:j.name}),(0,za.jsx)("button",{onClick:()=>k(!1),className:"text-gray-400 hover:text-gray-600",children:(0,za.jsx)(fl,{className:"w-6 h-6"})})]}),(0,za.jsx)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:(0,za.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"\u015eablon \xd6nizleme"}),(0,za.jsx)("div",{className:"bg-gray-100 rounded-lg overflow-hidden border p-4",children:j.template_data?(0,za.jsx)(dy,{templateData:"string"===typeof j.template_data?JSON.parse(j.template_data):j.template_data,width:400,height:500,className:"mx-auto"}):j.preview_image?(0,za.jsx)("img",{src:s(j.preview_image),alt:j.name,className:"w-full h-full object-cover"}):(0,za.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,za.jsxs)("div",{className:"text-center",children:[(0,za.jsx)(hy,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),(0,za.jsx)("p",{className:"text-sm text-gray-500",children:"\xd6nizleme Yok"})]})})})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"\u015eablon Detaylar\u0131"}),(0,za.jsxs)("div",{className:"space-y-4",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"A\xe7\u0131klama"}),(0,za.jsx)("p",{className:"text-sm text-gray-600",children:j.description||"A\xe7\u0131klama yok"})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kategori"}),(0,za.jsx)("p",{className:"text-sm text-gray-600 capitalize",children:j.category||"Genel"})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tip"}),(0,za.jsx)("p",{className:"text-sm text-gray-600",children:j.template_type||"Genel"})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Olu\u015fturulma Tarihi"}),(0,za.jsx)("p",{className:"text-sm text-gray-600",children:new Date(j.created_at).toLocaleString("tr-TR")})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Durum"}),(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-medium ".concat(j.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:j.is_active?"Aktif":"Pasif"}),j.is_auto_generated&&(0,za.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:"Otomatik"})]})]})]}),(0,za.jsxs)("div",{className:"mt-6 flex gap-3",children:[(0,za.jsxs)("button",{onClick:()=>(async e=>{try{(await fetch("/api/products/".concat(a,"/create-collage"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template_id:e.id})})).ok?(Ra.success("Kolaj olu\u015fturuldu!"),C()):Ra.error("Kolaj olu\u015fturulurken hata olu\u015ftu")}catch(t){Ra.error("Kolaj olu\u015fturulurken hata olu\u015ftu")}})(j),className:"flex-1 btn btn-success flex items-center justify-center gap-2",children:[(0,za.jsx)(my,{className:"w-4 h-4"}),"Kolaj Olu\u015ftur"]}),(0,za.jsx)("button",{onClick:()=>k(!1),className:"btn btn-secondary",children:"Kapat"})]})]})]})})]})})]})},gy=Ua("Layers",[["polygon",{points:"12 2 2 7 12 12 22 7 12 2",key:"1b0ttc"}],["polyline",{points:"2 17 12 22 22 17",key:"imjtdl"}],["polyline",{points:"2 12 12 17 22 12",key:"5dexcv"}]]),fy=Ua("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),xy=Ua("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),yy=async function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,t=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0;const s=new URLSearchParams({page:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1).toString(),per_page:e.toString()});t&&s.append("brand_id",t.toString()),r&&s.append("search",r),n&&s.append("filter_type",n);return(await gs.get("/api/collages/pending?".concat(s))).data},by=async()=>(await gs.get("/api/collages/statistics")).data,vy=Ua("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),jy=Ua("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),wy=Ua("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),_y=Ua("Triangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}]]),ky=Ua("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),Sy=Ua("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Ny=Ua("Diamond",[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]]),Cy=Ua("Hexagon",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]]),Ty=Ua("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),Ey=Ua("Crop",[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]]),Oy=Ua("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]),Py=Ua("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]),Dy=Ua("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]),Ay=Ua("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]),My=Ua("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]),Ry=Ua("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]),zy=Ua("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]),Fy=Ua("FlipHorizontal",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h3",key:"1i73f7"}],["path",{d:"M16 3h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-3",key:"saxlbk"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 14v2",key:"8jcxud"}],["path",{d:"M12 8v2",key:"1woqiv"}],["path",{d:"M12 2v2",key:"tus03m"}]]),Ly=Ua("FlipVertical",[["path",{d:"M21 8V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v3",key:"14bfxa"}],["path",{d:"M21 16v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-3",key:"14rx03"}],["path",{d:"M4 12H2",key:"rhcxmi"}],["path",{d:"M10 12H8",key:"s88cx1"}],["path",{d:"M16 12h-2",key:"10asgb"}],["path",{d:"M22 12h-2",key:"14jgyd"}]]),Iy=Ua("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]),By=Ua("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]),Hy=Ua("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Uy=Ua("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]),Wy=Ua("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Ky=Ua("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),Vy=e=>{let{activeTool:t,onToolChange:r,onSave:n,onExport:s,onUndo:a,onRedo:i,onZoomIn:l,onZoomOut:o,onDelete:c,onCopy:d,onAIGenerate:u,onShowUsageGuide:h,zoom:m,canUndo:p,canRedo:g,hasSelection:f}=e;const x=[{id:"select",icon:Li,label:"Se\xe7"},{id:"text",icon:vy,label:"Metin"},{id:"image",icon:Bi,label:"G\xf6rsel"},{id:"rectangle",icon:jy,label:"Dikd\xf6rtgen"},{id:"circle",icon:wy,label:"Daire"},{id:"triangle",icon:_y,label:"\xdc\xe7gen"},{id:"star",icon:ky,label:"Y\u0131ld\u0131z"},{id:"heart",icon:Sy,label:"Kalp"},{id:"diamond",icon:Ny,label:"Elmas"},{id:"hexagon",icon:Cy,label:"Alt\u0131gen"},{id:"line",icon:Ty,label:"\xc7izgi"},{id:"crop",icon:Ey,label:"K\u0131rp"},{id:"filter",icon:jc,label:"Filtre"}],y=[{id:"align-left",icon:Oy,label:"Sola Hizala"},{id:"align-center",icon:Py,label:"Ortala"},{id:"align-right",icon:Dy,label:"Sa\u011fa Hizala"}],b=[{id:"bold",icon:Ay,label:"Kal\u0131n"},{id:"italic",icon:My,label:"\u0130talik"},{id:"underline",icon:Ry,label:"Alt\u0131 \xc7izili"}],v=[{id:"rotate-cw",icon:zy,label:"Saat Y\xf6n\xfcnde D\xf6nd\xfcr"},{id:"rotate-ccw",icon:yc,label:"Saat Y\xf6n\xfc Ters D\xf6nd\xfcr"},{id:"flip-horizontal",icon:Fy,label:"Yatay \xc7evir"},{id:"flip-vertical",icon:Ly,label:"Dikey \xc7evir"}];return(0,za.jsxs)("div",{className:"bg-white border-b border-gray-200 px-4 py-2 flex items-center justify-between",children:[(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsxs)("div",{className:"flex items-center gap-1 border-r border-gray-200 pr-2",children:[(0,za.jsx)("button",{onClick:a,disabled:!p,className:"p-2 hover:bg-gray-100 rounded disabled:opacity-50",title:"Geri Al",children:(0,za.jsx)(Iy,{size:16})}),(0,za.jsx)("button",{onClick:i,disabled:!g,className:"p-2 hover:bg-gray-100 rounded disabled:opacity-50",title:"\u0130leri Al",children:(0,za.jsx)(By,{size:16})})]}),(0,za.jsx)("div",{className:"flex items-center gap-1 border-r border-gray-200 pr-2",children:x.map(e=>(0,za.jsx)("button",{onClick:()=>r(e.id),className:"p-2 rounded hover:bg-gray-100 ".concat(t===e.id?"bg-blue-100 text-blue-600":""),title:e.label,children:(0,za.jsx)(e.icon,{size:16})},e.id))}),(0,za.jsx)("div",{className:"flex items-center gap-1 border-r border-gray-200 pr-2",children:y.map(e=>(0,za.jsx)("button",{onClick:()=>r(e.id),className:"p-2 hover:bg-gray-100 rounded",title:e.label,children:(0,za.jsx)(e.icon,{size:16})},e.id))}),(0,za.jsx)("div",{className:"flex items-center gap-1 border-r border-gray-200 pr-2",children:b.map(e=>(0,za.jsx)("button",{onClick:()=>r(e.id),className:"p-2 hover:bg-gray-100 rounded",title:e.label,children:(0,za.jsx)(e.icon,{size:16})},e.id))}),(0,za.jsx)("div",{className:"flex items-center gap-1",children:v.map(e=>(0,za.jsx)("button",{onClick:()=>r(e.id),className:"p-2 hover:bg-gray-100 rounded",title:e.label,children:(0,za.jsx)(e.icon,{size:16})},e.id))})]}),(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded",title:"Uzakla\u015ft\u0131r",children:(0,za.jsx)(Hy,{size:16})}),(0,za.jsxs)("span",{className:"text-sm font-medium min-w-[60px] text-center",children:[Math.round(100*m),"%"]}),(0,za.jsx)("button",{onClick:l,className:"p-2 hover:bg-gray-100 rounded",title:"Yak\u0131nla\u015ft\u0131r",children:(0,za.jsx)(uy,{size:16})}),(0,za.jsxs)("div",{className:"border-l border-gray-200 pl-2",children:[(0,za.jsx)("button",{onClick:()=>r("grid"),className:"p-2 rounded hover:bg-gray-100 ".concat("grid"===t?"bg-blue-100 text-blue-600":""),title:"Grid",children:(0,za.jsx)(Ii,{size:16})}),(0,za.jsx)("button",{onClick:()=>r("ruler"),className:"p-2 rounded hover:bg-gray-100 ".concat("ruler"===t?"bg-blue-100 text-blue-600":""),title:"Cetvel",children:(0,za.jsx)(Uy,{size:16})})]})]}),(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[f&&(0,za.jsxs)("div",{className:"flex items-center gap-1 border-r border-gray-200 pr-2",children:[(0,za.jsx)("button",{onClick:d,className:"p-2 hover:bg-gray-100 rounded",title:"Kopyala",children:(0,za.jsx)(xc,{size:16})}),(0,za.jsx)("button",{onClick:c,className:"p-2 hover:bg-gray-100 rounded text-red-600",title:"Sil",children:(0,za.jsx)(il,{size:16})})]}),(0,za.jsxs)("button",{onClick:u,className:"px-3 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded hover:from-purple-700 hover:to-pink-700 flex items-center gap-2",title:"AI ile \u015eablon Olu\u015ftur",children:[(0,za.jsx)(Wy,{size:16}),"AI"]}),(0,za.jsxs)("button",{onClick:h,className:"px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2",title:"Kullan\u0131m K\u0131lavuzu",children:[(0,za.jsx)(Ky,{size:16}),"K\u0131lavuz"]}),(0,za.jsx)("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded",title:"D\u0131\u015fa Aktar",children:(0,za.jsx)(pl,{size:16})}),(0,za.jsxs)("button",{onClick:n,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:[(0,za.jsx)(xy,{size:16,className:"inline mr-1"}),"Kaydet"]})]})]})},Yy=(e,t,r,n,s)=>(0,za.jsx)("div",{className:"space-y-4",children:(0,za.jsxs)("div",{children:[(0,za.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,za.jsx)(gy,{size:16,className:"inline mr-1"}),"G\xf6lge \xd6zellikleri"]}),(0,za.jsxs)("div",{className:"mb-3",children:[(0,za.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"G\xf6lge Rengi"}),(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)("input",{type:"color",value:e,onChange:e=>s("shadowColor",e.target.value),className:"w-8 h-8 border border-gray-300 rounded cursor-pointer"}),(0,za.jsx)("input",{type:"text",value:e,onChange:e=>s("shadowColor",e.target.value),className:"flex-1 p-1 border border-gray-300 rounded text-sm"})]})]}),(0,za.jsxs)("div",{className:"mb-3",children:[(0,za.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"G\xf6lge Bulan\u0131kl\u0131\u011f\u0131"}),(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)("input",{type:"range",min:"0",max:"50",value:t,onChange:e=>s("shadowBlur",parseInt(e.target.value)),className:"flex-1"}),(0,za.jsxs)("span",{className:"text-sm font-medium w-8",children:[t,"px"]})]})]}),(0,za.jsxs)("div",{className:"mb-3",children:[(0,za.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"G\xf6lge Konumu"}),(0,za.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"X"}),(0,za.jsxs)("div",{className:"flex items-center gap-1",children:[(0,za.jsx)("input",{type:"range",min:"-50",max:"50",value:r,onChange:e=>s("shadowOffsetX",parseInt(e.target.value)),className:"flex-1"}),(0,za.jsxs)("span",{className:"text-xs w-8",children:[r,"px"]})]})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Y"}),(0,za.jsxs)("div",{className:"flex items-center gap-1",children:[(0,za.jsx)("input",{type:"range",min:"-50",max:"50",value:n,onChange:e=>s("shadowOffsetY",parseInt(e.target.value)),className:"flex-1"}),(0,za.jsxs)("span",{className:"text-xs w-8",children:[n,"px"]})]})]})]})]})]})}),Gy=(e,t)=>(0,za.jsx)("div",{className:"space-y-4",children:(0,za.jsxs)("div",{children:[(0,za.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,za.jsx)(jy,{size:16,className:"inline mr-1"}),"Kenar \xd6zellikleri"]}),(0,za.jsxs)("div",{className:"mb-3",children:[(0,za.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"K\xf6\u015fe Yuvarlakl\u0131\u011f\u0131"}),(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)("input",{type:"range",min:"0",max:"50",value:e,onChange:e=>t(parseInt(e.target.value)),className:"flex-1"}),(0,za.jsxs)("span",{className:"text-sm font-medium w-8",children:[e,"px"]})]})]})]})}),qy=e=>{let{selectedObject:t,activeTool:r,onPropertyChange:n,textColor:s,fillColor:a,strokeColor:i,strokeWidth:l,fontSize:o,fontFamily:c,opacity:d,rotation:u,scaleX:h,scaleY:m,onColorChange:p,onFontSizeChange:g,onFontFamilyChange:f,onOpacityChange:x,onRotationChange:y,onScaleChange:b,shadowColor:v,shadowBlur:j,shadowOffsetX:w,shadowOffsetY:_,borderRadius:k,onShadowChange:S,onBorderRadiusChange:N}=e;const C=["Arial","Helvetica","Times New Roman","Georgia","Verdana","Trebuchet MS","Arial Black","Impact","Comic Sans MS","Courier New","Lucida Console","Palatino","Garamond"],T=["#000000","#FFFFFF","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFA500","#800080","#FFC0CB","#A52A2A","#808080","#000080","#008000"];return(0,za.jsxs)("div",{className:"w-80 bg-white border-l border-gray-200 p-4 overflow-y-auto",children:[(0,za.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\xd6zellikler"}),t?(0,za.jsxs)("div",{className:"space-y-6",children:["text"===t.type&&(0,za.jsx)("div",{className:"space-y-4",children:(0,za.jsxs)("div",{children:[(0,za.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,za.jsx)(vy,{size:16,className:"inline mr-1"}),"Metin \xd6zellikleri"]}),(0,za.jsxs)("div",{className:"mb-3",children:[(0,za.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Font Ailesi"}),(0,za.jsx)("select",{value:c,onChange:e=>f(e.target.value),className:"w-full p-2 border border-gray-300 rounded text-sm",children:C.map(e=>(0,za.jsx)("option",{value:e,style:{fontFamily:e},children:e},e))})]}),(0,za.jsxs)("div",{className:"mb-3",children:[(0,za.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Font Boyutu"}),(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)("input",{type:"range",min:"8",max:"200",value:o,onChange:e=>g(parseInt(e.target.value)),className:"flex-1"}),(0,za.jsxs)("span",{className:"text-sm font-medium w-12",children:[o,"px"]})]})]}),(0,za.jsxs)("div",{className:"mb-3",children:[(0,za.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Metin Rengi"}),(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)("input",{type:"color",value:s,onChange:e=>p("text",e.target.value),className:"w-8 h-8 border border-gray-300 rounded cursor-pointer"}),(0,za.jsx)("input",{type:"text",value:s,onChange:e=>p("text",e.target.value),className:"flex-1 p-1 border border-gray-300 rounded text-sm"})]}),(0,za.jsx)("div",{className:"grid grid-cols-5 gap-1 mt-2",children:T.map(e=>(0,za.jsx)("button",{onClick:()=>p("text",e),className:"w-6 h-6 border border-gray-300 rounded",style:{backgroundColor:e},title:e},e))})]})]})}),("rect"===t.type||"circle"===t.type||"triangle"===t.type)&&(0,za.jsx)("div",{className:"space-y-4",children:(0,za.jsxs)("div",{children:[(0,za.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,za.jsx)(jy,{size:16,className:"inline mr-1"}),"\u015eekil \xd6zellikleri"]}),(0,za.jsxs)("div",{className:"mb-3",children:[(0,za.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Dolgu Rengi"}),(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)("input",{type:"color",value:a,onChange:e=>p("fill",e.target.value),className:"w-8 h-8 border border-gray-300 rounded cursor-pointer"}),(0,za.jsx)("input",{type:"text",value:a,onChange:e=>p("fill",e.target.value),className:"flex-1 p-1 border border-gray-300 rounded text-sm"})]}),(0,za.jsx)("div",{className:"grid grid-cols-5 gap-1 mt-2",children:T.map(e=>(0,za.jsx)("button",{onClick:()=>p("fill",e),className:"w-6 h-6 border border-gray-300 rounded",style:{backgroundColor:e},title:e},e))})]}),(0,za.jsxs)("div",{className:"mb-3",children:[(0,za.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"\xc7izgi Rengi"}),(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)("input",{type:"color",value:i,onChange:e=>p("stroke",e.target.value),className:"w-8 h-8 border border-gray-300 rounded cursor-pointer"}),(0,za.jsx)("input",{type:"text",value:i,onChange:e=>p("stroke",e.target.value),className:"flex-1 p-1 border border-gray-300 rounded text-sm"})]})]}),(0,za.jsxs)("div",{className:"mb-3",children:[(0,za.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"\xc7izgi Kal\u0131nl\u0131\u011f\u0131"}),(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)("input",{type:"range",min:"0",max:"20",value:l,onChange:e=>n("strokeWidth",parseInt(e.target.value)),className:"flex-1"}),(0,za.jsxs)("span",{className:"text-sm font-medium w-8",children:[l,"px"]})]})]})]})}),(0,za.jsx)("div",{className:"space-y-4",children:(0,za.jsxs)("div",{children:[(0,za.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,za.jsx)(gy,{size:16,className:"inline mr-1"}),"D\xf6n\xfc\u015f\xfcm \xd6zellikleri"]}),(0,za.jsxs)("div",{className:"mb-3",children:[(0,za.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"\u015eeffafl\u0131k"}),(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)("input",{type:"range",min:"0",max:"100",value:100*d,onChange:e=>x(parseInt(e.target.value)/100),className:"flex-1"}),(0,za.jsxs)("span",{className:"text-sm font-medium w-12",children:[Math.round(100*d),"%"]})]})]}),(0,za.jsxs)("div",{className:"mb-3",children:[(0,za.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"D\xf6nd\xfcrme"}),(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)("input",{type:"range",min:"0",max:"360",value:u,onChange:e=>y(parseInt(e.target.value)),className:"flex-1"}),(0,za.jsxs)("span",{className:"text-sm font-medium w-12",children:[u,"\xb0"]})]})]}),(0,za.jsxs)("div",{className:"mb-3",children:[(0,za.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"\xd6l\xe7ek"}),(0,za.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Geni\u015flik"}),(0,za.jsxs)("div",{className:"flex items-center gap-1",children:[(0,za.jsx)("input",{type:"range",min:"0.1",max:"3",step:"0.1",value:h,onChange:e=>b(parseFloat(e.target.value),m),className:"flex-1"}),(0,za.jsxs)("span",{className:"text-xs w-8",children:[Math.round(100*h),"%"]})]})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Y\xfckseklik"}),(0,za.jsxs)("div",{className:"flex items-center gap-1",children:[(0,za.jsx)("input",{type:"range",min:"0.1",max:"3",step:"0.1",value:m,onChange:e=>b(h,parseFloat(e.target.value)),className:"flex-1"}),(0,za.jsxs)("span",{className:"text-xs w-8",children:[Math.round(100*m),"%"]})]})]})]})]})]})}),Yy(v,j,w,_,S),Gy(k,N)]}):(0,za.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,za.jsx)(hy,{size:48,className:"mx-auto mb-2 opacity-50"}),(0,za.jsx)("p",{className:"text-sm",children:"Bir nesne se\xe7in"}),(0,za.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"\xd6zelliklerini d\xfczenlemek i\xe7in"})]})]})},Xy=Ua("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),$y=Ua("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Jy=e=>{let{layers:t,selectedLayerId:r,onLayerSelect:n,onLayerToggleVisibility:s,onLayerToggleLock:a,onLayerDelete:i,onLayerDuplicate:l,onLayerMoveUp:o,onLayerMoveDown:c,onLayerRename:d}=e;const u=e=>{switch(e){case"text":return"T";case"image":return"\ud83d\uddbc\ufe0f";case"rect":return"\u2b1c";case"circle":return"\u2b55";case"triangle":return"\ud83d\udd3a";case"star":return"\u2b50";default:return"\ud83d\udcc4"}},h=e=>{switch(e){case"text":return"Metin";case"image":return"G\xf6rsel";case"rect":return"Dikd\xf6rtgen";case"circle":return"Daire";case"triangle":return"\xdc\xe7gen";case"star":return"Y\u0131ld\u0131z";default:return"Nesne"}},m=[...t].sort((e,t)=>t.order-e.order);return(0,za.jsxs)("div",{className:"w-64 bg-white border-r border-gray-200 p-4 overflow-y-auto",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,za.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,za.jsx)(gy,{size:20,className:"mr-2"}),"Katmanlar"]}),(0,za.jsx)("span",{className:"text-sm text-gray-500",children:t.length})]}),0===t.length?(0,za.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,za.jsx)(gy,{size:48,className:"mx-auto mb-2 opacity-50"}),(0,za.jsx)("p",{className:"text-sm",children:"Hen\xfcz katman yok"}),(0,za.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Nesne ekleyerek ba\u015flay\u0131n"})]}):(0,za.jsx)("div",{className:"space-y-1",children:m.map((e,t)=>(0,za.jsxs)("div",{className:"group flex items-center p-2 rounded-lg border cursor-pointer transition-colors ".concat(r===e.id?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200 hover:bg-gray-100"),onClick:()=>n(e.id),children:[(0,za.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-white border border-gray-300 rounded flex items-center justify-center text-sm font-medium",children:u(e.type)}),(0,za.jsxs)("div",{className:"flex-1 ml-3 min-w-0",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between",children:[(0,za.jsx)("span",{className:"text-sm font-medium text-gray-900 truncate",children:e.name||"".concat(h(e.type)," ").concat(t+1)}),(0,za.jsxs)("span",{className:"text-xs text-gray-500",children:[Math.round(100*e.opacity),"%"]})]}),(0,za.jsx)("div",{className:"text-xs text-gray-500",children:h(e.type)})]}),(0,za.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,za.jsx)("button",{onClick:t=>{t.stopPropagation(),s(e.id)},className:"p-1 hover:bg-gray-200 rounded",title:e.visible?"Gizle":"G\xf6ster",children:e.visible?(0,za.jsx)(ti,{size:14,className:"text-gray-600"}):(0,za.jsx)(ei,{size:14,className:"text-gray-400"})}),(0,za.jsx)("button",{onClick:t=>{t.stopPropagation(),a(e.id)},className:"p-1 hover:bg-gray-200 rounded",title:e.locked?"Kilidi A\xe7":"Kilitle",children:e.locked?(0,za.jsx)(ni,{size:14,className:"text-gray-600"}):(0,za.jsx)(Xy,{size:14,className:"text-gray-400"})}),(0,za.jsx)("button",{onClick:t=>{t.stopPropagation(),o(e.id)},className:"p-1 hover:bg-gray-200 rounded",title:"Yukar\u0131 Ta\u015f\u0131",children:(0,za.jsx)($y,{size:14,className:"text-gray-600"})}),(0,za.jsx)("button",{onClick:t=>{t.stopPropagation(),c(e.id)},className:"p-1 hover:bg-gray-200 rounded",title:"A\u015fa\u011f\u0131 Ta\u015f\u0131",children:(0,za.jsx)(Io,{size:14,className:"text-gray-600"})}),(0,za.jsx)("button",{onClick:t=>{t.stopPropagation(),l(e.id)},className:"p-1 hover:bg-gray-200 rounded",title:"Kopyala",children:(0,za.jsx)(xc,{size:14,className:"text-gray-600"})}),(0,za.jsx)("button",{onClick:t=>{t.stopPropagation(),i(e.id)},className:"p-1 hover:bg-red-100 rounded text-red-600",title:"Sil",children:(0,za.jsx)(il,{size:14})})]})]},e.id))}),t.length>0&&(0,za.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,za.jsx)("div",{className:"text-xs text-gray-500 mb-2",children:"Katman \u0130\u015flemleri"}),(0,za.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,za.jsx)("button",{onClick:()=>{t.forEach(e=>{e.visible||s(e.id)})},className:"px-3 py-1 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200",children:"T\xfcm\xfcn\xfc G\xf6ster"}),(0,za.jsx)("button",{onClick:()=>{t.forEach(e=>{e.visible&&s(e.id)})},className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"T\xfcm\xfcn\xfc Gizle"})]})]})]})},Qy=e=>{let{width:t,height:r,backgroundColor:s,zoom:a,onObjectSelect:i,onObjectDeselect:l,onObjectModified:o,onObjectAdded:c,onObjectRemoved:d,activeTool:u,onCanvasReady:h,initialData:m}=e;const p=(0,n.useRef)(null),[g,f]=(0,n.useState)(null),[x,y]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(p.current&&!g){try{const e=new Jg(p.current,{width:t,height:r,backgroundColor:s,selection:!0,preserveObjectStacking:!0,renderOnAddRemove:!0,allowTouchScrolling:!0});f(e),y(!0),h(e),e.on("selection:created",e=>{var t;i((null===(t=e.selected)||void 0===t?void 0:t[0])||null)}),e.on("selection:updated",e=>{var t;i((null===(t=e.selected)||void 0===t?void 0:t[0])||null)}),e.on("selection:cleared",()=>{l()}),e.on("object:modified",()=>{o()}),e.on("object:added",()=>{c()}),e.on("object:removed",()=>{d()}),m&&e.loadFromJSON(m,()=>{e.renderAll()})}catch(e){console.error("Canvas initialization error:",e)}return()=>{const e=g;e&&"function"===typeof e.dispose&&(e.dispose(),f(null),y(!1))}}},[t,r,s]),(0,n.useEffect)(()=>{g&&x&&(g.setWidth(t),g.setHeight(r),g.backgroundColor=s,g.renderAll())},[g,t,r,s,x]),(0,n.useEffect)(()=>{g&&x&&(g.setZoom(a),g.renderAll())},[g,a,x]),(0,n.useEffect)(()=>{if(g&&x)switch(u){case"select":g.defaultCursor="default",g.hoverCursor="move";break;case"text":g.defaultCursor="text",g.hoverCursor="text";break;default:g.defaultCursor="crosshair",g.hoverCursor="crosshair"}},[g,u,x]);const b=(0,n.useCallback)(e=>{if(!g||!x)return;const t=g.getPointer(e.e);switch(u){case"text":v(t.x,t.y);break;case"rectangle":j(t.x,t.y);break;case"circle":w(t.x,t.y);break;case"triangle":_(t.x,t.y);break;case"star":k(t.x,t.y);break;case"heart":S(t.x,t.y);break;case"diamond":N(t.x,t.y);break;case"hexagon":C(t.x,t.y);break;case"line":T(t.x,t.y)}},[g,u,x]),v=(e,t)=>{if(!g)return;const r=new If("Metin",{left:e,top:t,fontFamily:"Arial",fontSize:24,fill:"#000000"});g.add(r),g.setActiveObject(r),g.renderAll()},j=(e,t)=>{if(!g)return;const r=new qp({left:e,top:t,width:100,height:100,fill:"#3B82F6",stroke:"#000000",strokeWidth:2});g.add(r),g.setActiveObject(r),g.renderAll()},w=(e,t)=>{if(!g)return;const r=new jf({left:e,top:t,radius:50,fill:"#3B82F6",stroke:"#000000",strokeWidth:2});g.add(r),g.setActiveObject(r),g.renderAll()},_=(e,t)=>{if(!g)return;const r=new Nf({left:e,top:t,width:100,height:100,fill:"#3B82F6",stroke:"#000000",strokeWidth:2});g.add(r),g.setActiveObject(r),g.renderAll()},k=(e,t)=>{if(!g)return;const r=new Df([{x:0,y:-50},{x:14,y:-20},{x:47,y:-15},{x:23,y:7},{x:29,y:40},{x:0,y:25},{x:-29,y:40},{x:-23,y:7},{x:-47,y:-15},{x:-14,y:-20}],{left:e,top:t,fill:"#3B82F6",stroke:"#000000",strokeWidth:2});g.add(r),g.setActiveObject(r),g.renderAll()},S=(e,t)=>{if(!g)return;const r=new yf("M12,21.35l-1.45-1.32C5.4,15.36,2,12.28,2,8.5 C2,5.42,4.42,3,7.5,3c1.74,0,3.41,0.81,4.5,2.09C13.09,3.81,14.76,3,16.5,3 C19.58,3,22,5.42,22,8.5c0,3.78-3.4,6.86-8.55,11.54L12,21.35z",{left:e,top:t,scaleX:2,scaleY:2,fill:"#ef4444",stroke:"#000000",strokeWidth:2});g.add(r),g.setActiveObject(r),g.renderAll()},N=(e,t)=>{if(!g)return;const r=new Df([{x:0,y:-50},{x:50,y:0},{x:0,y:50},{x:-50,y:0}],{left:e,top:t,fill:"#8b5cf6",stroke:"#000000",strokeWidth:2});g.add(r),g.setActiveObject(r),g.renderAll()},C=(e,t)=>{if(!g)return;const r=new Df([{x:0,y:-50},{x:43,y:-25},{x:43,y:25},{x:0,y:50},{x:-43,y:25},{x:-43,y:-25}],{left:e,top:t,fill:"#10b981",stroke:"#000000",strokeWidth:2});g.add(r),g.setActiveObject(r),g.renderAll()},T=(e,t)=>{if(!g)return;const r=new Sf([0,0,100,0],{left:e,top:t,stroke:"#000000",strokeWidth:3});g.add(r),g.setActiveObject(r),g.renderAll()};return(0,n.useEffect)(()=>{if(g&&x)return g.on("mouse:down",b),()=>{g.off("mouse:down",b)}},[g,b,x]),(0,za.jsx)("div",{className:"flex-1 bg-gray-100 flex items-center justify-center overflow-hidden",children:(0,za.jsx)("div",{className:"bg-white shadow-lg rounded-lg p-4",children:(0,za.jsx)("canvas",{ref:p,className:"border border-gray-300",style:{maxWidth:"100%",maxHeight:"100%",cursor:"select"===u?"default":"crosshair"}})})})},Zy=Ua("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),eb=Ua("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),tb=e=>{let{isOpen:t,onClose:r,onGenerate:s,isGenerating:a}=e;const[i,l]=(0,n.useState)(""),[o,c]=(0,n.useState)("modern"),d=[{id:"modern",name:"Modern",icon:Wy,description:"Temiz ve \xe7a\u011fda\u015f tasar\u0131m"},{id:"vintage",name:"Vintage",icon:hy,description:"Retro ve nostaljik g\xf6r\xfcn\xfcm"},{id:"minimalist",name:"Minimalist",icon:jy,description:"Sade ve basit tasar\u0131m"},{id:"corporate",name:"Kurumsal",icon:vy,description:"Profesyonel i\u015f tasar\u0131m\u0131"},{id:"creative",name:"Yarat\u0131c\u0131",icon:Zy,description:"Sanatsal ve yarat\u0131c\u0131"},{id:"social",name:"Sosyal Medya",icon:Bi,description:"Instagram/Facebook i\xe7in"}];return t?(0,za.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,za.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,za.jsxs)("div",{className:"flex items-center gap-3",children:[(0,za.jsx)("div",{className:"p-2 bg-gradient-to-r from-purple-100 to-pink-100 rounded-lg",children:(0,za.jsx)(Wy,{className:"w-6 h-6 text-purple-600"})}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"AI \u015eablon Olu\u015fturucu"}),(0,za.jsx)("p",{className:"text-sm text-gray-600",children:"\u0130stedi\u011finiz \u015fablonu AI ile olu\u015fturun"})]})]}),(0,za.jsx)("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,za.jsx)(fl,{size:20})})]}),(0,za.jsxs)("div",{className:"p-6 space-y-6",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u015eablon A\xe7\u0131klamas\u0131"}),(0,za.jsx)("textarea",{value:i,onChange:e=>l(e.target.value),placeholder:"\xd6rnek: Bir restoran i\xe7in modern ve \u015f\u0131k men\xfc kart\u0131 tasar\u0131m\u0131. Logo \xfcstte, yemek listesi ortada, ileti\u015fim bilgileri altta olsun...",className:"w-full p-3 border border-gray-300 rounded-lg resize-none h-24 text-sm",disabled:a}),(0,za.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Ne t\xfcr bir \u015fablon istedi\u011finizi detayl\u0131 olarak a\xe7\u0131klay\u0131n"})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Tasar\u0131m Stili"}),(0,za.jsx)("div",{className:"grid grid-cols-2 gap-3",children:d.map(e=>(0,za.jsxs)("button",{onClick:()=>c(e.id),disabled:a,className:"p-3 border rounded-lg text-left transition-colors ".concat(o===e.id?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"," ").concat(a?"opacity-50 cursor-not-allowed":""),children:[(0,za.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,za.jsx)(e.icon,{size:16,className:"text-gray-600"}),(0,za.jsx)("span",{className:"font-medium text-sm",children:e.name})]}),(0,za.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]},e.id))})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\xd6rnek \u0130stekler"}),(0,za.jsx)("div",{className:"space-y-2",children:["Bir kafe i\xe7in vintage tarzda men\xfc kart\u0131","E-ticaret \xfcr\xfcn tan\u0131t\u0131m posteri","D\xfc\u011f\xfcn davetiyesi tasar\u0131m\u0131","Kurumsal sunum \u015fablonu","Sosyal medya hikaye \u015fablonu"].map((e,t)=>(0,za.jsx)("button",{onClick:()=>l(e),disabled:a,className:"w-full text-left p-2 text-sm text-gray-600 hover:bg-gray-50 rounded border border-gray-200 hover:border-gray-300 transition-colors",children:e},t))})]})]}),(0,za.jsxs)("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50",children:[(0,za.jsx)("div",{className:"text-xs text-gray-500",children:"AI, a\xe7\u0131k kaynak kodlu modeller kullanarak \u015fablon olu\u015fturur"}),(0,za.jsxs)("div",{className:"flex items-center gap-3",children:[(0,za.jsx)("button",{onClick:r,disabled:a,className:"px-4 py-2 text-gray-600 hover:text-gray-800 disabled:opacity-50",children:"\u0130ptal"}),(0,za.jsx)("button",{onClick:()=>{i.trim()&&s(i,o)},disabled:!i.trim()||a,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:a?(0,za.jsxs)(za.Fragment,{children:[(0,za.jsx)(eb,{size:16,className:"animate-spin"}),"Olu\u015fturuluyor..."]}):(0,za.jsxs)(za.Fragment,{children:[(0,za.jsx)(Wy,{size:16}),"Olu\u015ftur"]})})]})]})]})}):null},rb=Ua("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),nb=Ua("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),sb=Ua("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),ab=Ua("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),ib=e=>{let{placeholder:t,onSave:r,onClose:s}=e;const[a,i]=(0,n.useState)({name:(null===t||void 0===t?void 0:t.name)||"",description:(null===t||void 0===t?void 0:t.description)||"",defaultValue:(null===t||void 0===t?void 0:t.defaultValue)||"",required:(null===t||void 0===t?void 0:t.required)||!1,category:(null===t||void 0===t?void 0:t.category)||"product",type:(null===t||void 0===t?void 0:t.type)||"text"});return(0,za.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,za.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-md mx-4 p-6",children:[(0,za.jsx)("h3",{className:"text-lg font-semibold mb-4",children:t?"Placeholder D\xfczenle":"Yeni Placeholder"}),(0,za.jsxs)("div",{className:"space-y-4",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ad"}),(0,za.jsx)("input",{type:"text",value:a.name,onChange:e=>i(Ie(Ie({},a),{},{name:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",placeholder:"Placeholder ad\u0131"})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"A\xe7\u0131klama"}),(0,za.jsx)("input",{type:"text",value:a.description,onChange:e=>i(Ie(Ie({},a),{},{description:e.target.value})),className:"w-full p-2 border border-gray-300 rounded",placeholder:"Placeholder a\xe7\u0131klamas\u0131"})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Varsay\u0131lan De\u011fer"}),(0,za.jsx)("input",{type:"text",value:a.defaultValue,onChange:e=>i(Ie(Ie({},a),{},{defaultValue:e.target.value})),className:"w-full p-2 border border-gray-300 rounded font-mono",placeholder:"{{data.field}}"})]}),(0,za.jsxs)("div",{className:"flex items-center gap-4",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kategori"}),(0,za.jsxs)("select",{value:a.category,onChange:e=>i(Ie(Ie({},a),{},{category:e.target.value})),className:"p-2 border border-gray-300 rounded",children:[(0,za.jsx)("option",{value:"product",children:"\xdcr\xfcn"}),(0,za.jsx)("option",{value:"brand",children:"Marka"}),(0,za.jsx)("option",{value:"contact",children:"\u0130leti\u015fim"}),(0,za.jsx)("option",{value:"general",children:"Genel"})]})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tip"}),(0,za.jsxs)("select",{value:a.type,onChange:e=>i(Ie(Ie({},a),{},{type:e.target.value})),className:"p-2 border border-gray-300 rounded",children:[(0,za.jsx)("option",{value:"text",children:"Metin"}),(0,za.jsx)("option",{value:"image",children:"G\xf6rsel"}),(0,za.jsx)("option",{value:"number",children:"Say\u0131"}),(0,za.jsx)("option",{value:"date",children:"Tarih"}),(0,za.jsx)("option",{value:"location",children:"Konum"}),(0,za.jsx)("option",{value:"contact",children:"\u0130leti\u015fim"}),(0,za.jsx)("option",{value:"user",children:"Kullan\u0131c\u0131"}),(0,za.jsx)("option",{value:"tag",children:"Etiket"})]})]})]}),(0,za.jsxs)("div",{className:"flex items-center",children:[(0,za.jsx)("input",{type:"checkbox",id:"required",checked:a.required,onChange:e=>i(Ie(Ie({},a),{},{required:e.target.checked})),className:"mr-2"}),(0,za.jsx)("label",{htmlFor:"required",className:"text-sm text-gray-700",children:"Zorunlu alan"})]})]}),(0,za.jsxs)("div",{className:"flex items-center justify-end gap-3 mt-6",children:[(0,za.jsx)("button",{onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"\u0130ptal"}),(0,za.jsx)("button",{onClick:()=>{if(!a.name||!a.defaultValue)return;const e={id:(null===t||void 0===t?void 0:t.id)||"custom-".concat(Date.now()),type:a.type,name:a.name,description:a.description,icon:vy,defaultValue:a.defaultValue,required:a.required,category:a.category};r(e)},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Kaydet"})]})]})})},lb=e=>{let{onAddPlaceholder:t,onEditPlaceholder:r,onDeletePlaceholder:s,placeholders:a}=e;const[i,l]=(0,n.useState)("product"),[o,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(null),h=[{id:"product-name",type:"text",name:"\xdcr\xfcn Ad\u0131",description:"\xdcr\xfcn\xfcn ad\u0131",icon:Lo,defaultValue:"{{product.name}}",required:!0,category:"product"},{id:"product-code",type:"text",name:"\xdcr\xfcn Kodu",description:"\xdcr\xfcn kodu",icon:rb,defaultValue:"{{product.code}}",required:!0,category:"product"},{id:"product-price",type:"number",name:"Fiyat",description:"\xdcr\xfcn fiyat\u0131",icon:rb,defaultValue:"{{product.price}}",required:!0,category:"product"},{id:"product-image",type:"image",name:"\xdcr\xfcn G\xf6rseli",description:"Ana \xfcr\xfcn g\xf6rseli",icon:Bi,defaultValue:"{{product.mainImage}}",required:!0,category:"product"},{id:"product-gallery",type:"image",name:"\xdcr\xfcn Galerisi",description:"\xdcr\xfcn g\xf6rselleri",icon:Bi,defaultValue:"{{product.gallery}}",required:!1,category:"product"},{id:"product-color",type:"text",name:"Renk",description:"\xdcr\xfcn rengi",icon:Lo,defaultValue:"{{product.color}}",required:!1,category:"product"},{id:"product-size",type:"text",name:"Beden",description:"\xdcr\xfcn bedeni",icon:Lo,defaultValue:"{{product.size}}",required:!1,category:"product"},{id:"product-description",type:"text",name:"A\xe7\u0131klama",description:"\xdcr\xfcn a\xe7\u0131klamas\u0131",icon:vy,defaultValue:"{{product.description}}",required:!1,category:"product"},{id:"brand-name",type:"text",name:"Marka Ad\u0131",description:"Marka ad\u0131",icon:Lo,defaultValue:"{{brand.name}}",required:!0,category:"brand"},{id:"brand-logo",type:"image",name:"Marka Logosu",description:"Marka logosu",icon:Bi,defaultValue:"{{brand.logo}}",required:!0,category:"brand"},{id:"brand-slogan",type:"text",name:"Marka Slogan\u0131",description:"Marka slogan\u0131",icon:vy,defaultValue:"{{brand.slogan}}",required:!1,category:"brand"},{id:"contact-phone",type:"contact",name:"Telefon",description:"\u0130leti\u015fim telefonu",icon:nb,defaultValue:"{{contact.phone}}",required:!1,category:"contact"},{id:"contact-email",type:"contact",name:"E-posta",description:"\u0130leti\u015fim e-postas\u0131",icon:uc,defaultValue:"{{contact.email}}",required:!1,category:"contact"},{id:"contact-address",type:"location",name:"Adres",description:"\u0130leti\u015fim adresi",icon:sb,defaultValue:"{{contact.address}}",required:!1,category:"contact"},{id:"contact-website",type:"text",name:"Website",description:"Website adresi",icon:vy,defaultValue:"{{contact.website}}",required:!1,category:"contact"},{id:"current-date",type:"date",name:"Tarih",description:"G\xfcncel tarih",icon:ab,defaultValue:"{{date.current}}",required:!1,category:"general"},{id:"user-name",type:"user",name:"Kullan\u0131c\u0131 Ad\u0131",description:"Kullan\u0131c\u0131 ad\u0131",icon:rc,defaultValue:"{{user.name}}",required:!1,category:"general"}].filter(e=>e.category===i);return(0,za.jsxs)("div",{className:"w-80 bg-white border-l border-gray-200 p-4 overflow-y-auto",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,za.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Dinamik Alanlar"}),(0,za.jsx)("button",{onClick:()=>c(!0),className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"+ Ekle"})]}),(0,za.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:[{id:"product",name:"\xdcr\xfcn",color:"bg-blue-100 text-blue-800"},{id:"brand",name:"Marka",color:"bg-green-100 text-green-800"},{id:"contact",name:"\u0130leti\u015fim",color:"bg-purple-100 text-purple-800"},{id:"general",name:"Genel",color:"bg-gray-100 text-gray-800"}].map(e=>(0,za.jsx)("button",{onClick:()=>l(e.id),className:"px-3 py-1 rounded-full text-xs font-medium ".concat(i===e.id?e.color:"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:e.name},e.id))}),(0,za.jsx)("div",{className:"space-y-2",children:h.map(e=>(0,za.jsxs)("div",{className:"p-3 border border-gray-200 rounded-lg hover:border-gray-300 transition-colors",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between",children:[(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)(e.icon,{size:16,className:"text-gray-600"}),(0,za.jsxs)("div",{children:[(0,za.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,za.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]})]}),(0,za.jsxs)("div",{className:"flex items-center gap-1",children:[(0,za.jsx)("button",{onClick:()=>(e=>{u(e),c(!0)})(e),className:"p-1 hover:bg-gray-100 rounded",title:"D\xfczenle",children:"\u270f\ufe0f"}),(0,za.jsx)("button",{onClick:()=>s(e.id),className:"p-1 hover:bg-red-100 rounded text-red-600",title:"Sil",children:"\ud83d\uddd1\ufe0f"})]})]}),(0,za.jsx)("div",{className:"mt-2 text-xs text-gray-400 font-mono bg-gray-50 p-1 rounded",children:e.defaultValue}),e.required&&(0,za.jsx)("span",{className:"inline-block mt-1 px-2 py-0.5 bg-red-100 text-red-600 text-xs rounded",children:"Zorunlu"})]},e.id))}),o&&(0,za.jsx)(ib,{placeholder:d,onSave:e=>{d?r(d.id,e):t(e),c(!1),u(null)},onClose:()=>{c(!1),u(null)}})]})},ob=Ua("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),cb=Ua("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]),db=Ua("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]),ub=Ua("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),hb=Ua("Car",[["path",{d:"M14 16H9m10 0h3v-3.15a1 1 0 0 0-.84-.99L16 11l-2.7-3.6a1 1 0 0 0-.8-.4H5.24a2 2 0 0 0-1.8 1.1l-.8 1.63A6 6 0 0 0 2 12.42V16h2",key:"l5np60"}],["circle",{cx:"6.5",cy:"16.5",r:"2.5",key:"ae40ju"}],["circle",{cx:"16.5",cy:"16.5",r:"2.5",key:"1smtlt"}]]),mb=Ua("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]),pb=Ua("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),gb=Ua("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]),fb=Ua("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),xb=Ua("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),yb=Ua("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),bb=Ua("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),vb=e=>{let{selectedCategory:t,onCategorySelect:r,onSubcategorySelect:n}=e;const s=[{id:"ecommerce",name:"E-Ticaret",icon:ob,description:"Online sat\u0131\u015f \u015fablonlar\u0131",color:"bg-blue-100 text-blue-800",subcategories:["\xdcr\xfcn Tan\u0131t\u0131m","Kampanya","Katalog","Fiyat Listesi","\u0130ndirim"]},{id:"fashion",name:"Moda & Giyim",icon:cb,description:"Moda ve giyim \u015fablonlar\u0131",color:"bg-pink-100 text-pink-800",subcategories:["Koleksiyon","Lookbook","Kampanya","Sezon","Marka"]},{id:"food",name:"Yemek & Restoran",icon:db,description:"Restoran ve yemek \u015fablonlar\u0131",color:"bg-orange-100 text-orange-800",subcategories:["Men\xfc","Kampanya","Yemek Tan\u0131t\u0131m","Restoran","Catering"]},{id:"real-estate",name:"Emlak",icon:ub,description:"Emlak \u015fablonlar\u0131",color:"bg-green-100 text-green-800",subcategories:["Emlak Tan\u0131t\u0131m","Proje","Kampanya","Portf\xf6y","Sat\u0131\u015f"]},{id:"automotive",name:"Otomotiv",icon:hb,description:"Otomotiv \u015fablonlar\u0131",color:"bg-gray-100 text-gray-800",subcategories:["Ara\xe7 Tan\u0131t\u0131m","Servis","Kampanya","Yedek Par\xe7a","Sat\u0131\u015f"]},{id:"healthcare",name:"Sa\u011fl\u0131k",icon:mb,description:"Sa\u011fl\u0131k \u015fablonlar\u0131",color:"bg-red-100 text-red-800",subcategories:["Hizmet Tan\u0131t\u0131m","Kampanya","Bilgilendirme","Randevu","Uzman"]},{id:"education",name:"E\u011fitim",icon:pb,description:"E\u011fitim \u015fablonlar\u0131",color:"bg-indigo-100 text-indigo-800",subcategories:["Kurs","Kampanya","Ba\u015far\u0131","Etkinlik","\xd6\u011frenci"]},{id:"technology",name:"Teknoloji",icon:gb,description:"Teknoloji \u015fablonlar\u0131",color:"bg-purple-100 text-purple-800",subcategories:["\xdcr\xfcn Tan\u0131t\u0131m","Kampanya","Yaz\u0131l\u0131m","Donan\u0131m","Hizmet"]},{id:"beauty",name:"G\xfczellik",icon:Sy,description:"G\xfczellik \u015fablonlar\u0131",color:"bg-rose-100 text-rose-800",subcategories:["\xdcr\xfcn Tan\u0131t\u0131m","Kampanya","Hizmet","Koleksiyon","Marka"]},{id:"photography",name:"Foto\u011fraf\xe7\u0131l\u0131k",icon:fb,description:"Foto\u011fraf\xe7\u0131l\u0131k \u015fablonlar\u0131",color:"bg-yellow-100 text-yellow-800",subcategories:["Portf\xf6y","Kampanya","Hizmet","Etkinlik","St\xfcdyo"]},{id:"entertainment",name:"E\u011flence",icon:xb,description:"E\u011flence \u015fablonlar\u0131",color:"bg-emerald-100 text-emerald-800",subcategories:["Etkinlik","Kampanya","Konser","Festival","Sanat"]},{id:"business",name:"\u0130\u015f & Kurumsal",icon:yb,description:"\u0130\u015f ve kurumsal \u015fablonlar\u0131",color:"bg-slate-100 text-slate-800",subcategories:["Sunum","Rapor","Kampanya","Hizmet","Kurumsal"]},{id:"events",name:"Etkinlik",icon:ab,description:"Etkinlik \u015fablonlar\u0131",color:"bg-cyan-100 text-cyan-800",subcategories:["Davet","Kampanya","Program","Bilet","Organizasyon"]},{id:"services",name:"Hizmetler",icon:bb,description:"Hizmet \u015fablonlar\u0131",color:"bg-amber-100 text-amber-800",subcategories:["Hizmet Tan\u0131t\u0131m","Kampanya","Fiyat","Randevu","Uzman"]},{id:"creative",name:"Yarat\u0131c\u0131",icon:hy,description:"Yarat\u0131c\u0131 \u015fablonlar",color:"bg-violet-100 text-violet-800",subcategories:["Sanat","Tasar\u0131m","Kampanya","Portf\xf6y","Kreatif"]}],a=s.find(e=>e.id===t);return(0,za.jsxs)("div",{className:"w-80 bg-white border-l border-gray-200 p-4 overflow-y-auto",children:[(0,za.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\u015eablon Kategorileri"}),(0,za.jsx)("div",{className:"grid grid-cols-2 gap-2 mb-4",children:s.map(e=>(0,za.jsx)("button",{onClick:()=>r(e.id),className:"p-3 rounded-lg border transition-colors ".concat(t===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:(0,za.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,za.jsx)(e.icon,{size:24,className:"mb-2 ".concat(t===e.id?"text-blue-600":"text-gray-600")}),(0,za.jsx)("span",{className:"text-xs font-medium ".concat(t===e.id?"text-blue-800":"text-gray-700"),children:e.name})]})},e.id))}),a&&(0,za.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,za.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,za.jsx)(a.icon,{size:20,className:"text-gray-600"}),(0,za.jsx)("h4",{className:"font-medium text-gray-900",children:a.name})]}),(0,za.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:a.description}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Alt Kategoriler:"}),(0,za.jsx)("div",{className:"flex flex-wrap gap-1",children:a.subcategories.map(e=>(0,za.jsx)("button",{onClick:()=>n(e),className:"px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200 transition-colors",children:e},e))})]})]}),(0,za.jsxs)("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[(0,za.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"H\u0131zl\u0131 \u0130\u015flemler:"}),(0,za.jsxs)("div",{className:"space-y-2",children:[(0,za.jsx)("button",{className:"w-full p-2 text-sm bg-blue-50 text-blue-700 rounded hover:bg-blue-100 transition-colors",children:"Bu Kategoriye \xd6zel \u015eablon Olu\u015ftur"}),(0,za.jsx)("button",{className:"w-full p-2 text-sm bg-green-50 text-green-700 rounded hover:bg-green-100 transition-colors",children:"Kategori \u015eablonlar\u0131n\u0131 G\xf6r\xfcnt\xfcle"}),(0,za.jsx)("button",{className:"w-full p-2 text-sm bg-purple-50 text-purple-700 rounded hover:bg-purple-100 transition-colors",children:"AI ile Kategori \u015eablonu Olu\u015ftur"})]})]})]})},jb=async function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,t=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0;const s=new URLSearchParams({page:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1).toString(),per_page:e.toString()});t&&s.append("search",t),r&&s.append("category",r),void 0!==n&&s.append("is_active",n.toString());return(await gs.get("/api/brands?".concat(s))).data},wb=async(e,t)=>(await gs.post("/api/brands/assign-template",{template_id:e,brand_ids:t})).data,_b=e=>{let{selectedBrands:t,onBrandSelect:r,onTemplateAssign:s,templateId:a}=e;const[i,l]=(0,n.useState)([]),[o,c]=(0,n.useState)(""),[d,u]=(0,n.useState)("all"),[h,m]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{try{const e=await jb(1,100,o,d,!0);l(e.brands)}catch(e){console.error("Error loading brands:",e),Ra.error("Markalar y\xfcklenirken hata olu\u015ftu");const t=[{id:1,name:"Nike",logo:"/logos/nike.png",description:"Spor giyim markas\u0131",category:"Fashion",isActive:!0,userCount:15,templateCount:8,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},{id:2,name:"Apple",logo:"/logos/apple.png",description:"Teknoloji markas\u0131",category:"Technology",isActive:!0,userCount:25,templateCount:12,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}];l(t)}})()},[o,d]);const p=i.filter(e=>{var t;const r=e.name.toLowerCase().includes(o.toLowerCase())||(null===(t=e.description)||void 0===t?void 0:t.toLowerCase().includes(o.toLowerCase())),n="all"===d||e.category===d;return r&&n&&e.isActive}),g=e=>{const n=t.includes(e)?t.filter(t=>t!==e):[...t,e];r(n)};return(0,za.jsxs)("div",{className:"w-80 bg-white border-l border-gray-200 p-4 overflow-y-auto",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,za.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Marka Atamas\u0131"}),(0,za.jsxs)("button",{onClick:()=>m(!0),className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:[(0,za.jsx)(Li,{size:14,className:"inline mr-1"}),"Ata"]})]}),(0,za.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,za.jsxs)("div",{className:"relative",children:[(0,za.jsx)(nl,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,za.jsx)("input",{type:"text",placeholder:"Marka ara...",value:o,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm"})]}),(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)(jc,{size:16,className:"text-gray-400"}),(0,za.jsx)("select",{value:d,onChange:e=>u(e.target.value),className:"flex-1 p-2 border border-gray-300 rounded text-sm",children:["all","Fashion","Technology","Food","Automotive","Beauty","Healthcare","Education"].map(e=>(0,za.jsx)("option",{value:e,children:"all"===e?"T\xfcm Kategoriler":e},e))})]})]}),t.length>0&&(0,za.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:(0,za.jsxs)("div",{className:"flex items-center justify-between",children:[(0,za.jsxs)("span",{className:"text-sm font-medium text-blue-800",children:[t.length," marka se\xe7ildi"]}),(0,za.jsx)("button",{onClick:()=>r([]),className:"text-xs text-blue-600 hover:text-blue-800",children:"Temizle"})]})}),(0,za.jsxs)("div",{className:"space-y-2",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,za.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Markalar (",p.length,")"]}),(0,za.jsx)("button",{onClick:()=>{t.length===p.length?r([]):r(p.map(e=>e.id))},className:"text-xs text-blue-600 hover:text-blue-800",children:t.length===p.length?"T\xfcm\xfcn\xfc Kald\u0131r":"T\xfcm\xfcn\xfc Se\xe7"})]}),p.map(e=>(0,za.jsx)("div",{className:"p-3 border rounded-lg cursor-pointer transition-colors ".concat(t.includes(e.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>g(e.id),children:(0,za.jsxs)("div",{className:"flex items-center gap-3",children:[(0,za.jsx)("input",{type:"checkbox",checked:t.includes(e.id),onChange:()=>g(e.id),className:"w-4 h-4 text-blue-600"}),(0,za.jsxs)("div",{className:"flex-1",children:[(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[e.logo?(0,za.jsx)("img",{src:e.logo,alt:e.name,className:"w-8 h-8 rounded object-cover"}):(0,za.jsx)("div",{className:"w-8 h-8 bg-gray-200 rounded flex items-center justify-center",children:(0,za.jsx)(di,{size:16,className:"text-gray-500"})}),(0,za.jsxs)("div",{children:[(0,za.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,za.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]})]}),(0,za.jsxs)("div",{className:"flex items-center gap-4 mt-2",children:[(0,za.jsxs)("div",{className:"flex items-center gap-1",children:[(0,za.jsx)(Lo,{size:12,className:"text-gray-400"}),(0,za.jsx)("span",{className:"text-xs text-gray-500",children:e.category})]}),(0,za.jsxs)("div",{className:"flex items-center gap-1",children:[(0,za.jsx)(ci,{size:12,className:"text-gray-400"}),(0,za.jsxs)("span",{className:"text-xs text-gray-500",children:[e.userCount," kullan\u0131c\u0131"]})]}),(0,za.jsxs)("div",{className:"flex items-center gap-1",children:[(0,za.jsx)(hc,{size:12,className:"text-gray-400"}),(0,za.jsxs)("span",{className:"text-xs text-gray-500",children:[e.templateCount," \u015fablon"]})]})]})]})]})},e.id))]}),h&&(0,za.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,za.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-md mx-4 p-6",children:[(0,za.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u015eablonu Markalara Ata"}),(0,za.jsxs)("div",{className:"space-y-4",children:[(0,za.jsx)("p",{className:"text-sm text-gray-600",children:"Bu \u015fablon se\xe7ili markalara atanacak. Markalar bu \u015fablonu kullanarak kendi i\xe7eriklerini olu\u015fturabilecek."}),t.length>0?(0,za.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[(0,za.jsx)("h4",{className:"font-medium text-blue-800 mb-2",children:"Se\xe7ili Markalar:"}),(0,za.jsx)("div",{className:"space-y-1",children:t.map(e=>{const t=i.find(t=>t.id===e);return t?(0,za.jsxs)("div",{className:"text-sm text-blue-700",children:["\u2022 ",t.name]},e):null})})]}):(0,za.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:(0,za.jsx)("p",{className:"text-sm text-yellow-800",children:"L\xfctfen en az bir marka se\xe7in."})})]}),(0,za.jsxs)("div",{className:"flex items-center justify-end gap-3 mt-6",children:[(0,za.jsx)("button",{onClick:()=>m(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"\u0130ptal"}),(0,za.jsx)("button",{onClick:async()=>{if(a&&t.length>0)try{await wb(a,t),Ra.success("\u015eablon ".concat(t.length," markaya atand\u0131")),s(a,t),m(!1)}catch(e){console.error("Error assigning template:",e),Ra.error("\u015eablon atan\u0131rken hata olu\u015ftu")}},disabled:0===t.length,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Ata"})]})]})})]})},kb=Ua("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),Sb=Ua("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),Nb=Ua("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),Cb=Ua("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),Tb=async e=>(await gs.get("/api/templates/".concat(e))).data,Eb=async(e,t)=>(await gs.post("/api/templates/".concat(e,"/generate"),{data:t})).data,Ob=e=>{let{templateId:t,onDataChange:r,onPreview:s}=e;const[a,i]=(0,n.useState)([]),[l,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)({}),[u,h]=(0,n.useState)(!1);(0,n.useEffect)(()=>{t&&(async()=>{try{const e=(await Tb(t)).placeholders.map(e=>Ie(Ie({},e),{},{value:e.value||""}));i(e)}catch(e){console.error("Error loading template fields:",e),Ra.error("\u015eablon alanlar\u0131 y\xfcklenirken hata olu\u015ftu"),i([{id:"product-name",name:"\xdcr\xfcn Ad\u0131",type:"text",value:"",placeholder:"{{product.name}}",required:!0,validation:{min:2,max:100,message:"\xdcr\xfcn ad\u0131 2-100 karakter aras\u0131nda olmal\u0131d\u0131r"},category:"product"},{id:"product-price",name:"Fiyat",type:"number",value:"",placeholder:"{{product.price}}",required:!0,validation:{min:0,message:"Fiyat 0'dan b\xfcy\xfck olmal\u0131d\u0131r"},category:"product"},{id:"product-image",name:"\xdcr\xfcn G\xf6rseli",type:"image",value:"",placeholder:"{{product.mainImage}}",required:!0,category:"product"},{id:"brand-name",name:"Marka Ad\u0131",type:"text",value:"",placeholder:"{{brand.name}}",required:!0,category:"brand"},{id:"brand-logo",name:"Marka Logosu",type:"image",value:"",placeholder:"{{brand.logo}}",required:!0,category:"brand"}])}})()},[t]);const m=(e,t)=>{const n=a.map(r=>r.id===e?Ie(Ie({},r),{},{value:t}):r);i(n);const s={};n.forEach(e=>{e.value&&(s[e.id]=e.value)}),r(s)},p=(e,t)=>{if(e.required&&(!t||""===t.toString().trim()))return"".concat(e.name," zorunludur");if(e.validation&&t){const{min:r,max:n,pattern:s,message:a}=e.validation;if("number"===e.type){const s=parseFloat(t);if(void 0!==r&&s<r)return a||"".concat(e.name," en az ").concat(r," olmal\u0131d\u0131r");if(void 0!==n&&s>n)return a||"".concat(e.name," en fazla ").concat(n," olmal\u0131d\u0131r")}if("text"===e.type&&s){if(!new RegExp(s).test(t))return a||"".concat(e.name," format\u0131 ge\xe7ersizdir")}}return null},g=e=>{const t=p(e,e.value);switch(e.type){case"text":default:return(0,za.jsx)("input",{type:"text",value:e.value,onChange:t=>m(e.id,t.target.value),placeholder:e.placeholder,className:"w-full p-2 border rounded ".concat(t?"border-red-300":"border-gray-300")});case"number":return(0,za.jsx)("input",{type:"number",value:e.value,onChange:t=>m(e.id,parseFloat(t.target.value)||""),placeholder:e.placeholder,className:"w-full p-2 border rounded ".concat(t?"border-red-300":"border-gray-300")});case"date":return(0,za.jsx)("input",{type:"date",value:e.value,onChange:t=>m(e.id,t.target.value),className:"w-full p-2 border rounded ".concat(t?"border-red-300":"border-gray-300")});case"image":return(0,za.jsxs)("div",{className:"space-y-2",children:[(0,za.jsx)("input",{type:"url",value:e.value,onChange:t=>m(e.id,t.target.value),placeholder:e.placeholder,className:"w-full p-2 border rounded ".concat(t?"border-red-300":"border-gray-300")}),e.value&&(0,za.jsx)("img",{src:e.value,alt:e.name,className:"w-20 h-20 object-cover rounded border",onError:e=>{e.target.style.display="none"}})]})}};return(0,za.jsxs)("div",{className:"w-80 bg-white border-l border-gray-200 p-4 overflow-y-auto",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,za.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Veri Ba\u011flama"}),(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)("button",{onClick:async()=>{h(!0);try{const e={};a.forEach(t=>{"product"===t.category?e[t.id]="\xd6rnek \xdcr\xfcn":"brand"===t.category?e[t.id]="\xd6rnek Marka":e[t.id]="\xd6rnek Veri"});const n=await Eb(t,e);if(!n.success)throw new Error(n.error||"Veri olu\u015fturulamad\u0131");{const t=a.map(t=>Ie(Ie({},t),{},{value:e[t.id]||t.value}));i(t),d(e),r(e),Ra.success("\xd6rnek veri olu\u015fturuldu!")}}catch(e){console.error("Error generating mock data:",e);const t={"product-name":"Nike Air Max 270","product-price":1299.99,"product-image":"https://via.placeholder.com/400x400/000000/FFFFFF?text=Nike+Air+Max","brand-name":"Nike","brand-logo":"https://via.placeholder.com/200x100/000000/FFFFFF?text=Nike+Logo","discount-percentage":25,"campaign-end-date":"2024-12-31"},n=a.map(e=>Ie(Ie({},e),{},{value:t[e.id]||e.value}));i(n),d(t),r(t),Ra.success("\xd6rnek veri olu\u015fturuldu!")}finally{h(!1)}},disabled:u,className:"p-2 bg-green-100 text-green-700 rounded hover:bg-green-200 disabled:opacity-50",title:"\xd6rnek Veri Olu\u015ftur",children:u?(0,za.jsx)(tl,{size:16,className:"animate-spin"}):(0,za.jsx)(dc,{size:16})}),(0,za.jsx)("button",{onClick:()=>{const e={};a.forEach(t=>{t.value&&(e[t.id]=t.value)}),d(e),s(e),o(!0)},className:"p-2 bg-blue-100 text-blue-700 rounded hover:bg-blue-200",title:"\xd6nizleme",children:(0,za.jsx)(ti,{size:16})})]})]}),(0,za.jsx)("div",{className:"flex items-center gap-2 mb-4",children:(0,za.jsxs)("button",{onClick:()=>o(!l),className:"flex items-center gap-2 px-3 py-1 rounded text-sm ".concat(l?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:[l?(0,za.jsx)(kb,{size:14}):(0,za.jsx)(Sb,{size:14}),l?"D\xfczenleme Modu":"\xd6nizleme Modu"]})}),(0,za.jsx)("div",{className:"space-y-4",children:a.map(e=>{const t=p(e,e.value);return(0,za.jsxs)("div",{className:"space-y-2",children:[(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsxs)("label",{className:"text-sm font-medium text-gray-700",children:[e.name,e.required&&(0,za.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,za.jsx)("span",{className:"text-xs text-gray-400 font-mono bg-gray-100 px-1 rounded",children:e.placeholder})]}),l?(0,za.jsx)("div",{className:"p-2 bg-gray-50 border rounded",children:e.value?"image"===e.type?(0,za.jsx)("img",{src:e.value,alt:e.name,className:"w-20 h-20 object-cover rounded",onError:e=>{e.target.style.display="none"}}):(0,za.jsx)("span",{className:"text-sm",children:e.value}):(0,za.jsx)("span",{className:"text-sm text-gray-400 italic",children:e.placeholder})}):(0,za.jsxs)(za.Fragment,{children:[g(e),t&&(0,za.jsx)("p",{className:"text-xs text-red-600",children:t})]})]},e.id)})}),(0,za.jsxs)("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[(0,za.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Veri \xd6zeti"}),(0,za.jsxs)("div",{className:"space-y-1",children:[(0,za.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,za.jsx)("span",{children:"Toplam Alan:"}),(0,za.jsx)("span",{children:a.length})]}),(0,za.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,za.jsx)("span",{children:"Doldurulan:"}),(0,za.jsx)("span",{children:a.filter(e=>e.value).length})]}),(0,za.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,za.jsx)("span",{children:"Zorunlu:"}),(0,za.jsx)("span",{children:a.filter(e=>e.required).length})]}),(0,za.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,za.jsx)("span",{children:"Tamamlanan Zorunlu:"}),(0,za.jsx)("span",{children:a.filter(e=>e.required&&e.value).length})]})]})]}),(0,za.jsxs)("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[(0,za.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"H\u0131zl\u0131 \u0130\u015flemler"}),(0,za.jsxs)("div",{className:"space-y-2",children:[(0,za.jsxs)("button",{className:"w-full p-2 text-sm bg-blue-50 text-blue-700 rounded hover:bg-blue-100 transition-colors",children:[(0,za.jsx)(Nb,{size:14,className:"inline mr-1"}),"JSON Olarak D\u0131\u015fa Aktar"]}),(0,za.jsxs)("button",{className:"w-full p-2 text-sm bg-green-50 text-green-700 rounded hover:bg-green-100 transition-colors",children:[(0,za.jsx)(Cb,{size:14,className:"inline mr-1"}),"API Ba\u011flant\u0131s\u0131 Kur"]}),(0,za.jsxs)("button",{className:"w-full p-2 text-sm bg-purple-50 text-purple-700 rounded hover:bg-purple-100 transition-colors",children:[(0,za.jsx)(dc,{size:14,className:"inline mr-1"}),"Veritaban\u0131 \u015eemas\u0131 Olu\u015ftur"]})]})]})]})},Pb=Ua("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]),Db=Ua("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),Ab=e=>{let{templateData:t,previewData:r,onExport:s,onShare:a}=e;const[i,l]=(0,n.useState)("desktop"),[o,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(1),[h,m]=(0,n.useState)(0),p={desktop:{width:720,height:1280},tablet:{width:540,height:960},mobile:{width:360,height:640}}[i];return(0,za.jsxs)("div",{className:"w-80 bg-white border-l border-gray-200 p-4 overflow-y-auto",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,za.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"\xd6nizleme"}),(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)("button",{onClick:()=>s("png"),className:"p-2 bg-green-100 text-green-700 rounded hover:bg-green-200",title:"PNG Olarak \u0130ndir",children:(0,za.jsx)(pl,{size:16})}),(0,za.jsx)("button",{onClick:a,className:"p-2 bg-blue-100 text-blue-700 rounded hover:bg-blue-200",title:"Payla\u015f",children:(0,za.jsx)(my,{size:16})})]})]}),(0,za.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,za.jsx)("button",{onClick:()=>l("desktop"),className:"p-2 rounded ".concat("desktop"===i?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"),title:"Desktop",children:(0,za.jsx)(xi,{size:16})}),(0,za.jsx)("button",{onClick:()=>l("tablet"),className:"p-2 rounded ".concat("tablet"===i?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"),title:"Tablet",children:(0,za.jsx)(Pb,{size:16})}),(0,za.jsx)("button",{onClick:()=>l("mobile"),className:"p-2 rounded ".concat("mobile"===i?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"),title:"Mobile",children:(0,za.jsx)(Db,{size:16})})]}),(0,za.jsx)("div",{className:"mb-4",children:(0,za.jsx)("div",{className:"bg-gray-100 rounded-lg p-4 flex items-center justify-center min-h-[400px]",children:(0,za.jsx)("div",{className:"bg-white border border-gray-300 shadow-lg",style:{width:p.width,height:p.height,transform:"scale(".concat("desktop"===i?.8:"tablet"===i?.6:.4,")"),transformOrigin:"top left"},children:(0,za.jsxs)("div",{className:"relative w-full h-full bg-gradient-to-br from-blue-50 to-purple-50",children:[(0,za.jsx)("div",{className:"bg-white p-4 shadow-sm",children:(0,za.jsxs)("div",{className:"flex items-center justify-between",children:[(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[r["brand-logo"]?(0,za.jsx)("img",{src:r["brand-logo"],alt:"Brand Logo",className:"w-8 h-8 object-contain"}):(0,za.jsx)("div",{className:"w-8 h-8 bg-gray-200 rounded"}),(0,za.jsx)("span",{className:"font-bold text-lg",children:r["brand-name"]||"{{brand.name}}"})]}),(0,za.jsx)("div",{className:"text-sm text-gray-500",children:r["campaign-end-date"]||"{{campaign.endDate}}"})]})}),(0,za.jsxs)("div",{className:"p-6 space-y-4",children:[(0,za.jsx)("div",{className:"text-center",children:r["product-image"]?(0,za.jsx)("img",{src:r["product-image"],alt:"Product",className:"w-48 h-48 object-cover mx-auto rounded-lg shadow-md"}):(0,za.jsx)("div",{className:"w-48 h-48 bg-gray-200 rounded-lg mx-auto flex items-center justify-center",children:(0,za.jsx)("span",{className:"text-gray-400",children:"\xdcr\xfcn G\xf6rseli"})})}),(0,za.jsxs)("div",{className:"text-center space-y-2",children:[(0,za.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:r["product-name"]||"{{product.name}}"}),(0,za.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,za.jsxs)("span",{className:"text-3xl font-bold text-green-600",children:["\u20ba",r["product-price"]||"{{product.price}}"]}),r["discount-percentage"]&&(0,za.jsxs)("span",{className:"bg-red-500 text-white px-2 py-1 rounded text-sm",children:["%",r["discount-percentage"]," \u0130ndirim"]})]})]}),(0,za.jsx)("div",{className:"text-center",children:(0,za.jsx)("button",{className:"bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Hemen Sat\u0131n Al"})})]}),(0,za.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gray-100 p-4 text-center text-sm text-gray-600",children:(0,za.jsx)("p",{children:"Kampanya s\xfcresi dolduktan sonra ge\xe7ersizdir."})})]})})})}),(0,za.jsxs)("div",{className:"border-t border-gray-200 pt-4 mb-4",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,za.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Animasyon"}),(0,za.jsx)("button",{onClick:()=>{c(!o)},className:"p-1 rounded ".concat(o?"bg-red-100 text-red-700":"bg-green-100 text-green-700"),children:o?(0,za.jsx)(kb,{size:14}):(0,za.jsx)(Sb,{size:14})})]}),(0,za.jsxs)("div",{className:"space-y-2",children:[(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)("span",{className:"text-xs text-gray-600",children:"H\u0131z:"}),(0,za.jsx)("input",{type:"range",min:"0.5",max:"3",step:"0.5",value:d,onChange:e=>u(parseFloat(e.target.value)),className:"flex-1"}),(0,za.jsxs)("span",{className:"text-xs text-gray-600",children:[d,"x"]})]}),(0,za.jsx)("div",{className:"space-y-1",children:[{id:1,name:"Ba\u015flang\u0131\xe7",duration:1e3},{id:2,name:"\xdcr\xfcn Giri\u015fi",duration:1500},{id:3,name:"Fiyat Animasyonu",duration:1e3},{id:4,name:"Marka Logosu",duration:800},{id:5,name:"Son",duration:1e3}].map((e,t)=>(0,za.jsx)("button",{onClick:()=>{m(t)},className:"w-full p-2 text-left text-xs rounded ".concat(h===t?"bg-blue-100 text-blue-700":"bg-gray-50 text-gray-600 hover:bg-gray-100"),children:(0,za.jsxs)("div",{className:"flex items-center justify-between",children:[(0,za.jsx)("span",{children:e.name}),(0,za.jsxs)("span",{children:[e.duration,"ms"]})]})},e.id))})]})]}),(0,za.jsxs)("div",{className:"border-t border-gray-200 pt-4 mb-4",children:[(0,za.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"D\u0131\u015fa Aktar"}),(0,za.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,za.jsx)("button",{onClick:()=>s("png"),className:"p-2 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"PNG"}),(0,za.jsx)("button",{onClick:()=>s("jpg"),className:"p-2 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"JPG"}),(0,za.jsx)("button",{onClick:()=>s("pdf"),className:"p-2 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"PDF"})]})]}),(0,za.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,za.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"\xd6nizleme Bilgileri"}),(0,za.jsxs)("div",{className:"space-y-1 text-xs text-gray-600",children:[(0,za.jsxs)("div",{className:"flex justify-between",children:[(0,za.jsx)("span",{children:"Boyut:"}),(0,za.jsxs)("span",{children:[p.width,"x",p.height]})]}),(0,za.jsxs)("div",{className:"flex justify-between",children:[(0,za.jsx)("span",{children:"Cihaz:"}),(0,za.jsx)("span",{className:"capitalize",children:i})]}),(0,za.jsxs)("div",{className:"flex justify-between",children:[(0,za.jsx)("span",{children:"Animasyon:"}),(0,za.jsx)("span",{children:o?"Aktif":"Pasif"})]}),(0,za.jsxs)("div",{className:"flex justify-between",children:[(0,za.jsx)("span",{children:"Veri Alanlar\u0131:"}),(0,za.jsx)("span",{children:Object.keys(r).length})]})]})]}),(0,za.jsxs)("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[(0,za.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"H\u0131zl\u0131 \u0130\u015flemler"}),(0,za.jsxs)("div",{className:"space-y-2",children:[(0,za.jsxs)("button",{className:"w-full p-2 text-sm bg-blue-50 text-blue-700 rounded hover:bg-blue-100 transition-colors",children:[(0,za.jsx)(ti,{size:14,className:"inline mr-1"}),"Canl\u0131 \xd6nizleme"]}),(0,za.jsxs)("button",{className:"w-full p-2 text-sm bg-green-50 text-green-700 rounded hover:bg-green-100 transition-colors",children:[(0,za.jsx)(my,{size:14,className:"inline mr-1"}),"Payla\u015f\u0131labilir Link Olu\u015ftur"]}),(0,za.jsxs)("button",{className:"w-full p-2 text-sm bg-purple-50 text-purple-700 rounded hover:bg-purple-100 transition-colors",children:[(0,za.jsx)(zy,{size:14,className:"inline mr-1"}),"Animasyonu S\u0131f\u0131rla"]})]})]})]})},Mb=Ua("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Rb=Ua("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),zb=Ua("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),Fb=e=>{let{onClose:t}=e;const[r,s]=(0,n.useState)("getting-started"),[a,i]=(0,n.useState)(0),l=[{id:"getting-started",title:"Ba\u015flang\u0131\xe7",icon:Sb,color:"bg-green-100 text-green-700",steps:[{title:"\u015eablon Olu\u015fturmaya Ba\u015flay\u0131n",description:'Sol panelden "Kategoriler" sekmesine t\u0131klay\u0131n ve bir kategori se\xe7in.',details:["E-ticaret, Moda, Yemek gibi 15+ kategori mevcut","Her kategorinin alt kategorileri var","Kategori se\xe7imi \u015fablonunuzun temelini olu\u015fturur"]},{title:"Dinamik Alanlar Ekleyin",description:'"Alanlar" sekmesinden placeholder\'lar ekleyin.',details:["\xdcr\xfcn bilgileri: {{product.name}}, {{product.price}}","Marka bilgileri: {{brand.name}}, {{brand.logo}}","\u0130leti\u015fim bilgileri: {{contact.phone}}, {{contact.email}}","\xd6zel alanlar olu\u015fturabilirsiniz"]},{title:"Tasar\u0131m Yap\u0131n",description:"Canvas \xfczerinde \u015fablonunuzu tasarlay\u0131n.",details:["Metin, \u015fekil, g\xf6rsel ekleyin","Renkler, fontlar, boyutlar ayarlay\u0131n","Katmanlar\u0131 d\xfczenleyin","AI ile otomatik tasar\u0131m olu\u015fturun"]}]},{id:"dynamic-fields",title:"Dinamik Alanlar",icon:Mb,color:"bg-blue-100 text-blue-700",steps:[{title:"Placeholder Sistemi",description:"Dinamik alanlar \u015fablonunuzun de\u011fi\u015fken k\u0131s\u0131mlar\u0131n\u0131 temsil eder.",details:["{{product.name}} - \xdcr\xfcn ad\u0131","{{product.price}} - \xdcr\xfcn fiyat\u0131","{{brand.logo}} - Marka logosu","{{contact.phone}} - \u0130leti\u015fim telefonu"]},{title:"Alan Kategorileri",description:"Alanlar kategorilere ayr\u0131lm\u0131\u015ft\u0131r.",details:["\xdcr\xfcn: \xdcr\xfcnle ilgili t\xfcm bilgiler","Marka: Marka bilgileri ve logolar","\u0130leti\u015fim: Telefon, email, adres","Genel: Tarih, kullan\u0131c\u0131 ad\u0131 vb."]},{title:"Validasyon Kurallar\u0131",description:"Her alan i\xe7in do\u011frulama kurallar\u0131 belirleyebilirsiniz.",details:["Zorunlu alanlar i\u015faretlenebilir","Minimum/maksimum de\u011ferler","Format kontrol\xfc (email, telefon)","Hata mesajlar\u0131 \xf6zelle\u015ftirilebilir"]}]},{id:"brand-assignment",title:"Marka Atamas\u0131",icon:ci,color:"bg-purple-100 text-purple-700",steps:[{title:"Marka Se\xe7imi",description:'"Markalar" sekmesinden \u015fablonunuzu atayaca\u011f\u0131n\u0131z markalar\u0131 se\xe7in.',details:["Marka listesini g\xf6r\xfcnt\xfcleyin","Kategoriye g\xf6re filtreleyin","Arama yap\u0131n","\xc7oklu se\xe7im yap\u0131n"]},{title:"Atama \u0130\u015flemi",description:"Se\xe7ili markalara \u015fablonunuzu atay\u0131n.",details:["Markalar \u015fablonu kullanabilir","Kendi verilerini girebilir","Otomatik i\xe7erik \xfcretebilir","\u0130statistikleri takip edebilir"]},{title:"Yetki Y\xf6netimi",description:"Hangi markalar\u0131n \u015fablonu g\xf6rebilece\u011fini kontrol edin.",details:["Genel: T\xfcm markalar g\xf6rebilir","\xd6zel: Sadece atanan markalar","Marka \xd6zel: Sadece belirli markalar","Admin kontrol\xfc"]}]},{id:"data-binding",title:"Veri Ba\u011flama",icon:Rb,color:"bg-yellow-100 text-yellow-700",steps:[{title:"Veri Giri\u015fi",description:'"Veri" sekmesinden placeholder\'lar\u0131 ger\xe7ek verilerle doldurun.',details:["Her alan i\xe7in de\u011fer girin","G\xf6rsel URL'leri ekleyin","Tarih formatlar\u0131n\u0131 kontrol edin","Validasyon kurallar\u0131na uyun"]},{title:"\xd6rnek Veri Olu\u015fturma",description:"Otomatik \xf6rnek veri olu\u015fturun.",details:["API'den ger\xe7ek veri \xe7ekin","Mock data olu\u015fturun","Kategorilere g\xf6re veri \xfcretin","H\u0131zl\u0131 test yap\u0131n"]},{title:"\xd6nizleme",description:"Verilerle \u015fablonunuzun nas\u0131l g\xf6r\xfcnece\u011fini kontrol edin.",details:["Ger\xe7ek zamanl\u0131 \xf6nizleme","Farkl\u0131 cihaz boyutlar\u0131","Animasyon kontrolleri","Export se\xe7enekleri"]}]},{id:"design-tools",title:"Tasar\u0131m Ara\xe7lar\u0131",icon:hy,color:"bg-pink-100 text-pink-700",steps:[{title:"Temel Ara\xe7lar",description:"Canvas \xfczerinde tasar\u0131m yapmak i\xe7in kullanabilece\u011finiz ara\xe7lar.",details:["Metin: Ba\u015fl\u0131k, a\xe7\u0131klama, etiket","\u015eekiller: Dikd\xf6rtgen, daire, \xfc\xe7gen, y\u0131ld\u0131z","G\xf6rseller: Logo, foto\u011fraf, ikon","\xc7izgiler: Ay\u0131r\u0131c\u0131, dekoratif"]},{title:"Geli\u015fmi\u015f \xd6zellikler",description:"Profesyonel tasar\u0131m i\xe7in geli\u015fmi\u015f \xf6zellikler.",details:["G\xf6lge efektleri","K\xf6\u015fe yumu\u015fatma","Gradyan renkler","\u015eeffafl\u0131k ayarlar\u0131","D\xf6nd\xfcrme ve \xf6l\xe7ekleme"]},{title:"AI Tasar\u0131m",description:"Yapay zeka ile otomatik tasar\u0131m olu\u015fturun.",details:["Prompt yazarak tasar\u0131m isteyin","Stil se\xe7enekleri","Otomatik d\xfczen","Renk uyumu","Tipografi \xf6nerileri"]}]},{id:"export-share",title:"D\u0131\u015fa Aktarma & Payla\u015f\u0131m",icon:pl,color:"bg-indigo-100 text-indigo-700",steps:[{title:"Export Formatlar\u0131",description:"\u015eablonunuzu farkl\u0131 formatlarda d\u0131\u015fa aktar\u0131n.",details:["PNG: Y\xfcksek kalite g\xf6rsel","JPG: S\u0131k\u0131\u015ft\u0131r\u0131lm\u0131\u015f g\xf6rsel","PDF: Vekt\xf6r tabanl\u0131","JSON: \u015eablon verisi"]},{title:"Payla\u015f\u0131m Se\xe7enekleri",description:"\u015eablonunuzu ba\u015fkalar\u0131yla payla\u015f\u0131n.",details:["Payla\u015f\u0131labilir link","Email ile g\xf6nderim","Sosyal medya payla\u015f\u0131m\u0131","QR kod olu\u015fturma"]},{title:"\u015eablon Galerisi",description:"Haz\u0131r \u015fablonlar\u0131 ke\u015ffedin ve kullan\u0131n.",details:["Kategori bazl\u0131 \u015fablonlar","Pop\xfcler \u015fablonlar","Yeni \u015fablonlar","Favori \u015fablonlar"]}]}],o=l.find(e=>e.id===r),c=null===o||void 0===o?void 0:o.steps[a];return(0,za.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,za.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-6xl h-[90vh] flex overflow-hidden",children:[(0,za.jsxs)("div",{className:"w-80 bg-gray-50 border-r border-gray-200 p-4 overflow-y-auto",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,za.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Kullan\u0131m K\u0131lavuzu"}),(0,za.jsx)("button",{onClick:t,className:"p-2 hover:bg-gray-200 rounded-full",children:"\u2715"})]}),(0,za.jsx)("div",{className:"space-y-2",children:l.map(e=>(0,za.jsx)("button",{onClick:()=>{s(e.id),i(0)},className:"w-full p-3 rounded-lg text-left transition-colors ".concat(r===e.id?"bg-white shadow-sm border border-gray-200":"hover:bg-gray-100"),children:(0,za.jsxs)("div",{className:"flex items-center gap-3",children:[(0,za.jsx)("div",{className:"p-2 rounded-lg ".concat(e.color),children:(0,za.jsx)(e.icon,{size:16})}),(0,za.jsx)("span",{className:"font-medium text-gray-900",children:e.title})]})},e.id))}),(0,za.jsxs)("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg",children:[(0,za.jsxs)("h3",{className:"font-semibold text-blue-900 mb-2 flex items-center gap-2",children:[(0,za.jsx)(zb,{size:16}),"H\u0131zl\u0131 \u0130pu\xe7lar\u0131"]}),(0,za.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,za.jsx)("li",{children:"\u2022 Ctrl+Z ile geri al\u0131n"}),(0,za.jsx)("li",{children:"\u2022 Shift+Click ile \xe7oklu se\xe7im"}),(0,za.jsx)("li",{children:"\u2022 Space+Click ile pan yap\u0131n"}),(0,za.jsx)("li",{children:"\u2022 Ctrl+S ile otomatik kaydedin"})]})]})]}),(0,za.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,za.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,za.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,za.jsx)("div",{className:"p-2 rounded-lg ".concat(null===o||void 0===o?void 0:o.color),children:o&&(0,za.jsx)(o.icon,{size:20})}),(0,za.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:null===o||void 0===o?void 0:o.title})]}),(0,za.jsx)("p",{className:"text-gray-600",children:"Ad\u0131m ad\u0131m rehber ile \u015fablon olu\u015fturmay\u0131 \xf6\u011frenin"})]}),(0,za.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,za.jsx)("div",{className:"flex items-center gap-2",children:null===o||void 0===o?void 0:o.steps.map((e,t)=>(0,za.jsx)("button",{onClick:()=>i(t),className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ".concat(a===t?"bg-blue-600 text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"),children:t+1},t))})}),(0,za.jsx)("div",{className:"flex-1 p-6 overflow-y-auto",children:c&&(0,za.jsxs)("div",{className:"max-w-4xl",children:[(0,za.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:c.title}),(0,za.jsx)("p",{className:"text-lg text-gray-700 mb-6",children:c.description}),(0,za.jsx)("div",{className:"space-y-4",children:c.details.map((e,t)=>(0,za.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[(0,za.jsx)("div",{className:"w-6 h-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-sm font-medium flex-shrink-0",children:t+1}),(0,za.jsx)("p",{className:"text-gray-700",children:e})]},t))}),(0,za.jsxs)("div",{className:"flex items-center justify-between mt-8",children:[(0,za.jsxs)("button",{onClick:()=>i(Math.max(0,a-1)),disabled:0===a,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,za.jsx)(Bo,{size:16,className:"rotate-180"}),"\xd6nceki"]}),(0,za.jsxs)("div",{className:"text-sm text-gray-500",children:[a+1," / ",null===o||void 0===o?void 0:o.steps.length]}),(0,za.jsxs)("button",{onClick:()=>i(Math.min(((null===o||void 0===o?void 0:o.steps.length)||1)-1,a+1)),disabled:a===((null===o||void 0===o?void 0:o.steps.length)||1)-1,className:"flex items-center gap-2 px-4 py-2 text-gray-600 hover:text-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",children:["Sonraki",(0,za.jsx)(Bo,{size:16})]})]})]})})]})]})})},Lb=e=>{let{onToolSelect:t,onColorChange:r,onGradientChange:s,onFilterApply:a,onTransform:i,onEffectApply:l}=e;const[o,c]=(0,n.useState)("colors"),d=[{name:"Rectangle",icon:jy,value:"rectangle"},{name:"Circle",icon:wy,value:"circle"},{name:"Star",icon:ky,value:"star"},{name:"Heart",icon:Sy,value:"heart"},{name:"Triangle",icon:jy,value:"triangle"},{name:"Diamond",icon:jy,value:"diamond"},{name:"Hexagon",icon:jy,value:"hexagon"}],u=[{id:"colors",name:"Renkler",icon:hy},{id:"effects",name:"Efektler",icon:Wy},{id:"transforms",name:"D\xf6n\xfc\u015f\xfcmler",icon:zy},{id:"shapes",name:"\u015eekiller",icon:jy},{id:"text",name:"Metin",icon:vy}];return(0,za.jsxs)("div",{className:"w-80 bg-white border-l border-gray-200 p-4 overflow-y-auto",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,za.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Geli\u015fmi\u015f Ara\xe7lar"}),(0,za.jsx)("button",{className:"p-2 hover:bg-gray-100 rounded",children:(0,za.jsx)(hc,{size:16})})]}),(0,za.jsx)("div",{className:"flex flex-wrap gap-1 mb-4",children:u.map(e=>(0,za.jsxs)("button",{onClick:()=>c(e.id),className:"flex items-center gap-1 px-2 py-1 rounded text-xs font-medium ".concat(o===e.id?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[(0,za.jsx)(e.icon,{size:12}),e.name]},e.id))}),"colors"===o&&(0,za.jsxs)("div",{className:"space-y-4",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Renk Paletleri"}),(0,za.jsx)("div",{className:"space-y-2",children:[{name:"Modern",colors:["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7"]},{name:"Vintage",colors:["#D4A574","#8B4513","#CD853F","#DEB887","#F5DEB3"]},{name:"Neon",colors:["#FF0080","#00FFFF","#FFFF00","#FF00FF","#00FF00"]},{name:"Pastel",colors:["#FFB3BA","#FFDFBA","#FFFFBA","#BAFFC9","#BAE1FF"]},{name:"Monochrome",colors:["#000000","#333333","#666666","#999999","#CCCCCC"]}].map(e=>(0,za.jsxs)("div",{className:"space-y-1",children:[(0,za.jsx)("div",{className:"text-xs text-gray-600",children:e.name}),(0,za.jsx)("div",{className:"flex gap-1",children:e.colors.map((e,t)=>(0,za.jsx)("button",{onClick:()=>r(e),className:"w-8 h-8 rounded border-2 border-gray-200 hover:border-gray-400",style:{backgroundColor:e},title:e},t))})]},e.name))})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Gradyanlar"}),(0,za.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[{name:"Sunset",value:"linear-gradient(45deg, #FF6B6B, #4ECDC4)"},{name:"Ocean",value:"linear-gradient(45deg, #667eea, #764ba2)"},{name:"Forest",value:"linear-gradient(45deg, #134e5e, #71b280)"},{name:"Fire",value:"linear-gradient(45deg, #ff9a9e, #fecfef)"},{name:"Purple",value:"linear-gradient(45deg, #a8edea, #fed6e3)"}].map(e=>(0,za.jsx)("button",{onClick:()=>s(e.value),className:"h-12 rounded border border-gray-200 hover:border-gray-400 relative overflow-hidden",style:{background:e.value},title:e.name,children:(0,za.jsx)("span",{className:"absolute inset-0 bg-black bg-opacity-20 flex items-center justify-center text-xs text-white font-medium",children:e.name})},e.name))})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"\xd6zel Renk"}),(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)("input",{type:"color",onChange:e=>r(e.target.value),className:"w-12 h-8 border border-gray-300 rounded cursor-pointer"}),(0,za.jsx)("input",{type:"text",placeholder:"#000000",className:"flex-1 p-2 border border-gray-300 rounded text-sm",onChange:e=>r(e.target.value)})]})]})]}),"effects"===o&&(0,za.jsxs)("div",{className:"space-y-4",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"G\xf6rsel Efektler"}),(0,za.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[{name:"Blur",value:"blur(5px)"},{name:"Brightness",value:"brightness(1.2)"},{name:"Contrast",value:"contrast(1.5)"},{name:"Saturate",value:"saturate(2)"},{name:"Sepia",value:"sepia(1)"},{name:"Grayscale",value:"grayscale(1)"},{name:"Invert",value:"invert(1)"}].map(e=>(0,za.jsx)("button",{onClick:()=>a(e.value),className:"p-2 text-sm bg-gray-100 hover:bg-gray-200 rounded border border-gray-200",children:e.name},e.name))})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"\xd6zel Efektler"}),(0,za.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[{name:"Shadow",value:"shadow"},{name:"Glow",value:"glow"},{name:"Outline",value:"outline"},{name:"Emboss",value:"emboss"},{name:"Bevel",value:"bevel"},{name:"Gradient Text",value:"gradient-text"},{name:"3D Effect",value:"3d"}].map(e=>(0,za.jsx)("button",{onClick:()=>l(e.value),className:"p-2 text-sm bg-purple-100 hover:bg-purple-200 text-purple-700 rounded border border-purple-200",children:e.name},e.name))})]})]}),"transforms"===o&&(0,za.jsxs)("div",{className:"space-y-4",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"D\xf6n\xfc\u015f\xfcmler"}),(0,za.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[{name:"Rotate 90\xb0",value:"rotate-90"},{name:"Rotate 180\xb0",value:"rotate-180"},{name:"Rotate 270\xb0",value:"rotate-270"},{name:"Flip Horizontal",value:"flip-h"},{name:"Flip Vertical",value:"flip-v"},{name:"Scale 50%",value:"scale-50"},{name:"Scale 150%",value:"scale-150"},{name:"Scale 200%",value:"scale-200"}].map(e=>(0,za.jsx)("button",{onClick:()=>i(e.value),className:"p-2 text-sm bg-blue-100 hover:bg-blue-200 text-blue-700 rounded border border-blue-200",children:e.name},e.name))})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"H\u0131zl\u0131 \u0130\u015flemler"}),(0,za.jsxs)("div",{className:"space-y-2",children:[(0,za.jsx)("button",{onClick:()=>t("align-center"),className:"w-full p-2 text-sm bg-green-100 hover:bg-green-200 text-green-700 rounded border border-green-200",children:"Ortala"}),(0,za.jsx)("button",{onClick:()=>t("distribute"),className:"w-full p-2 text-sm bg-green-100 hover:bg-green-200 text-green-700 rounded border border-green-200",children:"E\u015fit Da\u011f\u0131t"}),(0,za.jsx)("button",{onClick:()=>t("group"),className:"w-full p-2 text-sm bg-green-100 hover:bg-green-200 text-green-700 rounded border border-green-200",children:"Grupla"})]})]})]}),"shapes"===o&&(0,za.jsxs)("div",{className:"space-y-4",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"\u015eekiller"}),(0,za.jsx)("div",{className:"grid grid-cols-2 gap-2",children:d.map(e=>(0,za.jsxs)("button",{onClick:()=>t(e.value),className:"p-3 flex flex-col items-center gap-1 bg-gray-100 hover:bg-gray-200 rounded border border-gray-200",children:[(0,za.jsx)(e.icon,{size:20,className:"text-gray-600"}),(0,za.jsx)("span",{className:"text-xs text-gray-700",children:e.name})]},e.name))})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"\u015eekil \xd6zellikleri"}),(0,za.jsxs)("div",{className:"space-y-2",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Kenar Kal\u0131nl\u0131\u011f\u0131"}),(0,za.jsx)("input",{type:"range",min:"0",max:"10",defaultValue:"2",className:"w-full"})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"K\xf6\u015fe Yuvarlakl\u0131\u011f\u0131"}),(0,za.jsx)("input",{type:"range",min:"0",max:"50",defaultValue:"0",className:"w-full"})]})]})]})]}),"text"===o&&(0,za.jsxs)("div",{className:"space-y-4",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Metin Efektleri"}),(0,za.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[{name:"Bold",value:"bold"},{name:"Italic",value:"italic"},{name:"Underline",value:"underline"},{name:"Strikethrough",value:"strikethrough"},{name:"Uppercase",value:"uppercase"},{name:"Lowercase",value:"lowercase"},{name:"Capitalize",value:"capitalize"}].map(e=>(0,za.jsx)("button",{onClick:()=>l(e.value),className:"p-2 text-sm bg-orange-100 hover:bg-orange-200 text-orange-700 rounded border border-orange-200",children:e.name},e.name))})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Font Aileleri"}),(0,za.jsxs)("select",{className:"w-full p-2 border border-gray-300 rounded text-sm",children:[(0,za.jsx)("option",{children:"Arial"}),(0,za.jsx)("option",{children:"Helvetica"}),(0,za.jsx)("option",{children:"Times New Roman"}),(0,za.jsx)("option",{children:"Georgia"}),(0,za.jsx)("option",{children:"Verdana"}),(0,za.jsx)("option",{children:"Comic Sans MS"}),(0,za.jsx)("option",{children:"Impact"}),(0,za.jsx)("option",{children:"Trebuchet MS"})]})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Metin Stilleri"}),(0,za.jsxs)("div",{className:"space-y-2",children:[(0,za.jsx)("button",{className:"w-full p-2 text-sm bg-gray-100 hover:bg-gray-200 rounded border border-gray-200 text-left",children:"Ba\u015fl\u0131k 1"}),(0,za.jsx)("button",{className:"w-full p-2 text-sm bg-gray-100 hover:bg-gray-200 rounded border border-gray-200 text-left",children:"Ba\u015fl\u0131k 2"}),(0,za.jsx)("button",{className:"w-full p-2 text-sm bg-gray-100 hover:bg-gray-200 rounded border border-gray-200 text-left",children:"Normal Metin"}),(0,za.jsx)("button",{className:"w-full p-2 text-sm bg-gray-100 hover:bg-gray-200 rounded border border-gray-200 text-left",children:"K\xfc\xe7\xfck Metin"})]})]})]}),(0,za.jsxs)("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[(0,za.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"H\u0131zl\u0131 \u0130\u015flemler"}),(0,za.jsxs)("div",{className:"space-y-2",children:[(0,za.jsxs)("button",{className:"w-full p-2 text-sm bg-blue-50 text-blue-700 rounded hover:bg-blue-100 transition-colors",children:[(0,za.jsx)(Rb,{size:14,className:"inline mr-1"}),"Otomatik D\xfczen"]}),(0,za.jsxs)("button",{className:"w-full p-2 text-sm bg-green-50 text-green-700 rounded hover:bg-green-100 transition-colors",children:[(0,za.jsx)(pl,{size:14,className:"inline mr-1"}),"Stil Kaydet"]}),(0,za.jsxs)("button",{className:"w-full p-2 text-sm bg-purple-50 text-purple-700 rounded hover:bg-purple-100 transition-colors",children:[(0,za.jsx)(vc,{size:14,className:"inline mr-1"}),"Stil Y\xfckle"]})]})]})]})};const Ib=new class{constructor(){this.baseUrl="https://api.huggingface.co/models",this.fallbackUrl="https://api.openai.com/v1"}async generateTemplate(e){try{return{success:!0,template:await this.generateLocalTemplate(e)}}catch(t){return console.error("AI Template generation error:",t),{success:!1,error:"AI servisi \u015fu anda kullan\u0131lam\u0131yor. L\xfctfen daha sonra tekrar deneyin."}}}async tryHuggingFace(e){try{const t="stabilityai/stable-diffusion-xl-base-1.0",r=await fetch("".concat(this.baseUrl,"/").concat(t),{method:"POST",headers:{Authorization:"Bearer ".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_HUGGINGFACE_TOKEN||"demo"),"Content-Type":"application/json"},body:JSON.stringify({inputs:this.buildPrompt(e.prompt,e.style),parameters:{num_inference_steps:20,guidance_scale:7.5,width:720,height:1280}})});if(!r.ok)throw new Error("Hugging Face API error");const n=await r.blob(),s=URL.createObjectURL(n);return{success:!0,template:await this.createTemplateFromImage(s,e)}}catch(t){return console.log("Hugging Face failed, trying fallback..."),{success:!1}}}async tryFallback(e){try{return{success:!0,template:await this.generateLocalTemplate(e)}}catch(t){return{success:!1,error:"AI servisi \u015fu anda kullan\u0131lam\u0131yor."}}}buildPrompt(e,t){const r={modern:"modern, clean, minimalist design, contemporary",vintage:"vintage, retro, classic, nostalgic design",minimalist:"minimalist, simple, clean, white space",corporate:"professional, corporate, business, formal",creative:"creative, artistic, colorful, innovative",social:"social media, Instagram, Facebook, trendy"}[t]||"modern";return"".concat(e,", ").concat(r,", high quality, professional design, template layout")}async createTemplateFromImage(e,t){return new Promise(r=>{const n=new Image;n.crossOrigin="anonymous",n.onload=()=>{const n={name:"AI Generated - ".concat(t.style),canvas_data:{version:"6.0.0",objects:[{type:"image",left:0,top:0,width:720,height:1280,src:e,selectable:!1,evented:!1}],background:"#ffffff"},created_by:"AI",style:t.style,prompt:t.prompt};r(n)},n.src=e})}async generateLocalTemplate(e){const t=this.getTemplatePatterns(e.style),r=t[Math.floor(Math.random()*t.length)],n=this.customizeTemplate(r,e.prompt);return{name:"AI Generated - ".concat(e.style),canvas_data:n,created_by:"AI",style:e.style,prompt:e.prompt}}getTemplatePatterns(e){const t={modern:[{version:"6.0.0",objects:[{type:"rect",left:50,top:50,width:620,height:200,fill:"#f8fafc",stroke:"#e2e8f0",strokeWidth:2,rx:10,ry:10},{type:"text",left:100,top:120,text:"BA\u015eLIK",fontSize:48,fontFamily:"Arial",fontWeight:"bold",fill:"#1e293b"},{type:"text",left:100,top:180,text:"Alt ba\u015fl\u0131k metni",fontSize:24,fontFamily:"Arial",fill:"#64748b"}],background:"#ffffff"}],vintage:[{version:"6.0.0",objects:[{type:"rect",left:0,top:0,width:720,height:1280,fill:"#fef3c7",stroke:"#d97706",strokeWidth:4},{type:"text",left:100,top:200,text:"VINTAGE",fontSize:64,fontFamily:"serif",fontWeight:"bold",fill:"#92400e"}],background:"#fef3c7"}],corporate:[{version:"6.0.0",objects:[{type:"rect",left:0,top:0,width:720,height:100,fill:"#1e40af",stroke:"none"},{type:"text",left:50,top:50,text:"KURUMSAL BA\u015eLIK",fontSize:32,fontFamily:"Arial",fontWeight:"bold",fill:"#ffffff"}],background:"#ffffff"}]};return t[e]||t.modern}customizeTemplate(e,t){const r=JSON.parse(JSON.stringify(e)),n=this.extractKeywords(t),s=r.objects.find(e=>"text"===e.type&&e.fontSize>30);return s&&n.title&&(s.text=n.title),n.colors&&r.objects.forEach(e=>{e.fill&&"#ffffff"!==e.fill&&(e.fill=n.colors[0]||e.fill)}),r}extractKeywords(e){const t={},r=e.match(/(?:i\xe7in|kart\u0131|tasar\u0131m\u0131|\u015fablonu)\s+([^,\.]+)/i);r&&(t.title=r[1].trim().toUpperCase());const n=["mavi","k\u0131rm\u0131z\u0131","ye\u015fil","sar\u0131","mor","pembe","siyah","beyaz"].filter(t=>e.toLowerCase().includes(t));return n.length>0&&(t.colors=n),t}},Bb=e=>{let{initialTemplate:t,onSave:r,onClose:s}=e;const[a,i]=(0,n.useState)(null),[l,o]=(0,n.useState)(null),[c,d]=(0,n.useState)([]),[u,h]=(0,n.useState)("select"),[m,p]=(0,n.useState)(1),[g,f]=(0,n.useState)("#000000"),[x,y]=(0,n.useState)("#3B82F6"),[b,v]=(0,n.useState)("#000000"),[j,w]=(0,n.useState)(2),[_,k]=(0,n.useState)(24),[S,N]=(0,n.useState)("Arial"),[C,T]=(0,n.useState)(1),[E,O]=(0,n.useState)(0),[P,D]=(0,n.useState)(1),[A,M]=(0,n.useState)(1),[R,z]=(0,n.useState)("#000000"),[F,L]=(0,n.useState)(0),[I,B]=(0,n.useState)(0),[H,U]=(0,n.useState)(0),[W,K]=(0,n.useState)(0),[V,Y]=(0,n.useState)("Yeni \u015eablon"),[G,q]=(0,n.useState)([]),[X,$]=(0,n.useState)(-1),[J,Q]=(0,n.useState)(!1),[Z,ee]=(0,n.useState)(!1),[te,re]=(0,n.useState)(!1),[ne,se]=(0,n.useState)("layers"),[ae,ie]=(0,n.useState)("ecommerce"),[le,oe]=(0,n.useState)(""),[ce,de]=(0,n.useState)([]),[ue,he]=(0,n.useState)([]),[me,pe]=(0,n.useState)({}),[ge,fe]=(0,n.useState)("template-".concat(Date.now())),xe=(0,n.useRef)(void 0),ye=(0,n.useCallback)(e=>{i(e),be(e)},[]),be=(0,n.useCallback)(e=>{const t=JSON.stringify(e.toJSON());q(e=>{const r=e.slice(0,X+1);return r.push(t),r.slice(-50)}),$(e=>e+1)},[X]),ve=(0,n.useCallback)(e=>{const t=e.getObjects().map((e,t)=>({id:e.id||"layer-".concat(t),name:e.name||"".concat(e.type," ").concat(t+1),type:e.type||"unknown",visible:!1!==e.visible,locked:!1===e.selectable,opacity:e.opacity||1,order:t}));d(t)},[]),je=(0,n.useCallback)(e=>{o(e),e&&(f(e.fill||"#000000"),y(e.fill||"#3B82F6"),v(e.stroke||"#000000"),w(e.strokeWidth||2),k(e.fontSize||24),N(e.fontFamily||"Arial"),T(e.opacity||1),O(e.angle||0),D(e.scaleX||1),M(e.scaleY||1))},[]),we=(0,n.useCallback)(()=>{o(null)},[]),_e=(0,n.useCallback)(()=>{a&&(ve(a),be(a))},[a,ve,be]),ke=(0,n.useCallback)(()=>{a&&(ve(a),be(a))},[a,ve,be]),Se=(0,n.useCallback)(()=>{a&&(ve(a),be(a))},[a,ve,be]),Ne=(0,n.useCallback)(()=>{if(!a)return;const e={name:V,canvas_data:a.toJSON(),created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};null===r||void 0===r||r(e),Ra.success("\u015eablon kaydedildi!")},[a,V,r]),Ce=(0,n.useCallback)(()=>{if(!a)return;const e=a.toDataURL({format:"png",quality:1,multiplier:2}),t=document.createElement("a");t.download="".concat(V,".png"),t.href=e,t.click(),Ra.success("\u015eablon d\u0131\u015fa aktar\u0131ld\u0131!")},[a,V]),Te=(0,n.useCallback)(()=>{if(X>0&&a){const e=X-1;$(e),a.loadFromJSON(G[e],()=>{a.renderAll(),ve(a)})}},[X,G,a,ve]),Ee=(0,n.useCallback)(()=>{if(X<G.length-1&&a){const e=X+1;$(e),a.loadFromJSON(G[e],()=>{a.renderAll(),ve(a)})}},[X,G,a,ve]),Oe=(0,n.useCallback)(()=>{p(e=>Math.min(1.2*e,5))},[]),Pe=(0,n.useCallback)(()=>{p(e=>Math.max(e/1.2,.1))},[]),De=(0,n.useCallback)(()=>{a&&l&&(a.remove(l),a.renderAll(),o(null))},[a,l]),Ae=(0,n.useCallback)(async()=>{if(a&&l)try{const e=await l.clone();e.set({left:(l.left||0)+20,top:(l.top||0)+20}),a.add(e),a.setActiveObject(e),a.renderAll()}catch(e){console.error("Copy error:",e)}},[a,l]),Me=(0,n.useCallback)(()=>{Q(!0)},[]),Re=(0,n.useCallback)(async(e,t)=>{ee(!0),Q(!1);try{const r=await Ib.generateTemplate({prompt:e,style:t});r.success&&r.template&&a?a.loadFromJSON(r.template.canvas_data,()=>{a.renderAll(),ve(a),Y(r.template.name),Ra.success("AI \u015fablonu ba\u015far\u0131yla olu\u015fturuldu!")}):Ra.error(r.error||"AI \u015fablonu olu\u015fturulamad\u0131")}catch(r){console.error("AI generation error:",r),Ra.error("AI servisi hatas\u0131")}finally{ee(!1)}},[a,ve]),ze=(0,n.useCallback)((e,t)=>{l&&a&&(l[e]=t,a.renderAll())},[l,a]),Fe=(0,n.useCallback)((e,t)=>{l&&a&&("text"===e||"fill"===e?(l.set("fill",t),f(t),y(t)):"stroke"===e&&(l.set("stroke",t),v(t)),a.renderAll())},[l,a]),Le=(0,n.useCallback)(e=>{l&&a&&(l.set("fontSize",e),k(e),a.renderAll())},[l,a]),Ie=(0,n.useCallback)(e=>{l&&a&&(l.set("fontFamily",e),N(e),a.renderAll())},[l,a]),Be=(0,n.useCallback)(e=>{l&&a&&(l.set("opacity",e),T(e),a.renderAll())},[l,a]),He=(0,n.useCallback)(e=>{l&&a&&(l.set("angle",e),O(e),a.renderAll())},[l,a]),Ue=(0,n.useCallback)((e,t)=>{l&&a&&(l.set("scaleX",e),l.set("scaleY",t),D(e),M(t),a.renderAll())},[l,a]),We=(0,n.useCallback)((e,t)=>{l&&a&&(l.set(e,t),a.renderAll())},[l,a]),Ke=(0,n.useCallback)(e=>{l&&a&&(l.set("rx",e),l.set("ry",e),K(e),a.renderAll())},[l,a]),Ve=(0,n.useCallback)(e=>{if(a){const t=a.getObjects().find(t=>(t.id||"")===e);t&&(a.setActiveObject(t),a.renderAll())}},[a]),Ye=(0,n.useCallback)(e=>{if(a){const t=a.getObjects().find(t=>(t.id||"")===e);t&&(t.set("visible",!t.visible),a.renderAll(),ve(a))}},[a,ve]),Ge=(0,n.useCallback)(e=>{if(a){const t=a.getObjects().find(t=>(t.id||"")===e);t&&(t.set("selectable",!1===t.selectable),a.renderAll(),ve(a))}},[a,ve]),qe=(0,n.useCallback)(e=>{if(a){const t=a.getObjects().find(t=>(t.id||"")===e);t&&(a.remove(t),a.renderAll(),ve(a))}},[a,ve]),Xe=(0,n.useCallback)(async e=>{if(a){const r=a.getObjects().find(t=>(t.id||"")===e);if(r)try{const e=await r.clone();e.set({left:(r.left||0)+20,top:(r.top||0)+20}),a.add(e),a.renderAll(),ve(a)}catch(t){console.error("Duplicate error:",t)}}},[a,ve]),$e=(0,n.useCallback)(e=>{if(a){const t=a.getObjects().find(t=>(t.id||"")===e);t&&(t.bringForward(),a.renderAll(),ve(a))}},[a,ve]),Je=(0,n.useCallback)(e=>{if(a){const t=a.getObjects().find(t=>(t.id||"")===e);t&&(t.sendBackwards(),a.renderAll(),ve(a))}},[a,ve]),Qe=(0,n.useCallback)((e,t)=>{if(a){const r=a.getObjects().find(t=>(t.id||"")===e);r&&(r.name=t,ve(a))}},[a,ve]),Ze=(0,n.useCallback)(e=>{ie(e),se("categories")},[]),et=(0,n.useCallback)(e=>{oe(e),Ra.success("".concat(e," alt kategorisi se\xe7ildi"))},[]),tt=(0,n.useCallback)(e=>{de(t=>[...t,e]),Ra.success("Placeholder eklendi")},[]),rt=(0,n.useCallback)((e,t)=>{de(r=>r.map(r=>r.id===e?t:r)),Ra.success("Placeholder g\xfcncellendi")},[]),nt=(0,n.useCallback)(e=>{de(t=>t.filter(t=>t.id!==e)),Ra.success("Placeholder silindi")},[]),st=(0,n.useCallback)(e=>{he(e)},[]),at=(0,n.useCallback)((e,t)=>{Ra.success("\u015eablon ".concat(t.length," markaya atand\u0131"))},[]),it=(0,n.useCallback)(e=>{pe(e)},[]),lt=(0,n.useCallback)(e=>{pe(e),se("preview")},[]),ot=(0,n.useCallback)(e=>{Ra.success("".concat(e.toUpperCase()," format\u0131nda d\u0131\u015fa aktar\u0131ld\u0131"))},[]),ct=(0,n.useCallback)(()=>{Ra.success("Payla\u015f\u0131labilir link olu\u015fturuldu")},[]);return(0,n.useEffect)(()=>{const e=e=>{if(e.ctrlKey||e.metaKey)switch(e.key.toLowerCase()){case"z":e.preventDefault(),e.shiftKey?Ee():Te();break;case"a":e.preventDefault(),a&&(a.discardActiveObject(),a.setActiveObject(new sx(a.getObjects(),{canvas:a})),a.requestRenderAll());break;case"s":e.preventDefault(),Ne();break;case"c":e.preventDefault(),Ae();break;case"v":e.preventDefault()}else if(("Delete"===e.key||"Backspace"===e.key)&&(e.preventDefault(),a&&a.getActiveObject())){const e=a.getActiveObject();e&&(a.remove(e),a.requestRenderAll(),ve(a),a&&be(a))}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[a,Te,Ee,Ne,Ae,ve,be]),(0,n.useEffect)(()=>(a&&(xe.current=setInterval(()=>{const e={name:V,canvas_data:a.toJSON(),auto_saved:!0};localStorage.setItem("template_draft",JSON.stringify(e))},3e4)),()=>{xe.current&&clearInterval(xe.current)}),[a,V]),(0,n.useEffect)(()=>{t&&a&&(a.loadFromJSON(t.canvas_data,()=>{a.renderAll(),ve(a)}),Y(t.name||"Yeni \u015eablon"))},[t,a,ve]),(0,za.jsxs)("div",{className:"h-screen flex flex-col bg-gray-50",children:[(0,za.jsx)(Vy,{activeTool:u,onToolChange:h,onSave:Ne,onExport:Ce,onUndo:Te,onRedo:Ee,onZoomIn:Oe,onZoomOut:Pe,onDelete:De,onCopy:Ae,onAIGenerate:Me,onShowUsageGuide:()=>re(!0),zoom:m,canUndo:X>0,canRedo:X<G.length-1,hasSelection:!!l}),(0,za.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,za.jsxs)("div",{className:"flex",children:[(0,za.jsx)("div",{className:"w-12 bg-gray-100 border-r border-gray-200 flex flex-col",children:[{id:"layers",label:"Katmanlar",icon:"\ud83d\udcc4"},{id:"categories",label:"Kategoriler",icon:"\ud83d\udcc1"},{id:"placeholders",label:"Alanlar",icon:"\ud83d\udd17"},{id:"brands",label:"Markalar",icon:"\ud83c\udfe2"},{id:"data",label:"Veri",icon:"\ud83d\udcca"},{id:"preview",label:"\xd6nizleme",icon:"\ud83d\udc41\ufe0f"},{id:"advanced",label:"Geli\u015fmi\u015f",icon:"\ud83c\udfa8"}].map(e=>(0,za.jsx)("button",{onClick:()=>se(e.id),className:"p-3 border-b border-gray-200 hover:bg-gray-200 transition-colors ".concat(ne===e.id?"bg-blue-100 text-blue-700":"text-gray-600"),title:e.label,children:(0,za.jsx)("span",{className:"text-lg",children:e.icon})},e.id))}),(0,za.jsxs)("div",{className:"w-80",children:["layers"===ne&&(0,za.jsx)(Jy,{layers:c,selectedLayerId:l&&l.id||null,onLayerSelect:Ve,onLayerToggleVisibility:Ye,onLayerToggleLock:Ge,onLayerDelete:qe,onLayerDuplicate:Xe,onLayerMoveUp:$e,onLayerMoveDown:Je,onLayerRename:Qe}),"categories"===ne&&(0,za.jsx)(vb,{selectedCategory:ae,onCategorySelect:Ze,onSubcategorySelect:et}),"placeholders"===ne&&(0,za.jsx)(lb,{onAddPlaceholder:tt,onEditPlaceholder:rt,onDeletePlaceholder:nt,placeholders:ce}),"brands"===ne&&(0,za.jsx)(_b,{selectedBrands:ue,onBrandSelect:st,onTemplateAssign:at,templateId:ge}),"data"===ne&&(0,za.jsx)(Ob,{templateId:ge,onDataChange:it,onPreview:lt}),"preview"===ne&&(0,za.jsx)(Ab,{templateData:t,previewData:me,onExport:ot,onShare:ct}),"advanced"===ne&&(0,za.jsx)(Lb,{onToolSelect:h,onColorChange:e=>Fe("fill",e),onGradientChange:e=>console.log("Gradient:",e),onFilterApply:e=>console.log("Filter:",e),onTransform:e=>console.log("Transform:",e),onEffectApply:e=>console.log("Effect:",e)})]})]}),(0,za.jsx)(Qy,{width:720,height:1280,backgroundColor:"#ffffff",zoom:m,onObjectSelect:je,onObjectDeselect:we,onObjectModified:_e,onObjectAdded:ke,onObjectRemoved:Se,activeTool:u,onCanvasReady:ye,initialData:null===t||void 0===t?void 0:t.canvas_data}),(0,za.jsx)(qy,{selectedObject:l,activeTool:u,onPropertyChange:ze,textColor:g,fillColor:x,strokeColor:b,strokeWidth:j,fontSize:_,fontFamily:S,opacity:C,rotation:E,scaleX:P,scaleY:A,onColorChange:Fe,onFontSizeChange:Le,onFontFamilyChange:Ie,onOpacityChange:Be,onRotationChange:He,onScaleChange:Ue,shadowColor:R,shadowBlur:F,shadowOffsetX:I,shadowOffsetY:H,borderRadius:W,onShadowChange:We,onBorderRadiusChange:Ke})]}),(0,za.jsx)("div",{className:"bg-white border-t border-gray-200 px-4 py-2",children:(0,za.jsxs)("div",{className:"flex items-center gap-4",children:[(0,za.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"\u015eablon Ad\u0131:"}),(0,za.jsx)("input",{type:"text",value:V,onChange:e=>Y(e.target.value),className:"flex-1 px-3 py-1 border border-gray-300 rounded text-sm",placeholder:"\u015eablon ad\u0131n\u0131 girin..."}),(0,za.jsx)("button",{onClick:s,className:"px-4 py-1 text-sm text-gray-600 hover:text-gray-800",children:"Kapat"})]})}),(0,za.jsx)(tb,{isOpen:J,onClose:()=>Q(!1),onGenerate:Re,isGenerating:Z}),te&&(0,za.jsx)(Fb,{onClose:()=>re(!1)})]})},Hb=()=>{const[e,t]=(0,n.useState)([]),[r,s]=(0,n.useState)(null),[a,i]=(0,n.useState)(!0),[l,o]=(0,n.useState)([]),[c,d]=(0,n.useState)(null),[u,h]=(0,n.useState)({}),[m,p]=(0,n.useState)(!1),[g,f]=(0,n.useState)([]),[x,y]=(0,n.useState)(""),[b,v]=(0,n.useState)(""),[j,w]=(0,n.useState)(!1),[_,k]=(0,n.useState)(null),[S,N]=(0,n.useState)(!1),[C,T]=(0,n.useState)("all"),[E,O]=(0,n.useState)(""),[P,D]=(0,n.useState)("grid"),[A,M]=(0,n.useState)(1),[R,z]=(0,n.useState)(1),[F,L]=(0,n.useState)(20);(0,n.useEffect)(()=>{I(),B()},[A,C,E,F]),(0,n.useEffect)(()=>{M(1)},[F]);const I=async()=>{try{i(!0);const e=await yy(A,F,void 0,E||void 0,"all"===C?void 0:C);t(e.products||[]),z(e.total_pages||1);const r=await by();s(r)}catch(e){console.error("Error loading collage data:",e),Ra.error("Kolaj verileri y\xfcklenemedi")}finally{i(!1)}},B=async()=>{try{const e=await Si();o(e.brands||[])}catch(e){console.error("Error loading brands:",e)}},H=e=>{var t;d(e.id),h({product_type:e.product_type||"",size_range:e.size_range||"",price:(null===(t=e.price)||void 0===t?void 0:t.toString())||"",brand_id:e.brand_id||""})},U=async e=>{try{p(!0),await Jo(e,{product_type:u.product_type,size_range:u.size_range,price:u.price?parseFloat(u.price):void 0,brand_id:u.brand_id?parseInt(u.brand_id):void 0}),Ra.success("\xdcr\xfcn ba\u015far\u0131yla g\xfcncellendi"),d(null),I()}catch(t){Ra.error("\xdcr\xfcn g\xfcncellenirken hata olu\u015ftu"),console.error("Error updating product:",t)}finally{p(!1)}},W=()=>{d(null),h({})},K=e=>{f(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},V=e=>{k(e),N(!0)},Y=e=>e.has_collage?"ready":e.missing_fields&&e.missing_fields.length>0?"missing":e.can_create_collage?"ready":"pending",G=e=>{switch(e){case"ready":return"text-green-600 bg-green-100";case"missing":return"text-red-600 bg-red-100";case"pending":return"text-yellow-600 bg-yellow-100";default:return"text-gray-600 bg-gray-100"}},q=e=>{switch(e){case"ready":return"Haz\u0131r";case"missing":return"Eksik Bilgi";case"pending":return"Beklemede";default:return"Bilinmiyor"}};return a?(0,za.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,za.jsx)(tl,{className:"w-8 h-8 animate-spin text-blue-600"}),(0,za.jsx)("span",{className:"ml-2 text-gray-600",children:"Y\xfckleniyor..."})]}):(0,za.jsxs)("div",{className:"space-y-6",children:[(0,za.jsx)("div",{className:"bg-gradient-to-r from-slate-50 to-blue-50 border border-slate-200 rounded-lg p-5",children:(0,za.jsxs)("div",{className:"flex items-start gap-4",children:[(0,za.jsx)("div",{className:"flex-shrink-0 pt-0.5",children:(0,za.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,za.jsx)(yi,{className:"w-5 h-5 text-blue-600"})})}),(0,za.jsxs)("div",{className:"flex-1",children:[(0,za.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Depolama Bilgisi"}),(0,za.jsxs)("p",{className:"text-sm text-gray-600 leading-relaxed",children:["\xdcr\xfcn g\xf6rselleri ve kolajlar ",(0,za.jsx)("span",{className:"font-medium text-gray-900",children:"24 saat"})," boyunca \xfccretsiz olarak saklanmaktad\u0131r. Daha uzun s\xfcre depolama i\xe7in premium paketlerimizi inceleyebilirsiniz."]})]}),(0,za.jsx)("div",{className:"flex-shrink-0",children:(0,za.jsx)("button",{className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-xs font-medium rounded transition-colors duration-200",children:"Premium"})})]})}),(0,za.jsxs)("div",{className:"flex items-center justify-between",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Kolaj Y\xf6netimi"}),(0,za.jsx)("p",{className:"text-gray-600",children:"\xdcr\xfcn kolajlar\u0131n\u0131 y\xf6netin ve d\xfczenleyin"})]}),(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)("button",{onClick:()=>D("grid"===P?"list":"grid"),className:"btn btn-outline btn-sm",children:"grid"===P?(0,za.jsx)(wc,{size:16}):(0,za.jsx)(Ii,{size:16})}),(0,za.jsxs)("button",{onClick:I,className:"btn btn-outline btn-sm",children:[(0,za.jsx)(tl,{size:16}),"Yenile"]})]})]}),r&&(0,za.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,za.jsx)("div",{className:"bg-white rounded-lg border p-4",children:(0,za.jsxs)("div",{className:"flex items-center justify-between",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("p",{className:"text-sm text-gray-600",children:"Toplam \xdcr\xfcn"}),(0,za.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:r.total_products})]}),(0,za.jsx)(pi,{className:"w-8 h-8 text-blue-600"})]})}),(0,za.jsx)("div",{className:"bg-white rounded-lg border p-4",children:(0,za.jsxs)("div",{className:"flex items-center justify-between",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("p",{className:"text-sm text-gray-600",children:"Kolaj Var"}),(0,za.jsx)("p",{className:"text-2xl font-bold text-green-600",children:r.products_with_collage})]}),(0,za.jsx)(Wa,{className:"w-8 h-8 text-green-600"})]})}),(0,za.jsx)("div",{className:"bg-white rounded-lg border p-4",children:(0,za.jsxs)("div",{className:"flex items-center justify-between",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("p",{className:"text-sm text-gray-600",children:"Eksik Bilgi"}),(0,za.jsx)("p",{className:"text-2xl font-bold text-red-600",children:r.products_missing_info})]}),(0,za.jsx)(yi,{className:"w-8 h-8 text-red-600"})]})}),(0,za.jsx)("div",{className:"bg-white rounded-lg border p-4",children:(0,za.jsxs)("div",{className:"flex items-center justify-between",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("p",{className:"text-sm text-gray-600",children:"Tamamlanma"}),(0,za.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:[r.completion_rate,"%"]})]}),(0,za.jsx)(gy,{className:"w-8 h-8 text-blue-600"})]})})]}),(0,za.jsx)("div",{className:"bg-white rounded-lg border p-4",children:(0,za.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)(nl,{size:16,className:"text-gray-400"}),(0,za.jsx)("input",{type:"text",placeholder:"\xdcr\xfcn ara...",value:E,onChange:e=>O(e.target.value),className:"input input-sm w-64"})]}),(0,za.jsxs)("select",{value:C,onChange:e=>T(e.target.value),className:"select select-sm w-48",children:[(0,za.jsx)("option",{value:"all",children:"T\xfcm\xfc"}),(0,za.jsx)("option",{value:"missing",children:"Eksik Bilgiler"}),(0,za.jsx)("option",{value:"ready",children:"Haz\u0131r (Kolaj Yok)"}),(0,za.jsx)("option",{value:"has_collage",children:"Kolaj Var"}),(0,za.jsx)("option",{value:"telegram_sent",children:"Telegram G\xf6nderildi"}),(0,za.jsx)("option",{value:"telegram_not_sent",children:"Telegram G\xf6nderilmedi"})]}),(0,za.jsxs)("select",{value:F,onChange:e=>L(parseInt(e.target.value)),className:"select select-sm w-24",children:[(0,za.jsx)("option",{value:10,children:"10"}),(0,za.jsx)("option",{value:20,children:"20"}),(0,za.jsx)("option",{value:50,children:"50"}),(0,za.jsx)("option",{value:100,children:"100"})]}),g.length>0&&(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsxs)("span",{className:"text-sm text-gray-600",children:[g.length," \xfcr\xfcn se\xe7ildi"]}),(0,za.jsxs)("button",{onClick:()=>w(!0),className:"btn btn-sm btn-primary",children:[(0,za.jsx)(fy,{size:14}),"Toplu D\xfczenle"]}),(0,za.jsxs)("button",{onClick:()=>f([]),className:"btn btn-sm btn-outline",children:[(0,za.jsx)(fl,{size:14}),"Temizle"]})]})]})}),j&&(0,za.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,za.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96",children:[(0,za.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Toplu D\xfczenleme"}),(0,za.jsxs)("div",{className:"space-y-4",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"D\xfczenlenecek Alan"}),(0,za.jsxs)("select",{value:x,onChange:e=>y(e.target.value),className:"select select-sm w-full",children:[(0,za.jsx)("option",{value:"",children:"Alan se\xe7in"}),(0,za.jsx)("option",{value:"product_type",children:"\xdcr\xfcn Tipi"}),(0,za.jsx)("option",{value:"size_range",children:"Beden Aral\u0131\u011f\u0131"}),(0,za.jsx)("option",{value:"price",children:"Fiyat"}),(0,za.jsx)("option",{value:"brand_id",children:"Marka"})]})]}),"brand_id"===x?(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Marka"}),(0,za.jsxs)("select",{value:b,onChange:e=>v(e.target.value),className:"select select-sm w-full",children:[(0,za.jsx)("option",{value:"",children:"Marka se\xe7in"}),l.map(e=>(0,za.jsx)("option",{value:e.id,children:e.name},e.id))]})]}):(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Yeni De\u011fer"}),(0,za.jsx)("input",{type:"price"===x?"number":"text",value:b,onChange:e=>v(e.target.value),placeholder:"De\u011fer girin",className:"input input-sm w-full"})]})]}),(0,za.jsxs)("div",{className:"flex justify-end gap-2 mt-6",children:[(0,za.jsx)("button",{onClick:()=>w(!1),className:"btn btn-outline btn-sm",children:"\u0130ptal"}),(0,za.jsx)("button",{onClick:async()=>{if(x&&b&&0!==g.length)try{p(!0);const e={};e[x]="price"===x?parseFloat(b):"brand_id"===x?parseInt(b):b,await Promise.all(g.map(t=>Jo(t,e))),Ra.success("".concat(g.length," \xfcr\xfcn ba\u015far\u0131yla g\xfcncellendi")),f([]),w(!1),y(""),v(""),I()}catch(e){Ra.error("Toplu g\xfcncelleme hatas\u0131"),console.error("Error bulk updating products:",e)}finally{p(!1)}else Ra.error("L\xfctfen alan ve de\u011fer se\xe7in")},disabled:m,className:"btn btn-primary btn-sm",children:m?"Kaydediliyor...":"Kaydet"})]})]})}),"grid"===P?(0,za.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e.map(e=>{const t=Y(e),r=c===e.id,n=g.includes(e.id);return(0,za.jsxs)("div",{className:"bg-white rounded-lg border-2 transition-all ".concat(n?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[(0,za.jsxs)("div",{className:"relative",children:[(0,za.jsx)("div",{className:"aspect-square bg-gray-100 rounded-t-lg overflow-hidden",children:e.cover_image_url?(0,za.jsx)("img",{src:e.cover_image_url,alt:"".concat(e.code," ").concat(e.color),className:"w-full h-full object-cover"}):(0,za.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,za.jsx)(Bi,{className:"w-12 h-12 text-gray-400"})})}),(0,za.jsx)("div",{className:"absolute top-2 left-2 px-2 py-1 rounded-full text-xs font-medium ".concat(G(t)),children:q(t)}),(0,za.jsx)("div",{className:"absolute top-2 right-2",children:(0,za.jsx)("input",{type:"checkbox",checked:n,onChange:()=>K(e.id),className:"checkbox checkbox-sm"})}),e.has_collage&&e.collage_url&&(0,za.jsx)("div",{className:"absolute bottom-2 right-2",children:(0,za.jsxs)("button",{onClick:()=>V(e),className:"btn btn-xs btn-primary",children:[(0,za.jsx)(ti,{size:12}),"Kolaj"]})})]}),(0,za.jsxs)("div",{className:"p-4",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,za.jsxs)("h3",{className:"font-semibold text-gray-900",children:[e.code," ",e.color]}),(0,za.jsxs)("span",{className:"text-xs text-gray-500",children:[e.image_count," g\xf6rsel"]})]}),r?(0,za.jsxs)("div",{className:"space-y-2",children:[(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"text-xs font-medium text-gray-600",children:"\xdcr\xfcn Tipi"}),(0,za.jsx)("input",{type:"text",value:u.product_type,onChange:e=>h(Ie(Ie({},u),{},{product_type:e.target.value})),className:"input input-xs w-full",placeholder:"ELBISE, TAKIM"})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"text-xs font-medium text-gray-600",children:"Beden"}),(0,za.jsx)("input",{type:"text",value:u.size_range,onChange:e=>h(Ie(Ie({},u),{},{size_range:e.target.value})),className:"input input-xs w-full",placeholder:"36-42, S-M-L"})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"text-xs font-medium text-gray-600",children:"Fiyat"}),(0,za.jsx)("input",{type:"number",value:u.price,onChange:e=>h(Ie(Ie({},u),{},{price:e.target.value})),className:"input input-xs w-full",placeholder:"64.00"})]}),(0,za.jsxs)("div",{children:[(0,za.jsx)("label",{className:"text-xs font-medium text-gray-600",children:"Marka"}),(0,za.jsxs)("select",{value:u.brand_id,onChange:e=>h(Ie(Ie({},u),{},{brand_id:e.target.value})),className:"select select-xs w-full",children:[(0,za.jsx)("option",{value:"",children:"Marka se\xe7in"}),l.map(e=>(0,za.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}):(0,za.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,za.jsxs)("div",{className:"".concat(e.product_type?"text-gray-600":"text-red-500"),children:[(0,za.jsx)("span",{className:"font-medium",children:"Tip:"})," ",e.product_type||"\u274c Eksik"]}),(0,za.jsxs)("div",{className:"".concat(e.size_range?"text-gray-600":"text-red-500"),children:[(0,za.jsx)("span",{className:"font-medium",children:"Beden:"})," ",e.size_range||"\u274c Eksik"]}),(0,za.jsxs)("div",{className:"".concat(e.price?"text-gray-600":"text-red-500"),children:[(0,za.jsx)("span",{className:"font-medium",children:"Fiyat:"})," ",e.price?"$".concat(e.price):"\u274c Eksik"]}),(0,za.jsxs)("div",{className:"".concat(e.brand?"text-gray-600":"text-red-500"),children:[(0,za.jsx)("span",{className:"font-medium",children:"Marka:"})," ",e.brand||"\u274c Eksik"]})]}),(0,za.jsx)("div",{className:"flex items-center gap-2 mt-3",children:r?(0,za.jsxs)(za.Fragment,{children:[(0,za.jsxs)("button",{onClick:()=>U(e.id),disabled:m,className:"btn btn-xs btn-success flex-1",children:[(0,za.jsx)(xy,{size:12}),m?"Kaydediliyor...":"Kaydet"]}),(0,za.jsx)("button",{onClick:W,className:"btn btn-xs btn-outline",children:(0,za.jsx)(fl,{size:12})})]}):(0,za.jsxs)(za.Fragment,{children:[(0,za.jsxs)("button",{onClick:()=>H(e),className:"btn btn-xs btn-primary flex-1",children:[(0,za.jsx)(fy,{size:12}),"D\xfczenle"]}),e.has_collage&&(0,za.jsx)("button",{onClick:()=>V(e),className:"btn btn-xs btn-secondary",children:(0,za.jsx)(ti,{size:12})})]})})]})]},e.id)})}):(0,za.jsx)("div",{className:"bg-white rounded-lg border overflow-hidden",children:(0,za.jsx)("div",{className:"overflow-x-auto",children:(0,za.jsxs)("table",{className:"table table-zebra w-full",children:[(0,za.jsx)("thead",{children:(0,za.jsxs)("tr",{children:[(0,za.jsx)("th",{children:(0,za.jsx)("input",{type:"checkbox",checked:g.length===e.length&&e.length>0,onChange:t=>{t.target.checked?f(e.map(e=>e.id)):f([])},className:"checkbox checkbox-sm"})}),(0,za.jsx)("th",{children:"G\xf6rsel"}),(0,za.jsx)("th",{children:"\xdcr\xfcn"}),(0,za.jsx)("th",{children:"Tip"}),(0,za.jsx)("th",{children:"Beden"}),(0,za.jsx)("th",{children:"Fiyat"}),(0,za.jsx)("th",{children:"Marka"}),(0,za.jsx)("th",{children:"Durum"}),(0,za.jsx)("th",{children:"\u0130\u015flemler"})]})}),(0,za.jsx)("tbody",{children:e.map(e=>{const t=Y(e),r=c===e.id,n=g.includes(e.id);return(0,za.jsxs)("tr",{className:n?"bg-blue-50":"",children:[(0,za.jsx)("td",{children:(0,za.jsx)("input",{type:"checkbox",checked:n,onChange:()=>K(e.id),className:"checkbox checkbox-sm"})}),(0,za.jsx)("td",{children:(0,za.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded overflow-hidden",children:e.cover_image_url?(0,za.jsx)("img",{src:e.cover_image_url,alt:"".concat(e.code," ").concat(e.color),className:"w-full h-full object-cover"}):(0,za.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,za.jsx)(Bi,{className:"w-6 h-6 text-gray-400"})})})}),(0,za.jsx)("td",{children:(0,za.jsxs)("div",{children:[(0,za.jsx)("div",{className:"font-medium",children:e.code}),(0,za.jsx)("div",{className:"text-sm text-gray-500",children:e.color})]})}),(0,za.jsx)("td",{children:r?(0,za.jsx)("input",{type:"text",value:u.product_type,onChange:e=>h(Ie(Ie({},u),{},{product_type:e.target.value})),className:"input input-xs w-24"}):(0,za.jsx)("span",{className:e.product_type?"":"text-red-500",children:e.product_type||"\u274c Eksik"})}),(0,za.jsx)("td",{children:r?(0,za.jsx)("input",{type:"text",value:u.size_range,onChange:e=>h(Ie(Ie({},u),{},{size_range:e.target.value})),className:"input input-xs w-24"}):(0,za.jsx)("span",{className:e.size_range?"":"text-red-500",children:e.size_range||"\u274c Eksik"})}),(0,za.jsx)("td",{children:r?(0,za.jsx)("input",{type:"number",value:u.price,onChange:e=>h(Ie(Ie({},u),{},{price:e.target.value})),className:"input input-xs w-20"}):(0,za.jsx)("span",{className:e.price?"":"text-red-500",children:e.price?"$".concat(e.price):"\u274c Eksik"})}),(0,za.jsx)("td",{children:r?(0,za.jsxs)("select",{value:u.brand_id,onChange:e=>h(Ie(Ie({},u),{},{brand_id:e.target.value})),className:"select select-xs w-32",children:[(0,za.jsx)("option",{value:"",children:"Se\xe7in"}),l.map(e=>(0,za.jsx)("option",{value:e.id,children:e.name},e.id))]}):(0,za.jsx)("span",{className:e.brand?"":"text-red-500",children:e.brand||"\u274c Eksik"})}),(0,za.jsx)("td",{children:(0,za.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(G(t)),children:q(t)})}),(0,za.jsx)("td",{children:(0,za.jsx)("div",{className:"flex items-center gap-1",children:r?(0,za.jsxs)(za.Fragment,{children:[(0,za.jsx)("button",{onClick:()=>U(e.id),disabled:m,className:"btn btn-xs btn-success",children:(0,za.jsx)(xy,{size:12})}),(0,za.jsx)("button",{onClick:W,className:"btn btn-xs btn-outline",children:(0,za.jsx)(fl,{size:12})})]}):(0,za.jsxs)(za.Fragment,{children:[(0,za.jsx)("button",{onClick:()=>H(e),className:"btn btn-xs btn-primary",children:(0,za.jsx)(fy,{size:12})}),e.has_collage&&(0,za.jsx)("button",{onClick:()=>V(e),className:"btn btn-xs btn-secondary",children:(0,za.jsx)(ti,{size:12})})]})})})]},e.id)})})]})})}),R>1&&(0,za.jsxs)("div",{className:"flex items-center justify-between bg-white rounded-lg border p-4",children:[(0,za.jsxs)("div",{className:"text-sm text-gray-600",children:["Sayfa ",A," / ",R," (Toplam ",e.length," \xfcr\xfcn)"]}),(0,za.jsxs)("div",{className:"flex items-center gap-2",children:[(0,za.jsx)("button",{onClick:()=>M(1),disabled:1===A,className:"btn btn-sm btn-outline",children:"\u0130lk"}),(0,za.jsx)("button",{onClick:()=>M(Math.max(1,A-1)),disabled:1===A,className:"btn btn-sm btn-outline",children:"\xd6nceki"}),(()=>{const e=Math.max(1,A-2),t=Math.min(R,A+2),r=[];for(let n=e;n<=t;n++)r.push((0,za.jsx)("button",{onClick:()=>M(n),className:"btn btn-sm ".concat(A===n?"btn-primary":"btn-outline"),children:n},n));return r})(),(0,za.jsx)("button",{onClick:()=>M(Math.min(R,A+1)),disabled:A===R,className:"btn btn-sm btn-outline",children:"Sonraki"}),(0,za.jsx)("button",{onClick:()=>M(R),disabled:A===R,className:"btn btn-sm btn-outline",children:"Son"})]})]}),S&&_&&(0,za.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,za.jsxs)("div",{className:"bg-white rounded-lg w-[95vw] h-[95vh] max-w-7xl",children:[(0,za.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,za.jsxs)("h3",{className:"text-lg font-semibold",children:["Kolaj D\xfczenle: ",_.code," ",_.color]}),(0,za.jsxs)("button",{onClick:()=>{N(!1),k(null)},className:"btn btn-sm btn-outline",children:[(0,za.jsx)(fl,{size:16}),"Kapat"]})]}),(0,za.jsx)("div",{className:"h-[calc(100%-80px)]",children:(0,za.jsx)(Bb,{onSave:()=>{N(!1),k(null),I()},onClose:()=>{N(!1),k(null)},initialTemplate:{type:"collage",productId:_.id,collageUrl:_.collage_url}})})]})})]})},Ub=Ua("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Wb=()=>{const{user:e,logout:t,loading:r}=Za(),[s]=(0,n.useState)("https://pofudukdijital.com/wp-content/uploads/2023/11/logo1.svg");return r||!e?null:(0,za.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200 relative z-10",children:(0,za.jsx)("div",{className:"px-6 py-4 ml-64",children:(0,za.jsx)("div",{className:"flex items-center justify-end",children:(0,za.jsxs)("div",{className:"flex items-center gap-4",children:[(0,za.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,za.jsxs)("div",{className:"flex items-center gap-2 text-gray-700",children:[(0,za.jsx)(rc,{size:16}),(0,za.jsxs)("span",{className:"font-medium",children:[e.first_name," ",e.last_name]})]}),(0,za.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:e.role})]}),(0,za.jsxs)("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",children:[(0,za.jsx)(Ub,{size:16}),"\xc7\u0131k\u0131\u015f"]})]})})})})};function Kb(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=Kb(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}const Vb=function(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=Kb(e))&&(n&&(n+=" "),n+=t);return n},Yb=()=>{var e,t,r,s,a,i,l,o,c,d;const{user:u,loading:h}=Za(),m=J(),[p,g]=(0,n.useState)(["telegram"]),[f,x]=(0,n.useState)("");if((0,n.useEffect)(()=>{(async()=>{try{const e=(await $a()).settings.find(e=>"logo_url"===e.key);e&&e.value&&x(e.value)}catch(e){console.error("Logo y\xfcklenirken hata:",e)}})()},[]),h||!u)return null;const y=[{name:"Kontrol Paneli",href:"/admin/dashboard",icon:ub,show:!0},{name:"Kullan\u0131c\u0131lar",href:"/admin/users",icon:ci,show:null===u||void 0===u||null===(e=u.permissions)||void 0===e?void 0:e.includes("users.manage")},{name:"\xc7al\u0131\u015fanlar\u0131m",href:"/admin/my-employees",icon:ci,show:(null===u||void 0===u?void 0:u.brand_ids)&&u.brand_ids.length>0},{name:"\xc7al\u0131\u015fan Talepleri",href:"/admin/employee-requests",icon:hl,show:(null===u||void 0===u||null===(t=u.permissions)||void 0===t?void 0:t.includes("employee_requests.manage"))||(null===u||void 0===u||null===(r=u.permissions)||void 0===r?void 0:r.includes("view_employee_requests"))},{name:null!==u&&void 0!==u&&null!==(s=u.permissions)&&void 0!==s&&s.includes("brands.manage")?"Markalar":"Markalar\u0131m",href:"/admin/brands",icon:di,show:(null===u||void 0===u||null===(a=u.permissions)||void 0===a?void 0:a.includes("brands.manage"))||(null===u||void 0===u?void 0:u.brand_ids)&&u.brand_ids.length>0},{name:"Roller",href:"/admin/roles",icon:li,show:null===u||void 0===u||null===(i=u.permissions)||void 0===i?void 0:i.includes("roles.manage")},{name:"\xdcr\xfcn Galerisi",href:"/admin/media-gallery",icon:pi,show:null===u||void 0===u||null===(l=u.permissions)||void 0===l?void 0:l.includes("products.manage")},{name:"Kolajlar",href:"/admin/collages",icon:Ii,show:null===u||void 0===u||null===(o=u.permissions)||void 0===o?void 0:o.includes("products.manage")}].filter(e=>e.show),b={name:"Ayarlar",href:"/admin/settings",icon:hc,show:null===u||void 0===u||null===(c=u.permissions)||void 0===c?void 0:c.includes("settings.manage")},v=y,j=[{id:"telegram",name:"Telegram",icon:ui,show:null===u||void 0===u||null===(d=u.permissions)||void 0===d?void 0:d.includes("social.manage"),children:[{name:"Botlar",href:"/admin/telegram/bots",icon:ui,show:!0},{name:"Kanallar",href:"/admin/telegram/channels",icon:ui,show:!0}]}].filter(e=>e.show);return(0,za.jsxs)("aside",{className:"w-64 bg-white shadow-sm border-r border-gray-200 h-screen flex flex-col fixed left-0 top-0 z-20",children:[f&&(0,za.jsx)("div",{className:"p-3 border-b border-gray-200 bg-white flex-shrink-0",children:(0,za.jsx)("img",{src:f,alt:"KolajBot Logo",className:"h-8 w-auto mx-auto",onError:e=>{e.target.style.display="none"}})}),(0,za.jsx)("nav",{className:"p-4 flex-1 overflow-y-auto",children:(0,za.jsxs)("ul",{className:"space-y-2",children:[v.map(e=>{const t=e.icon,r=m.pathname===e.href;return(0,za.jsx)("li",{children:(0,za.jsx)(Oe,{to:e.href,className:Vb("flex items-center justify-between gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors",r?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:(0,za.jsxs)("div",{className:"flex items-center gap-3",children:[(0,za.jsx)(t,{size:18}),e.name]})})},e.name)}),j.map(e=>{const t=e.icon,r=p.includes(e.id),n=e.children.some(e=>e.show&&m.pathname===e.href);return(0,za.jsxs)("li",{className:"space-y-1",children:[(0,za.jsxs)("button",{onClick:()=>{return t=e.id,void g(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:Vb("w-full flex items-center justify-between gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors",n?"bg-blue-50 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[(0,za.jsxs)("div",{className:"flex items-center gap-3",children:[(0,za.jsx)(t,{size:18}),e.name]}),r?(0,za.jsx)(Io,{size:16,className:"text-gray-400"}):(0,za.jsx)(Bo,{size:16,className:"text-gray-400"})]}),r&&(0,za.jsx)("ul",{className:"ml-6 space-y-1",children:e.children.filter(e=>e.show).map(e=>{const t=e.icon,r=m.pathname===e.href;return(0,za.jsx)("li",{children:(0,za.jsxs)(Oe,{to:e.href,className:Vb("flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors",r?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"),children:[(0,za.jsx)(t,{size:16}),e.name]})},e.name)})})]},e.id)}),b.show&&(0,za.jsx)("li",{children:(0,za.jsxs)(Oe,{to:b.href,className:Vb("flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors",m.pathname===b.href?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[(0,za.jsx)(hc,{size:18}),b.name]})})]})}),(0,za.jsx)("div",{className:"border-t border-gray-200 p-3 bg-gray-50 flex-shrink-0",children:(0,za.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,za.jsx)("img",{src:"https://pofudukdijital.com/wp-content/uploads/2023/11/logo1.svg",alt:"Pofuduk Dijital Logo",className:"h-8 w-auto"}),(0,za.jsx)("p",{className:"text-xs font-semibold text-gray-700",children:"KolajBot v1.0 Beta"}),(0,za.jsx)("div",{className:"text-center",children:(0,za.jsxs)("p",{className:"text-[10px] text-gray-500",children:["\xa9 ",(new Date).getFullYear()," T\xfcm haklar\u0131 Pofuduk Dijital'e aittir"]})})]})})]})},Gb=e=>{let{children:t,requiredPermissions:r=[],requireAll:n=!1,allowPasswordChange:s=!1}=e;const{user:a,loading:i}=La();if(i)return(0,za.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,za.jsx)("div",{className:"spinner"})});if(!a)return(0,za.jsx)(ge,{to:"/login",replace:!0});if(!s&&a.must_change_password)return(0,za.jsx)(ge,{to:"/auth/change-password",replace:!0});if(r.length>0){const e=a.permissions||[];if(!(n?r.every(t=>e.includes(t)):r.some(t=>e.includes(t))))return(0,za.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,za.jsxs)("div",{className:"text-center",children:[(0,za.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Eri\u015fim Reddedildi"}),(0,za.jsx)("p",{className:"text-gray-600",children:"Bu sayfaya eri\u015fim izniniz yok."}),(0,za.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["Gerekli yetki: ",r.join(", ")]})]})})}return(0,za.jsx)(za.Fragment,{children:t})},qb=e=>{let{children:t}=e;const{user:r,loading:n}=La();return n?(0,za.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,za.jsxs)("div",{className:"text-center",children:[(0,za.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),(0,za.jsx)("p",{className:"mt-4 text-gray-600",children:"Y\xfckleniyor..."})]})}):r&&r.must_change_password?(0,za.jsx)(ge,{to:"/auth/change-password",replace:!0}):(0,za.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,za.jsx)(Wb,{}),(0,za.jsxs)("div",{className:"flex",children:[(0,za.jsx)(Yb,{}),(0,za.jsx)("main",{className:"flex-1 p-6 ml-64",children:t})]})]})},Xb=()=>{const{user:e}=La(),[t,r]=(0,n.useState)("AI - Pofuduk D\u0130J\u0130TAL"),[s,a]=(0,n.useState)("Pofuduk D\u0130J\u0130TAL - AI destekli dijital marka y\xf6netim platformu"),[i,l]=(0,n.useState)("dijital marka, AI, yapay zeka, marka y\xf6netimi");return(0,n.useEffect)(()=>{(async()=>{if(e)try{const e=await $a(),t=e.settings.find(e=>"index_title"===e.key);t&&t.value&&r(t.value);const n=e.settings.find(e=>"meta_description"===e.key);n&&n.value&&a(n.value);const s=e.settings.find(e=>"meta_keywords"===e.key);s&&s.value&&l(s.value)}catch(t){console.error("Sayfa ayarlar\u0131 y\xfcklenirken hata:",t)}})()},[e]),(0,za.jsx)(Pt,{children:(0,za.jsx)(Xa,{children:(0,za.jsx)(Ce,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:(0,za.jsxs)("div",{className:"App",children:[(0,za.jsxs)(Lt,{children:[(0,za.jsx)("title",{children:t}),(0,za.jsx)("meta",{name:"description",content:s}),(0,za.jsx)("meta",{name:"keywords",content:i})]}),(0,za.jsxs)(ye,{children:[(0,za.jsx)(fe,{path:"/login",element:(0,za.jsx)(ri,{})}),(0,za.jsx)(fe,{path:"/auth/change-password",element:(0,za.jsx)(Gb,{allowPasswordChange:!0,children:(0,za.jsx)(si,{})})}),(0,za.jsx)(fe,{path:"/admin/dashboard",element:(0,za.jsx)(qb,{children:(0,za.jsx)(Zi,{})})}),(0,za.jsx)(fe,{path:"/admin/users",element:(0,za.jsx)(Gb,{requiredPermissions:["users.manage"],children:(0,za.jsx)(qb,{children:(0,za.jsx)(Do,{})})})}),(0,za.jsx)(fe,{path:"/admin/my-employees",element:(0,za.jsx)(qb,{children:(0,za.jsx)(pc,{})})}),(0,za.jsx)(fe,{path:"/admin/employee-requests",element:(0,za.jsx)(qb,{children:(0,za.jsx)(oc,{})})}),(0,za.jsx)(fe,{path:"/admin/social-media/channels",element:(0,za.jsx)(qb,{children:(0,za.jsx)(ll,{})})}),(0,za.jsx)(fe,{path:"/admin/social-media/channels/:channelId",element:(0,za.jsx)(qb,{children:(0,za.jsx)(vo,{})})}),(0,za.jsx)(fe,{path:"/admin/telegram/bots",element:(0,za.jsx)(qb,{children:(0,za.jsx)(jo,{})})}),(0,za.jsx)(fe,{path:"/admin/telegram/bots/:botId",element:(0,za.jsx)(qb,{children:(0,za.jsx)(wo,{})})}),(0,za.jsx)(fe,{path:"/admin/telegram/channels",element:(0,za.jsx)(qb,{children:(0,za.jsx)(ll,{})})}),(0,za.jsx)(fe,{path:"/admin/telegram/channels/:channelId",element:(0,za.jsx)(qb,{children:(0,za.jsx)(vo,{})})}),(0,za.jsx)(fe,{path:"/admin/brands",element:(0,za.jsx)(qb,{children:(0,za.jsx)(Ko,{})})}),(0,za.jsx)(fe,{path:"/admin/brands/:id",element:(0,za.jsx)(qb,{children:(0,za.jsx)(tc,{})})}),(0,za.jsx)(fe,{path:"/admin/roles",element:(0,za.jsx)(Gb,{requiredPermissions:["roles.manage"],children:(0,za.jsx)(qb,{children:(0,za.jsx)(cc,{})})})}),(0,za.jsx)(fe,{path:"/admin/media-gallery",element:(0,za.jsx)(Gb,{requiredPermissions:["products.manage"],children:(0,za.jsx)(qb,{children:(0,za.jsx)(kc,{})})})}),(0,za.jsx)(fe,{path:"/admin/products/:productId",element:(0,za.jsx)(Gb,{requiredPermissions:["products.manage"],children:(0,za.jsx)(qb,{children:(0,za.jsx)(py,{})})})}),(0,za.jsx)(fe,{path:"/admin/collages",element:(0,za.jsx)(Gb,{requiredPermissions:["products.manage"],children:(0,za.jsx)(qb,{children:(0,za.jsx)(Hb,{})})})}),(0,za.jsx)(fe,{path:"/admin/settings",element:(0,za.jsx)(Gb,{requiredPermissions:["settings.manage"],children:(0,za.jsx)(qb,{children:(0,za.jsx)(mc,{})})})}),(0,za.jsx)(fe,{path:"/",element:(0,za.jsx)(ge,{to:"/admin/dashboard",replace:!0})}),(0,za.jsx)(fe,{path:"*",element:(0,za.jsx)(ge,{to:"/login",replace:!0})})]})]})})})})},$b=()=>(0,za.jsx)(Ia,{children:(0,za.jsx)(Xb,{})});a.createRoot(document.getElementById("root")).render((0,za.jsx)($b,{}))})()})();
//# sourceMappingURL=main.a54892e7.js.map