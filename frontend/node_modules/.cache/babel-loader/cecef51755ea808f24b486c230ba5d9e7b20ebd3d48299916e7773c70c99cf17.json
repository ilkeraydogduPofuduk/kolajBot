{"ast":null,"code":"import React,{useState,useEffect,useMemo}from'react';import{useAuth}from'../../hooks/useAuth';import{useNavigate}from'react-router-dom';import{Users,Building2,TrendingUp,Activity,Clock,Shield,UserCheck,Cpu,HardDrive,Monitor,MessageCircle,Package,CheckCircle,AlertCircle,BarChart3}from'lucide-react';import{socialMediaChannelsAPI}from'../../api/socialMediaChannels';import{brandsAPI}from'../../api/brands';import{systemAPI}from'../../api/system';import BrandManagerDashboard from'./BrandManagerDashboard';import toast from'react-hot-toast';import'../../animations.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Dashboard=()=>{var _user$permissions2,_user$permissions4,_user$permissions5,_user$permissions6,_user$permissions7,_user$permissions8,_user$permissions9,_user$permissions0,_user$permissions1,_user$permissions10,_user$permissions11,_stats$assignedChanne,_stats$myChannels,_user$permissions12,_systemStats$cpu,_systemStats$cpu$usag,_systemStats$cpu2,_systemStats$memory,_systemStats$memory$u,_systemStats$memory2,_systemStats$disk,_systemStats$disk$usa,_systemStats$disk2,_user$permissions13,_user$permissions14;const{user,loading:authLoading}=useAuth();const navigate=useNavigate();const[stats,setStats]=useState({totalChannels:0,activeChannels:0,totalMessages:0,totalUsers:0,totalBrands:0,totalAdmins:0,totalManagers:0,totalEmployees:0,pendingEmployeeRequests:0,totalRoles:0});const[loading,setLoading]=useState(false);// BAŞLANGIÇTA FALSE\nconst[recentChannels,setRecentChannels]=useState([]);const[systemStats,setSystemStats]=useState(null);const[managerData,setManagerData]=useState({brands:[],employees:[]});// Load dashboard data based on role\nuseEffect(()=>{let isMounted=true;// Race condition kontrolü\nconst loadDashboardData=async()=>{if(!user||authLoading)return;// Permissions kontrolü\nif(!user.permissions){return;// Permissions yüklenene kadar bekle\n}setLoading(true);try{var _user$permissions;// Load channels (filtered by role on backend)\nconst channelsResponse=await socialMediaChannelsAPI.getChannels(1,100);const channels=channelsResponse.channels;// Calculate stats\nconst activeChannels=channels.filter(c=>c.is_active).length;const totalMessages=channels.reduce((sum,c)=>sum+(c.message_count||0),0);const newStats={totalChannels:channels.length,activeChannels,totalMessages,totalUsers:0,totalBrands:0,totalAdmins:0,totalManagers:0,totalEmployees:0,pendingEmployeeRequests:0,totalRoles:0};// DİNAMİK: Permission-specific data\nif(user!==null&&user!==void 0&&(_user$permissions=user.permissions)!==null&&_user$permissions!==void 0&&_user$permissions.includes('users.manage')){// Super Admin sees everything - YENİ: Tek endpoint'ten tüm veriler\ntry{const dashboardStats=await systemAPI.getDashboardStats();// Dashboard stats'tan verileri al\nnewStats.totalUsers=dashboardStats.users.total;newStats.totalAdmins=dashboardStats.users.super_admins;newStats.totalManagers=dashboardStats.users.brand_managers;newStats.totalEmployees=dashboardStats.users.employees;newStats.totalBrands=dashboardStats.brands.total;newStats.pendingEmployeeRequests=dashboardStats.employee_requests.pending;newStats.totalRoles=dashboardStats.roles.total;// Kanal istatistikleri\nnewStats.totalChannels=dashboardStats.channels.total;newStats.activeChannels=dashboardStats.channels.active;newStats.totalMessages=dashboardStats.channels.total_messages;// Ürün ve depolama istatistikleri\nnewStats.totalProducts=dashboardStats.products.total;newStats.totalFiles=dashboardStats.products.total_files;newStats.totalStorageGB=dashboardStats.products.total_storage_gb;// System stats'ı da yükle (opsiyonel)\ntry{const sysStats=await systemAPI.getStats();setSystemStats(sysStats);}catch(err){console.warn('System stats yüklenemedi:',err);}}catch(error){console.error('Dashboard stats yüklenemedi:',error);toast.error('İstatistikler yüklenirken hata oluştu');}}else if(user!==null&&user!==void 0&&user.brand_ids&&user.brand_ids.length>0){var _user$brand_ids;// DİNAMİK: Brand manager sees their brands only\nnewStats.totalBrands=((_user$brand_ids=user.brand_ids)===null||_user$brand_ids===void 0?void 0:_user$brand_ids.length)||0;newStats.totalUsers=0;// Load manager-specific data\ntry{const brandsResponse=await brandsAPI.getBrands(1,1000);const filteredBrands=brandsResponse.brands.filter(b=>user.brand_ids&&user.brand_ids.includes(b.id));setManagerData({brands:filteredBrands,employees:[]});}catch(error){console.error('Error loading manager data:',error);}// Count channels they manage\nnewStats.myChannels=channels.filter(c=>c.created_by===user.id).length;}else{// DİNAMİK: Employee sees only assigned channels\nnewStats.assignedChannels=channels.length;newStats.myChannels=channels.filter(c=>c.created_by===user.id).length;}setStats(newStats);// Set recent channels (max 5)\nsetRecentChannels(channels.slice(0,5));}catch(error){console.error('Error loading dashboard data:',error);toast.error('Veriler yüklenirken bir hata oluştu');}finally{if(isMounted){setLoading(false);}}};if(user){loadDashboardData();}// Cleanup function\nreturn()=>{isMounted=false;};},[user===null||user===void 0?void 0:user.id,user===null||user===void 0?void 0:(_user$permissions2=user.permissions)===null||_user$permissions2===void 0?void 0:_user$permissions2.length,authLoading]);// sadece ID ve permission count değişince çalışsın\n// Redirect if not logged in\nuseEffect(()=>{if(!authLoading&&!user){navigate('/login');}},[authLoading,user,navigate]);// Welcome message based on role\nconst welcomeMessage=useMemo(()=>{var _user$permissions3;if(!user)return'';const timeOfDay=new Date().getHours();const greeting=timeOfDay<12?'Günaydın':timeOfDay<18?'İyi günler':'İyi akşamlar';// DİNAMİK: Permission bazlı karşılama mesajı\nif(user!==null&&user!==void 0&&(_user$permissions3=user.permissions)!==null&&_user$permissions3!==void 0&&_user$permissions3.includes('users.manage')){return\"\".concat(greeting,\", \").concat(user.first_name,\"! Sisteme ho\\u015F geldiniz.\");}else if(user!==null&&user!==void 0&&user.brand_ids&&user.brand_ids.length>0){return\"\".concat(greeting,\", \").concat(user.first_name,\"! Ma\\u011Faza y\\xF6netimi panelinize ho\\u015F geldiniz.\");}else{return\"\".concat(greeting,\", \").concat(user.first_name,\"! \\xC7al\\u0131\\u015Fma panelinize ho\\u015F geldiniz.\");}},[user]);// Stat Card Component\nconst StatCard=_ref=>{let{title,value,subtitle,icon,color,trend,onClick}=_ref;return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-sm border border-gray-100 p-6 hover:shadow-lg hover:scale-105 transition-all duration-300 \".concat(onClick?'cursor-pointer':'',\" group\"),onClick:onClick,children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-600 group-hover:text-gray-700 transition-colors\",children:title}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mt-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-gray-900\",children:typeof value==='number'?value.toLocaleString('tr-TR'):value}),trend&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-xs px-2 py-1 rounded-full \".concat(trend==='up'?'bg-green-100 text-green-700':trend==='down'?'bg-red-100 text-red-700':'bg-gray-100 text-gray-700'),children:[trend==='up'&&/*#__PURE__*/_jsx(TrendingUp,{size:12}),trend==='down'&&/*#__PURE__*/_jsx(TrendingUp,{size:12,className:\"rotate-180\"}),trend==='stable'&&'—']})]}),subtitle&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-1\",children:subtitle})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded-lg \".concat(color,\" group-hover:scale-110 transition-transform duration-300\"),children:icon})]})});};if(authLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Giri\\u015F kontrol ediliyor...\"})]})});}// DİNAMİK: brand_ids varsa özel dashboard göster\nif(user!==null&&user!==void 0&&user.brand_ids&&user.brand_ids.length>0&&!(user!==null&&user!==void 0&&(_user$permissions4=user.permissions)!==null&&_user$permissions4!==void 0&&_user$permissions4.includes('users.manage'))){return/*#__PURE__*/_jsx(BrandManagerDashboard,{});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6 p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl shadow-sm p-4 animate-fade-in\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"hidden md:flex flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-white bg-opacity-20 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(BarChart3,{size:24,className:\"text-white\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold text-white mb-1\",children:welcomeMessage}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-blue-100\",children:[(user===null||user===void 0?void 0:(_user$permissions5=user.permissions)===null||_user$permissions5===void 0?void 0:_user$permissions5.includes('users.manage'))&&'Sistem yönetimi',(user===null||user===void 0?void 0:(_user$permissions6=user.permissions)===null||_user$permissions6===void 0?void 0:_user$permissions6.includes('brands.manage'))&&'Marka yönetimi',!(user!==null&&user!==void 0&&(_user$permissions7=user.permissions)!==null&&_user$permissions7!==void 0&&_user$permissions7.includes('users.manage'))&&!(user!==null&&user!==void 0&&(_user$permissions8=user.permissions)!==null&&_user$permissions8!==void 0&&_user$permissions8.includes('brands.manage'))&&'Kanal yönetimi']})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\",children:[(user===null||user===void 0?void 0:(_user$permissions9=user.permissions)===null||_user$permissions9===void 0?void 0:_user$permissions9.includes('users.manage'))&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-slide-up stagger-1\",children:/*#__PURE__*/_jsx(StatCard,{title:\"Toplam Admin\",value:stats.totalAdmins,subtitle:\"sistem y\\xF6neticileri\",icon:/*#__PURE__*/_jsx(Shield,{className:\"h-6 w-6 text-red-600\"}),color:\"bg-red-100\",trend:\"stable\",onClick:()=>navigate('/admin/users')})}),/*#__PURE__*/_jsx(\"div\",{className:\"animate-slide-up stagger-2\",children:/*#__PURE__*/_jsx(StatCard,{title:\"Ma\\u011Faza Y\\xF6neticileri\",value:stats.totalManagers,subtitle:\"ma\\u011Faza y\\xF6neticisi say\\u0131s\\u0131\",icon:/*#__PURE__*/_jsx(UserCheck,{className:\"h-6 w-6 text-blue-600\"}),color:\"bg-blue-100\",trend:\"up\",onClick:()=>navigate('/admin/users')})}),/*#__PURE__*/_jsx(\"div\",{className:\"animate-slide-up stagger-3\",children:/*#__PURE__*/_jsx(StatCard,{title:\"Toplam \\xC7al\\u0131\\u015Fan\",value:stats.totalEmployees,subtitle:\"sistem \\xE7al\\u0131\\u015Fanlar\\u0131\",icon:/*#__PURE__*/_jsx(Users,{className:\"h-6 w-6 text-purple-600\"}),color:\"bg-purple-100\",trend:\"up\",onClick:()=>navigate('/admin/users')})}),/*#__PURE__*/_jsx(\"div\",{className:\"animate-slide-up stagger-4\",children:/*#__PURE__*/_jsx(StatCard,{title:\"Toplam Marka\",value:stats.totalBrands,subtitle:\"kay\\u0131tl\\u0131 markalar\",icon:/*#__PURE__*/_jsx(Building2,{className:\"h-6 w-6 text-green-600\"}),color:\"bg-green-100\",trend:\"stable\",onClick:()=>navigate('/admin/brands')})}),/*#__PURE__*/_jsx(\"div\",{className:\"animate-slide-up stagger-6\",children:/*#__PURE__*/_jsx(StatCard,{title:\"Toplam Kanal\",value:stats.totalChannels,subtitle:\"Telegram kanallar\\u0131\",icon:/*#__PURE__*/_jsx(MessageCircle,{className:\"h-6 w-6 text-cyan-600\"}),color:\"bg-cyan-100\",trend:\"up\",onClick:()=>navigate('/admin/social-media/channels')})}),/*#__PURE__*/_jsx(\"div\",{className:\"animate-slide-up stagger-7\",children:/*#__PURE__*/_jsx(StatCard,{title:\"Aktif Kanallar\",value:stats.activeChannels,subtitle:\"mesaj g\\xF6ndermeye haz\\u0131r\",icon:/*#__PURE__*/_jsx(CheckCircle,{className:\"h-6 w-6 text-emerald-600\"}),color:\"bg-emerald-100\",trend:\"stable\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"animate-slide-up stagger-8\",children:/*#__PURE__*/_jsx(StatCard,{title:\"Bekleyen Talep\",value:stats.pendingEmployeeRequests,subtitle:\"\\xE7al\\u0131\\u015Fan talepleri\",icon:/*#__PURE__*/_jsx(Clock,{className:\"h-6 w-6 text-orange-600\"}),color:\"bg-orange-100\",trend:stats.pendingEmployeeRequests>0?\"up\":\"stable\",onClick:()=>navigate('/admin/employee-requests')})}),/*#__PURE__*/_jsx(\"div\",{className:\"animate-slide-up stagger-9\",children:/*#__PURE__*/_jsx(StatCard,{title:\"Toplam Mesaj\",value:stats.totalMessages,subtitle:\"t\\xFCm kanallardaki mesajlar\",icon:/*#__PURE__*/_jsx(Activity,{className:\"h-6 w-6 text-indigo-600\"}),color:\"bg-indigo-100\",trend:\"up\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"animate-slide-up stagger-10\",children:/*#__PURE__*/_jsx(StatCard,{title:\"Toplam \\xDCr\\xFCn\",value:stats.totalProducts||0,subtitle:\"sistemdeki \\xFCr\\xFCnler\",icon:/*#__PURE__*/_jsx(Package,{className:\"h-6 w-6 text-pink-600\"}),color:\"bg-pink-100\",trend:\"up\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"animate-slide-up stagger-11\",children:/*#__PURE__*/_jsx(StatCard,{title:\"Toplam Depolama\",value:\"\".concat(stats.totalStorageGB||0,\" GB\"),subtitle:\"\".concat(stats.totalFiles||0,\" dosya\"),icon:/*#__PURE__*/_jsx(HardDrive,{className:\"h-6 w-6 text-teal-600\"}),color:\"bg-teal-100\",trend:\"stable\"})})]}),(user===null||user===void 0?void 0:(_user$permissions0=user.permissions)===null||_user$permissions0===void 0?void 0:_user$permissions0.includes('brands.manage'))&&!(user!==null&&user!==void 0&&(_user$permissions1=user.permissions)!==null&&_user$permissions1!==void 0&&_user$permissions1.includes('users.manage'))&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-slide-up stagger-1\",children:/*#__PURE__*/_jsx(StatCard,{title:\"Kanallar\\u0131m\",value:stats.totalChannels,subtitle:\"\".concat(stats.myChannels,\" kanal ben ekledim\"),icon:/*#__PURE__*/_jsx(MessageCircle,{className:\"h-6 w-6 text-blue-600\"}),color:\"bg-blue-100\",onClick:()=>navigate('/admin/social-media/channels')})}),/*#__PURE__*/_jsx(\"div\",{className:\"animate-slide-up stagger-2\",children:/*#__PURE__*/_jsx(StatCard,{title:\"Aktif Kanallar\",value:stats.activeChannels,subtitle:\"mesaj g\\xF6ndermeye haz\\u0131r\",icon:/*#__PURE__*/_jsx(CheckCircle,{className:\"h-6 w-6 text-green-600\"}),color:\"bg-green-100\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"animate-slide-up stagger-3\",children:/*#__PURE__*/_jsx(StatCard,{title:\"Markalar\\u0131m\",value:stats.totalBrands,subtitle:\"y\\xF6netti\\u011Fim markalar\",icon:/*#__PURE__*/_jsx(Building2,{className:\"h-6 w-6 text-purple-600\"}),color:\"bg-purple-100\",onClick:()=>navigate('/admin/brands')})}),/*#__PURE__*/_jsx(\"div\",{className:\"animate-slide-up stagger-4\",children:/*#__PURE__*/_jsx(StatCard,{title:\"Ekibim\",value:stats.totalEmployees,subtitle:\"markalar\\u0131mdaki kullan\\u0131c\\u0131lar\",icon:/*#__PURE__*/_jsx(Users,{className:\"h-6 w-6 text-orange-600\"}),color:\"bg-orange-100\",onClick:()=>navigate('/admin/my-employees')})}),/*#__PURE__*/_jsx(\"div\",{className:\"animate-slide-up stagger-5\",children:/*#__PURE__*/_jsx(StatCard,{title:\"Toplam Mesaj\",value:stats.totalMessages,subtitle:\"g\\xF6nderilen mesajlar\",icon:/*#__PURE__*/_jsx(Activity,{className:\"h-6 w-6 text-indigo-600\"}),color:\"bg-indigo-100\"})})]}),!(user!==null&&user!==void 0&&(_user$permissions10=user.permissions)!==null&&_user$permissions10!==void 0&&_user$permissions10.includes('users.manage'))&&!(user!==null&&user!==void 0&&(_user$permissions11=user.permissions)!==null&&_user$permissions11!==void 0&&_user$permissions11.includes('brands.manage'))&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-slide-up stagger-1\",children:/*#__PURE__*/_jsx(StatCard,{title:\"Atanan Kanallar\",value:(_stats$assignedChanne=stats.assignedChannels)!==null&&_stats$assignedChanne!==void 0?_stats$assignedChanne:0,subtitle:\"eri\\u015Febilece\\u011Fim kanallar\",icon:/*#__PURE__*/_jsx(MessageCircle,{className:\"h-6 w-6 text-blue-600\"}),color:\"bg-blue-100\",onClick:()=>navigate('/admin/social-media/channels')})}),/*#__PURE__*/_jsx(\"div\",{className:\"animate-slide-up stagger-2\",children:/*#__PURE__*/_jsx(StatCard,{title:\"Aktif Kanallar\",value:stats.activeChannels,subtitle:\"mesaj g\\xF6nderebilirim\",icon:/*#__PURE__*/_jsx(CheckCircle,{className:\"h-6 w-6 text-green-600\"}),color:\"bg-green-100\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"animate-slide-up stagger-3\",children:/*#__PURE__*/_jsx(StatCard,{title:\"Toplam Mesaj\",value:stats.totalMessages,subtitle:\"kanallardaki mesajlar\",icon:/*#__PURE__*/_jsx(Activity,{className:\"h-6 w-6 text-purple-600\"}),color:\"bg-purple-100\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"animate-slide-up stagger-4\",children:/*#__PURE__*/_jsx(StatCard,{title:\"Ekledi\\u011Fim Kanallar\",value:(_stats$myChannels=stats.myChannels)!==null&&_stats$myChannels!==void 0?_stats$myChannels:0,subtitle:\"ben ekledim\",icon:/*#__PURE__*/_jsx(Package,{className:\"h-6 w-6 text-orange-600\"}),color:\"bg-orange-100\"})})]})]}),(user===null||user===void 0?void 0:(_user$permissions12=user.permissions)===null||_user$permissions12===void 0?void 0:_user$permissions12.includes('users.manage'))&&systemStats&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card bg-gradient-to-br from-blue-50 to-blue-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-blue-500 rounded-lg\",children:/*#__PURE__*/_jsx(Cpu,{size:24,className:\"text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-blue-600 font-medium\",children:\"CPU Kullan\\u0131m\\u0131\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-blue-900\",children:[(_systemStats$cpu=systemStats.cpu)===null||_systemStats$cpu===void 0?void 0:(_systemStats$cpu$usag=_systemStats$cpu.usage_percent)===null||_systemStats$cpu$usag===void 0?void 0:_systemStats$cpu$usag.toFixed(1),\"%\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-blue-200 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-600 h-2 rounded-full transition-all duration-500\",style:{width:\"\".concat((_systemStats$cpu2=systemStats.cpu)===null||_systemStats$cpu2===void 0?void 0:_systemStats$cpu2.usage_percent,\"%\")}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card bg-gradient-to-br from-green-50 to-green-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-green-500 rounded-lg\",children:/*#__PURE__*/_jsx(HardDrive,{size:24,className:\"text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-green-600 font-medium\",children:\"RAM Kullan\\u0131m\\u0131\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-green-900\",children:[(_systemStats$memory=systemStats.memory)===null||_systemStats$memory===void 0?void 0:(_systemStats$memory$u=_systemStats$memory.usage_percent)===null||_systemStats$memory$u===void 0?void 0:_systemStats$memory$u.toFixed(1),\"%\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-green-200 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-600 h-2 rounded-full transition-all duration-500\",style:{width:\"\".concat((_systemStats$memory2=systemStats.memory)===null||_systemStats$memory2===void 0?void 0:_systemStats$memory2.usage_percent,\"%\")}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card bg-gradient-to-br from-purple-50 to-purple-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-purple-500 rounded-lg\",children:/*#__PURE__*/_jsx(Monitor,{size:24,className:\"text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-purple-600 font-medium\",children:\"Disk Kullan\\u0131m\\u0131\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-purple-900\",children:[(_systemStats$disk=systemStats.disk)===null||_systemStats$disk===void 0?void 0:(_systemStats$disk$usa=_systemStats$disk.usage_percent)===null||_systemStats$disk$usa===void 0?void 0:_systemStats$disk$usa.toFixed(1),\"%\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-purple-200 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-purple-600 h-2 rounded-full transition-all duration-500\",style:{width:\"\".concat((_systemStats$disk2=systemStats.disk)===null||_systemStats$disk2===void 0?void 0:_systemStats$disk2.usage_percent,\"%\")}})})]})]}),recentChannels.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900\",children:\"Son Kanallar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/admin/social-media/channels'),className:\"text-sm text-blue-600 hover:text-blue-700 font-medium\",children:\"T\\xFCm\\xFCn\\xFC G\\xF6r \\u2192\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:recentChannels.map(channel=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer\",onClick:()=>navigate(\"/admin/social-media/channels/\".concat(channel.id)),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 rounded-lg flex items-center justify-center \".concat(channel.is_active?'bg-green-100':'bg-gray-200'),children:/*#__PURE__*/_jsx(MessageCircle,{size:24,className:channel.is_active?'text-green-600':'text-gray-400'})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-gray-900\",children:channel.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:channel.brand_name})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-6 text-sm text-gray-600\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Users,{size:16}),/*#__PURE__*/_jsx(\"span\",{children:channel.member_count||0})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Clock,{size:16}),/*#__PURE__*/_jsx(\"span\",{children:channel.last_activity?new Date(channel.last_activity).toLocaleDateString('tr-TR'):'Yok'})]}),channel.is_active?/*#__PURE__*/_jsx(CheckCircle,{size:20,className:\"text-green-500\"}):/*#__PURE__*/_jsx(AlertCircle,{size:20,className:\"text-gray-400\"})]})]},channel.id))})]}),(user===null||user===void 0?void 0:user.brand_ids)&&user.brand_ids.length>0&&managerData.brands.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-gray-900 mb-4\",children:\"Markalar\\u0131m\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:managerData.brands.slice(0,5).map(brand=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer\",onClick:()=>navigate('/admin/brands'),children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(Building2,{size:20,className:\"text-blue-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900\",children:brand.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:brand.description||'Açıklama yok'})]})]},brand.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-gray-900 mb-4\",children:\"Ekibim\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:managerData.employees.slice(0,5).map(employee=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer\",onClick:()=>navigate('/admin/my-employees'),children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(Users,{size:20,className:\"text-green-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-medium text-gray-900\",children:[employee.first_name,\" \",employee.last_name]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:employee.email})]})]},employee.id))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-900 mb-6\",children:\"H\\u0131zl\\u0131 \\u0130\\u015Flemler\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/admin/social-media/channels'),className:\"flex items-center gap-4 p-4 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors text-left\",children:[/*#__PURE__*/_jsx(MessageCircle,{size:24,className:\"text-blue-600\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-gray-900\",children:\"Kanallar\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Kanallar\\u0131 y\\xF6net\"})]})]}),((user===null||user===void 0?void 0:(_user$permissions13=user.permissions)===null||_user$permissions13===void 0?void 0:_user$permissions13.includes('users.manage'))||(user===null||user===void 0?void 0:(_user$permissions14=user.permissions)===null||_user$permissions14===void 0?void 0:_user$permissions14.includes('brands.manage')))&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/admin/users'),className:\"flex items-center gap-4 p-4 bg-green-50 hover:bg-green-100 rounded-lg transition-colors text-left\",children:[/*#__PURE__*/_jsx(Users,{size:24,className:\"text-green-600\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-gray-900\",children:\"Kullan\\u0131c\\u0131lar\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Kullan\\u0131c\\u0131lar\\u0131 y\\xF6net\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/admin/brands'),className:\"flex items-center gap-4 p-4 bg-purple-50 hover:bg-purple-100 rounded-lg transition-colors text-left\",children:[/*#__PURE__*/_jsx(Building2,{size:24,className:\"text-purple-600\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-gray-900\",children:\"Markalar\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Markalar\\u0131 y\\xF6net\"})]})]})]})]})]})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","useMemo","useAuth","useNavigate","Users","Building2","TrendingUp","Activity","Clock","Shield","UserCheck","Cpu","HardDrive","Monitor","MessageCircle","Package","CheckCircle","AlertCircle","BarChart3","socialMediaChannelsAPI","brandsAPI","systemAPI","BrandManagerDashboard","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Dashboard","_user$permissions2","_user$permissions4","_user$permissions5","_user$permissions6","_user$permissions7","_user$permissions8","_user$permissions9","_user$permissions0","_user$permissions1","_user$permissions10","_user$permissions11","_stats$assignedChanne","_stats$myChannels","_user$permissions12","_systemStats$cpu","_systemStats$cpu$usag","_systemStats$cpu2","_systemStats$memory","_systemStats$memory$u","_systemStats$memory2","_systemStats$disk","_systemStats$disk$usa","_systemStats$disk2","_user$permissions13","_user$permissions14","user","loading","authLoading","navigate","stats","setStats","totalChannels","activeChannels","totalMessages","totalUsers","totalBrands","totalAdmins","totalManagers","totalEmployees","pendingEmployeeRequests","totalRoles","setLoading","recentChannels","setRecentChannels","systemStats","setSystemStats","managerData","setManagerData","brands","employees","isMounted","loadDashboardData","permissions","_user$permissions","channelsResponse","getChannels","channels","filter","c","is_active","length","reduce","sum","message_count","newStats","includes","dashboardStats","getDashboardStats","users","total","super_admins","brand_managers","employee_requests","pending","roles","active","total_messages","totalProducts","products","totalFiles","total_files","totalStorageGB","total_storage_gb","sysStats","getStats","err","console","warn","error","brand_ids","_user$brand_ids","brandsResponse","getBrands","filteredBrands","b","id","myChannels","created_by","assignedChannels","slice","welcomeMessage","_user$permissions3","timeOfDay","Date","getHours","greeting","concat","first_name","StatCard","_ref","title","value","subtitle","icon","color","trend","onClick","className","children","toLocaleString","size","cpu","usage_percent","toFixed","style","width","memory","disk","map","channel","name","brand_name","member_count","last_activity","toLocaleDateString","brand","description","employee","last_name","email"],"sources":["C:/Users/ilker/Desktop/aibrands/frontend/src/pages/admin/Dashboard.tsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport { useAuth } from '../../hooks/useAuth';\nimport { useNavigate } from 'react-router-dom';\nimport {\n  Users, Building2, TrendingUp, Activity, Clock, Shield, UserCheck, \n  Cpu, HardDrive, Monitor, MessageCircle, Package, CheckCircle, \n  AlertCircle, BarChart3\n} from 'lucide-react';\nimport { socialMediaChannelsAPI } from '../../api/socialMediaChannels';\nimport { brandsAPI } from '../../api/brands';\nimport { usersAPI } from '../../api/users';\nimport { employeeRequestsAPI } from '../../api/employeeRequests';\nimport { rolesAPI } from '../../api/roles';\nimport { systemAPI } from '../../api/system';\nimport BrandManagerDashboard from './BrandManagerDashboard';\nimport toast from 'react-hot-toast';\nimport '../../animations.css';\n\ninterface DashboardStats {\n  totalChannels: number;\n  activeChannels: number;\n  totalMessages: number;\n  totalUsers: number;\n  totalBrands: number;\n  totalAdmins: number;\n  totalManagers: number;\n  totalEmployees: number;\n  pendingEmployeeRequests: number;\n  totalRoles: number;\n  totalProducts?: number;\n  totalFiles?: number;\n  totalStorageGB?: number;\n  myChannels?: number;\n  assignedChannels?: number;\n}\n\nconst Dashboard: React.FC = () => {\n  const { user, loading: authLoading } = useAuth();\n  const navigate = useNavigate();\n  const [stats, setStats] = useState<DashboardStats>({\n    totalChannels: 0,\n    activeChannels: 0,\n    totalMessages: 0,\n    totalUsers: 0,\n    totalBrands: 0,\n    totalAdmins: 0,\n    totalManagers: 0,\n    totalEmployees: 0,\n    pendingEmployeeRequests: 0,\n    totalRoles: 0\n  });\n  const [loading, setLoading] = useState(false); // BAŞLANGIÇTA FALSE\n  const [recentChannels, setRecentChannels] = useState<any[]>([]);\n  const [systemStats, setSystemStats] = useState<any>(null);\n  const [managerData, setManagerData] = useState<any>({ brands: [], employees: [] });\n\n  // Load dashboard data based on role\n  useEffect(() => {\n    let isMounted = true; // Race condition kontrolü\n    \n    const loadDashboardData = async () => {\n      if (!user || authLoading) return;\n      \n      // Permissions kontrolü\n      if (!user.permissions) {\n        return; // Permissions yüklenene kadar bekle\n      }\n\n      setLoading(true);\n      try {\n        // Load channels (filtered by role on backend)\n        const channelsResponse = await socialMediaChannelsAPI.getChannels(1, 100);\n        const channels = channelsResponse.channels;\n\n        // Calculate stats\n        const activeChannels = channels.filter((c: any) => c.is_active).length;\n        const totalMessages = channels.reduce((sum: number, c: any) => sum + (c.message_count || 0), 0);\n\n        const newStats: DashboardStats = {\n          totalChannels: channels.length,\n          activeChannels,\n          totalMessages,\n          totalUsers: 0,\n          totalBrands: 0,\n          totalAdmins: 0,\n          totalManagers: 0,\n          totalEmployees: 0,\n          pendingEmployeeRequests: 0,\n          totalRoles: 0\n        };\n\n        // DİNAMİK: Permission-specific data\n        if (user?.permissions?.includes('users.manage')) {\n          // Super Admin sees everything - YENİ: Tek endpoint'ten tüm veriler\n          try {\n            const dashboardStats = await systemAPI.getDashboardStats();\n            \n            // Dashboard stats'tan verileri al\n            newStats.totalUsers = dashboardStats.users.total;\n            newStats.totalAdmins = dashboardStats.users.super_admins;\n            newStats.totalManagers = dashboardStats.users.brand_managers;\n            newStats.totalEmployees = dashboardStats.users.employees;\n            newStats.totalBrands = dashboardStats.brands.total;\n            newStats.pendingEmployeeRequests = dashboardStats.employee_requests.pending;\n            newStats.totalRoles = dashboardStats.roles.total;\n            \n            // Kanal istatistikleri\n            newStats.totalChannels = dashboardStats.channels.total;\n            newStats.activeChannels = dashboardStats.channels.active;\n            newStats.totalMessages = dashboardStats.channels.total_messages;\n            \n            // Ürün ve depolama istatistikleri\n            newStats.totalProducts = dashboardStats.products.total;\n            newStats.totalFiles = dashboardStats.products.total_files;\n            newStats.totalStorageGB = dashboardStats.products.total_storage_gb;\n            \n            // System stats'ı da yükle (opsiyonel)\n            try {\n              const sysStats = await systemAPI.getStats();\n              setSystemStats(sysStats);\n            } catch (err) {\n              console.warn('System stats yüklenemedi:', err);\n            }\n            \n          } catch (error) {\n            console.error('Dashboard stats yüklenemedi:', error);\n            toast.error('İstatistikler yüklenirken hata oluştu');\n          }\n\n        } else if (user?.brand_ids && user.brand_ids.length > 0) {\n          // DİNAMİK: Brand manager sees their brands only\n          newStats.totalBrands = user.brand_ids?.length || 0;\n          newStats.totalUsers = 0;\n\n          // Load manager-specific data\n          try {\n            const brandsResponse = await brandsAPI.getBrands(1, 1000);\n            const filteredBrands = brandsResponse.brands.filter((b: any) =>\n              user.brand_ids && user.brand_ids.includes(b.id)\n            );\n            setManagerData({\n              brands: filteredBrands,\n              employees: []\n            });\n          } catch (error) {\n            console.error('Error loading manager data:', error);\n          }\n\n          // Count channels they manage\n          newStats.myChannels = channels.filter((c: any) => c.created_by === user.id).length;\n\n        } else {\n          // DİNAMİK: Employee sees only assigned channels\n          newStats.assignedChannels = channels.length;\n          newStats.myChannels = channels.filter((c: any) => c.created_by === user.id).length;\n        }\n\n        setStats(newStats);\n        \n        // Set recent channels (max 5)\n        setRecentChannels(channels.slice(0, 5));\n\n      } catch (error) {\n        console.error('Error loading dashboard data:', error);\n        toast.error('Veriler yüklenirken bir hata oluştu');\n      } finally {\n        if (isMounted) {\n          setLoading(false);\n        }\n      }\n    };\n\n    if (user) {\n      loadDashboardData();\n    }\n\n    // Cleanup function\n    return () => {\n      isMounted = false;\n    };\n  }, [user?.id, user?.permissions?.length, authLoading]); // sadece ID ve permission count değişince çalışsın\n\n  // Redirect if not logged in\n  useEffect(() => {\n    if (!authLoading && !user) {\n      navigate('/login');\n    }\n  }, [authLoading, user, navigate]);\n\n  // Welcome message based on role\n  const welcomeMessage = useMemo(() => {\n    if (!user) return '';\n\n    const timeOfDay = new Date().getHours();\n    const greeting = timeOfDay < 12 ? 'Günaydın' : timeOfDay < 18 ? 'İyi günler' : 'İyi akşamlar';\n\n    // DİNAMİK: Permission bazlı karşılama mesajı\n    if (user?.permissions?.includes('users.manage')) {\n      return `${greeting}, ${user.first_name}! Sisteme hoş geldiniz.`;\n    } else if (user?.brand_ids && user.brand_ids.length > 0) {\n      return `${greeting}, ${user.first_name}! Mağaza yönetimi panelinize hoş geldiniz.`;\n    } else {\n      return `${greeting}, ${user.first_name}! Çalışma panelinize hoş geldiniz.`;\n    }\n  }, [user]);\n\n  // Stat Card Component\n  const StatCard: React.FC<{\n    title: string;\n    value: number | string;\n    subtitle?: string;\n    icon: React.ReactNode;\n    color: string;\n    trend?: 'up' | 'down' | 'stable';\n    onClick?: () => void;\n  }> = ({ title, value, subtitle, icon, color, trend, onClick }) => (\n    <div \n      className={`bg-white rounded-xl shadow-sm border border-gray-100 p-6 hover:shadow-lg hover:scale-105 transition-all duration-300 ${onClick ? 'cursor-pointer' : ''} group`}\n      onClick={onClick}\n    >\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex-1\">\n          <p className=\"text-sm font-medium text-gray-600 group-hover:text-gray-700 transition-colors\">\n            {title}\n          </p>\n          <div className=\"flex items-center gap-2 mt-2\">\n            <p className=\"text-3xl font-bold text-gray-900\">\n              {typeof value === 'number' ? value.toLocaleString('tr-TR') : value}\n            </p>\n            {trend && (\n              <div className={`flex items-center text-xs px-2 py-1 rounded-full ${\n                trend === 'up' ? 'bg-green-100 text-green-700' :\n                trend === 'down' ? 'bg-red-100 text-red-700' :\n                'bg-gray-100 text-gray-700'\n              }`}>\n                {trend === 'up' && <TrendingUp size={12} />}\n                {trend === 'down' && <TrendingUp size={12} className=\"rotate-180\" />}\n                {trend === 'stable' && '—'}\n              </div>\n            )}\n          </div>\n          {subtitle && <p className=\"text-sm text-gray-500 mt-1\">{subtitle}</p>}\n        </div>\n        <div className={`p-3 rounded-lg ${color} group-hover:scale-110 transition-transform duration-300`}>\n          {icon}\n        </div>\n      </div>\n    </div>\n  );\n\n  if (authLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-center\">\n          <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mb-4\"></div>\n          <p className=\"text-gray-600\">Giriş kontrol ediliyor...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // DİNAMİK: brand_ids varsa özel dashboard göster\n  if (user?.brand_ids && user.brand_ids.length > 0 && !user?.permissions?.includes('users.manage')) {\n    return <BrandManagerDashboard />;\n  }\n\n  return (\n    <div className=\"space-y-6 p-6\">\n      {/* Welcome Section - Kompakt */}\n      <div className=\"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl shadow-sm p-4 animate-fade-in\">\n        <div className=\"flex items-center gap-4\">\n          {/* İkon - Küçültülmüş */}\n          <div className=\"hidden md:flex flex-shrink-0\">\n            <div className=\"w-12 h-12 bg-white bg-opacity-20 rounded-lg flex items-center justify-center\">\n              <BarChart3 size={24} className=\"text-white\" />\n            </div>\n          </div>\n          \n          {/* Metin - Kompakt */}\n          <div className=\"flex-1 min-w-0\">\n            <h1 className=\"text-xl font-bold text-white mb-1\">{welcomeMessage}</h1>\n            <p className=\"text-sm text-blue-100\">\n              {user?.permissions?.includes('users.manage') && 'Sistem yönetimi'}\n              {user?.permissions?.includes('brands.manage') && 'Marka yönetimi'}\n              {!user?.permissions?.includes('users.manage') && !user?.permissions?.includes('brands.manage') && 'Kanal yönetimi'}\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n        {user?.permissions?.includes('users.manage') && (\n          <>\n            <div className=\"animate-slide-up stagger-1\">\n              <StatCard\n                title=\"Toplam Admin\"\n                value={stats.totalAdmins}\n                subtitle=\"sistem yöneticileri\"\n                icon={<Shield className=\"h-6 w-6 text-red-600\" />}\n                color=\"bg-red-100\"\n                trend=\"stable\"\n                onClick={() => navigate('/admin/users')}\n              />\n            </div>\n\n            <div className=\"animate-slide-up stagger-2\">\n              <StatCard\n                title=\"Mağaza Yöneticileri\"\n                value={stats.totalManagers}\n                subtitle=\"mağaza yöneticisi sayısı\"\n                icon={<UserCheck className=\"h-6 w-6 text-blue-600\" />}\n                color=\"bg-blue-100\"\n                trend=\"up\"\n                onClick={() => navigate('/admin/users')}\n              />\n            </div>\n\n            <div className=\"animate-slide-up stagger-3\">\n              <StatCard\n                title=\"Toplam Çalışan\"\n                value={stats.totalEmployees}\n                subtitle=\"sistem çalışanları\"\n                icon={<Users className=\"h-6 w-6 text-purple-600\" />}\n                color=\"bg-purple-100\"\n                trend=\"up\"\n                onClick={() => navigate('/admin/users')}\n              />\n            </div>\n\n            <div className=\"animate-slide-up stagger-4\">\n              <StatCard\n                title=\"Toplam Marka\"\n                value={stats.totalBrands}\n                subtitle=\"kayıtlı markalar\"\n                icon={<Building2 className=\"h-6 w-6 text-green-600\" />}\n                color=\"bg-green-100\"\n                trend=\"stable\"\n                onClick={() => navigate('/admin/brands')}\n              />\n            </div>\n\n            <div className=\"animate-slide-up stagger-6\">\n              <StatCard\n                title=\"Toplam Kanal\"\n                value={stats.totalChannels}\n                subtitle=\"Telegram kanalları\"\n                icon={<MessageCircle className=\"h-6 w-6 text-cyan-600\" />}\n                color=\"bg-cyan-100\"\n                trend=\"up\"\n                onClick={() => navigate('/admin/social-media/channels')}\n              />\n            </div>\n\n            <div className=\"animate-slide-up stagger-7\">\n              <StatCard\n                title=\"Aktif Kanallar\"\n                value={stats.activeChannels}\n                subtitle=\"mesaj göndermeye hazır\"\n                icon={<CheckCircle className=\"h-6 w-6 text-emerald-600\" />}\n                color=\"bg-emerald-100\"\n                trend=\"stable\"\n              />\n            </div>\n\n            <div className=\"animate-slide-up stagger-8\">\n              <StatCard\n                title=\"Bekleyen Talep\"\n                value={stats.pendingEmployeeRequests}\n                subtitle=\"çalışan talepleri\"\n                icon={<Clock className=\"h-6 w-6 text-orange-600\" />}\n                color=\"bg-orange-100\"\n                trend={stats.pendingEmployeeRequests > 0 ? \"up\" : \"stable\"}\n                onClick={() => navigate('/admin/employee-requests')}\n              />\n            </div>\n\n            <div className=\"animate-slide-up stagger-9\">\n              <StatCard\n                title=\"Toplam Mesaj\"\n                value={stats.totalMessages}\n                subtitle=\"tüm kanallardaki mesajlar\"\n                icon={<Activity className=\"h-6 w-6 text-indigo-600\" />}\n                color=\"bg-indigo-100\"\n                trend=\"up\"\n              />\n            </div>\n\n            <div className=\"animate-slide-up stagger-10\">\n              <StatCard\n                title=\"Toplam Ürün\"\n                value={stats.totalProducts || 0}\n                subtitle=\"sistemdeki ürünler\"\n                icon={<Package className=\"h-6 w-6 text-pink-600\" />}\n                color=\"bg-pink-100\"\n                trend=\"up\"\n              />\n            </div>\n\n            <div className=\"animate-slide-up stagger-11\">\n              <StatCard\n                title=\"Toplam Depolama\"\n                value={`${stats.totalStorageGB || 0} GB`}\n                subtitle={`${stats.totalFiles || 0} dosya`}\n                icon={<HardDrive className=\"h-6 w-6 text-teal-600\" />}\n                color=\"bg-teal-100\"\n                trend=\"stable\"\n              />\n            </div>\n          </>\n        )}\n\n        {/* Mağaza Yöneticisi için kartlar - SADECE users.manage yetkisi OLMAYANLARA göster */}\n        {user?.permissions?.includes('brands.manage') && !user?.permissions?.includes('users.manage') && (\n          <>\n            <div className=\"animate-slide-up stagger-1\">\n              <StatCard\n                title=\"Kanallarım\"\n                value={stats.totalChannels}\n                subtitle={`${stats.myChannels} kanal ben ekledim`}\n                icon={<MessageCircle className=\"h-6 w-6 text-blue-600\" />}\n                color=\"bg-blue-100\"\n                onClick={() => navigate('/admin/social-media/channels')}\n              />\n            </div>\n\n            <div className=\"animate-slide-up stagger-2\">\n              <StatCard\n                title=\"Aktif Kanallar\"\n                value={stats.activeChannels}\n                subtitle=\"mesaj göndermeye hazır\"\n                icon={<CheckCircle className=\"h-6 w-6 text-green-600\" />}\n                color=\"bg-green-100\"\n              />\n            </div>\n\n            <div className=\"animate-slide-up stagger-3\">\n              <StatCard\n                title=\"Markalarım\"\n                value={stats.totalBrands}\n                subtitle=\"yönettiğim markalar\"\n                icon={<Building2 className=\"h-6 w-6 text-purple-600\" />}\n                color=\"bg-purple-100\"\n                onClick={() => navigate('/admin/brands')}\n              />\n            </div>\n\n            <div className=\"animate-slide-up stagger-4\">\n              <StatCard\n                title=\"Ekibim\"\n                value={stats.totalEmployees}\n                subtitle=\"markalarımdaki kullanıcılar\"\n                icon={<Users className=\"h-6 w-6 text-orange-600\" />}\n                color=\"bg-orange-100\"\n                onClick={() => navigate('/admin/my-employees')}\n              />\n            </div>\n\n            <div className=\"animate-slide-up stagger-5\">\n              <StatCard\n                title=\"Toplam Mesaj\"\n                value={stats.totalMessages}\n                subtitle=\"gönderilen mesajlar\"\n                icon={<Activity className=\"h-6 w-6 text-indigo-600\" />}\n                color=\"bg-indigo-100\"\n              />\n            </div>\n          </>\n        )}\n\n        {!user?.permissions?.includes('users.manage') && !user?.permissions?.includes('brands.manage') && (\n          <>\n            <div className=\"animate-slide-up stagger-1\">\n              <StatCard\n                title=\"Atanan Kanallar\"\n                value={stats.assignedChannels ?? 0}\n                subtitle=\"erişebileceğim kanallar\"\n                icon={<MessageCircle className=\"h-6 w-6 text-blue-600\" />}\n                color=\"bg-blue-100\"\n                onClick={() => navigate('/admin/social-media/channels')}\n              />\n            </div>\n\n            <div className=\"animate-slide-up stagger-2\">\n              <StatCard\n                title=\"Aktif Kanallar\"\n                value={stats.activeChannels}\n                subtitle=\"mesaj gönderebilirim\"\n                icon={<CheckCircle className=\"h-6 w-6 text-green-600\" />}\n                color=\"bg-green-100\"\n              />\n            </div>\n\n            <div className=\"animate-slide-up stagger-3\">\n              <StatCard\n                title=\"Toplam Mesaj\"\n                value={stats.totalMessages}\n                subtitle=\"kanallardaki mesajlar\"\n                icon={<Activity className=\"h-6 w-6 text-purple-600\" />}\n                color=\"bg-purple-100\"\n              />\n            </div>\n\n            <div className=\"animate-slide-up stagger-4\">\n              <StatCard\n                title=\"Eklediğim Kanallar\"\n                value={stats.myChannels ?? 0}\n                subtitle=\"ben ekledim\"\n                icon={<Package className=\"h-6 w-6 text-orange-600\" />}\n                color=\"bg-orange-100\"\n              />\n            </div>\n          </>\n        )}\n      </div>\n\n      {/* System Stats - Super Admin Only */}\n      {user?.permissions?.includes('users.manage') && systemStats && (\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n          <div className=\"card bg-gradient-to-br from-blue-50 to-blue-100\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div className=\"p-3 bg-blue-500 rounded-lg\">\n                <Cpu size={24} className=\"text-white\" />\n              </div>\n              <div className=\"text-right\">\n                <p className=\"text-sm text-blue-600 font-medium\">CPU Kullanımı</p>\n                <p className=\"text-2xl font-bold text-blue-900\">{systemStats.cpu?.usage_percent?.toFixed(1)}%</p>\n              </div>\n            </div>\n            <div className=\"w-full bg-blue-200 rounded-full h-2\">\n              <div \n                className=\"bg-blue-600 h-2 rounded-full transition-all duration-500\"\n                style={{ width: `${systemStats.cpu?.usage_percent}%` }}\n              />\n            </div>\n          </div>\n\n          <div className=\"card bg-gradient-to-br from-green-50 to-green-100\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div className=\"p-3 bg-green-500 rounded-lg\">\n                <HardDrive size={24} className=\"text-white\" />\n              </div>\n              <div className=\"text-right\">\n                <p className=\"text-sm text-green-600 font-medium\">RAM Kullanımı</p>\n                <p className=\"text-2xl font-bold text-green-900\">{systemStats.memory?.usage_percent?.toFixed(1)}%</p>\n              </div>\n            </div>\n            <div className=\"w-full bg-green-200 rounded-full h-2\">\n              <div \n                className=\"bg-green-600 h-2 rounded-full transition-all duration-500\"\n                style={{ width: `${systemStats.memory?.usage_percent}%` }}\n              />\n            </div>\n          </div>\n\n          <div className=\"card bg-gradient-to-br from-purple-50 to-purple-100\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div className=\"p-3 bg-purple-500 rounded-lg\">\n                <Monitor size={24} className=\"text-white\" />\n              </div>\n              <div className=\"text-right\">\n                <p className=\"text-sm text-purple-600 font-medium\">Disk Kullanımı</p>\n                <p className=\"text-2xl font-bold text-purple-900\">{systemStats.disk?.usage_percent?.toFixed(1)}%</p>\n              </div>\n            </div>\n            <div className=\"w-full bg-purple-200 rounded-full h-2\">\n              <div \n                className=\"bg-purple-600 h-2 rounded-full transition-all duration-500\"\n                style={{ width: `${systemStats.disk?.usage_percent}%` }}\n              />\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Recent Channels */}\n      {recentChannels.length > 0 && (\n        <div className=\"card\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <h2 className=\"text-xl font-bold text-gray-900\">Son Kanallar</h2>\n            <button\n              onClick={() => navigate('/admin/social-media/channels')}\n              className=\"text-sm text-blue-600 hover:text-blue-700 font-medium\"\n            >\n              Tümünü Gör →\n            </button>\n          </div>\n\n          <div className=\"space-y-4\">\n            {recentChannels.map((channel) => (\n              <div\n                key={channel.id}\n                className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer\"\n                onClick={() => navigate(`/admin/social-media/channels/${channel.id}`)}\n              >\n                <div className=\"flex items-center gap-4\">\n                  <div className={`w-12 h-12 rounded-lg flex items-center justify-center ${\n                    channel.is_active ? 'bg-green-100' : 'bg-gray-200'\n                  }`}>\n                    <MessageCircle \n                      size={24} \n                      className={channel.is_active ? 'text-green-600' : 'text-gray-400'} \n                    />\n                  </div>\n                  <div>\n                    <h3 className=\"font-medium text-gray-900\">{channel.name}</h3>\n                    <p className=\"text-sm text-gray-600\">{channel.brand_name}</p>\n                  </div>\n                </div>\n\n                <div className=\"flex items-center gap-6 text-sm text-gray-600\">\n                  <div className=\"flex items-center gap-2\">\n                    <Users size={16} />\n                    <span>{channel.member_count || 0}</span>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <Clock size={16} />\n                    <span>\n                      {channel.last_activity \n                        ? new Date(channel.last_activity).toLocaleDateString('tr-TR')\n                        : 'Yok'\n                      }\n                    </span>\n                  </div>\n                  {channel.is_active ? (\n                    <CheckCircle size={20} className=\"text-green-500\" />\n                  ) : (\n                    <AlertCircle size={20} className=\"text-gray-400\" />\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Manager's Brands & Employees - DİNAMİK: brand_ids varsa göster */}\n      {user?.brand_ids && user.brand_ids.length > 0 && managerData.brands.length > 0 && (\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          {/* Brands */}\n          <div className=\"card\">\n            <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Markalarım</h3>\n            <div className=\"space-y-3\">\n              {managerData.brands.slice(0, 5).map((brand: any) => (\n                <div \n                  key={brand.id}\n                  className=\"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer\"\n                  onClick={() => navigate('/admin/brands')}\n                >\n                  <div className=\"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center\">\n                    <Building2 size={20} className=\"text-blue-600\" />\n                  </div>\n                  <div className=\"flex-1\">\n                    <p className=\"font-medium text-gray-900\">{brand.name}</p>\n                    <p className=\"text-sm text-gray-600\">{brand.description || 'Açıklama yok'}</p>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Employees */}\n          <div className=\"card\">\n            <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Ekibim</h3>\n            <div className=\"space-y-3\">\n              {managerData.employees.slice(0, 5).map((employee: any) => (\n                <div \n                  key={employee.id}\n                  className=\"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer\"\n                  onClick={() => navigate('/admin/my-employees')}\n                >\n                  <div className=\"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center\">\n                    <Users size={20} className=\"text-green-600\" />\n                  </div>\n                  <div className=\"flex-1\">\n                    <p className=\"font-medium text-gray-900\">{employee.first_name} {employee.last_name}</p>\n                    <p className=\"text-sm text-gray-600\">{employee.email}</p>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Quick Actions */}\n      <div className=\"card\">\n        <h2 className=\"text-xl font-bold text-gray-900 mb-6\">Hızlı İşlemler</h2>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n          <button\n            onClick={() => navigate('/admin/social-media/channels')}\n            className=\"flex items-center gap-4 p-4 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors text-left\"\n          >\n            <MessageCircle size={24} className=\"text-blue-600\" />\n            <div>\n              <h3 className=\"font-medium text-gray-900\">Kanallar</h3>\n              <p className=\"text-sm text-gray-600\">Kanalları yönet</p>\n            </div>\n          </button>\n\n          {(user?.permissions?.includes('users.manage') || user?.permissions?.includes('brands.manage')) && (\n            <>\n              <button\n                onClick={() => navigate('/admin/users')}\n                className=\"flex items-center gap-4 p-4 bg-green-50 hover:bg-green-100 rounded-lg transition-colors text-left\"\n              >\n                <Users size={24} className=\"text-green-600\" />\n                <div>\n                  <h3 className=\"font-medium text-gray-900\">Kullanıcılar</h3>\n                  <p className=\"text-sm text-gray-600\">Kullanıcıları yönet</p>\n                </div>\n              </button>\n\n              <button\n                onClick={() => navigate('/admin/brands')}\n                className=\"flex items-center gap-4 p-4 bg-purple-50 hover:bg-purple-100 rounded-lg transition-colors text-left\"\n              >\n                <Building2 size={24} className=\"text-purple-600\" />\n                <div>\n                  <h3 className=\"font-medium text-gray-900\">Markalar</h3>\n                  <p className=\"text-sm text-gray-600\">Markaları yönet</p>\n                </div>\n              </button>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}