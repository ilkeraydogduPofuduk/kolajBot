{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ilker\\\\Desktop\\\\aibrands\\\\frontend\\\\src\\\\components\\\\template\\\\CanvaLikeEditor.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\n// @ts-ignore - Fabric.js import\nimport * as fabric from 'fabric';\nimport toast from 'react-hot-toast';\n\n// Import modular components\nimport Toolbar from './editor/Toolbar';\nimport PropertiesPanel from './editor/PropertiesPanel';\nimport LayersPanel from './editor/LayersPanel';\nimport Canvas from './editor/Canvas';\nimport AIModal from './editor/AIModal';\nimport PlaceholderSystem from './editor/PlaceholderSystem';\nimport TemplateCategories from './editor/TemplateCategories';\nimport BrandAssignment from './editor/BrandAssignment';\nimport DataBindingSystem from './editor/DataBindingSystem';\nimport TemplatePreview from './editor/TemplatePreview';\nimport UsageGuide from './editor/UsageGuide';\nimport AdvancedTools from './editor/AdvancedTools';\nimport { aiTemplateService } from '../../services/aiTemplateService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CanvaLikeEditor = ({\n  initialTemplate,\n  onSave,\n  onClose\n}) => {\n  _s();\n  // Canvas state\n  const [canvas, setCanvas] = useState(null);\n  const [selectedObject, setSelectedObject] = useState(null);\n  const [layers, setLayers] = useState([]);\n\n  // Tool states\n  const [activeTool, setActiveTool] = useState('select');\n  const [zoom, setZoom] = useState(1);\n\n  // Object properties\n  const [textColor, setTextColor] = useState('#000000');\n  const [fillColor, setFillColor] = useState('#3B82F6');\n  const [strokeColor, setStrokeColor] = useState('#000000');\n  const [strokeWidth, setStrokeWidth] = useState(2);\n  const [fontSize, setFontSize] = useState(24);\n  const [fontFamily, setFontFamily] = useState('Arial');\n  const [opacity, setOpacity] = useState(1);\n  const [rotation, setRotation] = useState(0);\n  const [scaleX, setScaleX] = useState(1);\n  const [scaleY, setScaleY] = useState(1);\n\n  // Shadow properties\n  const [shadowColor, setShadowColor] = useState('#000000');\n  const [shadowBlur, setShadowBlur] = useState(0);\n  const [shadowOffsetX, setShadowOffsetX] = useState(0);\n  const [shadowOffsetY, setShadowOffsetY] = useState(0);\n\n  // Border properties\n  const [borderRadius, setBorderRadius] = useState(0);\n\n  // Template state\n  const [templateName, setTemplateName] = useState('Yeni Şablon');\n\n  // History for undo/redo\n  const [history, setHistory] = useState([]);\n  const [historyIndex, setHistoryIndex] = useState(-1);\n\n  // AI state\n  const [showAIModal, setShowAIModal] = useState(false);\n  const [isAIGenerating, setIsAIGenerating] = useState(false);\n\n  // Usage guide state\n  const [showUsageGuide, setShowUsageGuide] = useState(false);\n\n  // Template system state\n  const [activePanel, setActivePanel] = useState('layers');\n  const [selectedCategory, setSelectedCategory] = useState('ecommerce');\n  const [selectedSubcategory, setSelectedSubcategory] = useState('');\n  const [placeholders, setPlaceholders] = useState([]);\n  const [selectedBrands, setSelectedBrands] = useState([]);\n  const [previewData, setPreviewData] = useState({});\n  const [templateId, setTemplateId] = useState(`template-${Date.now()}`);\n\n  // Auto-save\n  const autoSaveIntervalRef = useRef(undefined);\n\n  // Canvas dimensions\n  const canvasWidth = 720;\n  const canvasHeight = 1280;\n\n  // Initialize canvas\n  const handleCanvasReady = useCallback(fabricCanvas => {\n    setCanvas(fabricCanvas);\n    saveToHistory(fabricCanvas);\n  }, []);\n\n  // Save to history for undo/redo\n  const saveToHistory = useCallback(fabricCanvas => {\n    const state = JSON.stringify(fabricCanvas.toJSON());\n    setHistory(prev => {\n      const newHistory = prev.slice(0, historyIndex + 1);\n      newHistory.push(state);\n      return newHistory.slice(-50); // Keep last 50 states\n    });\n    setHistoryIndex(prev => prev + 1);\n  }, [historyIndex]);\n\n  // Update layers when canvas changes\n  const updateLayers = useCallback(fabricCanvas => {\n    const objects = fabricCanvas.getObjects();\n    const newLayers = objects.map((obj, index) => ({\n      id: obj.id || `layer-${index}`,\n      name: obj.name || `${obj.type} ${index + 1}`,\n      type: obj.type || 'unknown',\n      visible: obj.visible !== false,\n      locked: obj.selectable === false,\n      opacity: obj.opacity || 1,\n      order: index\n    }));\n    setLayers(newLayers);\n  }, []);\n\n  // Handle object selection\n  const handleObjectSelect = useCallback(object => {\n    setSelectedObject(object);\n    if (object) {\n      setTextColor(object.fill || '#000000');\n      setFillColor(object.fill || '#3B82F6');\n      setStrokeColor(object.stroke || '#000000');\n      setStrokeWidth(object.strokeWidth || 2);\n      setFontSize(object.fontSize || 24);\n      setFontFamily(object.fontFamily || 'Arial');\n      setOpacity(object.opacity || 1);\n      setRotation(object.angle || 0);\n      setScaleX(object.scaleX || 1);\n      setScaleY(object.scaleY || 1);\n    }\n  }, []);\n  const handleObjectDeselect = useCallback(() => {\n    setSelectedObject(null);\n  }, []);\n  const handleObjectModified = useCallback(() => {\n    if (canvas) {\n      updateLayers(canvas);\n      saveToHistory(canvas);\n    }\n  }, [canvas, updateLayers, saveToHistory]);\n  const handleObjectAdded = useCallback(() => {\n    if (canvas) {\n      updateLayers(canvas);\n      saveToHistory(canvas);\n    }\n  }, [canvas, updateLayers, saveToHistory]);\n  const handleObjectRemoved = useCallback(() => {\n    if (canvas) {\n      updateLayers(canvas);\n      saveToHistory(canvas);\n    }\n  }, [canvas, updateLayers, saveToHistory]);\n\n  // Toolbar handlers\n  const handleSave = useCallback(() => {\n    if (!canvas) return;\n    const templateData = {\n      name: templateName,\n      canvas_data: canvas.toJSON(),\n      created_at: new Date().toISOString(),\n      updated_at: new Date().toISOString()\n    };\n    onSave === null || onSave === void 0 ? void 0 : onSave(templateData);\n    toast.success('Şablon kaydedildi!');\n  }, [canvas, templateName, onSave]);\n  const handleCanvasExport = useCallback(() => {\n    if (!canvas) return;\n    const dataURL = canvas.toDataURL({\n      format: 'png',\n      quality: 1,\n      multiplier: 2\n    });\n    const link = document.createElement('a');\n    link.download = `${templateName}.png`;\n    link.href = dataURL;\n    link.click();\n    toast.success('Şablon dışa aktarıldı!');\n  }, [canvas, templateName]);\n  const handleUndo = useCallback(() => {\n    if (historyIndex > 0 && canvas) {\n      const newIndex = historyIndex - 1;\n      setHistoryIndex(newIndex);\n      canvas.loadFromJSON(history[newIndex], () => {\n        canvas.renderAll();\n        updateLayers(canvas);\n      });\n    }\n  }, [historyIndex, history, canvas, updateLayers]);\n  const handleRedo = useCallback(() => {\n    if (historyIndex < history.length - 1 && canvas) {\n      const newIndex = historyIndex + 1;\n      setHistoryIndex(newIndex);\n      canvas.loadFromJSON(history[newIndex], () => {\n        canvas.renderAll();\n        updateLayers(canvas);\n      });\n    }\n  }, [historyIndex, history, canvas, updateLayers]);\n  const handleZoomIn = useCallback(() => {\n    setZoom(prev => Math.min(prev * 1.2, 5));\n  }, []);\n  const handleZoomOut = useCallback(() => {\n    setZoom(prev => Math.max(prev / 1.2, 0.1));\n  }, []);\n  const handleDelete = useCallback(() => {\n    if (canvas && selectedObject) {\n      canvas.remove(selectedObject);\n      canvas.renderAll();\n      setSelectedObject(null);\n    }\n  }, [canvas, selectedObject]);\n  const handleCopy = useCallback(async () => {\n    if (canvas && selectedObject) {\n      try {\n        const cloned = await selectedObject.clone();\n        cloned.set({\n          left: (selectedObject.left || 0) + 20,\n          top: (selectedObject.top || 0) + 20\n        });\n        canvas.add(cloned);\n        canvas.setActiveObject(cloned);\n        canvas.renderAll();\n      } catch (error) {\n        console.error('Copy error:', error);\n      }\n    }\n  }, [canvas, selectedObject]);\n\n  // AI handlers\n  const handleAIGenerate = useCallback(() => {\n    setShowAIModal(true);\n  }, []);\n  const handleAIGenerateTemplate = useCallback(async (prompt, style) => {\n    setIsAIGenerating(true);\n    setShowAIModal(false);\n    try {\n      const result = await aiTemplateService.generateTemplate({\n        prompt,\n        style\n      });\n      if (result.success && result.template && canvas) {\n        // AI template'i canvas'a yükle\n        canvas.loadFromJSON(result.template.canvas_data, () => {\n          canvas.renderAll();\n          updateLayers(canvas);\n          setTemplateName(result.template.name);\n          toast.success('AI şablonu başarıyla oluşturuldu!');\n        });\n      } else {\n        toast.error(result.error || 'AI şablonu oluşturulamadı');\n      }\n    } catch (error) {\n      console.error('AI generation error:', error);\n      toast.error('AI servisi hatası');\n    } finally {\n      setIsAIGenerating(false);\n    }\n  }, [canvas, updateLayers]);\n\n  // Property change handlers\n  const handlePropertyChange = useCallback((property, value) => {\n    if (selectedObject && canvas) {\n      selectedObject[property] = value;\n      canvas.renderAll();\n    }\n  }, [selectedObject, canvas]);\n  const handleColorChange = useCallback((type, color) => {\n    if (selectedObject && canvas) {\n      if (type === 'text' || type === 'fill') {\n        selectedObject.set('fill', color);\n        setTextColor(color);\n        setFillColor(color);\n      } else if (type === 'stroke') {\n        selectedObject.set('stroke', color);\n        setStrokeColor(color);\n      }\n      canvas.renderAll();\n    }\n  }, [selectedObject, canvas]);\n  const handleFontSizeChange = useCallback(size => {\n    if (selectedObject && canvas) {\n      selectedObject.set('fontSize', size);\n      setFontSize(size);\n      canvas.renderAll();\n    }\n  }, [selectedObject, canvas]);\n  const handleFontFamilyChange = useCallback(family => {\n    if (selectedObject && canvas) {\n      selectedObject.set('fontFamily', family);\n      setFontFamily(family);\n      canvas.renderAll();\n    }\n  }, [selectedObject, canvas]);\n  const handleOpacityChange = useCallback(opacity => {\n    if (selectedObject && canvas) {\n      selectedObject.set('opacity', opacity);\n      setOpacity(opacity);\n      canvas.renderAll();\n    }\n  }, [selectedObject, canvas]);\n  const handleRotationChange = useCallback(rotation => {\n    if (selectedObject && canvas) {\n      selectedObject.set('angle', rotation);\n      setRotation(rotation);\n      canvas.renderAll();\n    }\n  }, [selectedObject, canvas]);\n  const handleScaleChange = useCallback((scaleX, scaleY) => {\n    if (selectedObject && canvas) {\n      selectedObject.set('scaleX', scaleX);\n      selectedObject.set('scaleY', scaleY);\n      setScaleX(scaleX);\n      setScaleY(scaleY);\n      canvas.renderAll();\n    }\n  }, [selectedObject, canvas]);\n\n  // Shadow handlers\n  const handleShadowChange = useCallback((property, value) => {\n    if (selectedObject && canvas) {\n      selectedObject.set(property, value);\n      canvas.renderAll();\n    }\n  }, [selectedObject, canvas]);\n\n  // Border radius handler\n  const handleBorderRadiusChange = useCallback(radius => {\n    if (selectedObject && canvas) {\n      selectedObject.set('rx', radius);\n      selectedObject.set('ry', radius);\n      setBorderRadius(radius);\n      canvas.renderAll();\n    }\n  }, [selectedObject, canvas]);\n\n  // Layer handlers\n  const handleLayerSelect = useCallback(layerId => {\n    if (canvas) {\n      const object = canvas.getObjects().find(obj => (obj.id || '') === layerId);\n      if (object) {\n        canvas.setActiveObject(object);\n        canvas.renderAll();\n      }\n    }\n  }, [canvas]);\n  const handleLayerToggleVisibility = useCallback(layerId => {\n    if (canvas) {\n      const object = canvas.getObjects().find(obj => (obj.id || '') === layerId);\n      if (object) {\n        object.set('visible', !object.visible);\n        canvas.renderAll();\n        updateLayers(canvas);\n      }\n    }\n  }, [canvas, updateLayers]);\n  const handleLayerToggleLock = useCallback(layerId => {\n    if (canvas) {\n      const object = canvas.getObjects().find(obj => (obj.id || '') === layerId);\n      if (object) {\n        object.set('selectable', object.selectable === false);\n        canvas.renderAll();\n        updateLayers(canvas);\n      }\n    }\n  }, [canvas, updateLayers]);\n  const handleLayerDelete = useCallback(layerId => {\n    if (canvas) {\n      const object = canvas.getObjects().find(obj => (obj.id || '') === layerId);\n      if (object) {\n        canvas.remove(object);\n        canvas.renderAll();\n        updateLayers(canvas);\n      }\n    }\n  }, [canvas, updateLayers]);\n  const handleLayerDuplicate = useCallback(async layerId => {\n    if (canvas) {\n      const object = canvas.getObjects().find(obj => (obj.id || '') === layerId);\n      if (object) {\n        try {\n          const cloned = await object.clone();\n          cloned.set({\n            left: (object.left || 0) + 20,\n            top: (object.top || 0) + 20\n          });\n          canvas.add(cloned);\n          canvas.renderAll();\n          updateLayers(canvas);\n        } catch (error) {\n          console.error('Duplicate error:', error);\n        }\n      }\n    }\n  }, [canvas, updateLayers]);\n  const handleLayerMoveUp = useCallback(layerId => {\n    if (canvas) {\n      const object = canvas.getObjects().find(obj => (obj.id || '') === layerId);\n      if (object) {\n        object.bringForward();\n        canvas.renderAll();\n        updateLayers(canvas);\n      }\n    }\n  }, [canvas, updateLayers]);\n  const handleLayerMoveDown = useCallback(layerId => {\n    if (canvas) {\n      const object = canvas.getObjects().find(obj => (obj.id || '') === layerId);\n      if (object) {\n        object.sendBackwards();\n        canvas.renderAll();\n        updateLayers(canvas);\n      }\n    }\n  }, [canvas, updateLayers]);\n  const handleLayerRename = useCallback((layerId, newName) => {\n    if (canvas) {\n      const object = canvas.getObjects().find(obj => (obj.id || '') === layerId);\n      if (object) {\n        object.name = newName;\n        updateLayers(canvas);\n      }\n    }\n  }, [canvas, updateLayers]);\n\n  // Template system handlers\n  const handleCategorySelect = useCallback(categoryId => {\n    setSelectedCategory(categoryId);\n    setActivePanel('categories');\n  }, []);\n  const handleSubcategorySelect = useCallback(subcategory => {\n    setSelectedSubcategory(subcategory);\n    toast.success(`${subcategory} alt kategorisi seçildi`);\n  }, []);\n  const handlePlaceholderAdd = useCallback(placeholder => {\n    setPlaceholders(prev => [...prev, placeholder]);\n    toast.success('Placeholder eklendi');\n  }, []);\n  const handlePlaceholderEdit = useCallback((id, placeholder) => {\n    setPlaceholders(prev => prev.map(p => p.id === id ? placeholder : p));\n    toast.success('Placeholder güncellendi');\n  }, []);\n  const handlePlaceholderDelete = useCallback(id => {\n    setPlaceholders(prev => prev.filter(p => p.id !== id));\n    toast.success('Placeholder silindi');\n  }, []);\n  const handleBrandSelect = useCallback(brandIds => {\n    setSelectedBrands(brandIds);\n  }, []);\n  const handleTemplateAssign = useCallback((templateId, brandIds) => {\n    toast.success(`Şablon ${brandIds.length} markaya atandı`);\n  }, []);\n  const handleDataChange = useCallback(data => {\n    setPreviewData(data);\n  }, []);\n  const handlePreview = useCallback(data => {\n    setPreviewData(data);\n    setActivePanel('preview');\n  }, []);\n  const handleExport = useCallback(format => {\n    toast.success(`${format.toUpperCase()} formatında dışa aktarıldı`);\n  }, []);\n  const handleShare = useCallback(() => {\n    toast.success('Paylaşılabilir link oluşturuldu');\n  }, []);\n\n  // Keyboard shortcuts\n  useEffect(() => {\n    const handleKeyDown = e => {\n      // Prevent default browser shortcuts when canvas is focused\n      if (e.ctrlKey || e.metaKey) {\n        switch (e.key.toLowerCase()) {\n          case 'z':\n            e.preventDefault();\n            if (e.shiftKey) {\n              handleRedo();\n            } else {\n              handleUndo();\n            }\n            break;\n          case 'a':\n            e.preventDefault();\n            if (canvas) {\n              canvas.discardActiveObject();\n              canvas.setActiveObject(new fabric.ActiveSelection(canvas.getObjects(), {\n                canvas: canvas\n              }));\n              canvas.requestRenderAll();\n            }\n            break;\n          case 's':\n            e.preventDefault();\n            handleSave();\n            break;\n          case 'c':\n            e.preventDefault();\n            handleCopy();\n            break;\n          case 'v':\n            e.preventDefault();\n            // Paste functionality would go here\n            break;\n        }\n      } else if (e.key === 'Delete' || e.key === 'Backspace') {\n        e.preventDefault();\n        if (canvas && canvas.getActiveObject()) {\n          const activeObject = canvas.getActiveObject();\n          if (activeObject) {\n            canvas.remove(activeObject);\n            canvas.requestRenderAll();\n            updateLayers(canvas);\n            if (canvas) saveToHistory(canvas);\n          }\n        }\n      }\n    };\n    document.addEventListener('keydown', handleKeyDown);\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [canvas, handleUndo, handleRedo, handleSave, handleCopy, updateLayers, saveToHistory]);\n\n  // Auto-save\n  useEffect(() => {\n    if (canvas) {\n      autoSaveIntervalRef.current = setInterval(() => {\n        const templateData = {\n          name: templateName,\n          canvas_data: canvas.toJSON(),\n          auto_saved: true\n        };\n        localStorage.setItem('template_draft', JSON.stringify(templateData));\n      }, 30000); // Auto-save every 30 seconds\n    }\n    return () => {\n      if (autoSaveIntervalRef.current) {\n        clearInterval(autoSaveIntervalRef.current);\n      }\n    };\n  }, [canvas, templateName]);\n\n  // Load initial template\n  useEffect(() => {\n    if (initialTemplate && canvas) {\n      canvas.loadFromJSON(initialTemplate.canvas_data, () => {\n        canvas.renderAll();\n        updateLayers(canvas);\n      });\n      setTemplateName(initialTemplate.name || 'Yeni Şablon');\n    }\n  }, [initialTemplate, canvas, updateLayers]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-screen flex flex-col bg-gray-50\",\n    children: [/*#__PURE__*/_jsxDEV(Toolbar, {\n      activeTool: activeTool,\n      onToolChange: setActiveTool,\n      onSave: handleSave,\n      onExport: handleCanvasExport,\n      onUndo: handleUndo,\n      onRedo: handleRedo,\n      onZoomIn: handleZoomIn,\n      onZoomOut: handleZoomOut,\n      onDelete: handleDelete,\n      onCopy: handleCopy,\n      onAIGenerate: handleAIGenerate,\n      onShowUsageGuide: () => setShowUsageGuide(true),\n      zoom: zoom,\n      canUndo: historyIndex > 0,\n      canRedo: historyIndex < history.length - 1,\n      hasSelection: !!selectedObject\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 614,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 flex overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-12 bg-gray-100 border-r border-gray-200 flex flex-col\",\n          children: [{\n            id: 'layers',\n            label: 'Katmanlar',\n            icon: '📄'\n          }, {\n            id: 'categories',\n            label: 'Kategoriler',\n            icon: '📁'\n          }, {\n            id: 'placeholders',\n            label: 'Alanlar',\n            icon: '🔗'\n          }, {\n            id: 'brands',\n            label: 'Markalar',\n            icon: '🏢'\n          }, {\n            id: 'data',\n            label: 'Veri',\n            icon: '📊'\n          }, {\n            id: 'preview',\n            label: 'Önizleme',\n            icon: '👁️'\n          }, {\n            id: 'advanced',\n            label: 'Gelişmiş',\n            icon: '🎨'\n          }].map(panel => /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setActivePanel(panel.id),\n            className: `p-3 border-b border-gray-200 hover:bg-gray-200 transition-colors ${activePanel === panel.id ? 'bg-blue-100 text-blue-700' : 'text-gray-600'}`,\n            title: panel.label,\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-lg\",\n              children: panel.icon\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 656,\n              columnNumber: 17\n            }, this)\n          }, panel.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 648,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 638,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-80\",\n          children: [activePanel === 'layers' && /*#__PURE__*/_jsxDEV(LayersPanel, {\n            layers: layers,\n            selectedLayerId: selectedObject ? selectedObject.id || null : null,\n            onLayerSelect: handleLayerSelect,\n            onLayerToggleVisibility: handleLayerToggleVisibility,\n            onLayerToggleLock: handleLayerToggleLock,\n            onLayerDelete: handleLayerDelete,\n            onLayerDuplicate: handleLayerDuplicate,\n            onLayerMoveUp: handleLayerMoveUp,\n            onLayerMoveDown: handleLayerMoveDown,\n            onLayerRename: handleLayerRename\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 664,\n            columnNumber: 15\n          }, this), activePanel === 'categories' && /*#__PURE__*/_jsxDEV(TemplateCategories, {\n            selectedCategory: selectedCategory,\n            onCategorySelect: handleCategorySelect,\n            onSubcategorySelect: handleSubcategorySelect\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 678,\n            columnNumber: 15\n          }, this), activePanel === 'placeholders' && /*#__PURE__*/_jsxDEV(PlaceholderSystem, {\n            onAddPlaceholder: handlePlaceholderAdd,\n            onEditPlaceholder: handlePlaceholderEdit,\n            onDeletePlaceholder: handlePlaceholderDelete,\n            placeholders: placeholders\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 685,\n            columnNumber: 15\n          }, this), activePanel === 'brands' && /*#__PURE__*/_jsxDEV(BrandAssignment, {\n            selectedBrands: selectedBrands,\n            onBrandSelect: handleBrandSelect,\n            onTemplateAssign: handleTemplateAssign,\n            templateId: templateId\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 693,\n            columnNumber: 15\n          }, this), activePanel === 'data' && /*#__PURE__*/_jsxDEV(DataBindingSystem, {\n            templateId: templateId,\n            onDataChange: handleDataChange,\n            onPreview: handlePreview\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 701,\n            columnNumber: 15\n          }, this), activePanel === 'preview' && /*#__PURE__*/_jsxDEV(TemplatePreview, {\n            templateData: initialTemplate,\n            previewData: previewData,\n            onExport: handleExport,\n            onShare: handleShare\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 708,\n            columnNumber: 15\n          }, this), activePanel === 'advanced' && /*#__PURE__*/_jsxDEV(AdvancedTools, {\n            onToolSelect: setActiveTool,\n            onColorChange: color => handleColorChange('fill', color),\n            onGradientChange: gradient => console.log('Gradient:', gradient),\n            onFilterApply: filter => console.log('Filter:', filter),\n            onTransform: transform => console.log('Transform:', transform),\n            onEffectApply: effect => console.log('Effect:', effect)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 716,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 662,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 636,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Canvas, {\n        width: canvasWidth,\n        height: canvasHeight,\n        backgroundColor: \"#ffffff\",\n        zoom: zoom,\n        onObjectSelect: handleObjectSelect,\n        onObjectDeselect: handleObjectDeselect,\n        onObjectModified: handleObjectModified,\n        onObjectAdded: handleObjectAdded,\n        onObjectRemoved: handleObjectRemoved,\n        activeTool: activeTool,\n        onCanvasReady: handleCanvasReady,\n        initialData: initialTemplate === null || initialTemplate === void 0 ? void 0 : initialTemplate.canvas_data\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 729,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PropertiesPanel, {\n        selectedObject: selectedObject,\n        activeTool: activeTool,\n        onPropertyChange: handlePropertyChange,\n        textColor: textColor,\n        fillColor: fillColor,\n        strokeColor: strokeColor,\n        strokeWidth: strokeWidth,\n        fontSize: fontSize,\n        fontFamily: fontFamily,\n        opacity: opacity,\n        rotation: rotation,\n        scaleX: scaleX,\n        scaleY: scaleY,\n        onColorChange: handleColorChange,\n        onFontSizeChange: handleFontSizeChange,\n        onFontFamilyChange: handleFontFamilyChange,\n        onOpacityChange: handleOpacityChange,\n        onRotationChange: handleRotationChange,\n        onScaleChange: handleScaleChange,\n        shadowColor: shadowColor,\n        shadowBlur: shadowBlur,\n        shadowOffsetX: shadowOffsetX,\n        shadowOffsetY: shadowOffsetY,\n        borderRadius: borderRadius,\n        onShadowChange: handleShadowChange,\n        onBorderRadiusChange: handleBorderRadiusChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 745,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 634,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white border-t border-gray-200 px-4 py-2\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"text-sm font-medium text-gray-700\",\n          children: \"\\u015Eablon Ad\\u0131:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 778,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: templateName,\n          onChange: e => setTemplateName(e.target.value),\n          className: \"flex-1 px-3 py-1 border border-gray-300 rounded text-sm\",\n          placeholder: \"\\u015Eablon ad\\u0131n\\u0131 girin...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 779,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"px-4 py-1 text-sm text-gray-600 hover:text-gray-800\",\n          children: \"Kapat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 786,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 777,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 776,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AIModal, {\n      isOpen: showAIModal,\n      onClose: () => setShowAIModal(false),\n      onGenerate: handleAIGenerateTemplate,\n      isGenerating: isAIGenerating\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 796,\n      columnNumber: 19\n    }, this), showUsageGuide && /*#__PURE__*/_jsxDEV(UsageGuide, {\n      onClose: () => setShowUsageGuide(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 805,\n      columnNumber: 21\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 612,\n    columnNumber: 5\n  }, this);\n};\n_s(CanvaLikeEditor, \"3HWjHl3RX3m3/hANaC7LPIO/fM0=\");\n_c = CanvaLikeEditor;\nexport default CanvaLikeEditor;\nvar _c;\n$RefreshReg$(_c, \"CanvaLikeEditor\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","fabric","toast","Toolbar","PropertiesPanel","LayersPanel","Canvas","AIModal","PlaceholderSystem","TemplateCategories","BrandAssignment","DataBindingSystem","TemplatePreview","UsageGuide","AdvancedTools","aiTemplateService","jsxDEV","_jsxDEV","CanvaLikeEditor","initialTemplate","onSave","onClose","_s","canvas","setCanvas","selectedObject","setSelectedObject","layers","setLayers","activeTool","setActiveTool","zoom","setZoom","textColor","setTextColor","fillColor","setFillColor","strokeColor","setStrokeColor","strokeWidth","setStrokeWidth","fontSize","setFontSize","fontFamily","setFontFamily","opacity","setOpacity","rotation","setRotation","scaleX","setScaleX","scaleY","setScaleY","shadowColor","setShadowColor","shadowBlur","setShadowBlur","shadowOffsetX","setShadowOffsetX","shadowOffsetY","setShadowOffsetY","borderRadius","setBorderRadius","templateName","setTemplateName","history","setHistory","historyIndex","setHistoryIndex","showAIModal","setShowAIModal","isAIGenerating","setIsAIGenerating","showUsageGuide","setShowUsageGuide","activePanel","setActivePanel","selectedCategory","setSelectedCategory","selectedSubcategory","setSelectedSubcategory","placeholders","setPlaceholders","selectedBrands","setSelectedBrands","previewData","setPreviewData","templateId","setTemplateId","Date","now","autoSaveIntervalRef","undefined","canvasWidth","canvasHeight","handleCanvasReady","fabricCanvas","saveToHistory","state","JSON","stringify","toJSON","prev","newHistory","slice","push","updateLayers","objects","getObjects","newLayers","map","obj","index","id","name","type","visible","locked","selectable","order","handleObjectSelect","object","fill","stroke","angle","handleObjectDeselect","handleObjectModified","handleObjectAdded","handleObjectRemoved","handleSave","templateData","canvas_data","created_at","toISOString","updated_at","success","handleCanvasExport","dataURL","toDataURL","format","quality","multiplier","link","document","createElement","download","href","click","handleUndo","newIndex","loadFromJSON","renderAll","handleRedo","length","handleZoomIn","Math","min","handleZoomOut","max","handleDelete","remove","handleCopy","cloned","clone","set","left","top","add","setActiveObject","error","console","handleAIGenerate","handleAIGenerateTemplate","prompt","style","result","generateTemplate","template","handlePropertyChange","property","value","handleColorChange","color","handleFontSizeChange","size","handleFontFamilyChange","family","handleOpacityChange","handleRotationChange","handleScaleChange","handleShadowChange","handleBorderRadiusChange","radius","handleLayerSelect","layerId","find","handleLayerToggleVisibility","handleLayerToggleLock","handleLayerDelete","handleLayerDuplicate","handleLayerMoveUp","bringForward","handleLayerMoveDown","sendBackwards","handleLayerRename","newName","handleCategorySelect","categoryId","handleSubcategorySelect","subcategory","handlePlaceholderAdd","placeholder","handlePlaceholderEdit","p","handlePlaceholderDelete","filter","handleBrandSelect","brandIds","handleTemplateAssign","handleDataChange","data","handlePreview","handleExport","toUpperCase","handleShare","handleKeyDown","e","ctrlKey","metaKey","key","toLowerCase","preventDefault","shiftKey","discardActiveObject","ActiveSelection","requestRenderAll","getActiveObject","activeObject","addEventListener","removeEventListener","current","setInterval","auto_saved","localStorage","setItem","clearInterval","className","children","onToolChange","onExport","onUndo","onRedo","onZoomIn","onZoomOut","onDelete","onCopy","onAIGenerate","onShowUsageGuide","canUndo","canRedo","hasSelection","fileName","_jsxFileName","lineNumber","columnNumber","label","icon","panel","onClick","title","selectedLayerId","onLayerSelect","onLayerToggleVisibility","onLayerToggleLock","onLayerDelete","onLayerDuplicate","onLayerMoveUp","onLayerMoveDown","onLayerRename","onCategorySelect","onSubcategorySelect","onAddPlaceholder","onEditPlaceholder","onDeletePlaceholder","onBrandSelect","onTemplateAssign","onDataChange","onPreview","onShare","onToolSelect","onColorChange","onGradientChange","gradient","log","onFilterApply","onTransform","transform","onEffectApply","effect","width","height","backgroundColor","onObjectSelect","onObjectDeselect","onObjectModified","onObjectAdded","onObjectRemoved","onCanvasReady","initialData","onPropertyChange","onFontSizeChange","onFontFamilyChange","onOpacityChange","onRotationChange","onScaleChange","onShadowChange","onBorderRadiusChange","onChange","target","isOpen","onGenerate","isGenerating","_c","$RefreshReg$"],"sources":["C:/Users/ilker/Desktop/aibrands/frontend/src/components/template/CanvaLikeEditor.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\n// @ts-ignore - Fabric.js import\r\nimport * as fabric from 'fabric';\r\nimport toast from 'react-hot-toast';\r\n\r\n// Import modular components\r\nimport Toolbar from './editor/Toolbar';\r\nimport PropertiesPanel from './editor/PropertiesPanel';\r\nimport LayersPanel from './editor/LayersPanel';\r\nimport Canvas from './editor/Canvas';\r\nimport AIModal from './editor/AIModal';\r\nimport PlaceholderSystem from './editor/PlaceholderSystem';\r\nimport TemplateCategories from './editor/TemplateCategories';\r\nimport BrandAssignment from './editor/BrandAssignment';\r\nimport DataBindingSystem from './editor/DataBindingSystem';\r\nimport TemplatePreview from './editor/TemplatePreview';\r\nimport UsageGuide from './editor/UsageGuide';\r\nimport AdvancedTools from './editor/AdvancedTools';\r\nimport { aiTemplateService } from '../../services/aiTemplateService';\r\n\r\ninterface CanvaLikeEditorProps {\r\n  initialTemplate?: any;\r\n  onSave?: (template: any) => void;\r\n  onClose?: () => void;\r\n}\r\n\r\ninterface Layer {\r\n  id: string;\r\n  name: string;\r\n  type: string;\r\n  visible: boolean;\r\n  locked: boolean;\r\n  opacity: number;\r\n  order: number;\r\n}\r\n\r\nconst CanvaLikeEditor: React.FC<CanvaLikeEditorProps> = ({\r\n  initialTemplate,\r\n  onSave,\r\n  onClose\r\n}) => {\r\n  // Canvas state\r\n  const [canvas, setCanvas] = useState<fabric.Canvas | null>(null);\r\n  const [selectedObject, setSelectedObject] = useState<fabric.Object | null>(null);\r\n  const [layers, setLayers] = useState<Layer[]>([]);\r\n  \r\n  // Tool states\r\n  const [activeTool, setActiveTool] = useState<string>('select');\r\n  const [zoom, setZoom] = useState(1);\r\n  \r\n  // Object properties\r\n  const [textColor, setTextColor] = useState('#000000');\r\n  const [fillColor, setFillColor] = useState('#3B82F6');\r\n  const [strokeColor, setStrokeColor] = useState('#000000');\r\n  const [strokeWidth, setStrokeWidth] = useState(2);\r\n  const [fontSize, setFontSize] = useState(24);\r\n  const [fontFamily, setFontFamily] = useState('Arial');\r\n  const [opacity, setOpacity] = useState(1);\r\n  const [rotation, setRotation] = useState(0);\r\n  const [scaleX, setScaleX] = useState(1);\r\n  const [scaleY, setScaleY] = useState(1);\r\n  \r\n  // Shadow properties\r\n  const [shadowColor, setShadowColor] = useState('#000000');\r\n  const [shadowBlur, setShadowBlur] = useState(0);\r\n  const [shadowOffsetX, setShadowOffsetX] = useState(0);\r\n  const [shadowOffsetY, setShadowOffsetY] = useState(0);\r\n  \r\n  // Border properties\r\n  const [borderRadius, setBorderRadius] = useState(0);\r\n  \r\n  // Template state\r\n  const [templateName, setTemplateName] = useState('Yeni Şablon');\r\n  \r\n  // History for undo/redo\r\n  const [history, setHistory] = useState<string[]>([]);\r\n  const [historyIndex, setHistoryIndex] = useState(-1);\r\n  \r\n  // AI state\r\n  const [showAIModal, setShowAIModal] = useState(false);\r\n  const [isAIGenerating, setIsAIGenerating] = useState(false);\r\n  \r\n  // Usage guide state\r\n  const [showUsageGuide, setShowUsageGuide] = useState(false);\r\n  \r\n  // Template system state\r\n  const [activePanel, setActivePanel] = useState<'layers' | 'categories' | 'placeholders' | 'brands' | 'data' | 'preview' | 'advanced'>('layers');\r\n  const [selectedCategory, setSelectedCategory] = useState('ecommerce');\r\n  const [selectedSubcategory, setSelectedSubcategory] = useState('');\r\n  const [placeholders, setPlaceholders] = useState<any[]>([]);\r\n  const [selectedBrands, setSelectedBrands] = useState<number[]>([]);\r\n  const [previewData, setPreviewData] = useState<Record<string, any>>({});\r\n  const [templateId, setTemplateId] = useState(`template-${Date.now()}`);\r\n  \r\n  // Auto-save\r\n  const autoSaveIntervalRef = useRef<NodeJS.Timeout | undefined>(undefined);\r\n\r\n  // Canvas dimensions\r\n  const canvasWidth = 720;\r\n  const canvasHeight = 1280;\r\n\r\n  // Initialize canvas\r\n  const handleCanvasReady = useCallback((fabricCanvas: fabric.Canvas) => {\r\n    setCanvas(fabricCanvas);\r\n    saveToHistory(fabricCanvas);\r\n  }, []);\r\n\r\n  // Save to history for undo/redo\r\n  const saveToHistory = useCallback((fabricCanvas: fabric.Canvas) => {\r\n    const state = JSON.stringify(fabricCanvas.toJSON());\r\n    setHistory(prev => {\r\n      const newHistory = prev.slice(0, historyIndex + 1);\r\n      newHistory.push(state);\r\n      return newHistory.slice(-50); // Keep last 50 states\r\n    });\r\n    setHistoryIndex(prev => prev + 1);\r\n  }, [historyIndex]);\r\n\r\n  // Update layers when canvas changes\r\n  const updateLayers = useCallback((fabricCanvas: fabric.Canvas) => {\r\n    const objects = fabricCanvas.getObjects();\r\n    const newLayers: Layer[] = objects.map((obj, index) => ({\r\n      id: (obj as any).id || `layer-${index}`,\r\n      name: (obj as any).name || `${obj.type} ${index + 1}`,\r\n      type: obj.type || 'unknown',\r\n      visible: obj.visible !== false,\r\n      locked: obj.selectable === false,\r\n      opacity: obj.opacity || 1,\r\n      order: index\r\n    }));\r\n    setLayers(newLayers);\r\n  }, []);\r\n\r\n  // Handle object selection\r\n  const handleObjectSelect = useCallback((object: any) => {\r\n    setSelectedObject(object);\r\n    if (object) {\r\n      setTextColor(object.fill || '#000000');\r\n      setFillColor(object.fill || '#3B82F6');\r\n      setStrokeColor(object.stroke || '#000000');\r\n      setStrokeWidth(object.strokeWidth || 2);\r\n      setFontSize(object.fontSize || 24);\r\n      setFontFamily(object.fontFamily || 'Arial');\r\n      setOpacity(object.opacity || 1);\r\n      setRotation(object.angle || 0);\r\n      setScaleX(object.scaleX || 1);\r\n      setScaleY(object.scaleY || 1);\r\n    }\r\n  }, []);\r\n\r\n  const handleObjectDeselect = useCallback(() => {\r\n    setSelectedObject(null);\r\n  }, []);\r\n\r\n  const handleObjectModified = useCallback(() => {\r\n    if (canvas) {\r\n      updateLayers(canvas);\r\n      saveToHistory(canvas);\r\n    }\r\n  }, [canvas, updateLayers, saveToHistory]);\r\n\r\n  const handleObjectAdded = useCallback(() => {\r\n    if (canvas) {\r\n      updateLayers(canvas);\r\n      saveToHistory(canvas);\r\n    }\r\n  }, [canvas, updateLayers, saveToHistory]);\r\n\r\n  const handleObjectRemoved = useCallback(() => {\r\n    if (canvas) {\r\n      updateLayers(canvas);\r\n      saveToHistory(canvas);\r\n    }\r\n  }, [canvas, updateLayers, saveToHistory]);\r\n\r\n  // Toolbar handlers\r\n  const handleSave = useCallback(() => {\r\n    if (!canvas) return;\r\n    \r\n    const templateData = {\r\n      name: templateName,\r\n      canvas_data: canvas.toJSON(),\r\n      created_at: new Date().toISOString(),\r\n      updated_at: new Date().toISOString()\r\n    };\r\n    \r\n    onSave?.(templateData);\r\n    toast.success('Şablon kaydedildi!');\r\n  }, [canvas, templateName, onSave]);\r\n\r\n  const handleCanvasExport = useCallback(() => {\r\n    if (!canvas) return;\r\n    \r\n    const dataURL = canvas.toDataURL({\r\n      format: 'png',\r\n      quality: 1,\r\n      multiplier: 2\r\n    });\r\n    \r\n    const link = document.createElement('a');\r\n    link.download = `${templateName}.png`;\r\n    link.href = dataURL;\r\n    link.click();\r\n    \r\n    toast.success('Şablon dışa aktarıldı!');\r\n  }, [canvas, templateName]);\r\n\r\n  const handleUndo = useCallback(() => {\r\n    if (historyIndex > 0 && canvas) {\r\n      const newIndex = historyIndex - 1;\r\n      setHistoryIndex(newIndex);\r\n      canvas.loadFromJSON(history[newIndex], () => {\r\n        canvas.renderAll();\r\n        updateLayers(canvas);\r\n      });\r\n    }\r\n  }, [historyIndex, history, canvas, updateLayers]);\r\n\r\n  const handleRedo = useCallback(() => {\r\n    if (historyIndex < history.length - 1 && canvas) {\r\n      const newIndex = historyIndex + 1;\r\n      setHistoryIndex(newIndex);\r\n      canvas.loadFromJSON(history[newIndex], () => {\r\n        canvas.renderAll();\r\n        updateLayers(canvas);\r\n      });\r\n    }\r\n  }, [historyIndex, history, canvas, updateLayers]);\r\n\r\n  const handleZoomIn = useCallback(() => {\r\n    setZoom(prev => Math.min(prev * 1.2, 5));\r\n  }, []);\r\n\r\n  const handleZoomOut = useCallback(() => {\r\n    setZoom(prev => Math.max(prev / 1.2, 0.1));\r\n  }, []);\r\n\r\n  const handleDelete = useCallback(() => {\r\n    if (canvas && selectedObject) {\r\n      canvas.remove(selectedObject);\r\n      canvas.renderAll();\r\n      setSelectedObject(null);\r\n    }\r\n  }, [canvas, selectedObject]);\r\n\r\n  const handleCopy = useCallback(async () => {\r\n    if (canvas && selectedObject) {\r\n      try {\r\n        const cloned = await selectedObject.clone();\r\n        cloned.set({\r\n          left: (selectedObject.left || 0) + 20,\r\n          top: (selectedObject.top || 0) + 20\r\n        });\r\n        canvas.add(cloned);\r\n        canvas.setActiveObject(cloned);\r\n        canvas.renderAll();\r\n      } catch (error) {\r\n        console.error('Copy error:', error);\r\n      }\r\n    }\r\n  }, [canvas, selectedObject]);\r\n\r\n  // AI handlers\r\n  const handleAIGenerate = useCallback(() => {\r\n    setShowAIModal(true);\r\n  }, []);\r\n\r\n  const handleAIGenerateTemplate = useCallback(async (prompt: string, style: string) => {\r\n    setIsAIGenerating(true);\r\n    setShowAIModal(false);\r\n    \r\n    try {\r\n      const result = await aiTemplateService.generateTemplate({ prompt, style });\r\n      \r\n      if (result.success && result.template && canvas) {\r\n        // AI template'i canvas'a yükle\r\n        canvas.loadFromJSON(result.template.canvas_data, () => {\r\n          canvas.renderAll();\r\n          updateLayers(canvas);\r\n          setTemplateName(result.template.name);\r\n          toast.success('AI şablonu başarıyla oluşturuldu!');\r\n        });\r\n      } else {\r\n        toast.error(result.error || 'AI şablonu oluşturulamadı');\r\n      }\r\n    } catch (error) {\r\n      console.error('AI generation error:', error);\r\n      toast.error('AI servisi hatası');\r\n    } finally {\r\n      setIsAIGenerating(false);\r\n    }\r\n  }, [canvas, updateLayers]);\r\n\r\n  // Property change handlers\r\n  const handlePropertyChange = useCallback((property: string, value: any) => {\r\n    if (selectedObject && canvas) {\r\n      (selectedObject as any)[property] = value;\r\n      canvas.renderAll();\r\n    }\r\n  }, [selectedObject, canvas]);\r\n\r\n  const handleColorChange = useCallback((type: 'text' | 'fill' | 'stroke', color: string) => {\r\n    if (selectedObject && canvas) {\r\n      if (type === 'text' || type === 'fill') {\r\n        selectedObject.set('fill', color);\r\n        setTextColor(color);\r\n        setFillColor(color);\r\n      } else if (type === 'stroke') {\r\n        selectedObject.set('stroke', color);\r\n        setStrokeColor(color);\r\n      }\r\n      canvas.renderAll();\r\n    }\r\n  }, [selectedObject, canvas]);\r\n\r\n  const handleFontSizeChange = useCallback((size: number) => {\r\n    if (selectedObject && canvas) {\r\n      selectedObject.set('fontSize', size);\r\n      setFontSize(size);\r\n      canvas.renderAll();\r\n    }\r\n  }, [selectedObject, canvas]);\r\n\r\n  const handleFontFamilyChange = useCallback((family: string) => {\r\n    if (selectedObject && canvas) {\r\n      selectedObject.set('fontFamily', family);\r\n      setFontFamily(family);\r\n      canvas.renderAll();\r\n    }\r\n  }, [selectedObject, canvas]);\r\n\r\n  const handleOpacityChange = useCallback((opacity: number) => {\r\n    if (selectedObject && canvas) {\r\n      selectedObject.set('opacity', opacity);\r\n      setOpacity(opacity);\r\n      canvas.renderAll();\r\n    }\r\n  }, [selectedObject, canvas]);\r\n\r\n  const handleRotationChange = useCallback((rotation: number) => {\r\n    if (selectedObject && canvas) {\r\n      selectedObject.set('angle', rotation);\r\n      setRotation(rotation);\r\n      canvas.renderAll();\r\n    }\r\n  }, [selectedObject, canvas]);\r\n\r\n  const handleScaleChange = useCallback((scaleX: number, scaleY: number) => {\r\n    if (selectedObject && canvas) {\r\n      selectedObject.set('scaleX', scaleX);\r\n      selectedObject.set('scaleY', scaleY);\r\n      setScaleX(scaleX);\r\n      setScaleY(scaleY);\r\n      canvas.renderAll();\r\n    }\r\n  }, [selectedObject, canvas]);\r\n\r\n  // Shadow handlers\r\n  const handleShadowChange = useCallback((property: string, value: any) => {\r\n    if (selectedObject && canvas) {\r\n      selectedObject.set(property, value);\r\n      canvas.renderAll();\r\n    }\r\n  }, [selectedObject, canvas]);\r\n\r\n  // Border radius handler\r\n  const handleBorderRadiusChange = useCallback((radius: number) => {\r\n    if (selectedObject && canvas) {\r\n      selectedObject.set('rx', radius);\r\n      selectedObject.set('ry', radius);\r\n      setBorderRadius(radius);\r\n      canvas.renderAll();\r\n    }\r\n  }, [selectedObject, canvas]);\r\n\r\n  // Layer handlers\r\n  const handleLayerSelect = useCallback((layerId: string) => {\r\n    if (canvas) {\r\n      const object = canvas.getObjects().find(obj => ((obj as any).id || '') === layerId);\r\n      if (object) {\r\n        canvas.setActiveObject(object);\r\n        canvas.renderAll();\r\n      }\r\n    }\r\n  }, [canvas]);\r\n\r\n  const handleLayerToggleVisibility = useCallback((layerId: string) => {\r\n    if (canvas) {\r\n      const object = canvas.getObjects().find(obj => ((obj as any).id || '') === layerId);\r\n      if (object) {\r\n        object.set('visible', !object.visible);\r\n        canvas.renderAll();\r\n        updateLayers(canvas);\r\n      }\r\n    }\r\n  }, [canvas, updateLayers]);\r\n\r\n  const handleLayerToggleLock = useCallback((layerId: string) => {\r\n    if (canvas) {\r\n      const object = canvas.getObjects().find(obj => ((obj as any).id || '') === layerId);\r\n      if (object) {\r\n        object.set('selectable', object.selectable === false);\r\n        canvas.renderAll();\r\n        updateLayers(canvas);\r\n      }\r\n    }\r\n  }, [canvas, updateLayers]);\r\n\r\n  const handleLayerDelete = useCallback((layerId: string) => {\r\n    if (canvas) {\r\n      const object = canvas.getObjects().find(obj => ((obj as any).id || '') === layerId);\r\n      if (object) {\r\n        canvas.remove(object);\r\n        canvas.renderAll();\r\n        updateLayers(canvas);\r\n      }\r\n    }\r\n  }, [canvas, updateLayers]);\r\n\r\n  const handleLayerDuplicate = useCallback(async (layerId: string) => {\r\n    if (canvas) {\r\n      const object = canvas.getObjects().find(obj => ((obj as any).id || '') === layerId);\r\n      if (object) {\r\n        try {\r\n          const cloned = await object.clone();\r\n          cloned.set({\r\n            left: (object.left || 0) + 20,\r\n            top: (object.top || 0) + 20\r\n          });\r\n          canvas.add(cloned);\r\n          canvas.renderAll();\r\n          updateLayers(canvas);\r\n        } catch (error) {\r\n          console.error('Duplicate error:', error);\r\n        }\r\n      }\r\n    }\r\n  }, [canvas, updateLayers]);\r\n\r\n  const handleLayerMoveUp = useCallback((layerId: string) => {\r\n    if (canvas) {\r\n      const object = canvas.getObjects().find(obj => ((obj as any).id || '') === layerId);\r\n      if (object) {\r\n        (object as any).bringForward();\r\n        canvas.renderAll();\r\n        updateLayers(canvas);\r\n      }\r\n    }\r\n  }, [canvas, updateLayers]);\r\n\r\n  const handleLayerMoveDown = useCallback((layerId: string) => {\r\n    if (canvas) {\r\n      const object = canvas.getObjects().find(obj => ((obj as any).id || '') === layerId);\r\n      if (object) {\r\n        (object as any).sendBackwards();\r\n        canvas.renderAll();\r\n        updateLayers(canvas);\r\n      }\r\n    }\r\n  }, [canvas, updateLayers]);\r\n\r\n  const handleLayerRename = useCallback((layerId: string, newName: string) => {\r\n    if (canvas) {\r\n      const object = canvas.getObjects().find(obj => ((obj as any).id || '') === layerId);\r\n      if (object) {\r\n        (object as any).name = newName;\r\n        updateLayers(canvas);\r\n      }\r\n    }\r\n  }, [canvas, updateLayers]);\r\n\r\n  // Template system handlers\r\n  const handleCategorySelect = useCallback((categoryId: string) => {\r\n    setSelectedCategory(categoryId);\r\n    setActivePanel('categories');\r\n  }, []);\r\n\r\n  const handleSubcategorySelect = useCallback((subcategory: string) => {\r\n    setSelectedSubcategory(subcategory);\r\n    toast.success(`${subcategory} alt kategorisi seçildi`);\r\n  }, []);\r\n\r\n  const handlePlaceholderAdd = useCallback((placeholder: any) => {\r\n    setPlaceholders(prev => [...prev, placeholder]);\r\n    toast.success('Placeholder eklendi');\r\n  }, []);\r\n\r\n  const handlePlaceholderEdit = useCallback((id: string, placeholder: any) => {\r\n    setPlaceholders(prev => prev.map(p => p.id === id ? placeholder : p));\r\n    toast.success('Placeholder güncellendi');\r\n  }, []);\r\n\r\n  const handlePlaceholderDelete = useCallback((id: string) => {\r\n    setPlaceholders(prev => prev.filter(p => p.id !== id));\r\n    toast.success('Placeholder silindi');\r\n  }, []);\r\n\r\n  const handleBrandSelect = useCallback((brandIds: number[]) => {\r\n    setSelectedBrands(brandIds);\r\n  }, []);\r\n\r\n  const handleTemplateAssign = useCallback((templateId: string, brandIds: number[]) => {\r\n    toast.success(`Şablon ${brandIds.length} markaya atandı`);\r\n  }, []);\r\n\r\n  const handleDataChange = useCallback((data: Record<string, any>) => {\r\n    setPreviewData(data);\r\n  }, []);\r\n\r\n  const handlePreview = useCallback((data: Record<string, any>) => {\r\n    setPreviewData(data);\r\n    setActivePanel('preview');\r\n  }, []);\r\n\r\n  const handleExport = useCallback((format: 'png' | 'jpg' | 'pdf') => {\r\n    toast.success(`${format.toUpperCase()} formatında dışa aktarıldı`);\r\n  }, []);\r\n\r\n  const handleShare = useCallback(() => {\r\n    toast.success('Paylaşılabilir link oluşturuldu');\r\n  }, []);\r\n\r\n  // Keyboard shortcuts\r\n  useEffect(() => {\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      // Prevent default browser shortcuts when canvas is focused\r\n      if (e.ctrlKey || e.metaKey) {\r\n        switch (e.key.toLowerCase()) {\r\n          case 'z':\r\n            e.preventDefault();\r\n            if (e.shiftKey) {\r\n              handleRedo();\r\n            } else {\r\n              handleUndo();\r\n            }\r\n            break;\r\n          case 'a':\r\n            e.preventDefault();\r\n            if (canvas) {\r\n              canvas.discardActiveObject();\r\n              canvas.setActiveObject(new fabric.ActiveSelection(canvas.getObjects(), {\r\n                canvas: canvas,\r\n              }));\r\n              canvas.requestRenderAll();\r\n            }\r\n            break;\r\n          case 's':\r\n            e.preventDefault();\r\n            handleSave();\r\n            break;\r\n          case 'c':\r\n            e.preventDefault();\r\n            handleCopy();\r\n            break;\r\n          case 'v':\r\n            e.preventDefault();\r\n            // Paste functionality would go here\r\n            break;\r\n        }\r\n      } else if (e.key === 'Delete' || e.key === 'Backspace') {\r\n        e.preventDefault();\r\n        if (canvas && canvas.getActiveObject()) {\r\n          const activeObject = canvas.getActiveObject();\r\n          if (activeObject) {\r\n            canvas.remove(activeObject);\r\n            canvas.requestRenderAll();\r\n            updateLayers(canvas);\r\n            if (canvas) saveToHistory(canvas);\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    document.addEventListener('keydown', handleKeyDown);\r\n    return () => {\r\n      document.removeEventListener('keydown', handleKeyDown);\r\n    };\r\n  }, [canvas, handleUndo, handleRedo, handleSave, handleCopy, updateLayers, saveToHistory]);\r\n\r\n  // Auto-save\r\n  useEffect(() => {\r\n    if (canvas) {\r\n      autoSaveIntervalRef.current = setInterval(() => {\r\n        const templateData = {\r\n          name: templateName,\r\n          canvas_data: canvas.toJSON(),\r\n          auto_saved: true\r\n        };\r\n        localStorage.setItem('template_draft', JSON.stringify(templateData));\r\n      }, 30000); // Auto-save every 30 seconds\r\n    }\r\n\r\n    return () => {\r\n      if (autoSaveIntervalRef.current) {\r\n        clearInterval(autoSaveIntervalRef.current);\r\n      }\r\n    };\r\n  }, [canvas, templateName]);\r\n\r\n  // Load initial template\r\n  useEffect(() => {\r\n    if (initialTemplate && canvas) {\r\n      canvas.loadFromJSON(initialTemplate.canvas_data, () => {\r\n        canvas.renderAll();\r\n        updateLayers(canvas);\r\n      });\r\n      setTemplateName(initialTemplate.name || 'Yeni Şablon');\r\n    }\r\n  }, [initialTemplate, canvas, updateLayers]);\r\n\r\n  return (\r\n    <div className=\"h-screen flex flex-col bg-gray-50\">\r\n      {/* Top Toolbar */}\r\n      <Toolbar\r\n        activeTool={activeTool}\r\n        onToolChange={setActiveTool}\r\n        onSave={handleSave}\r\n          onExport={handleCanvasExport}\r\n        onUndo={handleUndo}\r\n        onRedo={handleRedo}\r\n        onZoomIn={handleZoomIn}\r\n        onZoomOut={handleZoomOut}\r\n        onDelete={handleDelete}\r\n        onCopy={handleCopy}\r\n        onAIGenerate={handleAIGenerate}\r\n        onShowUsageGuide={() => setShowUsageGuide(true)}\r\n        zoom={zoom}\r\n        canUndo={historyIndex > 0}\r\n        canRedo={historyIndex < history.length - 1}\r\n        hasSelection={!!selectedObject}\r\n      />\r\n\r\n      {/* Main Content Area */}\r\n      <div className=\"flex-1 flex overflow-hidden\">\r\n        {/* Left Sidebar - Dynamic Panels */}\r\n        <div className=\"flex\">\r\n          {/* Panel Tabs */}\r\n          <div className=\"w-12 bg-gray-100 border-r border-gray-200 flex flex-col\">\r\n            {[\r\n              { id: 'layers', label: 'Katmanlar', icon: '📄' },\r\n              { id: 'categories', label: 'Kategoriler', icon: '📁' },\r\n              { id: 'placeholders', label: 'Alanlar', icon: '🔗' },\r\n              { id: 'brands', label: 'Markalar', icon: '🏢' },\r\n              { id: 'data', label: 'Veri', icon: '📊' },\r\n              { id: 'preview', label: 'Önizleme', icon: '👁️' },\r\n              { id: 'advanced', label: 'Gelişmiş', icon: '🎨' }\r\n            ].map(panel => (\r\n              <button\r\n                key={panel.id}\r\n                onClick={() => setActivePanel(panel.id as any)}\r\n                className={`p-3 border-b border-gray-200 hover:bg-gray-200 transition-colors ${\r\n                  activePanel === panel.id ? 'bg-blue-100 text-blue-700' : 'text-gray-600'\r\n                }`}\r\n                title={panel.label}\r\n              >\r\n                <span className=\"text-lg\">{panel.icon}</span>\r\n              </button>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Panel Content */}\r\n          <div className=\"w-80\">\r\n            {activePanel === 'layers' && (\r\n              <LayersPanel\r\n                layers={layers}\r\n                selectedLayerId={selectedObject ? (selectedObject as any).id || null : null}\r\n                onLayerSelect={handleLayerSelect}\r\n                onLayerToggleVisibility={handleLayerToggleVisibility}\r\n                onLayerToggleLock={handleLayerToggleLock}\r\n                onLayerDelete={handleLayerDelete}\r\n                onLayerDuplicate={handleLayerDuplicate}\r\n                onLayerMoveUp={handleLayerMoveUp}\r\n                onLayerMoveDown={handleLayerMoveDown}\r\n                onLayerRename={handleLayerRename}\r\n              />\r\n            )}\r\n            {activePanel === 'categories' && (\r\n              <TemplateCategories\r\n                selectedCategory={selectedCategory}\r\n                onCategorySelect={handleCategorySelect}\r\n                onSubcategorySelect={handleSubcategorySelect}\r\n              />\r\n            )}\r\n            {activePanel === 'placeholders' && (\r\n              <PlaceholderSystem\r\n                onAddPlaceholder={handlePlaceholderAdd}\r\n                onEditPlaceholder={handlePlaceholderEdit}\r\n                onDeletePlaceholder={handlePlaceholderDelete}\r\n                placeholders={placeholders}\r\n              />\r\n            )}\r\n            {activePanel === 'brands' && (\r\n              <BrandAssignment\r\n                selectedBrands={selectedBrands}\r\n                onBrandSelect={handleBrandSelect}\r\n                onTemplateAssign={handleTemplateAssign}\r\n                templateId={templateId}\r\n              />\r\n            )}\r\n            {activePanel === 'data' && (\r\n              <DataBindingSystem\r\n                templateId={templateId}\r\n                onDataChange={handleDataChange}\r\n                onPreview={handlePreview}\r\n              />\r\n            )}\r\n            {activePanel === 'preview' && (\r\n              <TemplatePreview\r\n                templateData={initialTemplate}\r\n                previewData={previewData}\r\n                onExport={handleExport}\r\n                onShare={handleShare}\r\n              />\r\n            )}\r\n            {activePanel === 'advanced' && (\r\n              <AdvancedTools\r\n                onToolSelect={setActiveTool}\r\n                onColorChange={(color) => handleColorChange('fill', color)}\r\n                onGradientChange={(gradient) => console.log('Gradient:', gradient)}\r\n                onFilterApply={(filter) => console.log('Filter:', filter)}\r\n                onTransform={(transform) => console.log('Transform:', transform)}\r\n                onEffectApply={(effect) => console.log('Effect:', effect)}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Center - Canvas */}\r\n        <Canvas\r\n          width={canvasWidth}\r\n          height={canvasHeight}\r\n          backgroundColor=\"#ffffff\"\r\n          zoom={zoom}\r\n          onObjectSelect={handleObjectSelect}\r\n          onObjectDeselect={handleObjectDeselect}\r\n          onObjectModified={handleObjectModified}\r\n          onObjectAdded={handleObjectAdded}\r\n          onObjectRemoved={handleObjectRemoved}\r\n          activeTool={activeTool}\r\n          onCanvasReady={handleCanvasReady}\r\n          initialData={initialTemplate?.canvas_data}\r\n        />\r\n\r\n        {/* Right Sidebar - Properties */}\r\n        <PropertiesPanel\r\n          selectedObject={selectedObject}\r\n          activeTool={activeTool}\r\n          onPropertyChange={handlePropertyChange}\r\n          textColor={textColor}\r\n          fillColor={fillColor}\r\n          strokeColor={strokeColor}\r\n          strokeWidth={strokeWidth}\r\n          fontSize={fontSize}\r\n          fontFamily={fontFamily}\r\n          opacity={opacity}\r\n          rotation={rotation}\r\n          scaleX={scaleX}\r\n          scaleY={scaleY}\r\n          onColorChange={handleColorChange}\r\n          onFontSizeChange={handleFontSizeChange}\r\n          onFontFamilyChange={handleFontFamilyChange}\r\n          onOpacityChange={handleOpacityChange}\r\n          onRotationChange={handleRotationChange}\r\n          onScaleChange={handleScaleChange}\r\n          shadowColor={shadowColor}\r\n          shadowBlur={shadowBlur}\r\n          shadowOffsetX={shadowOffsetX}\r\n          shadowOffsetY={shadowOffsetY}\r\n          borderRadius={borderRadius}\r\n          onShadowChange={handleShadowChange}\r\n          onBorderRadiusChange={handleBorderRadiusChange}\r\n        />\r\n      </div>\r\n\r\n      {/* Template Name Input */}\r\n      <div className=\"bg-white border-t border-gray-200 px-4 py-2\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <label className=\"text-sm font-medium text-gray-700\">Şablon Adı:</label>\r\n          <input\r\n            type=\"text\"\r\n            value={templateName}\r\n            onChange={(e) => setTemplateName(e.target.value)}\r\n            className=\"flex-1 px-3 py-1 border border-gray-300 rounded text-sm\"\r\n            placeholder=\"Şablon adını girin...\"\r\n          />\r\n          <button\r\n            onClick={onClose}\r\n            className=\"px-4 py-1 text-sm text-gray-600 hover:text-gray-800\"\r\n          >\r\n            Kapat\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n                  {/* AI Modal */}\r\n                  <AIModal\r\n                    isOpen={showAIModal}\r\n                    onClose={() => setShowAIModal(false)}\r\n                    onGenerate={handleAIGenerateTemplate}\r\n                    isGenerating={isAIGenerating}\r\n                  />\r\n\r\n                  {/* Usage Guide */}\r\n                  {showUsageGuide && (\r\n                    <UsageGuide\r\n                      onClose={() => setShowUsageGuide(false)}\r\n                    />\r\n                  )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CanvaLikeEditor;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}