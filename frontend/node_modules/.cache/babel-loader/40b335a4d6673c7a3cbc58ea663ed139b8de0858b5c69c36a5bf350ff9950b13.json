{"ast":null,"code":"import _objectSpread from\"C:/Users/ilker/Desktop/aibrands/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{brandsAPI}from'../../api/brands';import{categoriesAPI}from'../../api/categories';import{useAuth}from'../../hooks/useAuth';import{Plus,Search,Edit,ChevronDown,ChevronRight,Tag,X}from'lucide-react';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Brands=()=>{var _user$permissions,_user$permissions2,_user$permissions5,_user$permissions6;const{user,loading:authLoading}=useAuth();const navigate=useNavigate();const[brands,setBrands]=useState([]);const[expandedBrands,setExpandedBrands]=useState(new Set());const[loading,setLoading]=useState(true);const[page,setPage]=useState(1);const[total,setTotal]=useState(0);const[searchTerm,setSearchTerm]=useState('');const[showCreateModal,setShowCreateModal]=useState(false);const[editingBrand,setEditingBrand]=useState(null);const[showCreateBrandRequestModal,setShowCreateBrandRequestModal]=useState(false);const[editingBrandRequest,setEditingBrandRequest]=useState(null);// Category states\nconst[categories,setCategories]=useState([]);const[showCreateCategoryModal,setShowCreateCategoryModal]=useState(false);const[editingCategory,setEditingCategory]=useState(null);// Filters\nconst[categoryFilter,setCategoryFilter]=useState('');const[statusFilter,setStatusFilter]=useState('');const perPage=10;useEffect(()=>{if(authLoading)return;// Wait for auth to complete\nloadBrands();loadCategories();},[page,user===null||user===void 0?void 0:user.brand_ids,user===null||user===void 0?void 0:user.permissions,authLoading]);// eslint-disable-line react-hooks/exhaustive-deps\n// Load categories on component mount\nuseEffect(()=>{loadCategories();},[]);// eslint-disable-line react-hooks/exhaustive-deps\nconst loadBrands=async()=>{try{setLoading(true);const response=await brandsAPI.getBrands(page,perPage);// DİNAMİK: brand_ids varsa filtrele (backend zaten filtreliyor ama frontend'de de kontrol)\nlet filteredBrands=response.brands;if(user!==null&&user!==void 0&&user.brand_ids&&user.brand_ids.length>0){// Backend zaten filtreliyor, bu ek güvenlik\nfilteredBrands=response.brands;}setBrands(filteredBrands);setTotal(filteredBrands.length);// Mağaza yöneticisi için toplam sayıyı da filtrelenmiş olarak ayarlıyoruz\n}catch(error){toast.error('Failed to load brands');}finally{setLoading(false);}};const loadCategories=async()=>{try{const allCategories=await categoriesAPI.getAllActiveCategories();setCategories(allCategories);if(allCategories.length===0){toast.error('Veritabanında kategori bulunamadı. Lütfen kategorileri kontrol edin.');}}catch(error){var _error$response,_error$response2,_error$response2$data;console.error('❌ Kategoriler yüklenemedi:',error);console.error('Error details:',(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data);toast.error('Kategoriler yüklenemedi: '+(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.detail)||error.message));// Set empty array as fallback\nsetCategories([]);}};const handleCreateBrandRequest=async request=>{try{await brandsAPI.createBrandRequest(request);toast.success('Marka ekleme talebiniz gönderildi');setShowCreateBrandRequestModal(false);}catch(error){var _error$response3,_error$response3$data;toast.error(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.detail)||'Marka talebi oluşturulamadı');}};const handleUpdateBrandRequest=async request=>{if(!editingBrandRequest)return;try{await brandsAPI.updateBrandRequest(editingBrandRequest.id,request);toast.success('Marka talebi güncellendi');setEditingBrandRequest(null);}catch(error){var _error$response4,_error$response4$data;toast.error(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.detail)||'Marka talebi güncellenemedi');}};const handleCreateBrand=async brandData=>{try{console.log('🔄 Creating brand:',brandData);// Önce markayı oluştur\nconst createdBrand=await brandsAPI.createBrand(brandData);// Eğer logo dosyası varsa, yükle\nif(brandData.logoFile){try{await brandsAPI.uploadLogo(createdBrand.id,brandData.logoFile);}catch(uploadError){console.warn('Logo yüklenemedi:',uploadError);toast.error('Marka oluşturuldu ancak logo yüklenemedi');}}toast.success('Marka başarıyla oluşturuldu');setShowCreateModal(false);loadBrands();}catch(error){var _error$response5,_error$response6,_error$response6$data;console.error('❌ Marka oluşturulamadı:',error);console.error('Error details:',(_error$response5=error.response)===null||_error$response5===void 0?void 0:_error$response5.data);toast.error('Marka oluşturulamadı: '+(((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.detail)||error.message));}};const handleUpdateBrand=async brandData=>{if(!editingBrand)return;try{console.log('🔄 Updating brand:',editingBrand.id,brandData);await brandsAPI.updateBrand(editingBrand.id,brandData);toast.success('Marka başarıyla güncellendi');setEditingBrand(null);loadBrands();}catch(error){var _error$response7,_error$response8,_error$response8$data;console.error('❌ Marka güncellenemedi:',error);console.error('Error details:',(_error$response7=error.response)===null||_error$response7===void 0?void 0:_error$response7.data);toast.error('Marka güncellenemedi: '+(((_error$response8=error.response)===null||_error$response8===void 0?void 0:(_error$response8$data=_error$response8.data)===null||_error$response8$data===void 0?void 0:_error$response8$data.detail)||error.message));}};const handleToggleBrandStatus=async brand=>{try{if(brand.is_active){await brandsAPI.deactivateBrand(brand.id);toast.success('Brand deactivated');}else{await brandsAPI.activateBrand(brand.id);toast.success('Brand activated');}loadBrands();}catch(error){var _error$response9,_error$response9$data;toast.error(((_error$response9=error.response)===null||_error$response9===void 0?void 0:(_error$response9$data=_error$response9.data)===null||_error$response9$data===void 0?void 0:_error$response9$data.detail)||'Failed to update brand status');}};const handleBrandClick=brand=>{navigate(\"/admin/brands/\".concat(brand.id));};const toggleBrandExpansion=async(brand,e)=>{e.stopPropagation();// Prevent navigation when clicking expand button\nconst newExpanded=new Set(expandedBrands);if(expandedBrands.has(brand.id)){newExpanded.delete(brand.id);}else{newExpanded.add(brand.id);}setExpandedBrands(newExpanded);};// Category management functions\nconst handleCreateCategory=async categoryData=>{try{console.log('🔄 Creating category:',categoryData);await categoriesAPI.createCategory(categoryData);toast.success('Kategori başarıyla oluşturuldu');setShowCreateCategoryModal(false);await loadCategories();}catch(error){var _error$response0,_error$response1,_error$response1$data;console.error('❌ Kategori oluşturulamadı:',error);console.error('Error details:',(_error$response0=error.response)===null||_error$response0===void 0?void 0:_error$response0.data);toast.error('Kategori oluşturulamadı: '+(((_error$response1=error.response)===null||_error$response1===void 0?void 0:(_error$response1$data=_error$response1.data)===null||_error$response1$data===void 0?void 0:_error$response1$data.detail)||error.message));}};const handleUpdateCategory=async categoryData=>{if(!editingCategory)return;try{console.log('🔄 Updating category:',editingCategory.id,categoryData);await categoriesAPI.updateCategory(editingCategory.id,categoryData);toast.success('Kategori başarıyla güncellendi');setEditingCategory(null);await loadCategories();}catch(error){var _error$response10,_error$response11,_error$response11$dat;console.error('❌ Kategori güncellenemedi:',error);console.error('Error details:',(_error$response10=error.response)===null||_error$response10===void 0?void 0:_error$response10.data);toast.error('Kategori güncellenemedi: '+(((_error$response11=error.response)===null||_error$response11===void 0?void 0:(_error$response11$dat=_error$response11.data)===null||_error$response11$dat===void 0?void 0:_error$response11$dat.detail)||error.message));}};const handleDeleteCategory=async categoryId=>{if(!window.confirm('Bu kategoriyi silmek istediğinizden emin misiniz?')){return;}try{await categoriesAPI.deleteCategory(categoryId);toast.success('Kategori başarıyla silindi');await loadCategories();}catch(error){toast.error('Kategori silinemedi');}};const filteredBrands=brands.filter(brand=>{// Text search filter\nconst matchesSearch=!searchTerm||brand.name.toLowerCase().includes(searchTerm.toLowerCase())||brand.category&&brand.category.name&&brand.category.name.toLowerCase().includes(searchTerm.toLowerCase());// Category filter - Fix: Check if category exists and compare IDs properly\nconst matchesCategory=!categoryFilter||brand.category&&brand.category.id&&brand.category.id===parseInt(categoryFilter);// Status filter\nconst matchesStatus=!statusFilter||statusFilter==='active'&&brand.is_active||statusFilter==='inactive'&&!brand.is_active;return matchesSearch&&matchesCategory&&matchesStatus;});// Loading state\nif(authLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:user!==null&&user!==void 0&&user.brand_ids&&user.brand_ids.length>0?'Markalarım':'Markalar'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:user!==null&&user!==void 0&&user.brand_ids&&user.brand_ids.length>0?'Yönettiğiniz markaların bilgilerini görüntüleyin':'Marka bilgilerini ve ayarlarını yönetin'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[(user===null||user===void 0?void 0:(_user$permissions=user.permissions)===null||_user$permissions===void 0?void 0:_user$permissions.includes('brands.manage'))&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowCreateCategoryModal(true),className:\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Plus,{size:20}),\"Kategori Ekle\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowCreateModal(true),className:\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Plus,{size:20}),\"Marka Ekle\"]})]}),(user===null||user===void 0?void 0:user.brand_ids)&&user.brand_ids.length>0&&!(user!==null&&user!==void 0&&(_user$permissions2=user.permissions)!==null&&_user$permissions2!==void 0&&_user$permissions2.includes('brands.manage'))&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowCreateBrandRequestModal(true),className:\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Plus,{size:20}),\"Marka Talebi\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col lg:flex-row gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 lg:flex-[2]\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Arama\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"form-input pl-10 w-full\",placeholder:\"Markalarda ara...\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row gap-4 lg:flex-[3]\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Kategori\"}),/*#__PURE__*/_jsxs(\"select\",{value:categoryFilter,onChange:e=>setCategoryFilter(e.target.value),className:\"form-input w-full\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"T\\xFCm Kategoriler\"}),categories.map(category=>/*#__PURE__*/_jsx(\"option\",{value:category.name,children:category.name},category.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Durum\"}),/*#__PURE__*/_jsxs(\"select\",{value:statusFilter,onChange:e=>setStatusFilter(e.target.value),className:\"form-input w-full\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"T\\xFCm Durumlar\"}),/*#__PURE__*/_jsx(\"option\",{value:\"active\",children:\"Aktif\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inactive\",children:\"Pasif\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 flex items-end\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setSearchTerm('');setCategoryFilter('');setStatusFilter('');},className:\"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg flex items-center justify-center gap-2 transition-colors\",title:\"Filtreleri Temizle\",children:[/*#__PURE__*/_jsx(X,{size:16}),/*#__PURE__*/_jsx(\"span\",{className:\"hidden sm:inline\",children:\"Temizle\"})]})})]})]}),(searchTerm||categoryFilter||statusFilter)&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 pt-4 border-t border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap items-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600 font-medium\",children:\"Aktif Filtreler:\"}),searchTerm&&/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full\",children:[/*#__PURE__*/_jsx(Search,{size:12}),\"\\\"\",searchTerm,\"\\\"\",/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSearchTerm(''),className:\"hover:bg-blue-200 rounded-full p-0.5\",children:/*#__PURE__*/_jsx(X,{size:10})})]}),categoryFilter&&/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full\",children:[/*#__PURE__*/_jsx(Tag,{size:12}),categoryFilter,/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCategoryFilter(''),className:\"hover:bg-green-200 rounded-full p-0.5\",children:/*#__PURE__*/_jsx(X,{size:10})})]}),statusFilter&&/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full\",children:[statusFilter==='active'?'✓':'✗',\" \",statusFilter==='active'?'Aktif':'Pasif',/*#__PURE__*/_jsx(\"button\",{onClick:()=>setStatusFilter(''),className:\"hover:bg-purple-200 rounded-full p-0.5\",children:/*#__PURE__*/_jsx(X,{size:10})})]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\",children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"col-span-full flex justify-center py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"})}):filteredBrands.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"col-span-full text-center py-8 text-gray-500\",children:\"Marka bulunamad\\u0131\"}):filteredBrands.map(brand=>{var _user$permissions3,_user$permissions4;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-300 cursor-pointer\",onClick:()=>handleBrandClick(brand),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-12 w-12 bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden border border-gray-200\",children:brand.logo_url?/*#__PURE__*/_jsx(\"img\",{src:brand.logo_url.startsWith('http')?brand.logo_url:\"http://localhost:8000\".concat(brand.logo_url),alt:\"\".concat(brand.name,\" logo\"),className:\"w-full h-full object-contain p-1\",onError:e=>{// Logo yüklenemezse ilk harfi göster\nconst target=e.target;target.style.display='none';const parent=target.parentElement;if(parent){parent.innerHTML=\"<span class=\\\"text-lg font-bold text-gray-400\\\">\".concat(brand.name[0],\"</span>\");}}}):/*#__PURE__*/_jsx(\"span\",{className:\"text-lg font-bold text-gray-400\",children:brand.name[0]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-medium text-gray-900 flex items-center gap-1 text-base\",children:[brand.name,/*#__PURE__*/_jsx(\"button\",{onClick:e=>toggleBrandExpansion(brand,e),className:\"p-1 hover:bg-gray-100 rounded transition-colors\",title:expandedBrands.has(brand.id)?'Daralt':'Genişlet',children:expandedBrands.has(brand.id)?/*#__PURE__*/_jsx(ChevronDown,{size:16,className:\"text-gray-400\"}):/*#__PURE__*/_jsx(ChevronRight,{size:16,className:\"text-gray-400\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-2 mt-1\",children:brand.category&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:typeof brand.category==='string'?brand.category:brand.category.name})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-0.5\",children:[(user===null||user===void 0?void 0:(_user$permissions3=user.permissions)===null||_user$permissions3===void 0?void 0:_user$permissions3.includes('brands.manage'))&&/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();setEditingBrand(brand);setShowCreateModal(true);},className:\"p-2 hover:bg-blue-100 rounded-lg transition-colors\",children:/*#__PURE__*/_jsx(Edit,{size:16})}),(user===null||user===void 0?void 0:(_user$permissions4=user.permissions)===null||_user$permissions4===void 0?void 0:_user$permissions4.includes('brands.manage'))&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:brand.is_active?'Aktif':'Pasif'}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();handleToggleBrandStatus(brand);},className:\"relative inline-flex h-4 w-8 items-center rounded-full transition-colors \".concat(brand.is_active?'bg-green-500':'bg-gray-300'),children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-block h-3 w-3 transform rounded-full bg-white transition-transform \".concat(brand.is_active?'translate-x-4':'translate-x-0.5')})})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between mb-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-400\",children:new Date(brand.created_at).toLocaleDateString('tr-TR')})})]},brand.id);})}),(user===null||user===void 0?void 0:(_user$permissions5=user.permissions)===null||_user$permissions5===void 0?void 0:_user$permissions5.includes('brands.manage'))&&total>perPage&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[total,\" markadan \",(page-1)*perPage+1,\" - \",Math.min(page*perPage,total),\" aras\\u0131 g\\xF6steriliyor\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPage(page-1),disabled:page===1,className:\"btn btn-secondary disabled:opacity-50 disabled:cursor-not-allowed\",children:\"\\xD6nceki\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPage(page+1),disabled:page*perPage>=total,className:\"btn btn-secondary disabled:opacity-50 disabled:cursor-not-allowed\",children:\"Sonraki\"})]})]}),(showCreateModal||editingBrand)&&/*#__PURE__*/_jsx(BrandModal,{brand:editingBrand,onClose:()=>{setShowCreateModal(false);setEditingBrand(null);},onSave:editingBrand?handleUpdateBrand:handleCreateBrand,categories:categories}),(showCreateCategoryModal||editingCategory)&&/*#__PURE__*/_jsx(CategoryModal,{category:editingCategory,onClose:()=>{setShowCreateCategoryModal(false);setEditingCategory(null);},onSave:editingCategory?data=>handleUpdateCategory(data):data=>handleCreateCategory(data),onDelete:editingCategory?handleDeleteCategory:undefined}),(showCreateBrandRequestModal||editingBrandRequest)&&(user===null||user===void 0?void 0:user.brand_ids)&&user.brand_ids.length>0&&!(user!==null&&user!==void 0&&(_user$permissions6=user.permissions)!==null&&_user$permissions6!==void 0&&_user$permissions6.includes('brands.manage'))&&/*#__PURE__*/_jsx(BrandRequestModal,{request:editingBrandRequest,onClose:()=>{setShowCreateBrandRequestModal(false);setEditingBrandRequest(null);},onSave:editingBrandRequest?data=>handleUpdateBrandRequest(data):data=>handleCreateBrandRequest(data),categories:categories})]});};// Brand Modal Component\nconst BrandModal=_ref=>{let{brand,onClose,onSave,categories}=_ref;const[formData,setFormData]=useState({name:(brand===null||brand===void 0?void 0:brand.name)||'',category_id:(brand===null||brand===void 0?void 0:brand.category_id)||'',logo_url:(brand===null||brand===void 0?void 0:brand.logo_url)||''});const[logoOption,setLogoOption]=useState('url');const[logoFile,setLogoFile]=useState(null);const[logoPreview,setLogoPreview]=useState(null);// Update form data when brand prop changes\nuseEffect(()=>{if(brand){setFormData({name:brand.name||'',category_id:brand.category_id||'',logo_url:brand.logo_url||''});// Eğer mevcut bir logo URL'i varsa ve dosya yükleme değilse, URL seçeneğini seç\nif(brand.logo_url&&!brand.logo_url.startsWith('blob:')){setLogoOption('url');setLogoFile(null);setLogoPreview(null);}else{setLogoOption('upload');}}else{// Yeni marka oluştururken varsayılan olarak URL seçeneğini seç\nsetLogoOption('url');setLogoFile(null);setLogoPreview(null);}},[brand]);const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleLogoFileChange=e=>{var _e$target$files;const file=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0];if(file){// Validate file type\nif(!file.type.startsWith('image/')){toast.error('Sadece resim dosyaları yüklenebilir');return;}// Validate file extension\nconst allowedExtensions=['.jpg','.jpeg','.png','.gif','.webp','.svg'];const fileExtension=file.name.toLowerCase().substring(file.name.lastIndexOf('.'));if(!allowedExtensions.includes(fileExtension)){toast.error('Desteklenmeyen dosya formatı. Sadece JPG, PNG, GIF, WebP, SVG dosyaları kabul edilir.');return;}// Validate file size (5MB)\nif(file.size>5*1024*1024){toast.error('Dosya boyutu 5MB\\'dan küçük olmalıdır');return;}// Validate filename (no path traversal)\nif(file.name.includes('..')||file.name.includes('/')||file.name.includes('\\\\')){toast.error('Geçersiz dosya adı');return;}setLogoFile(file);// Create preview\nconst reader=new FileReader();reader.onload=e=>{var _e$target;setLogoPreview((_e$target=e.target)===null||_e$target===void 0?void 0:_e$target.result);};reader.readAsDataURL(file);}};const handleSubmit=async e=>{e.preventDefault();if(!formData.name.trim()){toast.error('Marka adı gereklidir');return;}if(logoOption==='url'&&!formData.logo_url.trim()){toast.error('Logo URL gereklidir');return;}if(logoOption==='upload'&&!logoFile){toast.error('Logo dosyası seçilmelidir');return;}const submitData=_objectSpread(_objectSpread({},formData),{},{category_id:formData.category_id?Number(formData.category_id):undefined});// Eğer dosya yükleme seçildiyse, dosyayı submitData'ya ekle\nif(logoOption==='upload'&&logoFile){submitData.logoFile=logoFile;// Geçici bir URL ekle (backend'de kullanılmayacak)\nsubmitData.logo_url='temp';}// Eğer mevcut marka güncelleniyorsa ve dosya yükleme seçildiyse\nif(logoOption==='upload'&&logoFile&&brand){try{const uploadResult=await brandsAPI.uploadLogo(brand.id,logoFile);submitData.logo_url=uploadResult.logo_url;}catch(error){toast.error('Logo yüklenemedi');return;}}await onSave(submitData);};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-4\",children:brand?'Marka Düzenle':'Marka Oluştur'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Marka Ad\\u0131 *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:formData.name,onChange:handleChange,className:\"form-input\",required:true,placeholder:\"Marka ad\\u0131n\\u0131 girin\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Kategori\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"category_id\",value:formData.category_id||'',onChange:handleChange,className:\"form-input\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Kategori Se\\xE7in\"}),categories&&categories.length>0?categories.map(category=>/*#__PURE__*/_jsx(\"option\",{value:category.id,children:category.name},category.id)):/*#__PURE__*/_jsx(\"option\",{disabled:true,children:\"Kategori y\\xFCkleniyor...\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Logo *\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"logoOption\",value:\"url\",checked:logoOption==='url',onChange:e=>{setLogoOption(e.target.value);setLogoFile(null);setLogoPreview(null);},className:\"mr-2\"}),\"URL ile\"]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"logoOption\",value:\"upload\",checked:logoOption==='upload',onChange:e=>{setLogoOption(e.target.value);setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{logo_url:''}));},className:\"mr-2\"}),\"Dosya Y\\xFCkle\"]})]}),logoOption==='url'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"url\",name:\"logo_url\",value:formData.logo_url,onChange:handleChange,className:\"form-input\",placeholder:\"https://example.com/logo.png\",required:true}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Marka logosunun URL adresini girin\"})]}),logoOption==='upload'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleLogoFileChange,className:\"form-input\",required:true}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"JPG, PNG, GIF, WebP, SVG formatlar\\u0131 desteklenir (Max: 5MB)\"}),logoPreview&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium mb-2\",children:\"\\xD6nizleme:\"}),/*#__PURE__*/_jsx(\"img\",{src:logoPreview,alt:\"Logo \\xF6nizleme\",className:\"w-20 h-20 object-contain border border-gray-300 rounded\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary flex-1\",children:brand?'Marka Güncelle':'Marka Oluştur'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"btn btn-secondary\",children:\"\\u0130ptal\"})]})]})]})})});};// Category Modal Component\nconst CategoryModal=_ref2=>{let{category,onClose,onSave,onDelete}=_ref2;const[formData,setFormData]=useState({name:(category===null||category===void 0?void 0:category.name)||''});const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleSubmit=async e=>{e.preventDefault();if(!formData.name.trim()){toast.error('Kategori adı gereklidir');return;}await onSave(formData);};const handleDelete=async()=>{if(!category||!onDelete)return;if(window.confirm('Bu kategoriyi silmek istediğinizden emin misiniz?')){await onDelete(category.id);}};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-4\",children:category?'Kategori Düzenle':'Kategori Oluştur'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Kategori Ad\\u0131 *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:formData.name,onChange:handleChange,className:\"form-input\",required:true,placeholder:\"Kategori ad\\u0131n\\u0131 girin\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary flex-1\",children:category?'Kategori Güncelle':'Kategori Oluştur'}),category&&onDelete&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleDelete,className:\"btn bg-red-600 hover:bg-red-700 text-white\",children:\"Sil\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"btn btn-secondary\",children:\"\\u0130ptal\"})]})]})]})})});};// Brand Request Modal Component\nconst BrandRequestModal=_ref3=>{let{request,onClose,onSave,categories}=_ref3;const[formData,setFormData]=useState({name:(request===null||request===void 0?void 0:request.name)||'',category_id:(request===null||request===void 0?void 0:request.category_id)||undefined,logo_url:(request===null||request===void 0?void 0:request.logo_url)||'',request_message:(request===null||request===void 0?void 0:request.request_message)||''});// Update form data when request prop changes\nuseEffect(()=>{if(request){setFormData({name:request.name||'',category_id:request.category_id||undefined,logo_url:request.logo_url||'',request_message:request.request_message||''});}},[request]);const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleSubmit=async e=>{e.preventDefault();if(!formData.name.trim()){toast.error('Marka adı gereklidir');return;}if(!formData.logo_url.trim()){toast.error('Logo URL gereklidir');return;}await onSave(formData);};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-4\",children:request?'Marka Talebi Düzenle':'Yeni Marka Talebi Oluştur'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Marka Ad\\u0131 *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:formData.name,onChange:handleChange,className:\"form-input\",required:true,placeholder:\"Marka ad\\u0131n\\u0131 girin\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Kategori\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"category_id\",value:formData.category_id||'',onChange:handleChange,className:\"form-input\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Kategori Se\\xE7in\"}),categories&&categories.length>0?categories.map(category=>/*#__PURE__*/_jsx(\"option\",{value:category.name,children:category.name},category.id)):/*#__PURE__*/_jsx(\"option\",{disabled:true,children:\"Kategori y\\xFCkleniyor...\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Logo URL *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",name:\"logo_url\",value:formData.logo_url||'',onChange:handleChange,className:\"form-input\",placeholder:\"https://example.com/logo.png\",required:true}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Marka logosunun URL adresini girin\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Talep Mesaj\\u0131\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"request_message\",value:formData.request_message||'',onChange:handleChange,className:\"form-input\",rows:3,placeholder:\"Yeni marka ekleme talebinizle ilgili a\\xE7\\u0131klama (iste\\u011Fe ba\\u011Fl\\u0131)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary flex-1\",children:request?'Talebi Güncelle':'Talep Oluştur'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"btn btn-secondary\",children:\"\\u0130ptal\"})]})]})]})})});};export default Brands;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","brandsAPI","categoriesAPI","useAuth","Plus","Search","Edit","ChevronDown","ChevronRight","Tag","X","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Brands","_user$permissions","_user$permissions2","_user$permissions5","_user$permissions6","user","loading","authLoading","navigate","brands","setBrands","expandedBrands","setExpandedBrands","Set","setLoading","page","setPage","total","setTotal","searchTerm","setSearchTerm","showCreateModal","setShowCreateModal","editingBrand","setEditingBrand","showCreateBrandRequestModal","setShowCreateBrandRequestModal","editingBrandRequest","setEditingBrandRequest","categories","setCategories","showCreateCategoryModal","setShowCreateCategoryModal","editingCategory","setEditingCategory","categoryFilter","setCategoryFilter","statusFilter","setStatusFilter","perPage","loadBrands","loadCategories","brand_ids","permissions","response","getBrands","filteredBrands","length","error","allCategories","getAllActiveCategories","_error$response","_error$response2","_error$response2$data","console","data","detail","message","handleCreateBrandRequest","request","createBrandRequest","success","_error$response3","_error$response3$data","handleUpdateBrandRequest","updateBrandRequest","id","_error$response4","_error$response4$data","handleCreateBrand","brandData","log","createdBrand","createBrand","logoFile","uploadLogo","uploadError","warn","_error$response5","_error$response6","_error$response6$data","handleUpdateBrand","updateBrand","_error$response7","_error$response8","_error$response8$data","handleToggleBrandStatus","brand","is_active","deactivateBrand","activateBrand","_error$response9","_error$response9$data","handleBrandClick","concat","toggleBrandExpansion","e","stopPropagation","newExpanded","has","delete","add","handleCreateCategory","categoryData","createCategory","_error$response0","_error$response1","_error$response1$data","handleUpdateCategory","updateCategory","_error$response10","_error$response11","_error$response11$dat","handleDeleteCategory","categoryId","window","confirm","deleteCategory","filter","matchesSearch","name","toLowerCase","includes","category","matchesCategory","parseInt","matchesStatus","className","children","onClick","size","type","value","onChange","target","placeholder","map","title","_user$permissions3","_user$permissions4","logo_url","src","startsWith","alt","onError","style","display","parent","parentElement","innerHTML","Date","created_at","toLocaleDateString","Math","min","disabled","BrandModal","onClose","onSave","CategoryModal","onDelete","undefined","BrandRequestModal","_ref","formData","setFormData","category_id","logoOption","setLogoOption","setLogoFile","logoPreview","setLogoPreview","handleChange","prev","_objectSpread","handleLogoFileChange","_e$target$files","file","files","allowedExtensions","fileExtension","substring","lastIndexOf","reader","FileReader","onload","_e$target","result","readAsDataURL","handleSubmit","preventDefault","trim","submitData","Number","uploadResult","onSubmit","required","checked","accept","_ref2","handleDelete","_ref3","request_message","rows"],"sources":["C:/Users/ilker/Desktop/aibrands/frontend/src/pages/admin/Brands.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { brandsAPI, Brand, BrandCreate, BrandRequest, BrandRequestCreate } from '../../api/brands';\n\nimport { categoriesAPI, Category, CategoryCreate } from '../../api/categories';\nimport { useAuth } from '../../hooks/useAuth';\nimport { Plus, Search, Edit, Eye, EyeOff, Building2, ChevronDown, ChevronRight, Tag, X } from 'lucide-react';\nimport toast from 'react-hot-toast';\n\nconst Brands: React.FC = () => {\n  const { user, loading: authLoading } = useAuth();\n  const navigate = useNavigate();\n  const [brands, setBrands] = useState<Brand[]>([]);\n  const [expandedBrands, setExpandedBrands] = useState<Set<number>>(new Set());\n  const [loading, setLoading] = useState(true);\n  const [page, setPage] = useState(1);\n  const [total, setTotal] = useState(0);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [editingBrand, setEditingBrand] = useState<Brand | null>(null);\n  const [showCreateBrandRequestModal, setShowCreateBrandRequestModal] = useState(false);\n  const [editingBrandRequest, setEditingBrandRequest] = useState<BrandRequest | null>(null);\n  \n  // Category states\n  const [categories, setCategories] = useState<Category[]>([]);\n  const [showCreateCategoryModal, setShowCreateCategoryModal] = useState(false);\n  const [editingCategory, setEditingCategory] = useState<Category | null>(null);\n  \n  // Filters\n  const [categoryFilter, setCategoryFilter] = useState<string>('');\n  const [statusFilter, setStatusFilter] = useState<string>('');\n  \n  const perPage = 10;\n\n  useEffect(() => {\n    if (authLoading) return; // Wait for auth to complete\n    \n    loadBrands();\n    loadCategories();\n  }, [page, user?.brand_ids, user?.permissions, authLoading]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  // Load categories on component mount\n  useEffect(() => {\n    loadCategories();\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const loadBrands = async () => {\n    try {\n      setLoading(true);\n      const response = await brandsAPI.getBrands(page, perPage);\n      \n      // DİNAMİK: brand_ids varsa filtrele (backend zaten filtreliyor ama frontend'de de kontrol)\n      let filteredBrands = response.brands;\n      if (user?.brand_ids && user.brand_ids.length > 0) {\n        // Backend zaten filtreliyor, bu ek güvenlik\n        filteredBrands = response.brands;\n      }\n      \n      setBrands(filteredBrands);\n      setTotal(filteredBrands.length); // Mağaza yöneticisi için toplam sayıyı da filtrelenmiş olarak ayarlıyoruz\n      \n    } catch (error) {\n      toast.error('Failed to load brands');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadCategories = async () => {\n    try {\n      const allCategories = await categoriesAPI.getAllActiveCategories();\n      setCategories(allCategories);\n      \n      if (allCategories.length === 0) {\n        toast.error('Veritabanında kategori bulunamadı. Lütfen kategorileri kontrol edin.');\n      }\n    } catch (error: any) {\n      console.error('❌ Kategoriler yüklenemedi:', error);\n      console.error('Error details:', error.response?.data);\n      toast.error('Kategoriler yüklenemedi: ' + (error.response?.data?.detail || error.message));\n      // Set empty array as fallback\n      setCategories([]);\n    }\n  };\n\n  const handleCreateBrandRequest = async (request: BrandRequestCreate) => {\n    try {\n      await brandsAPI.createBrandRequest(request);\n      toast.success('Marka ekleme talebiniz gönderildi');\n      setShowCreateBrandRequestModal(false);\n    } catch (error: any) {\n      toast.error(error.response?.data?.detail || 'Marka talebi oluşturulamadı');\n    }\n  };\n\n  const handleUpdateBrandRequest = async (request: BrandRequestCreate) => {\n    if (!editingBrandRequest) return;\n    try {\n      await brandsAPI.updateBrandRequest(editingBrandRequest.id, request);\n      toast.success('Marka talebi güncellendi');\n      setEditingBrandRequest(null);\n    } catch (error: any) {\n      toast.error(error.response?.data?.detail || 'Marka talebi güncellenemedi');\n    }\n  };\n\n  const handleCreateBrand = async (brandData: any) => {\n    try {\n      console.log('🔄 Creating brand:', brandData);\n      \n      // Önce markayı oluştur\n      const createdBrand = await brandsAPI.createBrand(brandData as BrandCreate);\n      \n      // Eğer logo dosyası varsa, yükle\n      if (brandData.logoFile) {\n        try {\n          await brandsAPI.uploadLogo(createdBrand.id, brandData.logoFile);\n        } catch (uploadError) {\n          console.warn('Logo yüklenemedi:', uploadError);\n          toast.error('Marka oluşturuldu ancak logo yüklenemedi');\n        }\n      }\n      \n      toast.success('Marka başarıyla oluşturuldu');\n      setShowCreateModal(false);\n      loadBrands();\n    } catch (error: any) {\n      console.error('❌ Marka oluşturulamadı:', error);\n      console.error('Error details:', error.response?.data);\n      toast.error('Marka oluşturulamadı: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const handleUpdateBrand = async (brandData: any) => {\n    if (!editingBrand) return;\n    \n    try {\n      console.log('🔄 Updating brand:', editingBrand.id, brandData);\n      await brandsAPI.updateBrand(editingBrand.id, brandData);\n      toast.success('Marka başarıyla güncellendi');\n      setEditingBrand(null);\n      loadBrands();\n    } catch (error: any) {\n      console.error('❌ Marka güncellenemedi:', error);\n      console.error('Error details:', error.response?.data);\n      toast.error('Marka güncellenemedi: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const handleToggleBrandStatus = async (brand: Brand) => {\n    try {\n      if (brand.is_active) {\n        await brandsAPI.deactivateBrand(brand.id);\n        toast.success('Brand deactivated');\n      } else {\n        await brandsAPI.activateBrand(brand.id);\n        toast.success('Brand activated');\n      }\n      loadBrands();\n    } catch (error: any) {\n      toast.error(error.response?.data?.detail || 'Failed to update brand status');\n    }\n  };\n\n  const handleBrandClick = (brand: Brand) => {\n    navigate(`/admin/brands/${brand.id}`);\n  };\n\n  const toggleBrandExpansion = async (brand: Brand, e: React.MouseEvent) => {\n    e.stopPropagation(); // Prevent navigation when clicking expand button\n    const newExpanded = new Set(expandedBrands);\n    \n    if (expandedBrands.has(brand.id)) {\n      newExpanded.delete(brand.id);\n    } else {\n      newExpanded.add(brand.id);\n    }\n    \n    setExpandedBrands(newExpanded);\n  };\n\n  // Category management functions\n  const handleCreateCategory = async (categoryData: CategoryCreate) => {\n    try {\n      console.log('🔄 Creating category:', categoryData);\n      await categoriesAPI.createCategory(categoryData);\n      toast.success('Kategori başarıyla oluşturuldu');\n      setShowCreateCategoryModal(false);\n      await loadCategories();\n    } catch (error: any) {\n      console.error('❌ Kategori oluşturulamadı:', error);\n      console.error('Error details:', error.response?.data);\n      toast.error('Kategori oluşturulamadı: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const handleUpdateCategory = async (categoryData: CategoryCreate | Partial<Category>) => {\n    if (!editingCategory) return;\n    \n    try {\n      console.log('🔄 Updating category:', editingCategory.id, categoryData);\n      await categoriesAPI.updateCategory(editingCategory.id, categoryData);\n      toast.success('Kategori başarıyla güncellendi');\n      setEditingCategory(null);\n      await loadCategories();\n    } catch (error: any) {\n      console.error('❌ Kategori güncellenemedi:', error);\n      console.error('Error details:', error.response?.data);\n      toast.error('Kategori güncellenemedi: ' + (error.response?.data?.detail || error.message));\n    }\n  };\n\n  const handleDeleteCategory = async (categoryId: number) => {\n    if (!window.confirm('Bu kategoriyi silmek istediğinizden emin misiniz?')) {\n      return;\n    }\n\n    try {\n      await categoriesAPI.deleteCategory(categoryId);\n      toast.success('Kategori başarıyla silindi');\n      await loadCategories();\n    } catch (error) {\n      toast.error('Kategori silinemedi');\n    }\n  };\n\n\n  const filteredBrands = brands.filter(brand => {\n    // Text search filter\n    const matchesSearch = !searchTerm || \n    brand.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      (brand.category && brand.category.name && brand.category.name.toLowerCase().includes(searchTerm.toLowerCase()));\n\n    // Category filter - Fix: Check if category exists and compare IDs properly\n    const matchesCategory = !categoryFilter || \n      (brand.category && brand.category.id && brand.category.id === parseInt(categoryFilter));\n\n    // Status filter\n    const matchesStatus = !statusFilter || \n      (statusFilter === 'active' && brand.is_active) ||\n      (statusFilter === 'inactive' && !brand.is_active);\n\n    return matchesSearch && matchesCategory && matchesStatus;\n  });\n\n  // Loading state\n  if (authLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">\n            {user?.brand_ids && user.brand_ids.length > 0 ? 'Markalarım' : 'Markalar'}\n          </h1>\n          <p className=\"text-gray-600\">\n            {user?.brand_ids && user.brand_ids.length > 0\n              ? 'Yönettiğiniz markaların bilgilerini görüntüleyin' \n              : 'Marka bilgilerini ve ayarlarını yönetin'\n            }\n          </p>\n        </div>\n        \n        {/* Action Buttons */}\n        <div className=\"flex gap-2\">\n          {user?.permissions?.includes('brands.manage') && (\n            <>\n              <button\n                onClick={() => setShowCreateCategoryModal(true)}\n                className=\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center gap-2\"\n              >\n                <Plus size={20} />\n                Kategori Ekle\n              </button>\n              <button\n                onClick={() => setShowCreateModal(true)}\n                className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2\"\n              >\n                <Plus size={20} />\n                Marka Ekle\n              </button>\n            </>\n          )}\n          {user?.brand_ids && user.brand_ids.length > 0 && !user?.permissions?.includes('brands.manage') && (\n            <button\n              onClick={() => setShowCreateBrandRequestModal(true)}\n              className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2\"\n            >\n              <Plus size={20} />\n              Marka Talebi\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Search and Filters */}\n      <div className=\"card\">\n        <div className=\"flex flex-col lg:flex-row gap-4\">\n          {/* Search - Takes more space */}\n          <div className=\"flex-1 lg:flex-[2]\">\n            <label className=\"form-label\">Arama</label>\n        <div className=\"relative\">\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n          <input\n            type=\"text\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"form-input pl-10 w-full\"\n            placeholder=\"Markalarda ara...\"\n          />\n        </div>\n          </div>\n\n          {/* Filters Row */}\n          <div className=\"flex flex-col sm:flex-row gap-4 lg:flex-[3]\">\n            {/* Category Filter */}\n            <div className=\"flex-1\">\n              <label className=\"form-label\">Kategori</label>\n              <select\n                value={categoryFilter}\n                onChange={(e) => setCategoryFilter(e.target.value)}\n                className=\"form-input w-full\"\n              >\n                <option value=\"\">Tüm Kategoriler</option>\n                {categories.map(category => (\n                  <option key={category.id} value={category.name}>\n                    {category.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {/* Status Filter */}\n            <div className=\"flex-1\">\n              <label className=\"form-label\">Durum</label>\n              <select\n                value={statusFilter}\n                onChange={(e) => setStatusFilter(e.target.value)}\n                className=\"form-input w-full\"\n              >\n                <option value=\"\">Tüm Durumlar</option>\n                <option value=\"active\">Aktif</option>\n                <option value=\"inactive\">Pasif</option>\n              </select>\n            </div>\n\n            {/* Clear Filters */}\n            <div className=\"flex-shrink-0 flex items-end\">\n              <button\n                onClick={() => {\n                  setSearchTerm('');\n                  setCategoryFilter('');\n                  setStatusFilter('');\n                }}\n                className=\"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg flex items-center justify-center gap-2 transition-colors\"\n                title=\"Filtreleri Temizle\"\n              >\n                <X size={16} />\n                <span className=\"hidden sm:inline\">Temizle</span>\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Active Filters Display */}\n        {(searchTerm || categoryFilter || statusFilter) && (\n          <div className=\"mt-4 pt-4 border-t border-gray-200\">\n            <div className=\"flex flex-wrap items-center gap-2\">\n              <span className=\"text-sm text-gray-600 font-medium\">Aktif Filtreler:</span>\n              \n              {searchTerm && (\n                <span className=\"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full\">\n                  <Search size={12} />\n                  \"{searchTerm}\"\n                  <button \n                    onClick={() => setSearchTerm('')}\n                    className=\"hover:bg-blue-200 rounded-full p-0.5\"\n                  >\n                    <X size={10} />\n                  </button>\n                </span>\n              )}\n              \n              {categoryFilter && (\n                <span className=\"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full\">\n                  <Tag size={12} />\n                  {categoryFilter}\n                  <button \n                    onClick={() => setCategoryFilter('')}\n                    className=\"hover:bg-green-200 rounded-full p-0.5\"\n                  >\n                    <X size={10} />\n                  </button>\n                </span>\n              )}\n              \n              {statusFilter && (\n                <span className=\"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full\">\n                  {statusFilter === 'active' ? '✓' : '✗'} {statusFilter === 'active' ? 'Aktif' : 'Pasif'}\n                  <button \n                    onClick={() => setStatusFilter('')}\n                    className=\"hover:bg-purple-200 rounded-full p-0.5\"\n                  >\n                    <X size={10} />\n                  </button>\n                </span>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Brands Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\n        {loading ? (\n          <div className=\"col-span-full flex justify-center py-8\">\n            <div className=\"spinner\"></div>\n          </div>\n        ) : filteredBrands.length === 0 ? (\n          <div className=\"col-span-full text-center py-8 text-gray-500\">\n            Marka bulunamadı\n          </div>\n        ) : (\n          filteredBrands.map((brand) => (\n            <div \n              key={brand.id} \n              className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all duration-300 cursor-pointer\"\n              onClick={() => handleBrandClick(brand)}\n            >\n              {/* Brand Header */}\n              <div className=\"flex justify-between items-start mb-3\">\n                <div \n                  className=\"flex items-center gap-3 flex-1\"\n                >\n                  <div className=\"h-12 w-12 bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden border border-gray-200\">\n                    {brand.logo_url ? (\n                      <img\n                        src={brand.logo_url.startsWith('http') ? brand.logo_url : `http://localhost:8000${brand.logo_url}`}\n                        alt={`${brand.name} logo`}\n                        className=\"w-full h-full object-contain p-1\"\n                        onError={(e) => {\n                          // Logo yüklenemezse ilk harfi göster\n                          const target = e.target as HTMLImageElement;\n                          target.style.display = 'none';\n                          const parent = target.parentElement;\n                          if (parent) {\n                            parent.innerHTML = `<span class=\"text-lg font-bold text-gray-400\">${brand.name[0]}</span>`;\n                          }\n                        }}\n                      />\n                    ) : (\n                      <span className=\"text-lg font-bold text-gray-400\">\n                        {brand.name[0]}\n                      </span>\n                    )}\n                  </div>\n                  <div className=\"flex-1\">\n                    <h3 className=\"font-medium text-gray-900 flex items-center gap-1 text-base\">\n                      {brand.name}\n                      <button\n                        onClick={(e) => toggleBrandExpansion(brand, e)}\n                        className=\"p-1 hover:bg-gray-100 rounded transition-colors\"\n                        title={expandedBrands.has(brand.id) ? 'Daralt' : 'Genişlet'}\n                      >\n                        {expandedBrands.has(brand.id) ? \n                          <ChevronDown size={16} className=\"text-gray-400\" /> : \n                          <ChevronRight size={16} className=\"text-gray-400\" />\n                        }\n                      </button>\n                    </h3>\n                    <div className=\"flex items-center gap-2 mt-1\">\n                    {brand.category && (\n                        <p className=\"text-sm text-gray-500\">{typeof brand.category === 'string' ? brand.category : brand.category.name}</p>\n                    )}\n                    </div>\n                  </div>\n                </div>\n                \n                <div className=\"flex items-center gap-0.5\">\n                  {user?.permissions?.includes('brands.manage') && (\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      setEditingBrand(brand);\n                      setShowCreateModal(true);\n                    }}\n                    className=\"p-2 hover:bg-blue-100 rounded-lg transition-colors\"\n                  >\n                    <Edit size={16} />\n                  </button>\n                  )}\n                  {user?.permissions?.includes('brands.manage') && (\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-xs text-gray-500\">\n                      {brand.is_active ? 'Aktif' : 'Pasif'}\n                    </span>\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleToggleBrandStatus(brand);\n                      }}\n                      className={`relative inline-flex h-4 w-8 items-center rounded-full transition-colors ${\n                        brand.is_active\n                          ? 'bg-green-500'\n                          : 'bg-gray-300'\n                      }`}\n                    >\n                      <span\n                        className={`inline-block h-3 w-3 transform rounded-full bg-white transition-transform ${\n                          brand.is_active ? 'translate-x-4' : 'translate-x-0.5'\n                        }`}\n                      />\n                    </button>\n                  </div>\n                  )}\n                </div>\n              </div>\n\n\n              <div className=\"flex items-center justify-between mb-2\">\n                <div className=\"text-sm text-gray-400\">\n                  {new Date(brand.created_at).toLocaleDateString('tr-TR')}\n                </div>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n\n      {/* Pagination - Sadece Super Admin için */}\n      {user?.permissions?.includes('brands.manage') && total > perPage && (\n        <div className=\"flex justify-between items-center\">\n          <div className=\"text-sm text-gray-600\">\n            {total} markadan {((page - 1) * perPage) + 1} - {Math.min(page * perPage, total)} arası gösteriliyor\n          </div>\n          <div className=\"flex gap-2\">\n            <button\n              onClick={() => setPage(page - 1)}\n              disabled={page === 1}\n              className=\"btn btn-secondary disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              Önceki\n            </button>\n            <button\n              onClick={() => setPage(page + 1)}\n              disabled={page * perPage >= total}\n              className=\"btn btn-secondary disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              Sonraki\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Create/Edit Brand Modal */}\n      {(showCreateModal || editingBrand) && (\n        <BrandModal\n          brand={editingBrand}\n          onClose={() => {\n            setShowCreateModal(false);\n            setEditingBrand(null);\n          }}\n          onSave={editingBrand ? handleUpdateBrand : handleCreateBrand}\n          categories={categories}\n        />\n      )}\n\n      {/* Create/Edit Category Modal */}\n      {(showCreateCategoryModal || editingCategory) && (\n        <CategoryModal\n          category={editingCategory}\n          onClose={() => {\n            setShowCreateCategoryModal(false);\n            setEditingCategory(null);\n          }}\n          onSave={editingCategory ? \n            (data) => handleUpdateCategory(data) : \n            (data) => handleCreateCategory(data as CategoryCreate)\n          }\n          onDelete={editingCategory ? handleDeleteCategory : undefined}\n        />\n      )}\n\n      {/* Create/Edit Brand Request Modal - Only for Mağaza Yöneticisi */}\n      {(showCreateBrandRequestModal || editingBrandRequest) && user?.brand_ids && user.brand_ids.length > 0 && !user?.permissions?.includes('brands.manage') && (\n        <BrandRequestModal\n          request={editingBrandRequest}\n          onClose={() => {\n            setShowCreateBrandRequestModal(false);\n            setEditingBrandRequest(null);\n          }}\n          onSave={editingBrandRequest ? \n            (data) => handleUpdateBrandRequest(data) : \n            (data) => handleCreateBrandRequest(data as BrandRequestCreate)\n          }\n          categories={categories}\n        />\n      )}\n    </div>\n  );\n};\n\n// Brand Modal Component\ninterface BrandModalProps {\n  brand?: Brand | null;\n  onClose: () => void;\n  onSave: (brandData: any) => Promise<void>;\n  categories: Category[];\n}\n\nconst BrandModal: React.FC<BrandModalProps> = ({ brand, onClose, onSave, categories }) => {\n  const [formData, setFormData] = useState({\n    name: brand?.name || '',\n    category_id: brand?.category_id || '',\n    logo_url: brand?.logo_url || '',\n  });\n  \n  const [logoOption, setLogoOption] = useState<'url' | 'upload'>('url');\n  const [logoFile, setLogoFile] = useState<File | null>(null);\n  const [logoPreview, setLogoPreview] = useState<string | null>(null);\n\n  // Update form data when brand prop changes\n  useEffect(() => {\n    if (brand) {\n      setFormData({\n        name: brand.name || '',\n        category_id: brand.category_id || '',\n        logo_url: brand.logo_url || '',\n      });\n      \n      // Eğer mevcut bir logo URL'i varsa ve dosya yükleme değilse, URL seçeneğini seç\n      if (brand.logo_url && !brand.logo_url.startsWith('blob:')) {\n        setLogoOption('url');\n        setLogoFile(null);\n        setLogoPreview(null);\n      } else {\n        setLogoOption('upload');\n      }\n    } else {\n      // Yeni marka oluştururken varsayılan olarak URL seçeneğini seç\n      setLogoOption('url');\n      setLogoFile(null);\n      setLogoPreview(null);\n    }\n  }, [brand]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value,\n    }));\n  };\n\n  const handleLogoFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      // Validate file type\n      if (!file.type.startsWith('image/')) {\n        toast.error('Sadece resim dosyaları yüklenebilir');\n        return;\n      }\n      \n      // Validate file extension\n      const allowedExtensions = ['.jpg', '.jpeg', '.png', '.gif', '.webp', '.svg'];\n      const fileExtension = file.name.toLowerCase().substring(file.name.lastIndexOf('.'));\n      if (!allowedExtensions.includes(fileExtension)) {\n        toast.error('Desteklenmeyen dosya formatı. Sadece JPG, PNG, GIF, WebP, SVG dosyaları kabul edilir.');\n        return;\n      }\n      \n      // Validate file size (5MB)\n      if (file.size > 5 * 1024 * 1024) {\n        toast.error('Dosya boyutu 5MB\\'dan küçük olmalıdır');\n        return;\n      }\n      \n      // Validate filename (no path traversal)\n      if (file.name.includes('..') || file.name.includes('/') || file.name.includes('\\\\')) {\n        toast.error('Geçersiz dosya adı');\n        return;\n      }\n      \n      setLogoFile(file);\n      \n      // Create preview\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        setLogoPreview(e.target?.result as string);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!formData.name.trim()) {\n      toast.error('Marka adı gereklidir');\n      return;\n    }\n\n    if (logoOption === 'url' && !formData.logo_url.trim()) {\n      toast.error('Logo URL gereklidir');\n      return;\n    }\n\n    if (logoOption === 'upload' && !logoFile) {\n      toast.error('Logo dosyası seçilmelidir');\n      return;\n    }\n\n    const submitData: any = {\n      ...formData,\n      category_id: formData.category_id ? Number(formData.category_id) : undefined\n    };\n\n    // Eğer dosya yükleme seçildiyse, dosyayı submitData'ya ekle\n    if (logoOption === 'upload' && logoFile) {\n      submitData.logoFile = logoFile;\n      // Geçici bir URL ekle (backend'de kullanılmayacak)\n      submitData.logo_url = 'temp';\n    }\n\n    // Eğer mevcut marka güncelleniyorsa ve dosya yükleme seçildiyse\n    if (logoOption === 'upload' && logoFile && brand) {\n      try {\n        const uploadResult = await brandsAPI.uploadLogo(brand.id, logoFile);\n        submitData.logo_url = uploadResult.logo_url;\n      } catch (error) {\n        toast.error('Logo yüklenemedi');\n        return;\n      }\n    }\n\n    await onSave(submitData);\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"p-6\">\n          <h2 className=\"text-xl font-bold mb-4\">\n            {brand ? 'Marka Düzenle' : 'Marka Oluştur'}\n          </h2>\n          \n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div>\n              <label className=\"form-label\">Marka Adı *</label>\n              <input\n                type=\"text\"\n                name=\"name\"\n                value={formData.name}\n                onChange={handleChange}\n                className=\"form-input\"\n                required\n                placeholder=\"Marka adını girin\"\n              />\n            </div>\n\n            <div>\n              <label className=\"form-label\">Kategori</label>\n              <select\n                name=\"category_id\"\n                value={formData.category_id || ''}\n                onChange={handleChange}\n                className=\"form-input\"\n              >\n                <option value=\"\">Kategori Seçin</option>\n                {categories && categories.length > 0 ? (\n                  categories.map(category => (\n                    <option key={category.id} value={category.id}>\n                      {category.name}\n                    </option>\n                  ))\n                ) : (\n                  <option disabled>Kategori yükleniyor...</option>\n                )}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"form-label\">Logo *</label>\n              \n              {/* Logo seçenekleri */}\n              <div className=\"flex gap-4 mb-4\">\n                <label className=\"flex items-center\">\n                  <input\n                    type=\"radio\"\n                    name=\"logoOption\"\n                    value=\"url\"\n                    checked={logoOption === 'url'}\n                    onChange={(e) => {\n                      setLogoOption(e.target.value as 'url' | 'upload');\n                      setLogoFile(null);\n                      setLogoPreview(null);\n                    }}\n                    className=\"mr-2\"\n                  />\n                  URL ile\n                </label>\n                <label className=\"flex items-center\">\n                  <input\n                    type=\"radio\"\n                    name=\"logoOption\"\n                    value=\"upload\"\n                    checked={logoOption === 'upload'}\n                    onChange={(e) => {\n                      setLogoOption(e.target.value as 'url' | 'upload');\n                      setFormData(prev => ({ ...prev, logo_url: '' }));\n                    }}\n                    className=\"mr-2\"\n                  />\n                  Dosya Yükle\n                </label>\n              </div>\n\n              {/* URL seçeneği */}\n              {logoOption === 'url' && (\n                <div>\n                  <input\n                    type=\"url\"\n                    name=\"logo_url\"\n                    value={formData.logo_url}\n                    onChange={handleChange}\n                    className=\"form-input\"\n                    placeholder=\"https://example.com/logo.png\"\n                    required\n                  />\n                  <p className=\"text-xs text-gray-500 mt-1\">Marka logosunun URL adresini girin</p>\n                </div>\n              )}\n\n              {/* Dosya yükleme seçeneği */}\n              {logoOption === 'upload' && (\n                <div>\n                  <input\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={handleLogoFileChange}\n                    className=\"form-input\"\n                    required\n                  />\n                  <p className=\"text-xs text-gray-500 mt-1\">JPG, PNG, GIF, WebP, SVG formatları desteklenir (Max: 5MB)</p>\n                  \n                  {/* Logo önizleme */}\n                  {logoPreview && (\n                    <div className=\"mt-3\">\n                      <p className=\"text-sm font-medium mb-2\">Önizleme:</p>\n                      <img\n                        src={logoPreview}\n                        alt=\"Logo önizleme\"\n                        className=\"w-20 h-20 object-contain border border-gray-300 rounded\"\n                      />\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n\n            <div className=\"flex gap-2 pt-4\">\n              <button type=\"submit\" className=\"btn btn-primary flex-1\">\n                {brand ? 'Marka Güncelle' : 'Marka Oluştur'}\n              </button>\n              <button type=\"button\" onClick={onClose} className=\"btn btn-secondary\">\n                İptal\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n\n// Category Modal Component\ninterface CategoryModalProps {\n  category?: Category | null;\n  onClose: () => void;\n  onSave: (categoryData: CategoryCreate | Partial<Category>) => Promise<void>;\n  onDelete?: (categoryId: number) => Promise<void>;\n}\n\nconst CategoryModal: React.FC<CategoryModalProps> = ({ category, onClose, onSave, onDelete }) => {\n  const [formData, setFormData] = useState({\n    name: category?.name || ''\n  });\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value,\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!formData.name.trim()) {\n      toast.error('Kategori adı gereklidir');\n      return;\n    }\n\n    await onSave(formData);\n  };\n\n  const handleDelete = async () => {\n    if (!category || !onDelete) return;\n    \n    if (window.confirm('Bu kategoriyi silmek istediğinizden emin misiniz?')) {\n      await onDelete(category.id);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"p-6\">\n          <h2 className=\"text-xl font-bold mb-4\">\n            {category ? 'Kategori Düzenle' : 'Kategori Oluştur'}\n          </h2>\n          \n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div>\n              <label className=\"form-label\">Kategori Adı *</label>\n              <input\n                type=\"text\"\n                name=\"name\"\n                value={formData.name}\n                onChange={handleChange}\n                className=\"form-input\"\n                required\n                placeholder=\"Kategori adını girin\"\n              />\n            </div>\n\n            <div className=\"flex gap-2 pt-4\">\n              <button type=\"submit\" className=\"btn btn-primary flex-1\">\n                {category ? 'Kategori Güncelle' : 'Kategori Oluştur'}\n              </button>\n              {category && onDelete && (\n                <button \n                  type=\"button\" \n                  onClick={handleDelete}\n                  className=\"btn bg-red-600 hover:bg-red-700 text-white\"\n                >\n                  Sil\n                </button>\n              )}\n              <button type=\"button\" onClick={onClose} className=\"btn btn-secondary\">\n                İptal\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Brand Request Modal Component\n  interface BrandRequestModalProps {\n    request?: BrandRequest | null;\n    onClose: () => void;\n    onSave: (requestData: BrandRequestCreate) => Promise<void>;\n    categories: Category[];\n  }\n\n  const BrandRequestModal: React.FC<BrandRequestModalProps> = ({ request, onClose, onSave, categories }) => {\n    const [formData, setFormData] = useState<BrandRequestCreate>({\n      name: request?.name || '',\n      category_id: request?.category_id || undefined,\n      logo_url: request?.logo_url || '',\n      request_message: request?.request_message || ''\n    });\n\n    // Update form data when request prop changes\n    useEffect(() => {\n      if (request) {\n        setFormData({\n          name: request.name || '',\n          category_id: request.category_id || undefined,\n          logo_url: request.logo_url || '',\n          request_message: request.request_message || ''\n        });\n      }\n    }, [request]);\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\n      const { name, value } = e.target;\n      setFormData((prev: BrandRequestCreate) => ({\n        ...prev,\n        [name]: value,\n      }));\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n      e.preventDefault();\n      \n      if (!formData.name.trim()) {\n        toast.error('Marka adı gereklidir');\n        return;\n      }\n\n      if (!formData.logo_url.trim()) {\n        toast.error('Logo URL gereklidir');\n        return;\n      }\n\n      await onSave(formData);\n    };\n\n    return (\n      <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n        <div className=\"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto\">\n          <div className=\"p-6\">\n            <h2 className=\"text-xl font-bold mb-4\">\n              {request ? 'Marka Talebi Düzenle' : 'Yeni Marka Talebi Oluştur'}\n            </h2>\n            \n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div>\n                <label className=\"form-label\">Marka Adı *</label>\n                <input\n                  type=\"text\"\n                  name=\"name\"\n                  value={formData.name}\n                  onChange={handleChange}\n                  className=\"form-input\"\n                  required\n                  placeholder=\"Marka adını girin\"\n                />\n              </div>\n\n              <div>\n                <label className=\"form-label\">Kategori</label>\n                <select\n                  name=\"category_id\"\n                  value={formData.category_id || ''}\n                  onChange={handleChange}\n                  className=\"form-input\"\n                >\n                  <option value=\"\">Kategori Seçin</option>\n                  {categories && categories.length > 0 ? (\n                    categories.map(category => (\n                      <option key={category.id} value={category.name}>\n                        {category.name}\n                      </option>\n                    ))\n                  ) : (\n                    <option disabled>Kategori yükleniyor...</option>\n                  )}\n                </select>\n              </div>\n\n              <div>\n                <label className=\"form-label\">Logo URL *</label>\n                <input\n                  type=\"url\"\n                  name=\"logo_url\"\n                  value={formData.logo_url || ''}\n                  onChange={handleChange}\n                  className=\"form-input\"\n                  placeholder=\"https://example.com/logo.png\"\n                  required\n                />\n                <p className=\"text-xs text-gray-500 mt-1\">Marka logosunun URL adresini girin</p>\n              </div>\n\n              <div>\n                <label className=\"form-label\">Talep Mesajı</label>\n                <textarea\n                  name=\"request_message\"\n                  value={formData.request_message || ''}\n                  onChange={handleChange}\n                  className=\"form-input\"\n                  rows={3}\n                  placeholder=\"Yeni marka ekleme talebinizle ilgili açıklama (isteğe bağlı)\"\n                />\n              </div>\n\n              <div className=\"flex gap-2 pt-4\">\n                <button type=\"submit\" className=\"btn btn-primary flex-1\">\n                  {request ? 'Talebi Güncelle' : 'Talep Oluştur'}\n                </button>\n                <button type=\"button\" onClick={onClose} className=\"btn btn-secondary\">\n                  İptal\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\nexport default Brands;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}