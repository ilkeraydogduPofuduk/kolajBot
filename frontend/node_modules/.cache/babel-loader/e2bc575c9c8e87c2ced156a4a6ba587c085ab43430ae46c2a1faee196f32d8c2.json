{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ilker\\\\Desktop\\\\aibrands\\\\frontend\\\\src\\\\components\\\\modals\\\\DynamicChannelModal.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { X, Send, AlertCircle } from 'lucide-react';\nimport { socialMediaChannelsAPI } from '../../api/socialMediaChannels';\nimport { brandsAPI } from '../../api/brands';\nimport toast from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst DynamicChannelModal = ({\n  isOpen,\n  onClose,\n  platform,\n  onSuccess,\n  editingChannel\n}) => {\n  _s();\n  const [formData, setFormData] = useState({});\n  const [brands, setBrands] = useState([]);\n  const [addingChannel, setAddingChannel] = useState(false);\n  const [discovering, setDiscovering] = useState(false);\n  const [discoveredChats, setDiscoveredChats] = useState([]);\n  const [botInfo, setBotInfo] = useState(null);\n  const [selectedChat, setSelectedChat] = useState(null);\n  const [selectedChats, setSelectedChats] = useState({});\n  const [step, setStep] = useState('token');\n  useEffect(() => {\n    if (isOpen && platform) {\n      loadBrands();\n      initializeFormData();\n    }\n  }, [isOpen, platform, editingChannel]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const loadBrands = async () => {\n    try {\n      const response = await brandsAPI.getBrands(1, 1000);\n      setBrands(response.brands);\n    } catch (error) {\n      console.error('Error loading brands:', error);\n    }\n  };\n  const initializeFormData = () => {\n    if (editingChannel) {\n      setFormData({\n        brand_id: editingChannel.brand_id,\n        bot_token: editingChannel.bot_token || ''\n      });\n    } else {\n      setFormData({\n        brand_id: 0,\n        bot_token: ''\n      });\n    }\n    setSelectedChat(null);\n    setStep('token');\n    setDiscoveredChats([]);\n    setBotInfo(null);\n  };\n  const handleInputChange = (fieldName, value) => {\n    setFormData(prev => ({\n      ...prev,\n      [fieldName]: value\n    }));\n\n    // Bot token deƒüi≈ütiƒüinde otomatik ke≈üfet\n    if (fieldName === 'bot_token' && value && value.length > 35) {\n      // Kƒ±sa bir gecikme ile ke≈üfet (kullanƒ±cƒ± yazmayƒ± bitirsin)\n      setTimeout(() => {\n        if (formData.bot_token === value) {\n          // Kullanƒ±cƒ± hala aynƒ± token'ƒ± yazƒ±yor mu?\n          discoverChannels(value);\n        }\n      }, 1000);\n    }\n  };\n  const discoverChannels = async token => {\n    setDiscovering(true);\n    try {\n      const res = await socialMediaChannelsAPI.discoverTelegramChats(token);\n      setDiscoveredChats(res.chats || []);\n      setBotInfo(res.bot_info);\n\n      // API'den gelen mesajƒ± kontrol et\n      if (res.message) {\n        toast(res.message, {\n          icon: '‚ÑπÔ∏è',\n          duration: 6000\n        });\n\n        // Talimatlarƒ± g√∂ster\n        if (res.instructions && res.instructions.length > 0) {\n          toast(res.instructions.join(' ‚Ä¢ '), {\n            icon: 'üí°',\n            duration: 8000\n          });\n        }\n      }\n      if (!res.chats || res.chats.length === 0) {\n        // Otomatik ke≈üif ba≈üarƒ±sƒ±z, manuel giri≈ü se√ßeneƒüi sun\n        setStep('manual');\n      } else {\n        toast.success(`${res.chats.length} kanal bulundu`);\n        setStep('channels');\n      }\n    } catch (e) {\n      var _e$response;\n      const status = e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : _e$response.status;\n      if (status === 401) {\n        toast.error('Oturum s√ºresi doldu. L√ºtfen tekrar giri≈ü yapƒ±n.');\n      } else {\n        var _e$response2, _e$response2$data;\n        const msg = (e === null || e === void 0 ? void 0 : (_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : (_e$response2$data = _e$response2.data) === null || _e$response2$data === void 0 ? void 0 : _e$response2$data.detail) || 'Bot token ge√ßersiz';\n        toast.error(`‚ùå ${msg}`);\n      }\n      setStep('token');\n    } finally {\n      setDiscovering(false);\n    }\n  };\n  const toggleSelectChat = chat => {\n    setSelectedChats(prev => {\n      const next = {\n        ...prev\n      };\n      if (next[chat.chat_id]) {\n        delete next[chat.chat_id];\n      } else {\n        next[chat.chat_id] = chat;\n      }\n      return next;\n    });\n  };\n  const proceedToBrand = () => {\n    const first = Object.values(selectedChats)[0];\n    if (!first) {\n      toast.error('En az bir kanal se√ßin');\n      return;\n    }\n    setSelectedChat(first);\n    setStep('brand');\n  };\n  const handleAddSelectedChannels = async () => {\n    if (!formData.bot_token || !formData.brand_id) {\n      toast.error('Bot token ve marka se√ßimi gerekli');\n      return;\n    }\n    const chats = Object.values(selectedChats);\n    if (!chats.length) {\n      toast.error('En az bir kanal se√ßin');\n      return;\n    }\n    setAddingChannel(true);\n    let successCount = 0;\n    let skippedCount = 0;\n    for (const chat of chats) {\n      // √ñn kontrol: private sohbetler kanal olarak eklenemez\n      if (chat.type === 'private') {\n        skippedCount += 1;\n        toast('‚ÑπÔ∏è √ñzel sohbetler eklenemez: ' + (chat.username || chat.chat_id), {\n          icon: '‚ÑπÔ∏è'\n        });\n        continue;\n      }\n      try {\n        const username = chat.username ? `@${chat.username}` : null;\n        const chatId = chat.chat_id ? String(chat.chat_id) : undefined;\n        // Uyarƒ±: grup/kanal chat_id genelde -100 ile ba≈ülar\n        if (chatId && !String(chatId).startsWith('-')) {\n          toast('‚ÑπÔ∏è Bu sohbet kimliƒüi kanal/grup olmayabilir: ' + chatId, {\n            icon: '‚ÑπÔ∏è'\n          });\n        }\n        await socialMediaChannelsAPI.addChannelByUsername(formData.bot_token, username, formData.brand_id, chatId);\n        successCount += 1;\n        toast.success(`${chat.title || chat.username || chat.chat_id}: eklendi`);\n      } catch (e) {\n        var _e$response3, _e$response3$data;\n        const detail = (e === null || e === void 0 ? void 0 : (_e$response3 = e.response) === null || _e$response3 === void 0 ? void 0 : (_e$response3$data = _e$response3.data) === null || _e$response3$data === void 0 ? void 0 : _e$response3$data.detail) || '';\n        if (typeof detail === 'string' && detail.includes('zaten eklenmi≈ü')) {\n          // Mevcutta varsa ba≈üarƒ± sayalƒ±m ve uyarƒ± verelim\n          successCount += 1;\n          skippedCount += 1;\n          toast(`‚ÑπÔ∏è ${chat.title || chat.username || chat.chat_id}: zaten ekli`, {\n            icon: '‚ÑπÔ∏è'\n          });\n        } else if (typeof detail === 'string' && (detail.includes('y√∂netici') || detail.toLowerCase().includes('admin'))) {\n          toast.error(`‚ùå ${chat.title || chat.username || chat.chat_id}: Bot bu kanalda y√∂netici deƒüil`);\n        } else if (typeof detail === 'string' && (detail.toLowerCase().includes('bulunamadƒ±') || detail.toLowerCase().includes('not found'))) {\n          toast.error(`‚ùå ${chat.title || chat.username || chat.chat_id}: Kanal bulunamadƒ±`);\n        } else {\n          const msg = detail || 'Kanal eklenemedi';\n          toast.error(`‚ùå ${chat.title || chat.username || chat.chat_id}: ${msg}`);\n        }\n      }\n    }\n    setAddingChannel(false);\n    if (successCount > 0) {\n      const addedOnly = successCount - skippedCount;\n      if (addedOnly > 0) {\n        toast.success(`${addedOnly} yeni kanal eklendi`);\n      }\n      if (skippedCount > 0) {\n        toast(`‚ÑπÔ∏è ${skippedCount} kanal zaten sistemdeydi`, {\n          icon: '‚ÑπÔ∏è'\n        });\n      }\n      onSuccess();\n      setSelectedChats({});\n      onClose();\n    }\n  };\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-2 rounded-lg bg-blue-100\",\n            children: /*#__PURE__*/_jsxDEV(Send, {\n              className: \"h-5 w-5 text-blue-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-lg font-semibold\",\n              children: editingChannel ? 'Kanal D√ºzenle' : 'Telegram Kanalƒ± Ekle'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: \"Telegram bot bilgilerini girin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"p-1 hover:bg-gray-100 rounded-lg transition-colors\",\n          children: /*#__PURE__*/_jsxDEV(X, {\n            size: 20,\n            className: \"text-gray-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-6\",\n        children: [step === 'token' && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"Bot Token *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              value: formData.bot_token || '',\n              onChange: e => handleInputChange('bot_token', e.target.value),\n              placeholder: \"123456789:ABCDEFGHIJKLMNOPQRSTUVWXYZ123456789\",\n              className: \"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-500 mt-1\",\n              children: \"BotFather'dan ald\\u0131\\u011F\\u0131n\\u0131z tokeni girin. Token girildikten sonra otomatik olarak kanallar ke\\u015Ffedilecek.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 15\n          }, this), discovering && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center py-4\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"inline-flex items-center gap-2 text-blue-600\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 21\n              }, this), \"Kanallar ke\\u015Ffediliyor...\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true), step === 'channels' && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [botInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-green-50 border border-green-200 rounded-lg p-3 mb-4\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-green-800\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Bot:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 21\n              }, this), \" \", botInfo.first_name, \" (@\", botInfo.username, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold text-gray-900 mb-3\",\n              children: [\"Botun Eri\\u015Febildi\\u011Fi Kanallar (\", discoveredChats.length, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"max-h-60 overflow-y-auto space-y-2\",\n              children: discoveredChats.map(chat => {\n                const checked = Boolean(selectedChats[chat.chat_id]);\n                return /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: `flex items-center justify-between p-3 border rounded-lg cursor-pointer transition-colors ${checked ? 'border-blue-500 bg-blue-50' : 'border-gray-200 hover:border-gray-300'}`,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center gap-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      className: \"h-4 w-4\",\n                      checked: checked,\n                      onChange: () => toggleSelectChat(chat)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 306,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                        className: \"font-medium text-gray-900\",\n                        children: chat.title || (chat.username ? `@${chat.username}` : `Kanal ${chat.chat_id}`)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 313,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"text-sm text-gray-500\",\n                        children: [chat.type === 'channel' ? 'Kanal' : chat.type === 'supergroup' ? 'S√ºper Grup' : 'Kanal', chat.member_count && ` ‚Ä¢ ${chat.member_count} √ºye`, chat.is_admin && /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800\",\n                          children: \"Admin\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 320,\n                          columnNumber: 33\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 316,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 312,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 305,\n                    columnNumber: 25\n                  }, this)\n                }, chat.chat_id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 299,\n                  columnNumber: 23\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-3 flex justify-end\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: proceedToBrand,\n                className: \"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg\",\n                children: \"Se\\xE7ilenlerle Devam Et\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), step === 'brand' && selectedChat && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-blue-50 border border-blue-200 rounded-lg p-3\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-blue-800\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Se\\xE7ilen Kanal:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 348,\n                columnNumber: 19\n              }, this), \" \", selectedChat.title || (selectedChat.username ? `@${selectedChat.username}` : `Kanal ${selectedChat.chat_id}`)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-1\",\n              children: \"Marka *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: formData.brand_id || 0,\n              onChange: e => handleInputChange('brand_id', parseInt(e.target.value)),\n              className: \"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\",\n              required: true,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: 0,\n                children: \"Marka se\\xE7in\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 362,\n                columnNumber: 19\n              }, this), brands.map(brand => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: brand.id,\n                children: brand.name\n              }, brand.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 364,\n                columnNumber: 21\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-green-50 border border-green-200 rounded-lg p-3\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-start gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n                className: \"h-4 w-4 text-green-600 mt-0.5 flex-shrink-0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 371,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-green-800\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"font-medium\",\n                  children: \"Haz\\u0131r!\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 373,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1\",\n                  children: \"Kanal ad\\u0131, \\xFCye say\\u0131s\\u0131 ve di\\u011Fer bilgiler otomatik olarak \\xE7ekilecek.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 374,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 372,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-3 pt-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: onClose,\n            className: \"flex-1 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\",\n            children: \"\\u0130ptal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 13\n          }, this), step === 'token' && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => discoverChannels(formData.bot_token),\n            disabled: !formData.bot_token || discovering,\n            className: \"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed\",\n            children: discovering ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 401,\n                columnNumber: 21\n              }, this), \"Ke\\u015Ffediliyor...\"]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Send, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 406,\n                columnNumber: 21\n              }, this), \"Kanallar\\u0131 Ke\\u015Ffet\"]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 15\n          }, this), step === 'channels' && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setStep('token'),\n            className: \"flex-1 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\",\n            children: \"Geri\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 15\n          }, this), step === 'brand' && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setStep('channels'),\n              className: \"flex-1 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\",\n              children: \"Geri\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleAddSelectedChannels,\n              disabled: addingChannel || !formData.brand_id,\n              className: \"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed\",\n              children: addingChannel ? 'Ekleniyor...' : 'Se√ßilenleri Ekle'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 430,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 224,\n    columnNumber: 5\n  }, this);\n};\n_s(DynamicChannelModal, \"LMNaG5dqhCUooQFM4Ud7mugfk6c=\");\n_c = DynamicChannelModal;\nexport default DynamicChannelModal;\nvar _c;\n$RefreshReg$(_c, \"DynamicChannelModal\");","map":{"version":3,"names":["React","useState","useEffect","X","Send","AlertCircle","socialMediaChannelsAPI","brandsAPI","toast","jsxDEV","_jsxDEV","Fragment","_Fragment","DynamicChannelModal","isOpen","onClose","platform","onSuccess","editingChannel","_s","formData","setFormData","brands","setBrands","addingChannel","setAddingChannel","discovering","setDiscovering","discoveredChats","setDiscoveredChats","botInfo","setBotInfo","selectedChat","setSelectedChat","selectedChats","setSelectedChats","step","setStep","loadBrands","initializeFormData","response","getBrands","error","console","brand_id","bot_token","handleInputChange","fieldName","value","prev","length","setTimeout","discoverChannels","token","res","discoverTelegramChats","chats","bot_info","message","icon","duration","instructions","join","success","e","_e$response","status","_e$response2","_e$response2$data","msg","data","detail","toggleSelectChat","chat","next","chat_id","proceedToBrand","first","Object","values","handleAddSelectedChannels","successCount","skippedCount","type","username","chatId","String","undefined","startsWith","addChannelByUsername","title","_e$response3","_e$response3$data","includes","toLowerCase","addedOnly","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","size","onChange","target","placeholder","required","first_name","map","checked","Boolean","member_count","is_admin","parseInt","brand","id","name","disabled","_c","$RefreshReg$"],"sources":["C:/Users/ilker/Desktop/aibrands/frontend/src/components/modals/DynamicChannelModal.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { X, Send, AlertCircle } from 'lucide-react';\nimport { socialMediaChannelsAPI } from '../../api/socialMediaChannels';\nimport { brandsAPI } from '../../api/brands';\nimport toast from 'react-hot-toast';\n\n\ninterface ChannelModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  platform: 'telegram' | null;\n  onSuccess: () => void;\n  editingChannel?: any;\n}\n\nconst DynamicChannelModal: React.FC<ChannelModalProps> = ({\n  isOpen,\n  onClose,\n  platform,\n  onSuccess,\n  editingChannel\n}) => {\n  const [formData, setFormData] = useState<Record<string, any>>({});\n  const [brands, setBrands] = useState<any[]>([]);\n  const [addingChannel, setAddingChannel] = useState(false);\n  const [discovering, setDiscovering] = useState(false);\n  const [discoveredChats, setDiscoveredChats] = useState<any[]>([]);\n  const [botInfo, setBotInfo] = useState<any>(null);\n  const [selectedChat, setSelectedChat] = useState<any>(null);\n  const [selectedChats, setSelectedChats] = useState<Record<string, any>>({});\n  const [step, setStep] = useState<'token' | 'channels' | 'manual' | 'brand'>('token');\n\n  useEffect(() => {\n    if (isOpen && platform) {\n      loadBrands();\n      initializeFormData();\n    }\n  }, [isOpen, platform, editingChannel]); // eslint-disable-line react-hooks/exhaustive-deps\n\n\n  const loadBrands = async () => {\n    try {\n      const response = await brandsAPI.getBrands(1, 1000);\n      setBrands(response.brands);\n    } catch (error) {\n      console.error('Error loading brands:', error);\n    }\n  };\n\n  const initializeFormData = () => {\n    if (editingChannel) {\n      setFormData({\n        brand_id: editingChannel.brand_id,\n        bot_token: editingChannel.bot_token || ''\n      });\n    } else {\n      setFormData({\n        brand_id: 0,\n        bot_token: ''\n      });\n    }\n    setSelectedChat(null);\n    setStep('token');\n    setDiscoveredChats([]);\n    setBotInfo(null);\n  };\n\n\n\n\n  const handleInputChange = (fieldName: string, value: any) => {\n    setFormData(prev => ({\n      ...prev,\n      [fieldName]: value\n    }));\n\n    // Bot token deƒüi≈ütiƒüinde otomatik ke≈üfet\n    if (fieldName === 'bot_token' && value && value.length > 35) {\n      // Kƒ±sa bir gecikme ile ke≈üfet (kullanƒ±cƒ± yazmayƒ± bitirsin)\n      setTimeout(() => {\n        if (formData.bot_token === value) { // Kullanƒ±cƒ± hala aynƒ± token'ƒ± yazƒ±yor mu?\n          discoverChannels(value);\n        }\n      }, 1000);\n    }\n  };\n\n  const discoverChannels = async (token: string) => {\n    setDiscovering(true);\n    try {\n      const res = await socialMediaChannelsAPI.discoverTelegramChats(token);\n      setDiscoveredChats(res.chats || []);\n      setBotInfo(res.bot_info);\n      \n      // API'den gelen mesajƒ± kontrol et\n      if (res.message) {\n        toast(res.message, { \n          icon: '‚ÑπÔ∏è',\n          duration: 6000 \n        });\n        \n        // Talimatlarƒ± g√∂ster\n        if (res.instructions && res.instructions.length > 0) {\n          toast(res.instructions.join(' ‚Ä¢ '), {\n            icon: 'üí°',\n            duration: 8000\n          });\n        }\n      }\n      \n      if (!res.chats || res.chats.length === 0) {\n        // Otomatik ke≈üif ba≈üarƒ±sƒ±z, manuel giri≈ü se√ßeneƒüi sun\n        setStep('manual');\n      } else {\n        toast.success(`${res.chats.length} kanal bulundu`);\n        setStep('channels');\n      }\n    } catch (e: any) {\n      const status = e?.response?.status;\n      if (status === 401) {\n        toast.error('Oturum s√ºresi doldu. L√ºtfen tekrar giri≈ü yapƒ±n.');\n      } else {\n        const msg = e?.response?.data?.detail || 'Bot token ge√ßersiz';\n        toast.error(`‚ùå ${msg}`);\n      }\n      setStep('token');\n    } finally {\n      setDiscovering(false);\n    }\n  };\n\n  const toggleSelectChat = (chat: any) => {\n    setSelectedChats(prev => {\n      const next = { ...prev } as Record<string, any>;\n      if (next[chat.chat_id]) {\n        delete next[chat.chat_id];\n      } else {\n        next[chat.chat_id] = chat;\n      }\n      return next;\n    });\n  };\n\n  const proceedToBrand = () => {\n    const first = Object.values(selectedChats)[0];\n    if (!first) {\n      toast.error('En az bir kanal se√ßin');\n      return;\n    }\n    setSelectedChat(first);\n    setStep('brand');\n  };\n\n  const handleAddSelectedChannels = async () => {\n    if (!formData.bot_token || !formData.brand_id) {\n      toast.error('Bot token ve marka se√ßimi gerekli');\n      return;\n    }\n    const chats = Object.values(selectedChats);\n    if (!chats.length) {\n      toast.error('En az bir kanal se√ßin');\n      return;\n    }\n    setAddingChannel(true);\n    let successCount = 0;\n    let skippedCount = 0;\n    for (const chat of chats) {\n      // √ñn kontrol: private sohbetler kanal olarak eklenemez\n      if (chat.type === 'private') {\n        skippedCount += 1;\n        toast('‚ÑπÔ∏è √ñzel sohbetler eklenemez: ' + (chat.username || chat.chat_id), { icon: '‚ÑπÔ∏è' });\n        continue;\n      }\n      try {\n        const username = chat.username ? `@${chat.username}` : null;\n        const chatId = chat.chat_id ? String(chat.chat_id) : undefined;\n        // Uyarƒ±: grup/kanal chat_id genelde -100 ile ba≈ülar\n        if (chatId && !String(chatId).startsWith('-')) {\n          toast('‚ÑπÔ∏è Bu sohbet kimliƒüi kanal/grup olmayabilir: ' + chatId, { icon: '‚ÑπÔ∏è' });\n        }\n        await socialMediaChannelsAPI.addChannelByUsername(\n          formData.bot_token,\n          username,\n          formData.brand_id,\n          chatId\n        );\n        successCount += 1;\n        toast.success(`${chat.title || chat.username || chat.chat_id}: eklendi`);\n      } catch (e: any) {\n        const detail = e?.response?.data?.detail || '';\n        if (typeof detail === 'string' && detail.includes('zaten eklenmi≈ü')) {\n          // Mevcutta varsa ba≈üarƒ± sayalƒ±m ve uyarƒ± verelim\n          successCount += 1;\n          skippedCount += 1;\n          toast(`‚ÑπÔ∏è ${chat.title || chat.username || chat.chat_id}: zaten ekli`, { icon: '‚ÑπÔ∏è' });\n        } else if (typeof detail === 'string' && (detail.includes('y√∂netici') || detail.toLowerCase().includes('admin'))) {\n          toast.error(`‚ùå ${chat.title || chat.username || chat.chat_id}: Bot bu kanalda y√∂netici deƒüil`);\n        } else if (typeof detail === 'string' && (detail.toLowerCase().includes('bulunamadƒ±') || detail.toLowerCase().includes('not found'))) {\n          toast.error(`‚ùå ${chat.title || chat.username || chat.chat_id}: Kanal bulunamadƒ±`);\n        } else {\n          const msg = detail || 'Kanal eklenemedi';\n          toast.error(`‚ùå ${chat.title || chat.username || chat.chat_id}: ${msg}`);\n        }\n      }\n    }\n    setAddingChannel(false);\n    if (successCount > 0) {\n      const addedOnly = successCount - skippedCount;\n      if (addedOnly > 0) {\n        toast.success(`${addedOnly} yeni kanal eklendi`);\n      }\n      if (skippedCount > 0) {\n        toast(`‚ÑπÔ∏è ${skippedCount} kanal zaten sistemdeydi`, { icon: '‚ÑπÔ∏è' });\n      }\n      onSuccess();\n      setSelectedChats({});\n      onClose();\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 rounded-lg bg-blue-100\">\n              <Send className=\"h-5 w-5 text-blue-600\" />\n            </div>\n            <div>\n              <h2 className=\"text-lg font-semibold\">\n                {editingChannel ? 'Kanal D√ºzenle' : 'Telegram Kanalƒ± Ekle'}\n              </h2>\n              <p className=\"text-sm text-gray-600\">\n                Telegram bot bilgilerini girin\n              </p>\n            </div>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"p-1 hover:bg-gray-100 rounded-lg transition-colors\"\n          >\n            <X size={20} className=\"text-gray-500\" />\n          </button>\n        </div>\n\n        <div className=\"space-y-6\">\n          {/* Step 1: Bot Token */}\n          {step === 'token' && (\n            <>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Bot Token *\n                </label>\n                <input\n                  type=\"password\"\n                  value={formData.bot_token || ''}\n                  onChange={(e) => handleInputChange('bot_token', e.target.value)}\n                  placeholder=\"123456789:ABCDEFGHIJKLMNOPQRSTUVWXYZ123456789\"\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  required\n                />\n                <p className=\"text-xs text-gray-500 mt-1\">\n                  BotFather'dan aldƒ±ƒüƒ±nƒ±z tokeni girin. Token girildikten sonra otomatik olarak kanallar ke≈üfedilecek.\n                </p>\n              </div>\n\n              {discovering && (\n                <div className=\"text-center py-4\">\n                  <div className=\"inline-flex items-center gap-2 text-blue-600\">\n                    <div className=\"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin\" />\n                    Kanallar ke≈üfediliyor...\n                  </div>\n                </div>\n              )}\n            </>\n          )}\n\n          {/* Step 2: Channel Selection */}\n          {step === 'channels' && (\n            <>\n              {botInfo && (\n                <div className=\"bg-green-50 border border-green-200 rounded-lg p-3 mb-4\">\n                  <p className=\"text-sm text-green-800\">\n                    <strong>Bot:</strong> {botInfo.first_name} (@{botInfo.username})\n                  </p>\n                </div>\n              )}\n\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">\n                  Botun Eri≈üebildiƒüi Kanallar ({discoveredChats.length})\n                </h3>\n                <div className=\"max-h-60 overflow-y-auto space-y-2\">\n                  {discoveredChats.map((chat) => {\n                    const checked = Boolean(selectedChats[chat.chat_id]);\n                    return (\n                      <label\n                        key={chat.chat_id}\n                        className={`flex items-center justify-between p-3 border rounded-lg cursor-pointer transition-colors ${\n                          checked ? 'border-blue-500 bg-blue-50' : 'border-gray-200 hover:border-gray-300'\n                        }`}\n                      >\n                        <div className=\"flex items-center gap-3\">\n                          <input\n                            type=\"checkbox\"\n                            className=\"h-4 w-4\"\n                            checked={checked}\n                            onChange={() => toggleSelectChat(chat)}\n                          />\n                          <div>\n                            <h4 className=\"font-medium text-gray-900\">\n                              {chat.title || (chat.username ? `@${chat.username}` : `Kanal ${chat.chat_id}`)}\n                            </h4>\n                            <p className=\"text-sm text-gray-500\">\n                              {chat.type === 'channel' ? 'Kanal' : chat.type === 'supergroup' ? 'S√ºper Grup' : 'Kanal'}\n                              {chat.member_count && ` ‚Ä¢ ${chat.member_count} √ºye`}\n                              {chat.is_admin && (\n                                <span className=\"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800\">\n                                  Admin\n                                </span>\n                              )}\n                            </p>\n                          </div>\n                        </div>\n                      </label>\n                    );\n                  })}\n                </div>\n                <div className=\"mt-3 flex justify-end\">\n                  <button\n                    onClick={proceedToBrand}\n                    className=\"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg\"\n                  >\n                    Se√ßilenlerle Devam Et\n                  </button>\n                </div>\n              </div>\n            </>\n          )}\n\n          {/* Step 3: Brand Selection */}\n          {step === 'brand' && selectedChat && (\n            <>\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3\">\n                <p className=\"text-sm text-blue-800\">\n                  <strong>Se√ßilen Kanal:</strong> {selectedChat.title || (selectedChat.username ? `@${selectedChat.username}` : `Kanal ${selectedChat.chat_id}`)}\n                </p>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Marka *\n                </label>\n                <select\n                  value={formData.brand_id || 0}\n                  onChange={(e) => handleInputChange('brand_id', parseInt(e.target.value))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  required\n                >\n                  <option value={0}>Marka se√ßin</option>\n                  {brands.map(brand => (\n                    <option key={brand.id} value={brand.id}>{brand.name}</option>\n                  ))}\n                </select>\n              </div>\n\n              <div className=\"bg-green-50 border border-green-200 rounded-lg p-3\">\n                <div className=\"flex items-start gap-2\">\n                  <AlertCircle className=\"h-4 w-4 text-green-600 mt-0.5 flex-shrink-0\" />\n                  <div className=\"text-sm text-green-800\">\n                    <p className=\"font-medium\">Hazƒ±r!</p>\n                    <p className=\"mt-1\">\n                      Kanal adƒ±, √ºye sayƒ±sƒ± ve diƒüer bilgiler otomatik olarak √ßekilecek.\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </>\n          )}\n\n          {/* Butonlar */}\n          <div className=\"flex gap-3 pt-4\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"flex-1 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\"\n            >\n              ƒ∞ptal\n            </button>\n            \n            {step === 'token' && (\n              <button\n                onClick={() => discoverChannels(formData.bot_token)}\n                disabled={!formData.bot_token || discovering}\n                className=\"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {discovering ? (\n                  <>\n                    <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n                    Ke≈üfediliyor...\n                  </>\n                ) : (\n                  <>\n                    <Send size={16} />\n                    Kanallarƒ± Ke≈üfet\n                  </>\n                )}\n              </button>\n            )}\n\n            {step === 'channels' && (\n              <button\n                onClick={() => setStep('token')}\n                className=\"flex-1 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\"\n              >\n                Geri\n              </button>\n            )}\n\n            {step === 'brand' && (\n              <>\n                <button\n                  onClick={() => setStep('channels')}\n                  className=\"flex-1 px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\"\n                >\n                  Geri\n                </button>\n                <button\n                  onClick={handleAddSelectedChannels}\n                  disabled={addingChannel || !formData.brand_id}\n                  className=\"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  {addingChannel ? 'Ekleniyor...' : 'Se√ßilenleri Ekle'}\n                </button>\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default DynamicChannelModal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}