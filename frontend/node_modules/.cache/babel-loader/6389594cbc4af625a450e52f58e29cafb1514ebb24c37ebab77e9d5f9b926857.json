{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ilker\\\\Desktop\\\\aibrands\\\\frontend\\\\src\\\\components\\\\template\\\\editor\\\\Canvas.tsx\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState, useCallback } from 'react';\n// @ts-ignore - Fabric.js import\nimport * as fabric from 'fabric';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Canvas = ({\n  width,\n  height,\n  backgroundColor,\n  zoom,\n  onObjectSelect,\n  onObjectDeselect,\n  onObjectModified,\n  onObjectAdded,\n  onObjectRemoved,\n  activeTool,\n  onCanvasReady,\n  initialData\n}) => {\n  _s();\n  const canvasRef = useRef(null);\n  const [canvas, setCanvas] = useState(null);\n  const [isReady, setIsReady] = useState(false);\n\n  // Initialize Canvas\n  useEffect(() => {\n    if (!canvasRef.current || canvas) return; // Prevent double initialization\n\n    try {\n      const fabricCanvas = new fabric.Canvas(canvasRef.current, {\n        width: width,\n        height: height,\n        backgroundColor: backgroundColor,\n        selection: true,\n        preserveObjectStacking: true,\n        renderOnAddRemove: true,\n        allowTouchScrolling: true\n      });\n      setCanvas(fabricCanvas);\n      setIsReady(true);\n      onCanvasReady(fabricCanvas);\n\n      // Event listeners\n      fabricCanvas.on('selection:created', e => {\n        var _e$selected;\n        onObjectSelect(((_e$selected = e.selected) === null || _e$selected === void 0 ? void 0 : _e$selected[0]) || null);\n      });\n      fabricCanvas.on('selection:updated', e => {\n        var _e$selected2;\n        onObjectSelect(((_e$selected2 = e.selected) === null || _e$selected2 === void 0 ? void 0 : _e$selected2[0]) || null);\n      });\n      fabricCanvas.on('selection:cleared', () => {\n        onObjectDeselect();\n      });\n      fabricCanvas.on('object:modified', () => {\n        onObjectModified();\n      });\n      fabricCanvas.on('object:added', () => {\n        onObjectAdded();\n      });\n      fabricCanvas.on('object:removed', () => {\n        onObjectRemoved();\n      });\n\n      // Load initial data if provided\n      if (initialData) {\n        fabricCanvas.loadFromJSON(initialData, () => {\n          fabricCanvas.renderAll();\n        });\n      }\n    } catch (error) {\n      console.error('Canvas initialization error:', error);\n    }\n    return () => {\n      // Use closure to access the fabricCanvas instance\n      const currentCanvas = canvas;\n      if (currentCanvas && typeof currentCanvas.dispose === 'function') {\n        currentCanvas.dispose();\n        setCanvas(null);\n        setIsReady(false);\n      }\n    };\n  }, [width, height, backgroundColor]); // Add dependencies\n\n  // Update canvas properties\n  useEffect(() => {\n    if (canvas && isReady) {\n      canvas.setWidth(width);\n      canvas.setHeight(height);\n      canvas.backgroundColor = backgroundColor;\n      canvas.renderAll();\n    }\n  }, [canvas, width, height, backgroundColor, isReady]);\n\n  // Update zoom\n  useEffect(() => {\n    if (canvas && isReady) {\n      canvas.setZoom(zoom);\n      canvas.renderAll();\n    }\n  }, [canvas, zoom, isReady]);\n\n  // Handle tool changes\n  useEffect(() => {\n    if (!canvas || !isReady) return;\n\n    // Set cursor based on active tool\n    switch (activeTool) {\n      case 'select':\n        canvas.defaultCursor = 'default';\n        canvas.hoverCursor = 'move';\n        break;\n      case 'text':\n        canvas.defaultCursor = 'text';\n        canvas.hoverCursor = 'text';\n        break;\n      case 'image':\n        canvas.defaultCursor = 'crosshair';\n        canvas.hoverCursor = 'crosshair';\n        break;\n      default:\n        canvas.defaultCursor = 'crosshair';\n        canvas.hoverCursor = 'crosshair';\n    }\n  }, [canvas, activeTool, isReady]);\n\n  // Canvas click handler for adding objects\n  const handleCanvasClick = useCallback(e => {\n    if (!canvas || !isReady) return;\n    const pointer = canvas.getPointer(e.e);\n    switch (activeTool) {\n      case 'text':\n        addText(pointer.x, pointer.y);\n        break;\n      case 'rectangle':\n        addRectangle(pointer.x, pointer.y);\n        break;\n      case 'circle':\n        addCircle(pointer.x, pointer.y);\n        break;\n      case 'triangle':\n        addTriangle(pointer.x, pointer.y);\n        break;\n      case 'star':\n        addStar(pointer.x, pointer.y);\n        break;\n      case 'heart':\n        addHeart(pointer.x, pointer.y);\n        break;\n      case 'diamond':\n        addDiamond(pointer.x, pointer.y);\n        break;\n      case 'hexagon':\n        addHexagon(pointer.x, pointer.y);\n        break;\n      case 'line':\n        addLine(pointer.x, pointer.y);\n        break;\n    }\n  }, [canvas, activeTool, isReady]);\n\n  // Add text object\n  const addText = (x, y) => {\n    if (!canvas) return;\n    const text = new fabric.Text('Metin', {\n      left: x,\n      top: y,\n      fontFamily: 'Arial',\n      fontSize: 24,\n      fill: '#000000'\n    });\n    canvas.add(text);\n    canvas.setActiveObject(text);\n    canvas.renderAll();\n  };\n\n  // Add rectangle\n  const addRectangle = (x, y) => {\n    if (!canvas) return;\n    const rect = new fabric.Rect({\n      left: x,\n      top: y,\n      width: 100,\n      height: 100,\n      fill: '#3B82F6',\n      stroke: '#000000',\n      strokeWidth: 2\n    });\n    canvas.add(rect);\n    canvas.setActiveObject(rect);\n    canvas.renderAll();\n  };\n\n  // Add circle\n  const addCircle = (x, y) => {\n    if (!canvas) return;\n    const circle = new fabric.Circle({\n      left: x,\n      top: y,\n      radius: 50,\n      fill: '#3B82F6',\n      stroke: '#000000',\n      strokeWidth: 2\n    });\n    canvas.add(circle);\n    canvas.setActiveObject(circle);\n    canvas.renderAll();\n  };\n\n  // Add triangle\n  const addTriangle = (x, y) => {\n    if (!canvas) return;\n    const triangle = new fabric.Triangle({\n      left: x,\n      top: y,\n      width: 100,\n      height: 100,\n      fill: '#3B82F6',\n      stroke: '#000000',\n      strokeWidth: 2\n    });\n    canvas.add(triangle);\n    canvas.setActiveObject(triangle);\n    canvas.renderAll();\n  };\n\n  // Add star\n  const addStar = (x, y) => {\n    if (!canvas) return;\n    const star = new fabric.Polygon([{\n      x: 0,\n      y: -50\n    }, {\n      x: 14,\n      y: -20\n    }, {\n      x: 47,\n      y: -15\n    }, {\n      x: 23,\n      y: 7\n    }, {\n      x: 29,\n      y: 40\n    }, {\n      x: 0,\n      y: 25\n    }, {\n      x: -29,\n      y: 40\n    }, {\n      x: -23,\n      y: 7\n    }, {\n      x: -47,\n      y: -15\n    }, {\n      x: -14,\n      y: -20\n    }], {\n      left: x,\n      top: y,\n      fill: '#3B82F6',\n      stroke: '#000000',\n      strokeWidth: 2\n    });\n    canvas.add(star);\n    canvas.setActiveObject(star);\n    canvas.renderAll();\n  };\n\n  // Add heart\n  const addHeart = (x, y) => {\n    if (!canvas) return;\n    const heart = new fabric.Path('M12,21.35l-1.45-1.32C5.4,15.36,2,12.28,2,8.5 C2,5.42,4.42,3,7.5,3c1.74,0,3.41,0.81,4.5,2.09C13.09,3.81,14.76,3,16.5,3 C19.58,3,22,5.42,22,8.5c0,3.78-3.4,6.86-8.55,11.54L12,21.35z', {\n      left: x,\n      top: y,\n      scaleX: 2,\n      scaleY: 2,\n      fill: '#ef4444',\n      stroke: '#000000',\n      strokeWidth: 2\n    });\n    canvas.add(heart);\n    canvas.setActiveObject(heart);\n    canvas.renderAll();\n  };\n\n  // Add diamond\n  const addDiamond = (x, y) => {\n    if (!canvas) return;\n    const diamond = new fabric.Polygon([{\n      x: 0,\n      y: -50\n    }, {\n      x: 50,\n      y: 0\n    }, {\n      x: 0,\n      y: 50\n    }, {\n      x: -50,\n      y: 0\n    }], {\n      left: x,\n      top: y,\n      fill: '#8b5cf6',\n      stroke: '#000000',\n      strokeWidth: 2\n    });\n    canvas.add(diamond);\n    canvas.setActiveObject(diamond);\n    canvas.renderAll();\n  };\n\n  // Add hexagon\n  const addHexagon = (x, y) => {\n    if (!canvas) return;\n    const hexagon = new fabric.Polygon([{\n      x: 0,\n      y: -50\n    }, {\n      x: 43,\n      y: -25\n    }, {\n      x: 43,\n      y: 25\n    }, {\n      x: 0,\n      y: 50\n    }, {\n      x: -43,\n      y: 25\n    }, {\n      x: -43,\n      y: -25\n    }], {\n      left: x,\n      top: y,\n      fill: '#10b981',\n      stroke: '#000000',\n      strokeWidth: 2\n    });\n    canvas.add(hexagon);\n    canvas.setActiveObject(hexagon);\n    canvas.renderAll();\n  };\n\n  // Add line\n  const addLine = (x, y) => {\n    if (!canvas) return;\n    const line = new fabric.Line([0, 0, 100, 0], {\n      left: x,\n      top: y,\n      stroke: '#000000',\n      strokeWidth: 3\n    });\n    canvas.add(line);\n    canvas.setActiveObject(line);\n    canvas.renderAll();\n  };\n\n  // Add canvas click listener\n  useEffect(() => {\n    if (canvas && isReady) {\n      canvas.on('mouse:down', handleCanvasClick);\n      return () => {\n        canvas.off('mouse:down', handleCanvasClick);\n      };\n    }\n  }, [canvas, handleCanvasClick, isReady]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex-1 bg-gray-100 flex items-center justify-center overflow-hidden\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white shadow-lg rounded-lg p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        className: \"border border-gray-300\",\n        style: {\n          maxWidth: '100%',\n          maxHeight: '100%',\n          cursor: activeTool === 'select' ? 'default' : 'crosshair'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 377,\n    columnNumber: 5\n  }, this);\n};\n_s(Canvas, \"ga3MW0hBJ0KqoXjeHyKjOtTlERg=\");\n_c = Canvas;\nexport default Canvas;\nvar _c;\n$RefreshReg$(_c, \"Canvas\");","map":{"version":3,"names":["React","useRef","useEffect","useState","useCallback","fabric","jsxDEV","_jsxDEV","Canvas","width","height","backgroundColor","zoom","onObjectSelect","onObjectDeselect","onObjectModified","onObjectAdded","onObjectRemoved","activeTool","onCanvasReady","initialData","_s","canvasRef","canvas","setCanvas","isReady","setIsReady","current","fabricCanvas","selection","preserveObjectStacking","renderOnAddRemove","allowTouchScrolling","on","e","_e$selected","selected","_e$selected2","loadFromJSON","renderAll","error","console","currentCanvas","dispose","setWidth","setHeight","setZoom","defaultCursor","hoverCursor","handleCanvasClick","pointer","getPointer","addText","x","y","addRectangle","addCircle","addTriangle","addStar","addHeart","addDiamond","addHexagon","addLine","text","Text","left","top","fontFamily","fontSize","fill","add","setActiveObject","rect","Rect","stroke","strokeWidth","circle","Circle","radius","triangle","Triangle","star","Polygon","heart","Path","scaleX","scaleY","diamond","hexagon","line","Line","off","className","children","ref","style","maxWidth","maxHeight","cursor","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/ilker/Desktop/aibrands/frontend/src/components/template/editor/Canvas.tsx"],"sourcesContent":["import React, { useRef, useEffect, useState, useCallback } from 'react';\r\n// @ts-ignore - Fabric.js import\r\nimport * as fabric from 'fabric';\r\n\r\ninterface CanvasProps {\r\n  width: number;\r\n  height: number;\r\n  backgroundColor: string;\r\n  zoom: number;\r\n  onObjectSelect: (object: any) => void;\r\n  onObjectDeselect: () => void;\r\n  onObjectModified: () => void;\r\n  onObjectAdded: () => void;\r\n  onObjectRemoved: () => void;\r\n  activeTool: string;\r\n  onCanvasReady: (canvas: fabric.Canvas) => void;\r\n  initialData?: any;\r\n}\r\n\r\nconst Canvas: React.FC<CanvasProps> = ({\r\n  width,\r\n  height,\r\n  backgroundColor,\r\n  zoom,\r\n  onObjectSelect,\r\n  onObjectDeselect,\r\n  onObjectModified,\r\n  onObjectAdded,\r\n  onObjectRemoved,\r\n  activeTool,\r\n  onCanvasReady,\r\n  initialData\r\n}) => {\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const [canvas, setCanvas] = useState<fabric.Canvas | null>(null);\r\n  const [isReady, setIsReady] = useState(false);\r\n\r\n  // Initialize Canvas\r\n  useEffect(() => {\r\n    if (!canvasRef.current || canvas) return; // Prevent double initialization\r\n\r\n    try {\r\n      const fabricCanvas = new fabric.Canvas(canvasRef.current, {\r\n        width: width,\r\n        height: height,\r\n        backgroundColor: backgroundColor,\r\n        selection: true,\r\n        preserveObjectStacking: true,\r\n        renderOnAddRemove: true,\r\n        allowTouchScrolling: true\r\n      });\r\n\r\n      setCanvas(fabricCanvas);\r\n      setIsReady(true);\r\n      onCanvasReady(fabricCanvas);\r\n\r\n      // Event listeners\r\n      fabricCanvas.on('selection:created', (e: any) => {\r\n        onObjectSelect(e.selected?.[0] || null);\r\n      });\r\n\r\n      fabricCanvas.on('selection:updated', (e: any) => {\r\n        onObjectSelect(e.selected?.[0] || null);\r\n      });\r\n\r\n      fabricCanvas.on('selection:cleared', () => {\r\n        onObjectDeselect();\r\n      });\r\n\r\n      fabricCanvas.on('object:modified', () => {\r\n        onObjectModified();\r\n      });\r\n\r\n      fabricCanvas.on('object:added', () => {\r\n        onObjectAdded();\r\n      });\r\n\r\n      fabricCanvas.on('object:removed', () => {\r\n        onObjectRemoved();\r\n      });\r\n\r\n      // Load initial data if provided\r\n      if (initialData) {\r\n        fabricCanvas.loadFromJSON(initialData, () => {\r\n          fabricCanvas.renderAll();\r\n        });\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Canvas initialization error:', error);\r\n    }\r\n\r\n    return () => {\r\n      // Use closure to access the fabricCanvas instance\r\n      const currentCanvas = canvas;\r\n      if (currentCanvas && typeof (currentCanvas as any).dispose === 'function') {\r\n        (currentCanvas as any).dispose();\r\n        setCanvas(null);\r\n        setIsReady(false);\r\n      }\r\n    };\r\n  }, [width, height, backgroundColor]); // Add dependencies\r\n\r\n  // Update canvas properties\r\n  useEffect(() => {\r\n    if (canvas && isReady) {\r\n      canvas.setWidth(width);\r\n      canvas.setHeight(height);\r\n      canvas.backgroundColor = backgroundColor;\r\n      canvas.renderAll();\r\n    }\r\n  }, [canvas, width, height, backgroundColor, isReady]);\r\n\r\n  // Update zoom\r\n  useEffect(() => {\r\n    if (canvas && isReady) {\r\n      canvas.setZoom(zoom);\r\n      canvas.renderAll();\r\n    }\r\n  }, [canvas, zoom, isReady]);\r\n\r\n  // Handle tool changes\r\n  useEffect(() => {\r\n    if (!canvas || !isReady) return;\r\n\r\n    // Set cursor based on active tool\r\n    switch (activeTool) {\r\n      case 'select':\r\n        canvas.defaultCursor = 'default';\r\n        canvas.hoverCursor = 'move';\r\n        break;\r\n      case 'text':\r\n        canvas.defaultCursor = 'text';\r\n        canvas.hoverCursor = 'text';\r\n        break;\r\n      case 'image':\r\n        canvas.defaultCursor = 'crosshair';\r\n        canvas.hoverCursor = 'crosshair';\r\n        break;\r\n      default:\r\n        canvas.defaultCursor = 'crosshair';\r\n        canvas.hoverCursor = 'crosshair';\r\n    }\r\n  }, [canvas, activeTool, isReady]);\r\n\r\n  // Canvas click handler for adding objects\r\n  const handleCanvasClick = useCallback((e: any) => {\r\n    if (!canvas || !isReady) return;\r\n\r\n    const pointer = canvas.getPointer(e.e);\r\n    \r\n    switch (activeTool) {\r\n      case 'text':\r\n        addText(pointer.x, pointer.y);\r\n        break;\r\n      case 'rectangle':\r\n        addRectangle(pointer.x, pointer.y);\r\n        break;\r\n      case 'circle':\r\n        addCircle(pointer.x, pointer.y);\r\n        break;\r\n      case 'triangle':\r\n        addTriangle(pointer.x, pointer.y);\r\n        break;\r\n      case 'star':\r\n        addStar(pointer.x, pointer.y);\r\n        break;\r\n      case 'heart':\r\n        addHeart(pointer.x, pointer.y);\r\n        break;\r\n      case 'diamond':\r\n        addDiamond(pointer.x, pointer.y);\r\n        break;\r\n      case 'hexagon':\r\n        addHexagon(pointer.x, pointer.y);\r\n        break;\r\n      case 'line':\r\n        addLine(pointer.x, pointer.y);\r\n        break;\r\n    }\r\n  }, [canvas, activeTool, isReady]);\r\n\r\n  // Add text object\r\n  const addText = (x: number, y: number) => {\r\n    if (!canvas) return;\r\n    \r\n    const text = new fabric.Text('Metin', {\r\n      left: x,\r\n      top: y,\r\n      fontFamily: 'Arial',\r\n      fontSize: 24,\r\n      fill: '#000000'\r\n    });\r\n    \r\n    canvas.add(text);\r\n    canvas.setActiveObject(text);\r\n    canvas.renderAll();\r\n  };\r\n\r\n  // Add rectangle\r\n  const addRectangle = (x: number, y: number) => {\r\n    if (!canvas) return;\r\n    \r\n    const rect = new fabric.Rect({\r\n      left: x,\r\n      top: y,\r\n      width: 100,\r\n      height: 100,\r\n      fill: '#3B82F6',\r\n      stroke: '#000000',\r\n      strokeWidth: 2\r\n    });\r\n    \r\n    canvas.add(rect);\r\n    canvas.setActiveObject(rect);\r\n    canvas.renderAll();\r\n  };\r\n\r\n  // Add circle\r\n  const addCircle = (x: number, y: number) => {\r\n    if (!canvas) return;\r\n    \r\n    const circle = new fabric.Circle({\r\n      left: x,\r\n      top: y,\r\n      radius: 50,\r\n      fill: '#3B82F6',\r\n      stroke: '#000000',\r\n      strokeWidth: 2\r\n    });\r\n    \r\n    canvas.add(circle);\r\n    canvas.setActiveObject(circle);\r\n    canvas.renderAll();\r\n  };\r\n\r\n  // Add triangle\r\n  const addTriangle = (x: number, y: number) => {\r\n    if (!canvas) return;\r\n    \r\n    const triangle = new fabric.Triangle({\r\n      left: x,\r\n      top: y,\r\n      width: 100,\r\n      height: 100,\r\n      fill: '#3B82F6',\r\n      stroke: '#000000',\r\n      strokeWidth: 2\r\n    });\r\n    \r\n    canvas.add(triangle);\r\n    canvas.setActiveObject(triangle);\r\n    canvas.renderAll();\r\n  };\r\n\r\n  // Add star\r\n  const addStar = (x: number, y: number) => {\r\n    if (!canvas) return;\r\n    \r\n    const star = new fabric.Polygon([\r\n      { x: 0, y: -50 },\r\n      { x: 14, y: -20 },\r\n      { x: 47, y: -15 },\r\n      { x: 23, y: 7 },\r\n      { x: 29, y: 40 },\r\n      { x: 0, y: 25 },\r\n      { x: -29, y: 40 },\r\n      { x: -23, y: 7 },\r\n      { x: -47, y: -15 },\r\n      { x: -14, y: -20 }\r\n    ], {\r\n      left: x,\r\n      top: y,\r\n      fill: '#3B82F6',\r\n      stroke: '#000000',\r\n      strokeWidth: 2\r\n    });\r\n    \r\n    canvas.add(star);\r\n    canvas.setActiveObject(star);\r\n    canvas.renderAll();\r\n  };\r\n\r\n  // Add heart\r\n  const addHeart = (x: number, y: number) => {\r\n    if (!canvas) return;\r\n    \r\n    const heart = new fabric.Path('M12,21.35l-1.45-1.32C5.4,15.36,2,12.28,2,8.5 C2,5.42,4.42,3,7.5,3c1.74,0,3.41,0.81,4.5,2.09C13.09,3.81,14.76,3,16.5,3 C19.58,3,22,5.42,22,8.5c0,3.78-3.4,6.86-8.55,11.54L12,21.35z', {\r\n      left: x,\r\n      top: y,\r\n      scaleX: 2,\r\n      scaleY: 2,\r\n      fill: '#ef4444',\r\n      stroke: '#000000',\r\n      strokeWidth: 2\r\n    });\r\n    \r\n    canvas.add(heart);\r\n    canvas.setActiveObject(heart);\r\n    canvas.renderAll();\r\n  };\r\n\r\n  // Add diamond\r\n  const addDiamond = (x: number, y: number) => {\r\n    if (!canvas) return;\r\n    \r\n    const diamond = new fabric.Polygon([\r\n      { x: 0, y: -50 },\r\n      { x: 50, y: 0 },\r\n      { x: 0, y: 50 },\r\n      { x: -50, y: 0 }\r\n    ], {\r\n      left: x,\r\n      top: y,\r\n      fill: '#8b5cf6',\r\n      stroke: '#000000',\r\n      strokeWidth: 2\r\n    });\r\n    \r\n    canvas.add(diamond);\r\n    canvas.setActiveObject(diamond);\r\n    canvas.renderAll();\r\n  };\r\n\r\n  // Add hexagon\r\n  const addHexagon = (x: number, y: number) => {\r\n    if (!canvas) return;\r\n    \r\n    const hexagon = new fabric.Polygon([\r\n      { x: 0, y: -50 },\r\n      { x: 43, y: -25 },\r\n      { x: 43, y: 25 },\r\n      { x: 0, y: 50 },\r\n      { x: -43, y: 25 },\r\n      { x: -43, y: -25 }\r\n    ], {\r\n      left: x,\r\n      top: y,\r\n      fill: '#10b981',\r\n      stroke: '#000000',\r\n      strokeWidth: 2\r\n    });\r\n    \r\n    canvas.add(hexagon);\r\n    canvas.setActiveObject(hexagon);\r\n    canvas.renderAll();\r\n  };\r\n\r\n  // Add line\r\n  const addLine = (x: number, y: number) => {\r\n    if (!canvas) return;\r\n    \r\n    const line = new fabric.Line([0, 0, 100, 0], {\r\n      left: x,\r\n      top: y,\r\n      stroke: '#000000',\r\n      strokeWidth: 3\r\n    });\r\n    \r\n    canvas.add(line);\r\n    canvas.setActiveObject(line);\r\n    canvas.renderAll();\r\n  };\r\n\r\n  // Add canvas click listener\r\n  useEffect(() => {\r\n    if (canvas && isReady) {\r\n      canvas.on('mouse:down', handleCanvasClick);\r\n      \r\n      return () => {\r\n        canvas.off('mouse:down', handleCanvasClick);\r\n      };\r\n    }\r\n  }, [canvas, handleCanvasClick, isReady]);\r\n\r\n  return (\r\n    <div className=\"flex-1 bg-gray-100 flex items-center justify-center overflow-hidden\">\r\n      <div className=\"bg-white shadow-lg rounded-lg p-4\">\r\n        <canvas\r\n          ref={canvasRef}\r\n          className=\"border border-gray-300\"\r\n          style={{\r\n            maxWidth: '100%',\r\n            maxHeight: '100%',\r\n            cursor: activeTool === 'select' ? 'default' : 'crosshair'\r\n          }}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Canvas;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}