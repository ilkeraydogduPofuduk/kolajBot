{"ast":null,"code":"import _objectSpread from\"C:/Users/ilker/Desktop/aibrands/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback,useMemo}from'react';import{useParams,useNavigate}from'react-router-dom';// import { useAuth } from '../../hooks/useAuth';\nimport{productsAPI}from'../../api/products';import{templatesAPI}from'../../api/templates';import{useUrlConfig}from'../../hooks/useUrlConfig';import FabricTemplateViewer from'../../components/template/FabricTemplateViewer';import{ArrowLeft,X,ZoomIn,Palette,Share2}from'lucide-react';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ProductDetail=()=>{var _product$brand,_product$brand2,_product$brand3;const{getImageURL}=useUrlConfig();const{productId}=useParams();const navigate=useNavigate();// const { user } = useAuth();\nconst[product,setProduct]=useState(null);const[loading,setLoading]=useState(true);// const [processing, setProcessing] = useState(false);\nconst[selectedImageIndex,setSelectedImageIndex]=useState(0);const[showImageModal,setShowImageModal]=useState(false);const[imageZoom,setImageZoom]=useState(1);const[imagePosition,setImagePosition]=useState({x:0,y:0});// Templates\nconst[templates,setTemplates]=useState([]);const[selectedTemplate,setSelectedTemplate]=useState(null);const[showTemplateModal,setShowTemplateModal]=useState(false);// Collage state\nconst[collageData,setCollageData]=useState({exists:false,loading:false});const loadProduct=useCallback(async()=>{if(!productId)return;try{setLoading(true);const productData=await productsAPI.getProduct(parseInt(productId));setProduct(productData);// Ürün için şablonları yükle\nconst templatesResponse=await templatesAPI.getTemplatesByProduct(parseInt(productId));setTemplates(templatesResponse.templates||[]);// Kolaj verilerini yükle\nawait loadCollageData(parseInt(productId));}catch(error){toast.error('Ürün yüklenirken hata oluştu');console.error('Error loading product:',error);}finally{setLoading(false);}},[productId]);const loadCollageData=useCallback(async productId=>{try{setCollageData(prev=>_objectSpread(_objectSpread({},prev),{},{loading:true}));const response=await fetch(\"/api/products/\".concat(productId,\"/collage\"));const data=await response.json();if(data.success&&data.exists){setCollageData({exists:true,url:data.collage_url,loading:false});}else{setCollageData({exists:false,loading:false});}}catch(error){console.error('Error loading collage:',error);setCollageData({exists:false,loading:false});}},[]);useEffect(()=>{loadProduct();},[loadProduct]);// Template functions\nconst handleViewTemplate=template=>{setSelectedTemplate(template);setShowTemplateModal(true);};const handleEditTemplate=template=>{navigate(\"/admin/templates/edit/\".concat(template.id));};const handleCreateCollage=async template=>{try{// Backend'e kolaj oluşturma isteği gönder\nconst response=await fetch(\"/api/products/\".concat(productId,\"/create-collage\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({template_id:template.id})});if(response.ok){toast.success('Kolaj oluşturuldu!');loadProduct();// Ürün bilgilerini yenile\n}else{toast.error('Kolaj oluşturulurken hata oluştu');}}catch(error){toast.error('Kolaj oluşturulurken hata oluştu');}};const handleDownloadCollage=template=>{// Kolaj dosyasını indir\nconst link=document.createElement('a');link.href=\"/api/templates/\".concat(template.id,\"/download-collage\");link.download=\"\".concat(product===null||product===void 0?void 0:product.code,\"_\").concat(template.name,\"_collage.jpg\");link.click();};const handleImageZoom=e=>{e.stopPropagation();const delta=e.deltaY>0?-0.1:0.1;setImageZoom(prev=>Math.max(1,Math.min(3,prev+delta)));};const handleImageMouseMove=e=>{if(imageZoom>1){const rect=e.currentTarget.getBoundingClientRect();const x=(e.clientX-rect.left)/rect.width*100;const y=(e.clientY-rect.top)/rect.height*100;setImagePosition({x,y});}};// Ensure arrays exist\nconst images=useMemo(()=>{return(product===null||product===void 0?void 0:product.images)||[];},[product]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Y\\xFCkleniyor...\"})]})});}if(!product){return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"\\xDCr\\xFCn bulunamad\\u0131\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/admin/media-gallery'),className:\"btn btn-primary mt-4\",children:[/*#__PURE__*/_jsx(ArrowLeft,{size:18,className:\"mr-2\"}),\"Geri D\\xF6n\"]})]});}const DisplayField=_ref=>{let{label,value}=_ref;const isEmpty=!value;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-2 hover:bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500 w-20\",children:label}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium \".concat(isEmpty?'text-red-500':'text-gray-900'),children:value||'Eksik'})]});};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate(-1),className:\"btn btn-secondary btn-sm flex items-center gap-2\",children:[/*#__PURE__*/_jsx(ArrowLeft,{size:16}),/*#__PURE__*/_jsx(\"span\",{children:\"Geri\"})]}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold\",children:product.code}),/*#__PURE__*/_jsx(\"div\",{className:\"w-20\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"lg:col-span-2 space-y-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg border border-gray-200 overflow-hidden cursor-zoom-in\",onClick:()=>setShowImageModal(true),children:/*#__PURE__*/_jsxs(\"div\",{className:\"aspect-square relative\",children:[images[selectedImageIndex]&&/*#__PURE__*/_jsx(\"img\",{src:getImageURL(images[selectedImageIndex].file_path),alt:product.code,className:\"w-full h-full object-contain bg-white\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute top-4 right-4 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded\",children:[selectedImageIndex+1,\" / \",images.length]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-6 gap-2\",children:images.map((image,index)=>/*#__PURE__*/_jsx(\"div\",{onClick:()=>setSelectedImageIndex(index),className:\"aspect-square rounded-lg overflow-hidden border-2 cursor-pointer transition-all \".concat(selectedImageIndex===index?'border-blue-500 shadow-lg':'border-gray-200 hover:border-gray-300'),children:/*#__PURE__*/_jsx(\"img\",{src:getImageURL(image.file_path),alt:\"\".concat(product.code,\" - \").concat(index+1),className:\"w-full h-full object-contain bg-white\"})},image.id))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:product.has_second_product&&product.code_2?/*#__PURE__*/// İKİ ÜRÜN - YAN YANA\n_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg border border-gray-200 p-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-sm font-semibold text-gray-700 mb-3 pb-2 border-b\",children:[product.code,\" \",product.color]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsx(DisplayField,{label:\"Marka\",value:product.brand_name||((_product$brand=product.brand)===null||_product$brand===void 0?void 0:_product$brand.name)}),/*#__PURE__*/_jsx(DisplayField,{label:\"\\xDCr\\xFCn Kodu\",value:product.code}),/*#__PURE__*/_jsx(DisplayField,{label:\"\\xDCr\\xFCn Tipi\",value:product.product_type}),/*#__PURE__*/_jsx(DisplayField,{label:\"\\xDCr\\xFCn Rengi\",value:product.color}),/*#__PURE__*/_jsx(DisplayField,{label:\"\\xDCr\\xFCn Beden Aral\\u0131\\u011F\\u0131\",value:product.size_range}),/*#__PURE__*/_jsx(DisplayField,{label:\"\\xDCr\\xFCn Fiyat\\u0131\",value:product.price?\"\".concat(product.price,\" USD\"):null})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 rounded-lg border border-blue-200 p-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-sm font-semibold text-blue-700 mb-3 pb-2 border-b border-blue-200\",children:[product.code_2,\" \",product.color_2]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsx(DisplayField,{label:\"Marka\",value:product.brand_name||((_product$brand2=product.brand)===null||_product$brand2===void 0?void 0:_product$brand2.name)}),/*#__PURE__*/_jsx(DisplayField,{label:\"\\xDCr\\xFCn Kodu\",value:product.code_2}),/*#__PURE__*/_jsx(DisplayField,{label:\"\\xDCr\\xFCn Tipi\",value:product.product_type_2}),/*#__PURE__*/_jsx(DisplayField,{label:\"\\xDCr\\xFCn Rengi\",value:product.color_2}),/*#__PURE__*/_jsx(DisplayField,{label:\"\\xDCr\\xFCn Beden Aral\\u0131\\u011F\\u0131\",value:product.size_range_2}),/*#__PURE__*/_jsx(DisplayField,{label:\"\\xDCr\\xFCn Fiyat\\u0131\",value:product.price_2?\"\".concat(product.price_2,\" USD\"):null})]})]})]}):/*#__PURE__*/// TEK ÜRÜN - TEK SÜTUN\n_jsxs(\"div\",{className:\"bg-white rounded-lg border border-gray-200 p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-semibold text-gray-700 mb-3 pb-2 border-b\",children:\"\\xDCr\\xFCn Bilgileri\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsx(DisplayField,{label:\"Marka\",value:product.brand_name||((_product$brand3=product.brand)===null||_product$brand3===void 0?void 0:_product$brand3.name)}),/*#__PURE__*/_jsx(DisplayField,{label:\"\\xDCr\\xFCn Kodu\",value:product.code}),/*#__PURE__*/_jsx(DisplayField,{label:\"\\xDCr\\xFCn Tipi\",value:product.product_type}),/*#__PURE__*/_jsx(DisplayField,{label:\"\\xDCr\\xFCn Rengi\",value:product.color}),/*#__PURE__*/_jsx(DisplayField,{label:\"\\xDCr\\xFCn Beden Aral\\u0131\\u011F\\u0131\",value:product.size_range}),/*#__PURE__*/_jsx(DisplayField,{label:\"\\xDCr\\xFCn Fiyat\\u0131\",value:product.price?\"\".concat(product.price,\" USD\"):null})]})]})})]}),showImageModal&&images[selectedImageIndex]&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-95 flex items-center justify-center z-50 overflow-hidden\",onClick:()=>{setShowImageModal(false);setImageZoom(1);},onWheel:e=>{e.preventDefault();e.stopPropagation();},children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full h-full flex items-center justify-center p-4\",onClick:e=>e.stopPropagation(),onWheel:handleImageZoom,onMouseMove:handleImageMouseMove,children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowImageModal(false),className:\"absolute top-4 right-4 text-white bg-black bg-opacity-70 rounded-full p-3 hover:bg-opacity-90 z-10\",children:/*#__PURE__*/_jsx(X,{size:24})}),/*#__PURE__*/_jsx(\"div\",{className:\"relative overflow-hidden\",style:{width:'90vw',height:'90vh',cursor:imageZoom>1?'move':'zoom-in'},children:/*#__PURE__*/_jsx(\"img\",{src:getImageURL(images[selectedImageIndex].file_path),alt:\"\".concat(product.code,\" - \").concat(selectedImageIndex+1),className:\"w-full h-full object-contain transition-transform duration-200\",style:{transform:\"scale(\".concat(imageZoom,\")\"),transformOrigin:imageZoom>1?\"\".concat(imagePosition.x,\"% \").concat(imagePosition.y,\"%\"):'center'}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute top-4 left-4 bg-black bg-opacity-50 text-white text-sm px-3 py-2 rounded flex items-center gap-2\",children:[/*#__PURE__*/_jsx(ZoomIn,{size:16}),Math.round(imageZoom*100),\"%\",/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-300\",children:\"(Scroll to zoom)\"})]}),images.length>1&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedImageIndex(selectedImageIndex>0?selectedImageIndex-1:images.length-1),className:\"absolute left-4 top-1/2 transform -translate-y-1/2 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-75\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M15 19l-7-7 7-7\"})})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedImageIndex(selectedImageIndex<images.length-1?selectedImageIndex+1:0),className:\"absolute right-4 top-1/2 transform -translate-y-1/2 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-75\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 5l7 7-7 7\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute bottom-4 left-1/2 transform -translate-x-1/2 text-white bg-black bg-opacity-50 rounded-full px-3 py-1 text-sm\",children:[selectedImageIndex+1,\" / \",images.length]})]})}),showTemplateModal&&selectedTemplate&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-6 border-b border-gray-200\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900\",children:selectedTemplate.name}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowTemplateModal(false),className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(X,{className:\"w-6 h-6\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6 overflow-y-auto max-h-[calc(90vh-120px)]\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"\\u015Eablon \\xD6nizleme\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-100 rounded-lg overflow-hidden border p-4\",children:selectedTemplate.template_data?/*#__PURE__*/_jsx(FabricTemplateViewer,{templateData:typeof selectedTemplate.template_data==='string'?JSON.parse(selectedTemplate.template_data):selectedTemplate.template_data,width:400,height:500,className:\"mx-auto\"}):selectedTemplate.preview_image?/*#__PURE__*/_jsx(\"img\",{src:getImageURL(selectedTemplate.preview_image),alt:selectedTemplate.name,className:\"w-full h-full object-cover\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-full flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(Palette,{className:\"w-12 h-12 text-gray-400 mx-auto mb-2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"\\xD6nizleme Yok\"})]})})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"\\u015Eablon Detaylar\\u0131\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"A\\xE7\\u0131klama\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:selectedTemplate.description||'Açıklama yok'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Kategori\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 capitalize\",children:selectedTemplate.category||'Genel'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Tip\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:selectedTemplate.template_type||'Genel'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Olu\\u015Fturulma Tarihi\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:new Date(selectedTemplate.created_at).toLocaleString('tr-TR')})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Durum\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"inline-block px-3 py-1 rounded-full text-sm font-medium \".concat(selectedTemplate.is_active?'bg-green-100 text-green-800':'bg-gray-100 text-gray-800'),children:selectedTemplate.is_active?'Aktif':'Pasif'}),selectedTemplate.is_auto_generated&&/*#__PURE__*/_jsx(\"span\",{className:\"inline-block px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800\",children:\"Otomatik\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 flex gap-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleCreateCollage(selectedTemplate),className:\"flex-1 btn btn-success flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(Share2,{className:\"w-4 h-4\"}),\"Kolaj Olu\\u015Ftur\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowTemplateModal(false),className:\"btn btn-secondary\",children:\"Kapat\"})]})]})]})})]})})]});};export default ProductDetail;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useMemo","useParams","useNavigate","productsAPI","templatesAPI","useUrlConfig","FabricTemplateViewer","ArrowLeft","X","ZoomIn","Palette","Share2","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProductDetail","_product$brand","_product$brand2","_product$brand3","getImageURL","productId","navigate","product","setProduct","loading","setLoading","selectedImageIndex","setSelectedImageIndex","showImageModal","setShowImageModal","imageZoom","setImageZoom","imagePosition","setImagePosition","x","y","templates","setTemplates","selectedTemplate","setSelectedTemplate","showTemplateModal","setShowTemplateModal","collageData","setCollageData","exists","loadProduct","productData","getProduct","parseInt","templatesResponse","getTemplatesByProduct","loadCollageData","error","console","prev","_objectSpread","response","fetch","concat","data","json","success","url","collage_url","handleViewTemplate","template","handleEditTemplate","id","handleCreateCollage","method","headers","body","JSON","stringify","template_id","ok","handleDownloadCollage","link","document","createElement","href","download","code","name","click","handleImageZoom","e","stopPropagation","delta","deltaY","Math","max","min","handleImageMouseMove","rect","currentTarget","getBoundingClientRect","clientX","left","width","clientY","top","height","images","className","children","onClick","size","DisplayField","_ref","label","value","isEmpty","src","file_path","alt","length","map","image","index","has_second_product","code_2","color","brand_name","brand","product_type","size_range","price","color_2","product_type_2","size_range_2","price_2","onWheel","preventDefault","onMouseMove","style","cursor","transform","transformOrigin","round","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","template_data","templateData","parse","preview_image","description","category","template_type","Date","created_at","toLocaleString","is_active","is_auto_generated"],"sources":["C:/Users/ilker/Desktop/aibrands/frontend/src/pages/admin/ProductDetail.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\n// import { useAuth } from '../../hooks/useAuth';\nimport { productsAPI, Product } from '../../api/products';\nimport { templatesAPI, Template } from '../../api/templates';\nimport { useUrlConfig } from '../../hooks/useUrlConfig';\nimport FabricTemplateViewer from '../../components/template/FabricTemplateViewer';\nimport { \n  ArrowLeft, \n  Check,\n  X,\n  ZoomIn,\n  Palette,\n  Eye,\n  Download,\n  Share2\n} from 'lucide-react';\nimport toast from 'react-hot-toast';\n\nconst ProductDetail: React.FC = () => {\n  const { getImageURL } = useUrlConfig();\n  const { productId } = useParams<{ productId: string }>();\n  const navigate = useNavigate();\n  // const { user } = useAuth();\n  \n  const [product, setProduct] = useState<Product | null>(null);\n  const [loading, setLoading] = useState(true);\n  // const [processing, setProcessing] = useState(false);\n  const [selectedImageIndex, setSelectedImageIndex] = useState(0);\n  const [showImageModal, setShowImageModal] = useState(false);\n  const [imageZoom, setImageZoom] = useState(1);\n  const [imagePosition, setImagePosition] = useState({ x: 0, y: 0 });\n  \n  \n  // Templates\n  const [templates, setTemplates] = useState<Template[]>([]);\n  const [selectedTemplate, setSelectedTemplate] = useState<Template | null>(null);\n  const [showTemplateModal, setShowTemplateModal] = useState(false);\n  \n  // Collage state\n  const [collageData, setCollageData] = useState<{\n    exists: boolean;\n    url?: string;\n    loading: boolean;\n  }>({ exists: false, loading: false });\n\n  const loadProduct = useCallback(async () => {\n    if (!productId) return;\n    \n    try {\n      setLoading(true);\n      const productData = await productsAPI.getProduct(parseInt(productId));\n      setProduct(productData);\n      \n      // Ürün için şablonları yükle\n      const templatesResponse = await templatesAPI.getTemplatesByProduct(parseInt(productId));\n      setTemplates(templatesResponse.templates || []);\n      \n      // Kolaj verilerini yükle\n      await loadCollageData(parseInt(productId));\n    } catch (error: any) {\n      toast.error('Ürün yüklenirken hata oluştu');\n      console.error('Error loading product:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, [productId]);\n\n  const loadCollageData = useCallback(async (productId: number) => {\n    try {\n      setCollageData(prev => ({ ...prev, loading: true }));\n      \n      const response = await fetch(`/api/products/${productId}/collage`);\n      const data = await response.json();\n      \n      if (data.success && data.exists) {\n        setCollageData({\n          exists: true,\n          url: data.collage_url,\n          loading: false\n        });\n      } else {\n        setCollageData({\n          exists: false,\n          loading: false\n        });\n      }\n    } catch (error) {\n      console.error('Error loading collage:', error);\n      setCollageData({\n        exists: false,\n        loading: false\n      });\n    }\n  }, []);\n\n  useEffect(() => {\n    loadProduct();\n  }, [loadProduct]);\n\n  // Template functions\n  const handleViewTemplate = (template: Template) => {\n    setSelectedTemplate(template);\n    setShowTemplateModal(true);\n  };\n\n  const handleEditTemplate = (template: Template) => {\n    navigate(`/admin/templates/edit/${template.id}`);\n  };\n\n  const handleCreateCollage = async (template: Template) => {\n    try {\n      // Backend'e kolaj oluşturma isteği gönder\n      const response = await fetch(`/api/products/${productId}/create-collage`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ template_id: template.id })\n      });\n      \n      if (response.ok) {\n        toast.success('Kolaj oluşturuldu!');\n        loadProduct(); // Ürün bilgilerini yenile\n      } else {\n        toast.error('Kolaj oluşturulurken hata oluştu');\n      }\n    } catch (error) {\n      toast.error('Kolaj oluşturulurken hata oluştu');\n    }\n  };\n\n  const handleDownloadCollage = (template: Template) => {\n    // Kolaj dosyasını indir\n    const link = document.createElement('a');\n    link.href = `/api/templates/${template.id}/download-collage`;\n    link.download = `${product?.code}_${template.name}_collage.jpg`;\n    link.click();\n  };\n\n\n  const handleImageZoom = (e: React.WheelEvent<HTMLDivElement>) => {\n    e.stopPropagation();\n    const delta = e.deltaY > 0 ? -0.1 : 0.1;\n    setImageZoom(prev => Math.max(1, Math.min(3, prev + delta)));\n  };\n\n  const handleImageMouseMove = (e: React.MouseEvent<HTMLDivElement>) => {\n    if (imageZoom > 1) {\n      const rect = e.currentTarget.getBoundingClientRect();\n      const x = ((e.clientX - rect.left) / rect.width) * 100;\n      const y = ((e.clientY - rect.top) / rect.height) * 100;\n      setImagePosition({ x, y });\n    }\n  };\n\n  // Ensure arrays exist\n  const images = useMemo(() => {\n    return product?.images || [];\n  }, [product]);\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin\"></div>\n          <span className=\"text-gray-600\">Yükleniyor...</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (!product) {\n    return (\n      <div className=\"text-center py-12\">\n        <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Ürün bulunamadı</h3>\n        <button onClick={() => navigate('/admin/media-gallery')} className=\"btn btn-primary mt-4\">\n          <ArrowLeft size={18} className=\"mr-2\" />\n          Geri Dön\n        </button>\n      </div>\n    );\n  }\n\n  const DisplayField = ({ label, value }: any) => {\n    const isEmpty = !value;\n\n    return (\n      <div className=\"flex items-center justify-between p-2 hover:bg-gray-50 rounded-lg\">\n        <span className=\"text-xs text-gray-500 w-20\">{label}</span>\n        <span className={`text-sm font-medium ${isEmpty ? 'text-red-500' : 'text-gray-900'}`}>\n          {value || 'Eksik'}\n        </span>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Minimal Header */}\n      <div className=\"flex items-center justify-between\">\n        <button onClick={() => navigate(-1)} className=\"btn btn-secondary btn-sm flex items-center gap-2\">\n          <ArrowLeft size={16} />\n          <span>Geri</span>\n        </button>\n        <h1 className=\"text-xl font-bold\">{product.code}</h1>\n        <div className=\"w-20\"></div>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\n        {/* Large Image Gallery - 2/3 width */}\n        <div className=\"lg:col-span-2 space-y-4\">\n          {/* Main Image */}\n          <div \n            className=\"bg-white rounded-lg border border-gray-200 overflow-hidden cursor-zoom-in\"\n            onClick={() => setShowImageModal(true)}\n          >\n            <div className=\"aspect-square relative\">\n              {images[selectedImageIndex] && (\n                <img\n                  src={getImageURL(images[selectedImageIndex].file_path)}\n                  alt={product.code}\n                  className=\"w-full h-full object-contain bg-white\"\n                />\n              )}\n              <div className=\"absolute top-4 right-4 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded\">\n                {selectedImageIndex + 1} / {images.length}\n              </div>\n            </div>\n          </div>\n\n          {/* Thumbnail Grid */}\n          <div className=\"grid grid-cols-6 gap-2\">\n            {images.map((image, index) => (\n              <div\n                key={image.id}\n                onClick={() => setSelectedImageIndex(index)}\n                className={`aspect-square rounded-lg overflow-hidden border-2 cursor-pointer transition-all ${\n                  selectedImageIndex === index ? 'border-blue-500 shadow-lg' : 'border-gray-200 hover:border-gray-300'\n                }`}\n              >\n                <img\n                  src={getImageURL(image.file_path)}\n                  alt={`${product.code} - ${index + 1}`}\n                  className=\"w-full h-full object-contain bg-white\"\n                />\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Product Info Sidebar - 1/3 width */}\n        <div className=\"space-y-4\">\n          {/* ÜRÜN BİLGİLERİ - 2 ürün varsa yan yana, tek ürün varsa tek sütun */}\n          {product.has_second_product && product.code_2 ? (\n            // İKİ ÜRÜN - YAN YANA\n            <div className=\"grid grid-cols-2 gap-4\">\n              {/* İLK ÜRÜN */}\n              <div className=\"bg-white rounded-lg border border-gray-200 p-4\">\n                <h3 className=\"text-sm font-semibold text-gray-700 mb-3 pb-2 border-b\">\n                  {product.code} {product.color}\n                </h3>\n                <div className=\"space-y-1\">\n                  {/* 1. MARKA ADI */}\n                  <DisplayField label=\"Marka\" value={product.brand_name || product.brand?.name} />\n                  {/* 2. ÜRÜN KODU */}\n                  <DisplayField label=\"Ürün Kodu\" value={product.code} />\n                  {/* 3. ÜRÜN TİPİ */}\n                  <DisplayField label=\"Ürün Tipi\" value={product.product_type} />\n                  {/* 4. ÜRÜN RENGİ */}\n                  <DisplayField label=\"Ürün Rengi\" value={product.color} />\n                  {/* 5. ÜRÜN BEDEN ARALIĞI */}\n                  <DisplayField label=\"Ürün Beden Aralığı\" value={product.size_range} />\n                  {/* 6. ÜRÜN FİYATI */}\n                  <DisplayField label=\"Ürün Fiyatı\" value={product.price ? `${product.price} USD` : null} />\n                </div>\n              </div>\n\n              {/* İKİNCİ ÜRÜN */}\n              <div className=\"bg-blue-50 rounded-lg border border-blue-200 p-4\">\n                <h3 className=\"text-sm font-semibold text-blue-700 mb-3 pb-2 border-b border-blue-200\">\n                  {product.code_2} {product.color_2}\n                </h3>\n                <div className=\"space-y-1\">\n                  {/* 1. MARKA ADI */}\n                  <DisplayField label=\"Marka\" value={product.brand_name || product.brand?.name} />\n                  {/* 2. ÜRÜN KODU */}\n                  <DisplayField label=\"Ürün Kodu\" value={product.code_2} />\n                  {/* 3. ÜRÜN TİPİ */}\n                  <DisplayField label=\"Ürün Tipi\" value={product.product_type_2} />\n                  {/* 4. ÜRÜN RENGİ */}\n                  <DisplayField label=\"Ürün Rengi\" value={product.color_2} />\n                  {/* 5. ÜRÜN BEDEN ARALIĞI */}\n                  <DisplayField label=\"Ürün Beden Aralığı\" value={product.size_range_2} />\n                  {/* 6. ÜRÜN FİYATI */}\n                  <DisplayField label=\"Ürün Fiyatı\" value={product.price_2 ? `${product.price_2} USD` : null} />\n                </div>\n              </div>\n            </div>\n          ) : (\n            // TEK ÜRÜN - TEK SÜTUN\n            <div className=\"bg-white rounded-lg border border-gray-200 p-4\">\n              <h3 className=\"text-sm font-semibold text-gray-700 mb-3 pb-2 border-b\">Ürün Bilgileri</h3>\n              <div className=\"space-y-1\">\n                {/* 1. MARKA ADI */}\n                <DisplayField label=\"Marka\" value={product.brand_name || product.brand?.name} />\n                {/* 2. ÜRÜN KODU */}\n                <DisplayField label=\"Ürün Kodu\" value={product.code} />\n                {/* 3. ÜRÜN TİPİ */}\n                <DisplayField label=\"Ürün Tipi\" value={product.product_type} />\n                {/* 4. ÜRÜN RENGİ */}\n                <DisplayField label=\"Ürün Rengi\" value={product.color} />\n                {/* 5. ÜRÜN BEDEN ARALIĞI */}\n                <DisplayField label=\"Ürün Beden Aralığı\" value={product.size_range} />\n                {/* 6. ÜRÜN FİYATI */}\n                <DisplayField label=\"Ürün Fiyatı\" value={product.price ? `${product.price} USD` : null} />\n              </div>\n            </div>\n          )}\n\n        </div>\n      </div>\n\n      {/* Full Screen Image Modal with Zoom */}\n      {showImageModal && images[selectedImageIndex] && (\n        <div \n          className=\"fixed inset-0 bg-black bg-opacity-95 flex items-center justify-center z-50 overflow-hidden\"\n          onClick={() => {\n            setShowImageModal(false);\n            setImageZoom(1);\n          }}\n          onWheel={(e) => {\n            e.preventDefault();\n            e.stopPropagation();\n          }}\n        >\n          <div \n            className=\"relative w-full h-full flex items-center justify-center p-4\"\n            onClick={(e) => e.stopPropagation()}\n            onWheel={handleImageZoom}\n            onMouseMove={handleImageMouseMove}\n          >\n            <button\n              onClick={() => setShowImageModal(false)}\n              className=\"absolute top-4 right-4 text-white bg-black bg-opacity-70 rounded-full p-3 hover:bg-opacity-90 z-10\"\n            >\n              <X size={24} />\n            </button>\n            \n            <div \n              className=\"relative overflow-hidden\"\n              style={{ \n                width: '90vw', \n                height: '90vh',\n                cursor: imageZoom > 1 ? 'move' : 'zoom-in'\n              }}\n            >\n              <img\n                src={getImageURL(images[selectedImageIndex].file_path)}\n                alt={`${product.code} - ${selectedImageIndex + 1}`}\n                className=\"w-full h-full object-contain transition-transform duration-200\"\n                style={{\n                  transform: `scale(${imageZoom})`,\n                  transformOrigin: imageZoom > 1 ? `${imagePosition.x}% ${imagePosition.y}%` : 'center'\n                }}\n              />\n            </div>\n            \n            {/* Zoom indicator */}\n            <div className=\"absolute top-4 left-4 bg-black bg-opacity-50 text-white text-sm px-3 py-2 rounded flex items-center gap-2\">\n              <ZoomIn size={16} />\n              {Math.round(imageZoom * 100)}%\n              <span className=\"text-xs text-gray-300\">(Scroll to zoom)</span>\n            </div>\n            \n            {/* Navigation */}\n            {images.length > 1 && (\n              <>\n                <button\n                  onClick={() => setSelectedImageIndex(selectedImageIndex > 0 ? selectedImageIndex - 1 : images.length - 1)}\n                  className=\"absolute left-4 top-1/2 transform -translate-y-1/2 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-75\"\n                >\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n                  </svg>\n                </button>\n                <button\n                  onClick={() => setSelectedImageIndex(selectedImageIndex < images.length - 1 ? selectedImageIndex + 1 : 0)}\n                  className=\"absolute right-4 top-1/2 transform -translate-y-1/2 text-white bg-black bg-opacity-50 rounded-full p-2 hover:bg-opacity-75\"\n                >\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n                  </svg>\n                </button>\n              </>\n            )}\n            \n            <div className=\"absolute bottom-4 left-1/2 transform -translate-x-1/2 text-white bg-black bg-opacity-50 rounded-full px-3 py-1 text-sm\">\n              {selectedImageIndex + 1} / {images.length}\n            </div>\n          </div>\n        </div>\n      )}\n\n\n\n      {/* Template Preview Modal */}\n      {showTemplateModal && selectedTemplate && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden\">\n            <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n              <h2 className=\"text-xl font-semibold text-gray-900\">\n                {selectedTemplate.name}\n              </h2>\n              <button\n                onClick={() => setShowTemplateModal(false)}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                <X className=\"w-6 h-6\" />\n              </button>\n            </div>\n            \n            <div className=\"p-6 overflow-y-auto max-h-[calc(90vh-120px)]\">\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                {/* Template Preview */}\n                <div>\n                  <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Şablon Önizleme</h3>\n                  <div className=\"bg-gray-100 rounded-lg overflow-hidden border p-4\">\n                    {selectedTemplate.template_data ? (\n                      <FabricTemplateViewer\n                        templateData={typeof selectedTemplate.template_data === 'string' \n                          ? JSON.parse(selectedTemplate.template_data) \n                          : selectedTemplate.template_data}\n                        width={400}\n                        height={500}\n                        className=\"mx-auto\"\n                      />\n                    ) : selectedTemplate.preview_image ? (\n                      <img\n                        src={getImageURL(selectedTemplate.preview_image)}\n                        alt={selectedTemplate.name}\n                        className=\"w-full h-full object-cover\"\n                      />\n                    ) : (\n                      <div className=\"w-full h-full flex items-center justify-center\">\n                        <div className=\"text-center\">\n                          <Palette className=\"w-12 h-12 text-gray-400 mx-auto mb-2\" />\n                          <p className=\"text-sm text-gray-500\">Önizleme Yok</p>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </div>\n                \n                {/* Template Details */}\n                <div>\n                  <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Şablon Detayları</h3>\n                  <div className=\"space-y-4\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Açıklama\n                      </label>\n                      <p className=\"text-sm text-gray-600\">\n                        {selectedTemplate.description || 'Açıklama yok'}\n                      </p>\n                    </div>\n                    \n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Kategori\n                      </label>\n                      <p className=\"text-sm text-gray-600 capitalize\">\n                        {selectedTemplate.category || 'Genel'}\n                      </p>\n                    </div>\n                    \n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Tip\n                      </label>\n                      <p className=\"text-sm text-gray-600\">\n                        {selectedTemplate.template_type || 'Genel'}\n                      </p>\n                    </div>\n                    \n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Oluşturulma Tarihi\n                      </label>\n                      <p className=\"text-sm text-gray-600\">\n                        {new Date(selectedTemplate.created_at).toLocaleString('tr-TR')}\n                      </p>\n                    </div>\n                    \n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Durum\n                      </label>\n                      <div className=\"flex items-center gap-2\">\n                        <span className={`inline-block px-3 py-1 rounded-full text-sm font-medium ${\n                          selectedTemplate.is_active \n                            ? 'bg-green-100 text-green-800' \n                            : 'bg-gray-100 text-gray-800'\n                        }`}>\n                          {selectedTemplate.is_active ? 'Aktif' : 'Pasif'}\n                        </span>\n                        {selectedTemplate.is_auto_generated && (\n                          <span className=\"inline-block px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800\">\n                            Otomatik\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <div className=\"mt-6 flex gap-3\">\n                    \n                    <button\n                      onClick={() => handleCreateCollage(selectedTemplate)}\n                      className=\"flex-1 btn btn-success flex items-center justify-center gap-2\"\n                    >\n                      <Share2 className=\"w-4 h-4\" />\n                      Kolaj Oluştur\n                    </button>\n                    \n                    <button\n                      onClick={() => setShowTemplateModal(false)}\n                      className=\"btn btn-secondary\"\n                    >\n                      Kapat\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ProductDetail;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}